!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=399)}([function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(3),o=n(13).f,i=n(17),a=n(14),s=n(87),c=n(112),u=n(50);e.exports=function(e,t){var n,l,d,f,_,h=e.target,p=e.global,m=e.stat;if(n=p?r:m?r[h]||s(h,{}):(r[h]||{}).prototype)for(l in t){if(f=t[l],d=e.noTargetGet?(_=o(n,l))&&_.value:n[l],!u(p?l:h+(m?".":"#")+l,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(e.sham||d&&d.sham)&&i(f,"sham",!0),a(n,l,f,e)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n(84))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var r=n(3),o=n(67),i=n(12),a=n(48),s=n(93),c=n(115),u=o("wks"),l=r.Symbol,d=c?l:l&&l.withoutSetter||a;e.exports=function(e){return i(u,e)&&(s||"string"==typeof u[e])||(s&&i(l,e)?u[e]=l[e]:u[e]=d("Symbol."+e)),u[e]}},function(e,t,n){"use strict";var r,o=n(128),i=n(8),a=n(3),s=n(4),c=n(12),u=n(58),l=n(17),d=n(14),f=n(10).f,_=n(26),h=n(41),p=n(6),m=n(48),E=a.Int8Array,T=E&&E.prototype,g=a.Uint8ClampedArray,A=g&&g.prototype,b=E&&_(E),v=T&&_(T),I=Object.prototype,O=I.isPrototypeOf,y=p("toStringTag"),N=m("TYPED_ARRAY_TAG"),S=o&&!!h&&"Opera"!==u(a.opera),C=!1,R={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},D={BigInt64Array:8,BigUint64Array:8},w=function(e){if(!s(e))return!1;var t=u(e);return c(R,t)||c(D,t)};for(r in R)a[r]||(S=!1);if((!S||"function"!=typeof b||b===Function.prototype)&&(b=function(){throw TypeError("Incorrect invocation")},S))for(r in R)a[r]&&h(a[r],b);if((!S||!v||v===I)&&(v=b.prototype,S))for(r in R)a[r]&&h(a[r].prototype,v);if(S&&_(A)!==v&&h(A,v),i&&!c(v,y))for(r in C=!0,f(v,y,{get:function(){return s(this)?this[N]:void 0}}),R)a[r]&&l(a[r],N,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:S,TYPED_ARRAY_TAG:C&&N,aTypedArray:function(e){if(w(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(h){if(O.call(b,e))return e}else for(var t in R)if(c(R,r)){var n=a[t];if(n&&(e===n||O.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(i){if(n)for(var r in R){var o=a[r];if(o&&c(o.prototype,e))try{delete o.prototype[e]}catch(e){}}v[e]&&!n||d(v,e,n?t:S&&T[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,o;if(i){if(h){if(n)for(r in R)if((o=a[r])&&c(o,e))try{delete o[e]}catch(e){}if(b[e]&&!n)return;try{return d(b,e,n?t:S&&b[e]||t)}catch(e){}}for(r in R)!(o=a[r])||o[e]&&!n||d(o,e,t)}},isView:function(e){if(!s(e))return!1;var t=u(e);return"DataView"===t||c(R,t)||c(D,t)},isTypedArray:w,TypedArray:b,TypedArrayPrototype:v}},function(e,t,n){var r=n(2);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(23),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(8),o=n(110),i=n(5),a=n(27),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(i(e),t=a(t,!0),i(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(16);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(11),o={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return o.call(r(e),t)}},function(e,t,n){var r=n(8),o=n(65),i=n(31),a=n(18),s=n(27),c=n(12),u=n(110),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(c(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t,n){var r=n(3),o=n(17),i=n(12),a=n(87),s=n(88),c=n(19),u=c.get,l=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var c,u=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,_=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||o(n,"name",t),(c=l(n)).source||(c.source=d.join("string"==typeof t?t:""))),e!==r?(u?!_&&e[t]&&(f=!0):delete e[t],f?e[t]=n:o(e,t,n)):f?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},function(e,t,n){var r=n(34),o=n(47),i=n(11),a=n(9),s=n(54),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,d=6==e,f=7==e,_=5==e||d;return function(h,p,m,E){for(var T,g,A=i(h),b=o(A),v=r(p,m,3),I=a(b.length),O=0,y=E||s,N=t?y(h,I):n||f?y(h,0):void 0;I>O;O++)if((_||O in b)&&(g=v(T=b[O],O,A),e))if(t)N[O]=g;else if(g)switch(e){case 3:return!0;case 5:return T;case 6:return O;case 2:c.call(N,T)}else switch(e){case 4:return!1;case 7:c.call(N,T)}return d?-1:u||l?l:N}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(8),o=n(10),i=n(31);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(47),o=n(16);e.exports=function(e){return r(o(e))}},function(e,t,n){var r,o,i,a=n(111),s=n(3),c=n(4),u=n(17),l=n(12),d=n(89),f=n(66),_=n(49),h=s.WeakMap;if(a||d.state){var p=d.state||(d.state=new h),m=p.get,E=p.has,T=p.set;r=function(e,t){if(E.call(p,e))throw new TypeError("Object already initialized");return t.facade=e,T.call(p,e,t),t},o=function(e){return m.call(p,e)||{}},i=function(e){return E.call(p,e)}}else{var g=f("state");_[g]=!0,r=function(e,t){if(l(e,g))throw new TypeError("Object already initialized");return t.facade=e,u(e,g,t),t},o=function(e){return l(e,g)?e[g]:{}},i=function(e){return l(e,g)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(113),o=n(12),i=n(119),a=n(10).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},function(e,t,n){var r=n(16),o=/"/g;e.exports=function(e,t,n,i){var a=String(r(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(i).replace(o,"&quot;")+'"'),s+">"+a+"</"+t+">"}},function(e,t,n){var r=n(2);e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(113),o=n(3),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e])||i(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(12),o=n(11),i=n(66),a=n(98),s=i("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=!1},function(e,t,n){var r=n(10).f,o=n(12),i=n(6)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r=n(1),o=n(3),i=n(8),a=n(108),s=n(7),c=n(127),u=n(36),l=n(31),d=n(17),f=n(9),_=n(129),h=n(145),p=n(27),m=n(12),E=n(58),T=n(4),g=n(33),A=n(41),b=n(38).f,v=n(146),I=n(15).forEach,O=n(44),y=n(10),N=n(13),S=n(19),C=n(73),R=S.get,D=S.set,w=y.f,M=N.f,k=Math.round,L=o.RangeError,P=c.ArrayBuffer,x=c.DataView,U=s.NATIVE_ARRAY_BUFFER_VIEWS,H=s.TYPED_ARRAY_TAG,B=s.TypedArray,j=s.TypedArrayPrototype,$=s.aTypedArrayConstructor,F=s.isTypedArray,W=function(e,t){for(var n=0,r=t.length,o=new($(e))(r);r>n;)o[n]=t[n++];return o},Y=function(e,t){w(e,t,{get:function(){return R(this)[t]}})},V=function(e){var t;return e instanceof P||"ArrayBuffer"==(t=E(e))||"SharedArrayBuffer"==t},G=function(e,t){return F(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},K=function(e,t){return G(e,t=p(t,!0))?l(2,e[t]):M(e,t)},z=function(e,t,n){return!(G(e,t=p(t,!0))&&T(n)&&m(n,"value"))||m(n,"get")||m(n,"set")||n.configurable||m(n,"writable")&&!n.writable||m(n,"enumerable")&&!n.enumerable?w(e,t,n):(e[t]=n.value,e)};i?(U||(N.f=K,y.f=z,Y(j,"buffer"),Y(j,"byteOffset"),Y(j,"byteLength"),Y(j,"length")),r({target:"Object",stat:!0,forced:!U},{getOwnPropertyDescriptor:K,defineProperty:z}),e.exports=function(e,t,n){var i=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",c="get"+e,l="set"+e,p=o[s],m=p,E=m&&m.prototype,y={},N=function(e,t){w(e,t,{get:function(){return function(e,t){var n=R(e);return n.view[c](t*i+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var o=R(e);n&&(r=(r=k(r))<0?0:r>255?255:255&r),o.view[l](t*i+o.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};U?a&&(m=t((function(e,t,n,r){return u(e,m,s),C(T(t)?V(t)?void 0!==r?new p(t,h(n,i),r):void 0!==n?new p(t,h(n,i)):new p(t):F(t)?W(m,t):v.call(m,t):new p(_(t)),e,m)})),A&&A(m,B),I(b(p),(function(e){e in m||d(m,e,p[e])})),m.prototype=E):(m=t((function(e,t,n,r){u(e,m,s);var o,a,c,l=0,d=0;if(T(t)){if(!V(t))return F(t)?W(m,t):v.call(m,t);o=t,d=h(n,i);var p=t.byteLength;if(void 0===r){if(p%i)throw L("Wrong length");if((a=p-d)<0)throw L("Wrong length")}else if((a=f(r)*i)+d>p)throw L("Wrong length");c=a/i}else c=_(t),o=new P(a=c*i);for(D(e,{buffer:o,byteOffset:d,byteLength:a,length:c,view:new x(o)});l<c;)N(e,l++)})),A&&A(m,B),E=m.prototype=g(j)),E.constructor!==m&&d(E,"constructor",m),H&&d(E,H,s),y[s]=m,r({global:!0,forced:m!=p,sham:!U},y),"BYTES_PER_ELEMENT"in m||d(m,"BYTES_PER_ELEMENT",i),"BYTES_PER_ELEMENT"in E||d(E,"BYTES_PER_ELEMENT",i),O(s)}):e.exports=function(){}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r,o=n(5),i=n(116),a=n(91),s=n(49),c=n(117),u=n(86),l=n(66),d=l("IE_PROTO"),f=function(){},_=function(e){return"<script>"+e+"<\/script>"},h=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;h=r?function(e){e.write(_("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(_("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete h.prototype[a[n]];return h()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=o(e),n=new f,f.prototype=null,n[d]=e):n=h(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(25);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(6),o=n(33),i=n(10),a=r("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var r=n(364),o=n(365);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},function(e,t,n){var r=n(114),o=n(91).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(23),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},function(e,t,n){"use strict";var r=n(27),o=n(10),i=n(31);e.exports=function(e,t,n){var a=r(t);a in e?o.f(e,a,i(0,n)):e[a]=n}},function(e,t,n){var r=n(5),o=n(126);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return r(n),o(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},function(e,t,n){var r=n(49),o=n(4),i=n(12),a=n(10).f,s=n(48),c=n(59),u=s("meta"),l=0,d=Object.isExtensible||function(){return!0},f=function(e){a(e,u,{value:{objectID:"O"+ ++l,weakData:{}}})},_=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,u)){if(!d(e))return"F";if(!t)return"E";f(e)}return e[u].objectID},getWeakData:function(e,t){if(!i(e,u)){if(!d(e))return!0;if(!t)return!1;f(e)}return e[u].weakData},onFreeze:function(e){return c&&_.REQUIRED&&d(e)&&!i(e,u)&&f(e),e}};r[u]=!0},function(e,t,n){var r=n(5),o=n(25),i=n(6)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[i])?t:o(n)}},function(e,t,n){"use strict";var r=n(24),o=n(10),i=n(6),a=n(8),s=i("species");e.exports=function(e){var t=r(e),n=o.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(14);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t,n){var r=n(16),o="["+n(75)+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t,n){var r=n(2),o=n(32),i="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t){e.exports={}},function(e,t,n){var r=n(2),o=/#|\.prototype\./,i=function(e,t){var n=s[a(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i},function(e,t,n){var r=n(24);e.exports=r("navigator","userAgent")||""},function(e,t,n){var r=n(32);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(114),o=n(91);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(4),o=n(52),i=n(6)("species");e.exports=function(e,t){var n;return o(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var r=n(2),o=n(6),i=n(69),a=o("species");e.exports=function(e){return i>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t){e.exports={}},function(e,t,n){var r=n(58),o=n(56),i=n(6)("iterator");e.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(96),o=n(32),i=n(6)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:a?o(t):"Object"==(r=o(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){var r=n(2);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,n){var r=n(5),o=n(95),i=n(9),a=n(34),s=n(57),c=n(123),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var l,d,f,_,h,p,m,E=n&&n.that,T=!(!n||!n.AS_ENTRIES),g=!(!n||!n.IS_ITERATOR),A=!(!n||!n.INTERRUPTED),b=a(t,E,1+T+A),v=function(e){return l&&c(l),new u(!0,e)},I=function(e){return T?(r(e),A?b(e[0],e[1],v):b(e[0],e[1])):A?b(e,v):b(e)};if(g)l=e;else{if("function"!=typeof(d=s(e)))throw TypeError("Target is not iterable");if(o(d)){for(f=0,_=i(e.length);_>f;f++)if((h=I(e[f]))&&h instanceof u)return h;return new u(!1)}l=d.call(e)}for(p=l.next;!(m=p.call(l)).done;){try{h=I(m.value)}catch(e){throw c(l),e}if("object"==typeof h&&h&&h instanceof u)return h}return new u(!1)}},function(e,t,n){var r,o;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(i){if(void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=i(),!!0){var a=window.Cookies,s=window.Cookies=i();s.noConflict=function(){return window.Cookies=a,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))}))},function(e,t,n){var r;(()=>{((n,o)=>{if(e.exports)return e.exports=o();void 0===(r=(()=>n.TimeMe=o()).apply(t,[]))||(e.exports=r)})(this,()=>{let e={startStopTimes:{},idleTimeoutMs:3e4,currentIdleTimeMs:0,checkIdleStateRateMs:250,isUserCurrentlyOnPage:!0,isUserCurrentlyIdle:!1,currentPageName:"default-page-name",timeElapsedCallbacks:[],userLeftCallbacks:[],userReturnCallbacks:[],trackTimeOnElement:t=>{let n=document.getElementById(t);n&&(n.addEventListener("mouseover",()=>{e.startTimer(t)}),n.addEventListener("mousemove",()=>{e.startTimer(t)}),n.addEventListener("mouseleave",()=>{e.stopTimer(t)}),n.addEventListener("keypress",()=>{e.startTimer(t)}),n.addEventListener("focus",()=>{e.startTimer(t)}))},getTimeOnElementInSeconds:t=>{let n=e.getTimeOnPageInSeconds(t);return n||0},startTimer:(t,n)=>{if(t||(t=e.currentPageName),void 0===e.startStopTimes[t])e.startStopTimes[t]=[];else{let n=e.startStopTimes[t],r=n[n.length-1];if(void 0!==r&&void 0===r.stopTime)return}e.startStopTimes[t].push({startTime:n||new Date,stopTime:void 0})},stopAllTimers:()=>{let t=Object.keys(e.startStopTimes);for(let n=0;n<t.length;n++)e.stopTimer(t[n])},stopTimer:(t,n)=>{t||(t=e.currentPageName);let r=e.startStopTimes[t];void 0!==r&&0!==r.length&&void 0===r[r.length-1].stopTime&&(r[r.length-1].stopTime=n||new Date)},getTimeOnCurrentPageInSeconds:()=>e.getTimeOnPageInSeconds(e.currentPageName),getTimeOnPageInSeconds:t=>{let n=e.getTimeOnPageInMilliseconds(t);return void 0===n?void 0:n/1e3},getTimeOnCurrentPageInMilliseconds:()=>e.getTimeOnPageInMilliseconds(e.currentPageName),getTimeOnPageInMilliseconds:t=>{let n=0,r=e.startStopTimes[t];if(void 0===r)return;let o=0;for(let e=0;e<r.length;e++){let t=r[e].startTime,n=r[e].stopTime;void 0===n&&(n=new Date),o+=n-t}return n=Number(o)},getTimeOnAllPagesInSeconds:()=>{let t=[],n=Object.keys(e.startStopTimes);for(let r=0;r<n.length;r++){let o=n[r],i=e.getTimeOnPageInSeconds(o);t.push({pageName:o,timeOnPage:i})}return t},setIdleDurationInSeconds:t=>{let n=parseFloat(t);if(!1!==isNaN(n))throw{name:"InvalidDurationException",message:"An invalid duration time ("+t+") was provided."};e.idleTimeoutMs=1e3*t},setCurrentPageName:t=>{e.currentPageName=t},resetRecordedPageTime:t=>{delete e.startStopTimes[t]},resetAllRecordedPageTimes:()=>{let t=Object.keys(e.startStopTimes);for(let n=0;n<t.length;n++)e.resetRecordedPageTime(t[n])},userActivityDetected:()=>{e.isUserCurrentlyIdle&&e.triggerUserHasReturned(),e.resetIdleCountdown()},resetIdleCountdown:()=>{e.isUserCurrentlyIdle=!1,e.currentIdleTimeMs=0},callWhenUserLeaves:(t,n)=>{e.userLeftCallbacks.push({callback:t,numberOfTimesToInvoke:n})},callWhenUserReturns:(t,n)=>{e.userReturnCallbacks.push({callback:t,numberOfTimesToInvoke:n})},triggerUserHasReturned:()=>{if(!e.isUserCurrentlyOnPage){e.isUserCurrentlyOnPage=!0,e.resetIdleCountdown();for(let t=0;t<e.userReturnCallbacks.length;t++){let n=e.userReturnCallbacks[t],r=n.numberOfTimesToInvoke;(isNaN(r)||void 0===r||r>0)&&(n.numberOfTimesToInvoke-=1,n.callback())}}e.startTimer()},triggerUserHasLeftPageOrGoneIdle:()=>{if(e.isUserCurrentlyOnPage){e.isUserCurrentlyOnPage=!1;for(let t=0;t<e.userLeftCallbacks.length;t++){let n=e.userLeftCallbacks[t],r=n.numberOfTimesToInvoke;(isNaN(r)||void 0===r||r>0)&&(n.numberOfTimesToInvoke-=1,n.callback())}}e.stopAllTimers()},callAfterTimeElapsedInSeconds:(t,n)=>{e.timeElapsedCallbacks.push({timeInSeconds:t,callback:n,pending:!0})},checkIdleState:()=>{for(let t=0;t<e.timeElapsedCallbacks.length;t++)e.timeElapsedCallbacks[t].pending&&e.getTimeOnCurrentPageInSeconds()>e.timeElapsedCallbacks[t].timeInSeconds&&(e.timeElapsedCallbacks[t].callback(),e.timeElapsedCallbacks[t].pending=!1);!1===e.isUserCurrentlyIdle&&e.currentIdleTimeMs>e.idleTimeoutMs?(e.isUserCurrentlyIdle=!0,e.triggerUserHasLeftPageOrGoneIdle()):e.currentIdleTimeMs+=e.checkIdleStateRateMs},visibilityChangeEventName:void 0,hiddenPropName:void 0,listenForVisibilityEvents:(t,n)=>{t&&e.listenForUserLeavesOrReturnsEvents(),n&&e.listForIdleEvents()},listenForUserLeavesOrReturnsEvents:()=>{void 0!==document.hidden?(e.hiddenPropName="hidden",e.visibilityChangeEventName="visibilitychange"):void 0!==document.mozHidden?(e.hiddenPropName="mozHidden",e.visibilityChangeEventName="mozvisibilitychange"):void 0!==document.msHidden?(e.hiddenPropName="msHidden",e.visibilityChangeEventName="msvisibilitychange"):void 0!==document.webkitHidden&&(e.hiddenPropName="webkitHidden",e.visibilityChangeEventName="webkitvisibilitychange"),document.addEventListener(e.visibilityChangeEventName,()=>{document[e.hiddenPropName]?e.triggerUserHasLeftPageOrGoneIdle():e.triggerUserHasReturned()},!1),window.addEventListener("blur",()=>{e.triggerUserHasLeftPageOrGoneIdle()}),window.addEventListener("focus",()=>{e.triggerUserHasReturned()})},listForIdleEvents:()=>{document.addEventListener("mousemove",()=>{e.userActivityDetected()}),document.addEventListener("keyup",()=>{e.userActivityDetected()}),document.addEventListener("touchstart",()=>{e.userActivityDetected()}),window.addEventListener("scroll",()=>{e.userActivityDetected()}),setInterval(()=>{!0!==e.isUserCurrentlyIdle&&e.checkIdleState()},e.checkIdleStateRateMs)},websocket:void 0,websocketHost:void 0,setUpWebsocket:t=>{if(window.WebSocket&&t){let n=t.websocketHost;try{e.websocket=new WebSocket(n),window.onbeforeunload=()=>{e.sendCurrentTime(t.appId)},e.websocket.onopen=()=>{e.sendInitWsRequest(t.appId)},e.websocket.onerror=e=>{console&&console.log("Error occurred in websocket connection: "+e)},e.websocket.onmessage=e=>{console&&console.log(e.data)}}catch(e){console&&console.error("Failed to connect to websocket host.  Error:"+e)}}},websocketSend:t=>{e.websocket.send(JSON.stringify(t))},sendCurrentTime:t=>{let n={type:"INSERT_TIME",appId:t,timeOnPageMs:e.getTimeOnCurrentPageInMilliseconds(),pageName:e.currentPageName};e.websocketSend(n)},sendInitWsRequest:t=>{let n={type:"INIT",appId:t};e.websocketSend(n)},initialize:t=>{let n=e.idleTimeoutMs||30,r=e.currentPageName||"default-page-name",o=void 0,i=void 0,a=!0,s=!0;t&&(n=t.idleTimeoutInSeconds||n,r=t.currentPageName||r,o=t.websocketOptions,i=t.initialStartTime,!1===t.trackWhenUserLeavesPage&&(a=!1),!1===t.trackWhenUserGoesIdle&&(s=!1)),e.setIdleDurationInSeconds(n),e.setCurrentPageName(r),e.setUpWebsocket(o),e.listenForVisibilityEvents(a,s),e.startTimer(void 0,i)}};return e})}).call(this)},function(e,t,n){var r=n(366);e.exports=function(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports="https://app.butlerfortrello.com/api/"},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(67),o=n(48),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t,n){var r=n(28),o=n(89);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.13.1",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(18),o=n(9),i=n(39),a=function(e){return function(t,n,a){var s,c=r(t),u=o(c.length),l=i(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,n){var r,o,i=n(3),a=n(51),s=i.process,c=s&&s.versions,u=c&&c.v8;u?o=(r=u.split("."))[0]<4?1:r[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=r[1]),e.exports=o&&+o},function(e,t,n){var r=n(6)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(18),o=n(35),i=n(56),a=n(19),s=n(97),c=a.set,u=a.getterFor("Array Iterator");e.exports=s(Array,"Array",(function(e,t){c(this,{type:"Array Iterator",target:r(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(e,t,n){"use strict";var r=n(1),o=n(3),i=n(50),a=n(14),s=n(42),c=n(60),u=n(36),l=n(4),d=n(2),f=n(70),_=n(29),h=n(73);e.exports=function(e,t,n){var p=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),E=p?"set":"add",T=o[e],g=T&&T.prototype,A=T,b={},v=function(e){var t=g[e];a(g,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(i(e,"function"!=typeof T||!(m||g.forEach&&!d((function(){(new T).entries().next()})))))A=n.getConstructor(t,e,p,E),s.REQUIRED=!0;else if(i(e,!0)){var I=new A,O=I[E](m?{}:-0,1)!=I,y=d((function(){I.has(1)})),N=f((function(e){new T(e)})),S=!m&&d((function(){for(var e=new T,t=5;t--;)e[E](t,t);return!e.has(-0)}));N||((A=t((function(t,n){u(t,A,e);var r=h(new T,t,A);return null!=n&&c(n,r[E],{that:r,AS_ENTRIES:p}),r}))).prototype=g,g.constructor=A),(y||S)&&(v("delete"),v("has"),p&&v("get")),(S||O)&&v(E),m&&g.clear&&delete g.clear}return b[e]=A,r({global:!0,forced:A!=T},b),_(A,e),m||n.setStrong(A,e,p),A}},function(e,t,n){var r=n(4),o=n(41);e.exports=function(e,t,n){var i,a;return o&&"function"==typeof(i=t.constructor)&&i!==n&&r(a=i.prototype)&&a!==n.prototype&&o(e,a),e}},function(e,t){var n=Math.expm1,r=Math.exp;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:r(e)-1}:n},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){"use strict";var r=n(28),o=n(3),i=n(2),a=n(51);e.exports=r||!i((function(){var e=a.match(/AppleWebKit\/(\d+)\./);if(!(e&&+e[1]<535)){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete o[t]}}))},function(e,t,n){var r=n(32),o=n(3);e.exports="process"==r(o.process)},function(e,t,n){"use strict";var r=n(5);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(2);function o(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){"use strict";var r,o,i=n(78),a=n(79),s=n(67),c=RegExp.prototype.exec,u=s("native-string-replace",String.prototype.replace),l=c,d=(r=/a/,o=/b*/g,c.call(r,"a"),c.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),f=a.UNSUPPORTED_Y||a.BROKEN_CARET,_=void 0!==/()??/.exec("")[1];(d||_||f)&&(l=function(e){var t,n,r,o,a=this,s=f&&a.sticky,l=i.call(a),h=a.source,p=0,m=e;return s&&(-1===(l=l.replace("y","")).indexOf("g")&&(l+="g"),m=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(h="(?: "+h+")",m=" "+m,p++),n=new RegExp("^(?:"+h+")",l)),_&&(n=new RegExp("^"+h+"$(?!\\s)",l)),d&&(t=a.lastIndex),r=c.call(s?n:a,m),s?r?(r.input=r.input.slice(p),r[0]=r[0].slice(p),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:d&&r&&(a.lastIndex=a.global?r.index+r[0].length:t),_&&r&&r.length>1&&u.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=l},function(e,t,n){var r=n(23),o=n(16),i=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},function(e,t,n){"use strict";n(141);var r=n(14),o=n(80),i=n(2),a=n(6),s=n(17),c=a("species"),u=RegExp.prototype,l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d="$0"==="a".replace(/./,"$0"),f=a("replace"),_=!!/./[f]&&""===/./[f]("a","$0"),h=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var p=a(e),m=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),E=m&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!m||!E||"replace"===e&&(!l||!d||_)||"split"===e&&!h){var T=/./[p],g=n(p,""[e],(function(e,t,n,r,i){var a=t.exec;return a===o||a===u.exec?m&&!i?{done:!0,value:T.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:_}),A=g[0],b=g[1];r(String.prototype,e,A),r(u,p,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}f&&s(u[p],"sham",!0)}},function(e,t,n){var r=n(32),o=n(80);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=n(368),o=n(359),i=n(369);function a(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function s(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function c(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=o({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),a=t.length>0?t.join("="):void 0;a=void 0===a?null:i(a),n(i(o),a,r)})),Object.keys(r).sort().reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))):r}t.extract=s,t.parse=c,t.stringify=function(e,t){!1===(t=o({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[a(t,e),"[",r,"]"].join(""):[a(t,e),"[",a(r,e),"]=",a(n,e)].join("")};case"bracket":return function(t,n){return null===n?a(t,e):[a(t,e),"[]=",a(n,e)].join("")};default:return function(t,n){return null===n?a(t,e):[a(t,e),"=",a(n,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map((function(r){var o=e[r];if(void 0===o)return"";if(null===o)return a(r,t);if(Array.isArray(o)){var i=[];return o.slice().forEach((function(e){void 0!==e&&i.push(n(r,e,i.length))})),i.join("&")}return a(r,t)+"="+a(o,t)})).filter((function(e){return e.length>0})).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:c(s(e),t)}}},function(e,t,n){var r=n(3),o=n(4),i=r.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var r=n(3),o=n(17);e.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(89),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(3),o=n(87),i=r["__core-js_shared__"]||o("__core-js_shared__",{});e.exports=i},function(e,t,n){var r=n(24),o=n(38),i=n(92),a=n(5);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(69),o=n(2);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(e,t,n){"use strict";var r=n(11),o=n(39),i=n(9);e.exports=function(e){for(var t=r(this),n=i(t.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:o(c,n);u>s;)t[s++]=e;return t}},function(e,t,n){var r=n(6),o=n(56),i=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},function(e,t,n){var r={};r[n(6)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){"use strict";var r=n(1),o=n(124),i=n(26),a=n(41),s=n(29),c=n(17),u=n(14),l=n(6),d=n(28),f=n(56),_=n(125),h=_.IteratorPrototype,p=_.BUGGY_SAFARI_ITERATORS,m=l("iterator"),E=function(){return this};e.exports=function(e,t,n,l,_,T,g){o(n,t,l);var A,b,v,I=function(e){if(e===_&&C)return C;if(!p&&e in N)return N[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},O=t+" Iterator",y=!1,N=e.prototype,S=N[m]||N["@@iterator"]||_&&N[_],C=!p&&S||I(_),R="Array"==t&&N.entries||S;if(R&&(A=i(R.call(new e)),h!==Object.prototype&&A.next&&(d||i(A)===h||(a?a(A,h):"function"!=typeof A[m]&&c(A,m,E)),s(A,O,!0,!0),d&&(f[O]=E))),"values"==_&&S&&"values"!==S.name&&(y=!0,C=function(){return S.call(this)}),d&&!g||N[m]===C||c(N,m,C),f[t]=C,_)if(b={values:I("values"),keys:T?C:I("keys"),entries:I("entries")},g)for(v in b)!p&&!y&&v in N||u(N,v,b[v]);else r({target:t,proto:!0,forced:p||y},b);return b}},function(e,t,n){var r=n(2);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,n){"use strict";var r=n(23),o=n(16);e.exports=function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},function(e,t,n){var r,o,i,a=n(3),s=n(2),c=n(34),u=n(117),l=n(86),d=n(137),f=n(77),_=a.location,h=a.setImmediate,p=a.clearImmediate,m=a.process,E=a.MessageChannel,T=a.Dispatch,g=0,A={},b=function(e){if(A.hasOwnProperty(e)){var t=A[e];delete A[e],t()}},v=function(e){return function(){b(e)}},I=function(e){b(e.data)},O=function(e){a.postMessage(e+"",_.protocol+"//"+_.host)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return A[++g]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(g),g},p=function(e){delete A[e]},f?r=function(e){m.nextTick(v(e))}:T&&T.now?r=function(e){T.now(v(e))}:E&&!d?(i=(o=new E).port2,o.port1.onmessage=I,r=c(i.postMessage,i,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&_&&"file:"!==_.protocol&&!s(O)?(r=O,a.addEventListener("message",I,!1)):r="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),b(e)}}:function(e){setTimeout(v(e),0)}),e.exports={set:h,clear:p}},function(e,t,n){var r=n(4),o=n(32),i=n(6)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(103);e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,n){var r=n(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},function(e,t,n){"use strict";var r=n(81).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(2),o=n(75);e.exports=function(e){return r((function(){return!!o[e]()||"​᠎"!="​᠎"[e]()||o[e].name!==e}))}},function(e,t,n){var r=n(3),o=n(2),i=n(70),a=n(7).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;e.exports=!a||!o((function(){c(1)}))||!o((function(){new c(-1)}))||!i((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||o((function(){return 1!==new c(new s(2),1,void 0).length}))},,function(e,t,n){var r=n(8),o=n(2),i=n(86);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(3),o=n(88),i=r.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},function(e,t,n){var r=n(12),o=n(90),i=n(13),a=n(10);e.exports=function(e,t){for(var n=o(t),s=a.f,c=i.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||s(e,l,c(t,l))}}},function(e,t,n){var r=n(3);e.exports=r},function(e,t,n){var r=n(12),o=n(18),i=n(68).indexOf,a=n(49);e.exports=function(e,t){var n,s=o(e),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(u,n)||u.push(n));return u}},function(e,t,n){var r=n(93);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r=n(8),o=n(10),i=n(5),a=n(53);e.exports=r?Object.defineProperties:function(e,t){i(e);for(var n,r=a(t),s=r.length,c=0;s>c;)o.f(e,n=r[c++],t[n]);return e}},function(e,t,n){var r=n(24);e.exports=r("document","documentElement")},function(e,t,n){var r=n(18),o=n(38).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(e){return a.slice()}}(e):o(r(e))}},function(e,t,n){var r=n(6);t.f=r},function(e,t,n){"use strict";var r=n(11),o=n(39),i=n(9),a=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),s=i(n.length),c=o(e,s),u=o(t,s),l=arguments.length>2?arguments[2]:void 0,d=a((void 0===l?s:o(l,s))-u,s-c),f=1;for(u<c&&c<u+d&&(f=-1,u+=d-1,c+=d-1);d-- >0;)u in n?n[c]=n[u]:delete n[c],c+=f,u+=f;return n}},function(e,t,n){"use strict";var r=n(52),o=n(9),i=n(34),a=function(e,t,n,s,c,u,l,d){for(var f,_=c,h=0,p=!!l&&i(l,d,3);h<s;){if(h in n){if(f=p?p(n[h],h,t):n[h],u>0&&r(f))_=a(e,t,f,o(f.length),_,u-1)-1;else{if(_>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[_]=f}_++}h++}return _};e.exports=a},function(e,t,n){"use strict";var r=n(34),o=n(11),i=n(178),a=n(95),s=n(9),c=n(40),u=n(57);e.exports=function(e){var t,n,l,d,f,_,h=o(e),p="function"==typeof this?this:Array,m=arguments.length,E=m>1?arguments[1]:void 0,T=void 0!==E,g=u(h),A=0;if(T&&(E=r(E,m>2?arguments[2]:void 0,2)),null==g||p==Array&&a(g))for(n=new p(t=s(h.length));t>A;A++)_=T?E(h[A],A):h[A],c(n,A,_);else for(f=(d=g.call(h)).next,n=new p;!(l=f.call(d)).done;A++)_=T?i(d,E,[l.value,A],!0):l.value,c(n,A,_);return n.length=A,n}},function(e,t,n){var r=n(5);e.exports=function(e){var t=e.return;if(void 0!==t)return r(t.call(e)).value}},function(e,t,n){"use strict";var r=n(125).IteratorPrototype,o=n(33),i=n(31),a=n(29),s=n(56),c=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=o(r,{next:i(1,n)}),a(e,u,!1,!0),s[u]=c,e}},function(e,t,n){"use strict";var r,o,i,a=n(2),s=n(26),c=n(17),u=n(12),l=n(6),d=n(28),f=l("iterator"),_=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(r=o):_=!0);var h=null==r||a((function(){var e={};return r[f].call(e)!==e}));h&&(r={}),d&&!h||u(r,f)||c(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:_}},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){"use strict";var r=n(3),o=n(8),i=n(128),a=n(17),s=n(45),c=n(2),u=n(36),l=n(23),d=n(9),f=n(129),_=n(189),h=n(26),p=n(41),m=n(38).f,E=n(10).f,T=n(94),g=n(29),A=n(19),b=A.get,v=A.set,I=r.ArrayBuffer,O=I,y=r.DataView,N=y&&y.prototype,S=Object.prototype,C=r.RangeError,R=_.pack,D=_.unpack,w=function(e){return[255&e]},M=function(e){return[255&e,e>>8&255]},k=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},L=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},P=function(e){return R(e,23,4)},x=function(e){return R(e,52,8)},U=function(e,t){E(e.prototype,t,{get:function(){return b(this)[t]}})},H=function(e,t,n,r){var o=f(n),i=b(e);if(o+t>i.byteLength)throw C("Wrong index");var a=b(i.buffer).bytes,s=o+i.byteOffset,c=a.slice(s,s+t);return r?c:c.reverse()},B=function(e,t,n,r,o,i){var a=f(n),s=b(e);if(a+t>s.byteLength)throw C("Wrong index");for(var c=b(s.buffer).bytes,u=a+s.byteOffset,l=r(+o),d=0;d<t;d++)c[u+d]=l[i?d:t-d-1]};if(i){if(!c((function(){I(1)}))||!c((function(){new I(-1)}))||c((function(){return new I,new I(1.5),new I(NaN),"ArrayBuffer"!=I.name}))){for(var j,$=(O=function(e){return u(this,O),new I(f(e))}).prototype=I.prototype,F=m(I),W=0;F.length>W;)(j=F[W++])in O||a(O,j,I[j]);$.constructor=O}p&&h(N)!==S&&p(N,S);var Y=new y(new O(2)),V=N.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||s(N,{setInt8:function(e,t){V.call(this,e,t<<24>>24)},setUint8:function(e,t){V.call(this,e,t<<24>>24)}},{unsafe:!0})}else O=function(e){u(this,O,"ArrayBuffer");var t=f(e);v(this,{bytes:T.call(new Array(t),0),byteLength:t}),o||(this.byteLength=t)},y=function(e,t,n){u(this,y,"DataView"),u(e,O,"DataView");var r=b(e).byteLength,i=l(t);if(i<0||i>r)throw C("Wrong offset");if(i+(n=void 0===n?r-i:d(n))>r)throw C("Wrong length");v(this,{buffer:e,byteLength:n,byteOffset:i}),o||(this.buffer=e,this.byteLength=n,this.byteOffset=i)},o&&(U(O,"byteLength"),U(y,"buffer"),U(y,"byteLength"),U(y,"byteOffset")),s(y.prototype,{getInt8:function(e){return H(this,1,e)[0]<<24>>24},getUint8:function(e){return H(this,1,e)[0]},getInt16:function(e){var t=H(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=H(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return L(H(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return L(H(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return D(H(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return D(H(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){B(this,1,e,w,t)},setUint8:function(e,t){B(this,1,e,w,t)},setInt16:function(e,t){B(this,2,e,M,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){B(this,2,e,M,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){B(this,4,e,k,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){B(this,4,e,k,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){B(this,4,e,P,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){B(this,8,e,x,t,arguments.length>2?arguments[2]:void 0)}});g(O,"ArrayBuffer"),g(y,"DataView"),e.exports={ArrayBuffer:O,DataView:y}},function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(e,t,n){var r=n(23),o=n(9);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=o(t);if(t!==n)throw RangeError("Wrong length or index");return n}},function(e,t,n){"use strict";var r=n(10).f,o=n(33),i=n(45),a=n(34),s=n(36),c=n(60),u=n(97),l=n(44),d=n(8),f=n(42).fastKey,_=n(19),h=_.set,p=_.getterFor;e.exports={getConstructor:function(e,t,n,u){var l=e((function(e,r){s(e,l,t),h(e,{type:t,index:o(null),first:void 0,last:void 0,size:0}),d||(e.size=0),null!=r&&c(r,e[u],{that:e,AS_ENTRIES:n})})),_=p(t),m=function(e,t,n){var r,o,i=_(e),a=E(e,t);return a?a.value=n:(i.last=a={index:o=f(t,!0),key:t,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=a),r&&(r.next=a),d?i.size++:e.size++,"F"!==o&&(i.index[o]=a)),e},E=function(e,t){var n,r=_(e),o=f(t);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==t)return n};return i(l.prototype,{clear:function(){for(var e=_(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,d?e.size=0:this.size=0},delete:function(e){var t=_(this),n=E(this,e);if(n){var r=n.next,o=n.previous;delete t.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),t.first==n&&(t.first=r),t.last==n&&(t.last=o),d?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=_(this),r=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!E(this,e)}}),i(l.prototype,n?{get:function(e){var t=E(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),d&&r(l.prototype,"size",{get:function(){return _(this).size}}),l},setStrong:function(e,t,n){var r=t+" Iterator",o=p(t),i=p(r);u(e,t,(function(e,t){h(this,{type:r,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},function(e,t){var n=Math.log;e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:n(1+e)}},function(e,t,n){var r=n(4),o=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&o(e)===e}},function(e,t,n){"use strict";var r=n(8),o=n(2),i=n(53),a=n(92),s=n(65),c=n(11),u=n(47),l=Object.assign,d=Object.defineProperty;e.exports=!l||o((function(){if(r&&1!==l({b:1},l(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||"abcdefghijklmnopqrst"!=i(l({},t)).join("")}))?function(e,t){for(var n=c(e),o=arguments.length,l=1,d=a.f,f=s.f;o>l;)for(var _,h=u(arguments[l++]),p=d?i(h).concat(d(h)):i(h),m=p.length,E=0;m>E;)_=p[E++],r&&!f.call(h,_)||(n[_]=h[_]);return n}:l},function(e,t,n){var r=n(8),o=n(53),i=n(18),a=n(65).f,s=function(e){return function(t){for(var n,s=i(t),c=o(s),u=c.length,l=0,d=[];u>l;)n=c[l++],r&&!a.call(s,n)||d.push(e?[n,s[n]]:s[n]);return d}};e.exports={entries:s(!0),values:s(!1)}},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){var r=n(3);e.exports=r.Promise},function(e,t,n){var r=n(51);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r)},function(e,t,n){var r,o,i,a,s,c,u,l,d=n(3),f=n(13).f,_=n(102).set,h=n(137),p=n(253),m=n(77),E=d.MutationObserver||d.WebKitMutationObserver,T=d.document,g=d.process,A=d.Promise,b=f(d,"queueMicrotask"),v=b&&b.value;v||(r=function(){var e,t;for(m&&(e=g.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?a():i=void 0,e}}i=void 0,e&&e.enter()},h||m||p||!E||!T?A&&A.resolve?((u=A.resolve(void 0)).constructor=A,l=u.then,a=function(){l.call(u,r)}):a=m?function(){g.nextTick(r)}:function(){_.call(d,r)}:(s=!0,c=T.createTextNode(""),new E(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),e.exports=v||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,a()),i=t}},function(e,t,n){var r=n(5),o=n(4),i=n(140);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(25),o=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new o(e)}},function(e,t,n){"use strict";var r=n(1),o=n(80);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(e,t,n){"use strict";var r=n(81).charAt,o=n(19),i=n(97),a=o.set,s=o.getterFor("String Iterator");i(String,"String",(function(e){a(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=s(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=r(n,o),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(9),o=n(101),i=n(16),a=Math.ceil,s=function(e){return function(t,n,s){var c,u,l=String(i(t)),d=l.length,f=void 0===s?" ":String(s),_=r(n);return _<=d||""==f?l:(c=_-d,(u=o.call(f,a(c/f.length))).length>c&&(u=u.slice(0,c)),e?l+u:u+l)}};e.exports={start:s(!1),end:s(!0)}},function(e,t,n){var r=n(51);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w.\/]+)?(?: Mobile\/\w+)? Safari\//.test(r)},function(e,t,n){var r=n(307);e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},function(e,t,n){var r=n(11),o=n(9),i=n(57),a=n(95),s=n(34),c=n(7).aTypedArrayConstructor;e.exports=function(e){var t,n,u,l,d,f,_=r(e),h=arguments.length,p=h>1?arguments[1]:void 0,m=void 0!==p,E=i(_);if(null!=E&&!a(E))for(f=(d=E.call(_)).next,_=[];!(l=f.call(d)).done;)_.push(l.value);for(m&&h>2&&(p=s(p,arguments[2],2)),n=o(_.length),u=new(c(this))(n),t=0;n>t;t++)u[t]=m?p(_[t],t):_[t];return u}},function(e,t,n){var r=n(25),o=n(11),i=n(47),a=n(9),s=function(e){return function(t,n,s,c){r(n);var u=o(t),l=i(u),d=a(u.length),f=e?d-1:0,_=e?-1:1;if(s<2)for(;;){if(f in l){c=l[f],f+=_;break}if(f+=_,e?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:d>f;f+=_)f in l&&(c=n(c,l[f],f,u));return c}};e.exports={left:s(!1),right:s(!0)}},function(e,t,n){"use strict";var r=n(45),o=n(42).getWeakData,i=n(5),a=n(4),s=n(36),c=n(60),u=n(15),l=n(12),d=n(19),f=d.set,_=d.getterFor,h=u.find,p=u.findIndex,m=0,E=function(e){return e.frozen||(e.frozen=new T)},T=function(){this.entries=[]},g=function(e,t){return h(e.entries,(function(e){return e[0]===t}))};T.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var n=g(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=p(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,u){var d=e((function(e,r){s(e,d,t),f(e,{type:t,id:m++,frozen:void 0}),null!=r&&c(r,e[u],{that:e,AS_ENTRIES:n})})),h=_(t),p=function(e,t,n){var r=h(e),a=o(i(t),!0);return!0===a?E(r).set(t,n):a[r.id]=n,e};return r(d.prototype,{delete:function(e){var t=h(this);if(!a(e))return!1;var n=o(e);return!0===n?E(t).delete(e):n&&l(n,t.id)&&delete n[t.id]},has:function(e){var t=h(this);if(!a(e))return!1;var n=o(e);return!0===n?E(t).has(e):n&&l(n,t.id)}}),r(d.prototype,n?{get:function(e){var t=h(this);if(a(e)){var n=o(e);return!0===n?E(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return p(this,e,t)}}:{add:function(e){return p(this,e,!0)}}),d}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){var r=n(2),o=n(6),i=n(28),a=o("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),i&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},function(e,t,n){"use strict";n(71);var r=n(1),o=n(24),i=n(150),a=n(14),s=n(45),c=n(29),u=n(124),l=n(19),d=n(36),f=n(12),_=n(34),h=n(58),p=n(5),m=n(4),E=n(33),T=n(31),g=n(352),A=n(57),b=n(6),v=o("fetch"),I=o("Headers"),O=b("iterator"),y=l.set,N=l.getterFor("URLSearchParams"),S=l.getterFor("URLSearchParamsIterator"),C=/\+/g,R=Array(4),D=function(e){return R[e-1]||(R[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},w=function(e){try{return decodeURIComponent(e)}catch(t){return e}},M=function(e){var t=e.replace(C," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(D(n--),w);return t}},k=/[!'()~]|%20/g,L={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},P=function(e){return L[e]},x=function(e){return encodeURIComponent(e).replace(k,P)},U=function(e,t){if(t)for(var n,r,o=t.split("&"),i=0;i<o.length;)(n=o[i++]).length&&(r=n.split("="),e.push({key:M(r.shift()),value:M(r.join("="))}))},H=function(e){this.entries.length=0,U(this.entries,e)},B=function(e,t){if(e<t)throw TypeError("Not enough arguments")},j=u((function(e,t){y(this,{type:"URLSearchParamsIterator",iterator:g(N(e).entries),kind:t})}),"Iterator",(function(){var e=S(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),$=function(){d(this,$,"URLSearchParams");var e,t,n,r,o,i,a,s,c,u=arguments.length>0?arguments[0]:void 0,l=this,_=[];if(y(l,{type:"URLSearchParams",entries:_,updateURL:function(){},updateSearchParams:H}),void 0!==u)if(m(u))if("function"==typeof(e=A(u)))for(n=(t=e.call(u)).next;!(r=n.call(t)).done;){if((a=(i=(o=g(p(r.value))).next).call(o)).done||(s=i.call(o)).done||!i.call(o).done)throw TypeError("Expected sequence with length 2");_.push({key:a.value+"",value:s.value+""})}else for(c in u)f(u,c)&&_.push({key:c,value:u[c]+""});else U(_,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},F=$.prototype;s(F,{append:function(e,t){B(arguments.length,2);var n=N(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){B(arguments.length,1);for(var t=N(this),n=t.entries,r=e+"",o=0;o<n.length;)n[o].key===r?n.splice(o,1):o++;t.updateURL()},get:function(e){B(arguments.length,1);for(var t=N(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){B(arguments.length,1);for(var t=N(this).entries,n=e+"",r=[],o=0;o<t.length;o++)t[o].key===n&&r.push(t[o].value);return r},has:function(e){B(arguments.length,1);for(var t=N(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){B(arguments.length,1);for(var n,r=N(this),o=r.entries,i=!1,a=e+"",s=t+"",c=0;c<o.length;c++)(n=o[c]).key===a&&(i?o.splice(c--,1):(i=!0,n.value=s));i||o.push({key:a,value:s}),r.updateURL()},sort:function(){var e,t,n,r=N(this),o=r.entries,i=o.slice();for(o.length=0,n=0;n<i.length;n++){for(e=i[n],t=0;t<n;t++)if(o[t].key>e.key){o.splice(t,0,e);break}t===n&&o.push(e)}r.updateURL()},forEach:function(e){for(var t,n=N(this).entries,r=_(e,arguments.length>1?arguments[1]:void 0,3),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new j(this,"keys")},values:function(){return new j(this,"values")},entries:function(){return new j(this,"entries")}},{enumerable:!0}),a(F,O,F.entries),a(F,"toString",(function(){for(var e,t=N(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(x(e.key)+"="+x(e.value));return n.join("&")}),{enumerable:!0}),c($,"URLSearchParams"),r({global:!0,forced:!i},{URLSearchParams:$}),i||"function"!=typeof v||"function"!=typeof I||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,o=[e];return arguments.length>1&&(t=arguments[1],m(t)&&(n=t.body,"URLSearchParams"===h(n)&&((r=t.headers?new I(t.headers):new I).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=E(t,{body:T(0,String(n)),headers:T(0,r)}))),o.push(t)),v.apply(this,o)}}),e.exports={URLSearchParams:$,getState:N}},function(e,t,n){var r=n(354),o=n(362),i=n(154),a=o.getSanitizingConverter(),s=function(e){return String(e).replace(/[&<>"'\/]/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"}[e]}))};window.sanitize=s;var c=function(e){var t=new DOMParser;return a.makeHtml(t.parseFromString(e,"text/html").body.textContent||"")};window.markdownToHtml=c;var u=function(e){return e.replace(/[àáâãäåāăą]/g,"a").replace(/æ/g,"ae").replace(/[çćĉċč]/g,"c").replace(/[ďđ]/g,"d").replace(/[èéêëēĕėęě]/g,"e").replace(/[ĝğġģ]/g,"g").replace(/[ĥħ]/g,"h").replace(/[ìíîïĩīĭįı]/g,"i").replace(/[ñńņňŉŋ]/g,"n").replace(/[òóôõöōŏő]/g,"o").replace(/œ/g,"oe").replace(/ř/g,"r").replace(/[śŝşš]/g,"s").replace(/ß/g,"ss").replace(/[ùúûüũūŭůűų]/g,"u").replace(/[ýÿ]/g,"y")};e.exports={sanitize:s,markdownToHtml:c,handleError:function(e,t){/^Invalid context, missing board/.test(t.message)||(/^Plugin disabled on board/.test(t.message)?console.log("[Butler] Power-Up disabled on board."):i.getTaskSessions().then((function(e){var t=[];Object.keys(e).forEach((function(n){var r="".concat("task_").concat(n).replace(/\//g,"-");t[r]=e[n],Sentry.setTag(r,e[n])}))})).finally((function(){Sentry.captureException(t),r.logError(t,e)})))},makeSlug:function(e,t){var n;return null==t&&(t="-"),e&&(n=u(e.toLowerCase()).replace(/[^a-z0-9]+/gi,t).replace(new RegExp("^".concat(t,"|").concat(t,"$"),"g"),"")).length>128&&(n=n.substr(0,128)),n||t},normalizeTabForUrl:function(e){switch(e){case"rule":case"rules":return"rules";case"card-button":return"card-buttons";case"board-button":return"board-buttons";case"schedule":case"schedules":case"scheduled":return"schedule";case"on-dates":case"due-dates":case"duedates":case"dates":return"on-dates";case"suggestions":return"";case"connected-apps":return"connected-apps";default:return e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tokenizeIndices=t.tokenize=t.isVariableNameValue=t.isVariableName=t.isTerminal=t.isSymbol=t.isStringVariable=t.isStringValue=t.isOptional=t.isInlineEnd=t.isHiddenSymbol=t.isEnd=t.isAtMentionVariableValue=t.isAtMentionValue=t.isAtMention=t.getOptional=t.parseTokens=t.parseYear=t.parseTimezone=t.parseTime=t.parseNumericDate=t.getTimezoneName=t.parser=t.parseDecimal=t.parseSmallNumeral=t.parseOrdinal=t.parseInlineDate=t.parseEnterpriseCommand=t.parseCondition=t.parseCommand=t.year=t.trap=t.timezone=t.time=t.swappable=t.small_numeral=t.ordinal=t.or=t.or_index=t.optional=t.numeric_date=t.make_sibling=t.hidden=t.enum_value=t.decimal=t.flatten=t.correctParseResult=t.getCommandGrammar=void 0;var r=n(402);Object.defineProperty(t,"getCommandGrammar",{enumerable:!0,get:function(){return r.getCommandGrammar}});var o=n(403);Object.defineProperty(t,"correctParseResult",{enumerable:!0,get:function(){return o.correctParseResult}});var i=n(404);Object.defineProperty(t,"flatten",{enumerable:!0,get:function(){return i.flatten}});var a=n(409);Object.defineProperty(t,"decimal",{enumerable:!0,get:function(){return a.decimal}}),Object.defineProperty(t,"enum_value",{enumerable:!0,get:function(){return a.enum_value}}),Object.defineProperty(t,"hidden",{enumerable:!0,get:function(){return a.hidden}}),Object.defineProperty(t,"make_sibling",{enumerable:!0,get:function(){return a.make_sibling}}),Object.defineProperty(t,"numeric_date",{enumerable:!0,get:function(){return a.numeric_date}}),Object.defineProperty(t,"optional",{enumerable:!0,get:function(){return a.optional}}),Object.defineProperty(t,"or_index",{enumerable:!0,get:function(){return a.or_index}}),Object.defineProperty(t,"or",{enumerable:!0,get:function(){return a.or}}),Object.defineProperty(t,"ordinal",{enumerable:!0,get:function(){return a.ordinal}}),Object.defineProperty(t,"small_numeral",{enumerable:!0,get:function(){return a.small_numeral}}),Object.defineProperty(t,"swappable",{enumerable:!0,get:function(){return a.swappable}}),Object.defineProperty(t,"time",{enumerable:!0,get:function(){return a.time}}),Object.defineProperty(t,"timezone",{enumerable:!0,get:function(){return a.timezone}}),Object.defineProperty(t,"trap",{enumerable:!0,get:function(){return a.trap}}),Object.defineProperty(t,"year",{enumerable:!0,get:function(){return a.year}});var s=n(410);Object.defineProperty(t,"parseCommand",{enumerable:!0,get:function(){return s.parseCommand}}),Object.defineProperty(t,"parseCondition",{enumerable:!0,get:function(){return s.parseCondition}}),Object.defineProperty(t,"parseEnterpriseCommand",{enumerable:!0,get:function(){return s.parseEnterpriseCommand}});var c=n(411);Object.defineProperty(t,"parseInlineDate",{enumerable:!0,get:function(){return c.parseInlineDate}});var u=n(412);Object.defineProperty(t,"parseOrdinal",{enumerable:!0,get:function(){return u.parseOrdinal}}),Object.defineProperty(t,"parseSmallNumeral",{enumerable:!0,get:function(){return u.parseSmallNumeral}}),Object.defineProperty(t,"parseDecimal",{enumerable:!0,get:function(){return u.parseDecimal}});var l=n(413);Object.defineProperty(t,"parser",{enumerable:!0,get:function(){return l.parser}});var d=n(414);Object.defineProperty(t,"getTimezoneName",{enumerable:!0,get:function(){return d.getTimezoneName}}),Object.defineProperty(t,"parseNumericDate",{enumerable:!0,get:function(){return d.parseNumericDate}}),Object.defineProperty(t,"parseTime",{enumerable:!0,get:function(){return d.parseTime}}),Object.defineProperty(t,"parseTimezone",{enumerable:!0,get:function(){return d.parseTimezone}}),Object.defineProperty(t,"parseYear",{enumerable:!0,get:function(){return d.parseYear}});var f=n(416);Object.defineProperty(t,"parseTokens",{enumerable:!0,get:function(){return f.parseTokens}});var _=n(417);Object.defineProperty(t,"getOptional",{enumerable:!0,get:function(){return _.getOptional}}),Object.defineProperty(t,"isAtMention",{enumerable:!0,get:function(){return _.isAtMention}}),Object.defineProperty(t,"isAtMentionValue",{enumerable:!0,get:function(){return _.isAtMentionValue}}),Object.defineProperty(t,"isAtMentionVariableValue",{enumerable:!0,get:function(){return _.isAtMentionVariableValue}}),Object.defineProperty(t,"isEnd",{enumerable:!0,get:function(){return _.isEnd}}),Object.defineProperty(t,"isHiddenSymbol",{enumerable:!0,get:function(){return _.isHiddenSymbol}}),Object.defineProperty(t,"isInlineEnd",{enumerable:!0,get:function(){return _.isInlineEnd}}),Object.defineProperty(t,"isOptional",{enumerable:!0,get:function(){return _.isOptional}}),Object.defineProperty(t,"isStringValue",{enumerable:!0,get:function(){return _.isStringValue}}),Object.defineProperty(t,"isStringVariable",{enumerable:!0,get:function(){return _.isStringVariable}}),Object.defineProperty(t,"isSymbol",{enumerable:!0,get:function(){return _.isSymbol}}),Object.defineProperty(t,"isTerminal",{enumerable:!0,get:function(){return _.isTerminal}}),Object.defineProperty(t,"isVariableName",{enumerable:!0,get:function(){return _.isVariableName}}),Object.defineProperty(t,"isVariableNameValue",{enumerable:!0,get:function(){return _.isVariableNameValue}});var h=n(418);Object.defineProperty(t,"tokenize",{enumerable:!0,get:function(){return h.tokenize}}),Object.defineProperty(t,"tokenizeIndices",{enumerable:!0,get:function(){return h.tokenizeIndices}})},function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a,s=n(372),c=n(360);var u="prod";function l(){return a||(a=window._trello.member("id").then((function(e){var t,n=(t={},/Electron/.test(window.navigator.userAgent)?(t.origin=s.originType.DESKTOP,/Macintosh/.test(window.navigator.userAgent)?t.platform=s.platformType.MAC:/Windows/.test(window.navigator.userAgent)?t.platform=s.platformType.WINDOWS:/Linux/.test(window.navigator.userAgent)?t.platform=s.platformType.LINUX:t.platform=s.platformType.WEB):(t.origin=s.originType.WEB,t.platform=s.platformType.WEB),t),r=n.origin,o=n.platform,i="PROD"===u?"api-gateway.trello.com/gateway/api/gasv3/api/v1":"api-gateway.trellis.coffee/gateway/api/gasv3/api/v1",a=new s.default({env:s.envType[u],product:"trello",origin:r,platform:o,locale:window.locale||"en-US"},{apiHost:i});return a.setTenantInfo(s.tenantType.NONE),e&&"notLoggedIn"!==e.id&&a.setUserInfo(s.userType.TRELLO,e.id),a}))),a}function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window._trello,n=t&&"function"==typeof t.getContext&&t.getContext();return n&&n.board?(e={board:{id:n.board},organization:{id:n.organization}},c(e).pick("enterprise","organization","board","list","card").pickBy((function(e){return e&&e.id})).mapValues((function(e){return{id:e.id}})).value()):{}}function f(e){return l().then((function(t){return t.sendOperationalEvent(o({containers:d()},e))}))}function _(e){return l().then((function(t){t.task.completeTaskSession(e)}))}function h(){for(var e="",t=0;t<16;t+=1){e+="0123456789abcdef"[Math.floor(16*Math.random())]}return e}u=("test"===u?"staging":u).toUpperCase(),e.exports={sendUIEvent:function(e){return l().then((function(t){return t.sendUIEvent(o({containers:d()},e))}))},sendTrackEvent:function(e){return l().then((function(t){return t.sendTrackEvent(o({containers:d()},e))}))},sendScreenEvent:function(e){return l().then((function(t){return t.sendScreenEvent(o({containers:d()},e))}))},startTask:function(e){var t=e.taskName,n=e.source,r=e.containers,i=e.attributes;if(!t)return Sentry.captureMessage("No taskName passed to startTask"),null;var a=Math.floor(Date.now()/1e3).toString(16)+(h().slice(8)+h());return function(e,t){l().then((function(n){n.task.createTaskSessionWithProvidedId(e,t)}))}(t,a),f({action:"taskStart",actionSubject:"ui",source:"ui",containers:r,attributes:o({task:t,taskId:a,source:n},i)}),a},taskSucceeded:function(e){var t=e.taskName,n=e.traceId,r=e.source,i=e.containers,a=e.attributes;return n?t?(_(t),f({action:"taskSuccess",actionSubject:"ui",source:"ui",containers:i,attributes:o({task:t,taskId:n,source:r},a)}),n):(Sentry.captureMessage("No taskName passed to taskSucceeded"),null):(Sentry.captureMessage("No traceID passed to taskSucceeded"),null)},taskFailed:function(e){var t=e.taskName,n=e.traceId,r=e.source,i=e.containers,a=e.attributes,s=e.error;if(!n)return Sentry.captureMessage("No traceID passed to taskFailed"),null;if(!t)return Sentry.captureMessage("No taskName passed to taskFailed"),null;_(t);var c=function(e){var t={};return e.name&&(t.errorName=e.name),e.message&&(t.errorMessage=e.message.replace(/token=[0-9a-fA-F]*/g,"token=<TOKEN>").replace(/"X-Butler-Trello-Token":\s*"[0-9a-fA-F]*"/g,'"X-Butler-Trello-Token": "<TOKEN>"').replace(/[0-9a-fA-F]{64}/g,"<TOKEN>")),t}(s);return f({action:"taskFail",actionSubject:"ui",source:"ui",containers:i,attributes:o(o({task:t,taskId:n,source:r},a),c)}),n},taskAborted:function(e){var t=e.taskName,n=e.traceId,r=e.source,i=e.containers,a=e.attributes;return n?t?(_(t),f({action:"taskAbort",actionSubject:"ui",source:"ui",containers:i,attributes:o({task:t,taskId:n,source:r},a)}),n):(Sentry.captureMessage("No taskName passed to taskAborted"),null):(Sentry.captureMessage("No traceID passed to taskAborted"),null)},getTaskSessions:function(){return l().then((function(e){return e.task.getAllTaskSessions()}))}}},function(e,t,n){"use strict";var r=n(1),o=n(3),i=n(24),a=n(28),s=n(8),c=n(93),u=n(115),l=n(2),d=n(12),f=n(52),_=n(4),h=n(5),p=n(11),m=n(18),E=n(27),T=n(31),g=n(33),A=n(53),b=n(38),v=n(118),I=n(92),O=n(13),y=n(10),N=n(65),S=n(17),C=n(14),R=n(67),D=n(66),w=n(49),M=n(48),k=n(6),L=n(119),P=n(20),x=n(29),U=n(19),H=n(15).forEach,B=D("hidden"),j=k("toPrimitive"),$=U.set,F=U.getterFor("Symbol"),W=Object.prototype,Y=o.Symbol,V=i("JSON","stringify"),G=O.f,K=y.f,z=v.f,q=N.f,X=R("symbols"),J=R("op-symbols"),Q=R("string-to-symbol-registry"),Z=R("symbol-to-string-registry"),ee=R("wks"),te=o.QObject,ne=!te||!te.prototype||!te.prototype.findChild,re=s&&l((function(){return 7!=g(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=G(W,t);r&&delete W[t],K(e,t,n),r&&e!==W&&K(W,t,r)}:K,oe=function(e,t){var n=X[e]=g(Y.prototype);return $(n,{type:"Symbol",tag:e,description:t}),s||(n.description=t),n},ie=u?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Y},ae=function(e,t,n){e===W&&ae(J,t,n),h(e);var r=E(t,!0);return h(n),d(X,r)?(n.enumerable?(d(e,B)&&e[B][r]&&(e[B][r]=!1),n=g(n,{enumerable:T(0,!1)})):(d(e,B)||K(e,B,T(1,{})),e[B][r]=!0),re(e,r,n)):K(e,r,n)},se=function(e,t){h(e);var n=m(t),r=A(n).concat(de(n));return H(r,(function(t){s&&!ce.call(n,t)||ae(e,t,n[t])})),e},ce=function(e){var t=E(e,!0),n=q.call(this,t);return!(this===W&&d(X,t)&&!d(J,t))&&(!(n||!d(this,t)||!d(X,t)||d(this,B)&&this[B][t])||n)},ue=function(e,t){var n=m(e),r=E(t,!0);if(n!==W||!d(X,r)||d(J,r)){var o=G(n,r);return!o||!d(X,r)||d(n,B)&&n[B][r]||(o.enumerable=!0),o}},le=function(e){var t=z(m(e)),n=[];return H(t,(function(e){d(X,e)||d(w,e)||n.push(e)})),n},de=function(e){var t=e===W,n=z(t?J:m(e)),r=[];return H(n,(function(e){!d(X,e)||t&&!d(W,e)||r.push(X[e])})),r};(c||(C((Y=function(){if(this instanceof Y)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=M(e),n=function(e){this===W&&n.call(J,e),d(this,B)&&d(this[B],t)&&(this[B][t]=!1),re(this,t,T(1,e))};return s&&ne&&re(W,t,{configurable:!0,set:n}),oe(t,e)}).prototype,"toString",(function(){return F(this).tag})),C(Y,"withoutSetter",(function(e){return oe(M(e),e)})),N.f=ce,y.f=ae,O.f=ue,b.f=v.f=le,I.f=de,L.f=function(e){return oe(k(e),e)},s&&(K(Y.prototype,"description",{configurable:!0,get:function(){return F(this).description}}),a||C(W,"propertyIsEnumerable",ce,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:Y}),H(A(ee),(function(e){P(e)})),r({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=String(e);if(d(Q,t))return Q[t];var n=Y(t);return Q[t]=n,Z[n]=t,n},keyFor:function(e){if(!ie(e))throw TypeError(e+" is not a symbol");if(d(Z,e))return Z[e]},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!s},{create:function(e,t){return void 0===t?g(e):se(g(e),t)},defineProperty:ae,defineProperties:se,getOwnPropertyDescriptor:ue}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:le,getOwnPropertySymbols:de}),r({target:"Object",stat:!0,forced:l((function(){I.f(1)}))},{getOwnPropertySymbols:function(e){return I.f(p(e))}}),V)&&r({target:"JSON",stat:!0,forced:!c||l((function(){var e=Y();return"[null]"!=V([e])||"{}"!=V({a:e})||"{}"!=V(Object(e))}))},{stringify:function(e,t,n){for(var r,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);if(r=t,(_(t)||void 0!==e)&&!ie(e))return f(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!ie(t))return t}),o[1]=t,V.apply(null,o)}});Y.prototype[j]||S(Y.prototype,j,Y.prototype.valueOf),x(Y,"Symbol"),w[B]=!0},function(e,t,n){"use strict";var r=n(1),o=n(8),i=n(3),a=n(12),s=n(4),c=n(10).f,u=n(112),l=i.Symbol;if(o&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new l(e):void 0===e?l():l(e);return""===e&&(d[t]=!0),t};u(f,l);var _=f.prototype=l.prototype;_.constructor=f;var h=_.toString,p="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;c(_,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=h.call(e);if(a(d,e))return"";var n=p?t.slice(7,-1):t.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},function(e,t,n){n(20)("asyncIterator")},function(e,t,n){n(20)("hasInstance")},function(e,t,n){n(20)("isConcatSpreadable")},function(e,t,n){n(20)("iterator")},function(e,t,n){n(20)("match")},function(e,t,n){n(20)("replace")},function(e,t,n){n(20)("search")},function(e,t,n){n(20)("species")},function(e,t,n){n(20)("split")},function(e,t,n){n(20)("toPrimitive")},function(e,t,n){n(20)("toStringTag")},function(e,t,n){n(20)("unscopables")},function(e,t,n){"use strict";var r=n(1),o=n(2),i=n(52),a=n(4),s=n(11),c=n(9),u=n(40),l=n(54),d=n(55),f=n(6),_=n(69),h=f("isConcatSpreadable"),p=_>=51||!o((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),m=d("concat"),E=function(e){if(!a(e))return!1;var t=e[h];return void 0!==t?!!t:i(e)};r({target:"Array",proto:!0,forced:!p||!m},{concat:function(e){var t,n,r,o,i,a=s(this),d=l(a,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(i=-1===t?a:arguments[t],E(i)){if(f+(o=c(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,f++)n in i&&u(d,f,i[n])}else{if(f>=9007199254740991)throw TypeError("Maximum allowed index exceeded");u(d,f++,i)}return d.length=f,d}})},function(e,t,n){var r=n(1),o=n(120),i=n(35);r({target:"Array",proto:!0},{copyWithin:o}),i("copyWithin")},function(e,t,n){var r=n(1),o=n(94),i=n(35);r({target:"Array",proto:!0},{fill:o}),i("fill")},function(e,t,n){"use strict";var r=n(1),o=n(15).filter;r({target:"Array",proto:!0,forced:!n(55)("filter")},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(1),o=n(15).find,i=n(35),a=!0;"find"in[]&&Array(1).find((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("find")},function(e,t,n){"use strict";var r=n(1),o=n(15).findIndex,i=n(35),a=!0;"findIndex"in[]&&Array(1).findIndex((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("findIndex")},function(e,t,n){"use strict";var r=n(1),o=n(121),i=n(11),a=n(9),s=n(23),c=n(54);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=i(this),n=a(t.length),r=c(t,0);return r.length=o(r,t,t,n,0,void 0===e?1:s(e)),r}})},function(e,t,n){"use strict";var r=n(1),o=n(121),i=n(11),a=n(9),s=n(25),c=n(54);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=i(this),r=a(n.length);return s(e),(t=c(n,0)).length=o(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},function(e,t,n){var r=n(1),o=n(122);r({target:"Array",stat:!0,forced:!n(70)((function(e){Array.from(e)}))},{from:o})},function(e,t,n){var r=n(5),o=n(123);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){throw o(e),t}}},function(e,t,n){"use strict";var r=n(1),o=n(68).includes,i=n(35);r({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},function(e,t,n){"use strict";var r=n(1),o=n(47),i=n(18),a=n(99),s=[].join,c=o!=Object,u=a("join",",");r({target:"Array",proto:!0,forced:c||!u},{join:function(e){return s.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(1),o=n(15).map;r({target:"Array",proto:!0,forced:!n(55)("map")},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(1),o=n(2),i=n(40);r({target:"Array",stat:!0,forced:o((function(){function e(){}return!(Array.of.call(e)instanceof e)}))},{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(1),o=n(4),i=n(52),a=n(39),s=n(9),c=n(18),u=n(40),l=n(6),d=n(55)("slice"),f=l("species"),_=[].slice,h=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var n,r,l,d=c(this),p=s(d.length),m=a(e,p),E=a(void 0===t?p:t,p);if(i(d)&&("function"!=typeof(n=d.constructor)||n!==Array&&!i(n.prototype)?o(n)&&null===(n=n[f])&&(n=void 0):n=void 0,n===Array||void 0===n))return _.call(d,m,E);for(r=new(void 0===n?Array:n)(h(E-m,0)),l=0;m<E;m++,l++)m in d&&u(r,l,d[m]);return r.length=l,r}})},function(e,t,n){n(44)("Array")},function(e,t,n){"use strict";var r=n(1),o=n(39),i=n(23),a=n(9),s=n(11),c=n(54),u=n(40),l=n(55)("splice"),d=Math.max,f=Math.min;r({target:"Array",proto:!0,forced:!l},{splice:function(e,t){var n,r,l,_,h,p,m=s(this),E=a(m.length),T=o(e,E),g=arguments.length;if(0===g?n=r=0:1===g?(n=0,r=E-T):(n=g-2,r=f(d(i(t),0),E-T)),E+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=c(m,r),_=0;_<r;_++)(h=T+_)in m&&u(l,_,m[h]);if(l.length=r,n<r){for(_=T;_<E-r;_++)p=_+n,(h=_+r)in m?m[p]=m[h]:delete m[p];for(_=E;_>E-r+n;_--)delete m[_-1]}else if(n>r)for(_=E-r;_>T;_--)p=_+n-1,(h=_+r-1)in m?m[p]=m[h]:delete m[p];for(_=0;_<n;_++)m[_+T]=arguments[_+2];return m.length=E-r+n,l}})},function(e,t,n){n(35)("flat")},function(e,t,n){n(35)("flatMap")},function(e,t,n){"use strict";var r=n(1),o=n(3),i=n(127),a=n(44),s=i.ArrayBuffer;r({global:!0,forced:o.ArrayBuffer!==s},{ArrayBuffer:s}),a("ArrayBuffer")},function(e,t){var n=Math.abs,r=Math.pow,o=Math.floor,i=Math.log,a=Math.LN2;e.exports={pack:function(e,t,s){var c,u,l,d=new Array(s),f=8*s-t-1,_=(1<<f)-1,h=_>>1,p=23===t?r(2,-24)-r(2,-77):0,m=e<0||0===e&&1/e<0?1:0,E=0;for((e=n(e))!=e||e===1/0?(u=e!=e?1:0,c=_):(c=o(i(e)/a),e*(l=r(2,-c))<1&&(c--,l*=2),(e+=c+h>=1?p/l:p*r(2,1-h))*l>=2&&(c++,l/=2),c+h>=_?(u=0,c=_):c+h>=1?(u=(e*l-1)*r(2,t),c+=h):(u=e*r(2,h-1)*r(2,t),c=0));t>=8;d[E++]=255&u,u/=256,t-=8);for(c=c<<t|u,f+=t;f>0;d[E++]=255&c,c/=256,f-=8);return d[--E]|=128*m,d},unpack:function(e,t){var n,o=e.length,i=8*o-t-1,a=(1<<i)-1,s=a>>1,c=i-7,u=o-1,l=e[u--],d=127&l;for(l>>=7;c>0;d=256*d+e[u],u--,c-=8);for(n=d&(1<<-c)-1,d>>=-c,c+=t;c>0;n=256*n+e[u],u--,c-=8);if(0===d)d=1-s;else{if(d===a)return n?NaN:l?-1/0:1/0;n+=r(2,t),d-=s}return(l?-1:1)*n*r(2,d-t)}}},function(e,t,n){var r=n(17),o=n(191),i=n(6)("toPrimitive"),a=Date.prototype;i in a||r(a,i,o)},function(e,t,n){"use strict";var r=n(5),o=n(27);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return o(r(this),"number"!==e)}},function(e,t,n){"use strict";var r=n(4),o=n(10),i=n(26),a=n(6)("hasInstance"),s=Function.prototype;a in s||o.f(s,a,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(8),o=n(10).f,i=Function.prototype,a=i.toString,s=/^\s*function ([^ (]*)/;!r||"name"in i||o(i,"name",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},function(e,t,n){var r=n(3);n(29)(r.JSON,"JSON",!0)},function(e,t,n){"use strict";var r=n(72),o=n(130);e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),o)},function(e,t,n){var r=n(1),o=n(131),i=Math.acosh,a=Math.log,s=Math.sqrt,c=Math.LN2;r({target:"Math",stat:!0,forced:!i||710!=Math.floor(i(Number.MAX_VALUE))||i(1/0)!=1/0},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?a(e)+c:o(e-1+s(e-1)*s(e+1))}})},function(e,t,n){var r=n(1),o=Math.asinh,i=Math.log,a=Math.sqrt;r({target:"Math",stat:!0,forced:!(o&&1/o(0)>0)},{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):i(t+a(t*t+1)):t}})},function(e,t,n){var r=n(1),o=Math.atanh,i=Math.log;r({target:"Math",stat:!0,forced:!(o&&1/o(-0)<0)},{atanh:function(e){return 0==(e=+e)?e:i((1+e)/(1-e))/2}})},function(e,t,n){var r=n(1),o=n(100),i=Math.abs,a=Math.pow;r({target:"Math",stat:!0},{cbrt:function(e){return o(e=+e)*a(i(e),1/3)}})},function(e,t,n){var r=n(1),o=Math.floor,i=Math.log,a=Math.LOG2E;r({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-o(i(e+.5)*a):32}})},function(e,t,n){var r=n(1),o=n(74),i=Math.cosh,a=Math.abs,s=Math.E;r({target:"Math",stat:!0,forced:!i||i(710)===1/0},{cosh:function(e){var t=o(a(e)-1)+1;return(t+1/(t*s*s))*(s/2)}})},function(e,t,n){var r=n(1),o=n(74);r({target:"Math",stat:!0,forced:o!=Math.expm1},{expm1:o})},function(e,t,n){n(1)({target:"Math",stat:!0},{fround:n(204)})},function(e,t,n){var r=n(100),o=Math.abs,i=Math.pow,a=i(2,-52),s=i(2,-23),c=i(2,127)*(2-s),u=i(2,-126);e.exports=Math.fround||function(e){var t,n,i=o(e),l=r(e);return i<u?l*(i/u/s+1/a-1/a)*u*s:(n=(t=(1+s/a)*i)-(t-i))>c||n!=n?l*(1/0):l*n}},function(e,t,n){var r=n(1),o=Math.hypot,i=Math.abs,a=Math.sqrt;r({target:"Math",stat:!0,forced:!!o&&o(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,o=0,s=0,c=arguments.length,u=0;s<c;)u<(n=i(arguments[s++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*a(o)}})},function(e,t,n){var r=n(1),o=n(2),i=Math.imul;r({target:"Math",stat:!0,forced:o((function(){return-5!=i(4294967295,5)||2!=i.length}))},{imul:function(e,t){var n=+e,r=+t,o=65535&n,i=65535&r;return 0|o*i+((65535&n>>>16)*i+o*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(1),o=Math.log,i=Math.LOG10E;r({target:"Math",stat:!0},{log10:function(e){return o(e)*i}})},function(e,t,n){n(1)({target:"Math",stat:!0},{log1p:n(131)})},function(e,t,n){var r=n(1),o=Math.log,i=Math.LN2;r({target:"Math",stat:!0},{log2:function(e){return o(e)/i}})},function(e,t,n){n(1)({target:"Math",stat:!0},{sign:n(100)})},function(e,t,n){var r=n(1),o=n(2),i=n(74),a=Math.abs,s=Math.exp,c=Math.E;r({target:"Math",stat:!0,forced:o((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(e){return a(e=+e)<1?(i(e)-i(-e))/2:(s(e-1)-s(-e-1))*(c/2)}})},function(e,t,n){var r=n(1),o=n(74),i=Math.exp;r({target:"Math",stat:!0},{tanh:function(e){var t=o(e=+e),n=o(-e);return t==1/0?1:n==1/0?-1:(t-n)/(i(e)+i(-e))}})},function(e,t,n){n(29)(Math,"Math",!0)},function(e,t,n){var r=n(1),o=Math.ceil,i=Math.floor;r({target:"Math",stat:!0},{trunc:function(e){return(e>0?i:o)(e)}})},function(e,t,n){"use strict";var r=n(8),o=n(3),i=n(50),a=n(14),s=n(12),c=n(32),u=n(73),l=n(27),d=n(2),f=n(33),_=n(38).f,h=n(13).f,p=n(10).f,m=n(46).trim,E=o.Number,T=E.prototype,g="Number"==c(f(T)),A=function(e){var t,n,r,o,i,a,s,c,u=l(e,!1);if("string"==typeof u&&u.length>2)if(43===(t=(u=m(u)).charCodeAt(0))||45===t){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(a=(i=u.slice(2)).length,s=0;s<a;s++)if((c=i.charCodeAt(s))<48||c>o)return NaN;return parseInt(i,r)}return+u};if(i("Number",!E(" 0o1")||!E("0b1")||E("+0x1"))){for(var b,v=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof v&&(g?d((function(){T.valueOf.call(n)})):"Number"!=c(n))?u(new E(A(t)),n,v):A(t)},I=r?_(E):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),O=0;I.length>O;O++)s(E,b=I[O])&&!s(v,b)&&p(v,b,h(E,b));v.prototype=T,T.constructor=v,a(o,"Number",v)}},function(e,t,n){n(1)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(e,t,n){n(1)({target:"Number",stat:!0},{isFinite:n(218)})},function(e,t,n){var r=n(3).isFinite;e.exports=Number.isFinite||function(e){return"number"==typeof e&&r(e)}},function(e,t,n){n(1)({target:"Number",stat:!0},{isInteger:n(132)})},function(e,t,n){n(1)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(1),o=n(132),i=Math.abs;r({target:"Number",stat:!0},{isSafeInteger:function(e){return o(e)&&i(e)<=9007199254740991}})},function(e,t,n){n(1)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){n(1)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(1),o=n(225);r({target:"Number",stat:!0,forced:Number.parseFloat!=o},{parseFloat:o})},function(e,t,n){var r=n(3),o=n(46).trim,i=n(75),a=r.parseFloat,s=1/a(i+"-0")!=-1/0;e.exports=s?function(e){var t=o(String(e)),n=a(t);return 0===n&&"-"==t.charAt(0)?-0:n}:a},function(e,t,n){var r=n(1),o=n(227);r({target:"Number",stat:!0,forced:Number.parseInt!=o},{parseInt:o})},function(e,t,n){var r=n(3),o=n(46).trim,i=n(75),a=r.parseInt,s=/^[+-]?0[Xx]/,c=8!==a(i+"08")||22!==a(i+"0x16");e.exports=c?function(e,t){var n=o(String(e));return a(n,t>>>0||(s.test(n)?16:10))}:a},function(e,t,n){"use strict";var r=n(1),o=n(23),i=n(229),a=n(101),s=n(2),c=1..toFixed,u=Math.floor,l=function(e,t,n){return 0===t?n:t%2==1?l(e,t-1,n*e):l(e*e,t/2,n)},d=function(e,t,n){for(var r=-1,o=n;++r<6;)o+=t*e[r],e[r]=o%1e7,o=u(o/1e7)},f=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=u(r/t),r=r%t*1e7},_=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=String(e[t]);n=""===n?r:n+a.call("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}))},{toFixed:function(e){var t,n,r,s,c=i(this),u=o(e),h=[0,0,0,0,0,0],p="",m="0";if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(p="-",c=-c),c>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(c*l(2,69,1))-69)<0?c*l(2,-t,1):c/l(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(h,0,n),r=u;r>=7;)d(h,1e7,0),r-=7;for(d(h,l(10,r,1),0),r=t-1;r>=23;)f(h,1<<23),r-=23;f(h,1<<r),d(h,1,1),f(h,2),m=_(h)}else d(h,0,n),d(h,1<<-t,0),m=_(h)+a.call("0",u);return m=u>0?p+((s=m.length)<=u?"0."+a.call("0",u-s)+m:m.slice(0,s-u)+"."+m.slice(s-u)):p+m}})},function(e,t,n){var r=n(32);e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},function(e,t,n){var r=n(1),o=n(133);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(e,t,n){"use strict";var r=n(1),o=n(8),i=n(76),a=n(11),s=n(25),c=n(10);o&&r({target:"Object",proto:!0,forced:i},{__defineGetter__:function(e,t){c.f(a(this),e,{get:s(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(1),o=n(8),i=n(76),a=n(11),s=n(25),c=n(10);o&&r({target:"Object",proto:!0,forced:i},{__defineSetter__:function(e,t){c.f(a(this),e,{set:s(t),enumerable:!0,configurable:!0})}})},function(e,t,n){var r=n(1),o=n(134).entries;r({target:"Object",stat:!0},{entries:function(e){return o(e)}})},function(e,t,n){var r=n(1),o=n(59),i=n(2),a=n(4),s=n(42).onFreeze,c=Object.freeze;r({target:"Object",stat:!0,forced:i((function(){c(1)})),sham:!o},{freeze:function(e){return c&&a(e)?c(s(e)):e}})},function(e,t,n){var r=n(1),o=n(60),i=n(40);r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return o(e,(function(e,n){i(t,e,n)}),{AS_ENTRIES:!0}),t}})},function(e,t,n){var r=n(1),o=n(2),i=n(18),a=n(13).f,s=n(8),c=o((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(i(e),t)}})},function(e,t,n){var r=n(1),o=n(8),i=n(90),a=n(18),s=n(13),c=n(40);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){for(var t,n,r=a(e),o=s.f,u=i(r),l={},d=0;u.length>d;)void 0!==(n=o(r,t=u[d++]))&&c(l,t,n);return l}})},function(e,t,n){var r=n(1),o=n(2),i=n(118).f;r({target:"Object",stat:!0,forced:o((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:i})},function(e,t,n){var r=n(1),o=n(2),i=n(11),a=n(26),s=n(98);r({target:"Object",stat:!0,forced:o((function(){a(1)})),sham:!s},{getPrototypeOf:function(e){return a(i(e))}})},function(e,t,n){n(1)({target:"Object",stat:!0},{is:n(135)})},function(e,t,n){var r=n(1),o=n(2),i=n(4),a=Object.isExtensible;r({target:"Object",stat:!0,forced:o((function(){a(1)}))},{isExtensible:function(e){return!!i(e)&&(!a||a(e))}})},function(e,t,n){var r=n(1),o=n(2),i=n(4),a=Object.isFrozen;r({target:"Object",stat:!0,forced:o((function(){a(1)}))},{isFrozen:function(e){return!i(e)||!!a&&a(e)}})},function(e,t,n){var r=n(1),o=n(2),i=n(4),a=Object.isSealed;r({target:"Object",stat:!0,forced:o((function(){a(1)}))},{isSealed:function(e){return!i(e)||!!a&&a(e)}})},function(e,t,n){var r=n(1),o=n(11),i=n(53);r({target:"Object",stat:!0,forced:n(2)((function(){i(1)}))},{keys:function(e){return i(o(e))}})},function(e,t,n){"use strict";var r=n(1),o=n(8),i=n(76),a=n(11),s=n(27),c=n(26),u=n(13).f;o&&r({target:"Object",proto:!0,forced:i},{__lookupGetter__:function(e){var t,n=a(this),r=s(e,!0);do{if(t=u(n,r))return t.get}while(n=c(n))}})},function(e,t,n){"use strict";var r=n(1),o=n(8),i=n(76),a=n(11),s=n(27),c=n(26),u=n(13).f;o&&r({target:"Object",proto:!0,forced:i},{__lookupSetter__:function(e){var t,n=a(this),r=s(e,!0);do{if(t=u(n,r))return t.set}while(n=c(n))}})},function(e,t,n){var r=n(1),o=n(4),i=n(42).onFreeze,a=n(59),s=n(2),c=Object.preventExtensions;r({target:"Object",stat:!0,forced:s((function(){c(1)})),sham:!a},{preventExtensions:function(e){return c&&o(e)?c(i(e)):e}})},function(e,t,n){var r=n(1),o=n(4),i=n(42).onFreeze,a=n(59),s=n(2),c=Object.seal;r({target:"Object",stat:!0,forced:s((function(){c(1)})),sham:!a},{seal:function(e){return c&&o(e)?c(i(e)):e}})},function(e,t,n){var r=n(96),o=n(14),i=n(250);r||o(Object.prototype,"toString",i,{unsafe:!0})},function(e,t,n){"use strict";var r=n(96),o=n(58);e.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(e,t,n){var r=n(1),o=n(134).values;r({target:"Object",stat:!0},{values:function(e){return o(e)}})},function(e,t,n){"use strict";var r,o,i,a,s=n(1),c=n(28),u=n(3),l=n(24),d=n(136),f=n(14),_=n(45),h=n(41),p=n(29),m=n(44),E=n(4),T=n(25),g=n(36),A=n(88),b=n(60),v=n(70),I=n(43),O=n(102).set,y=n(138),N=n(139),S=n(254),C=n(140),R=n(255),D=n(19),w=n(50),M=n(6),k=n(256),L=n(77),P=n(69),x=M("species"),U="Promise",H=D.get,B=D.set,j=D.getterFor(U),$=d&&d.prototype,F=d,W=$,Y=u.TypeError,V=u.document,G=u.process,K=C.f,z=K,q=!!(V&&V.createEvent&&u.dispatchEvent),X="function"==typeof PromiseRejectionEvent,J=!1,Q=w(U,(function(){var e=A(F)!==String(F);if(!e&&66===P)return!0;if(c&&!W.finally)return!0;if(P>=51&&/native code/.test(F))return!1;var t=new F((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(t.constructor={})[x]=n,!(J=t.then((function(){}))instanceof n)||!e&&k&&!X})),Z=Q||!v((function(e){F.all(e).catch((function(){}))})),ee=function(e){var t;return!(!E(e)||"function"!=typeof(t=e.then))&&t},te=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;y((function(){for(var r=e.value,o=1==e.state,i=0;n.length>i;){var a,s,c,u=n[i++],l=o?u.ok:u.fail,d=u.resolve,f=u.reject,_=u.domain;try{l?(o||(2===e.rejection&&ie(e),e.rejection=1),!0===l?a=r:(_&&_.enter(),a=l(r),_&&(_.exit(),c=!0)),a===u.promise?f(Y("Promise-chain cycle")):(s=ee(a))?s.call(a,d,f):d(a)):f(r)}catch(e){_&&!c&&_.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&re(e)}))}},ne=function(e,t,n){var r,o;q?((r=V.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!X&&(o=u["on"+e])?o(r):"unhandledrejection"===e&&S("Unhandled promise rejection",n)},re=function(e){O.call(u,(function(){var t,n=e.facade,r=e.value;if(oe(e)&&(t=R((function(){L?G.emit("unhandledRejection",r,n):ne("unhandledrejection",n,r)})),e.rejection=L||oe(e)?2:1,t.error))throw t.value}))},oe=function(e){return 1!==e.rejection&&!e.parent},ie=function(e){O.call(u,(function(){var t=e.facade;L?G.emit("rejectionHandled",t):ne("rejectionhandled",t,e.value)}))},ae=function(e,t,n){return function(r){e(t,r,n)}},se=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,te(e,!0))},ce=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Y("Promise can't be resolved itself");var r=ee(t);r?y((function(){var n={done:!1};try{r.call(t,ae(ce,n,e),ae(se,n,e))}catch(t){se(n,t,e)}})):(e.value=t,e.state=1,te(e,!1))}catch(t){se({done:!1},t,e)}}};if(Q&&(W=(F=function(e){g(this,F,U),T(e),r.call(this);var t=H(this);try{e(ae(ce,t),ae(se,t))}catch(e){se(t,e)}}).prototype,(r=function(e){B(this,{type:U,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=_(W,{then:function(e,t){var n=j(this),r=K(I(this,F));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=L?G.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&te(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r,t=H(e);this.promise=e,this.resolve=ae(ce,t),this.reject=ae(se,t)},C.f=K=function(e){return e===F||e===i?new o(e):z(e)},!c&&"function"==typeof d&&$!==Object.prototype)){a=$.then,J||(f($,"then",(function(e,t){var n=this;return new F((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),f($,"catch",W.catch,{unsafe:!0}));try{delete $.constructor}catch(e){}h&&h($,W)}s({global:!0,wrap:!0,forced:Q},{Promise:F}),p(F,U,!1,!0),m(U),i=l(U),s({target:U,stat:!0,forced:Q},{reject:function(e){var t=K(this);return t.reject.call(void 0,e),t.promise}}),s({target:U,stat:!0,forced:c||Q},{resolve:function(e){return N(c&&this===i?F:this,e)}}),s({target:U,stat:!0,forced:Z},{all:function(e){var t=this,n=K(t),r=n.resolve,o=n.reject,i=R((function(){var n=T(t.resolve),i=[],a=0,s=1;b(e,(function(e){var c=a++,u=!1;i.push(void 0),s++,n.call(t,e).then((function(e){u||(u=!0,i[c]=e,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=K(t),r=n.reject,o=R((function(){var o=T(t.resolve);b(e,(function(e){o.call(t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}})},function(e,t,n){var r=n(51);e.exports=/web0s(?!.*chrome)/i.test(r)},function(e,t,n){var r=n(3);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t){e.exports="object"==typeof window},function(e,t,n){"use strict";var r=n(1),o=n(28),i=n(136),a=n(2),s=n(24),c=n(43),u=n(139),l=n(14);if(r({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),!o&&"function"==typeof i){var d=s("Promise").prototype.finally;i.prototype.finally!==d&&l(i.prototype,"finally",d,{unsafe:!0})}},function(e,t,n){var r=n(1),o=n(24),i=n(25),a=n(5),s=n(2),c=o("Reflect","apply"),u=Function.apply;r({target:"Reflect",stat:!0,forced:!s((function(){c((function(){}))}))},{apply:function(e,t,n){return i(e),a(n),c?c(e,t,n):u.call(e,t,n)}})},function(e,t,n){var r=n(1),o=n(24),i=n(25),a=n(5),s=n(4),c=n(33),u=n(260),l=n(2),d=o("Reflect","construct"),f=l((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),_=!l((function(){d((function(){}))})),h=f||_;r({target:"Reflect",stat:!0,forced:h,sham:h},{construct:function(e,t){i(e),a(t);var n=arguments.length<3?e:i(arguments[2]);if(_&&!f)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var o=n.prototype,l=c(s(o)?o:Object.prototype),h=Function.apply.call(e,l,t);return s(h)?h:l}})},function(e,t,n){"use strict";var r=n(25),o=n(4),i=[].slice,a={},s=function(e,t,n){if(!(t in a)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";a[t]=Function("C,a","return new C("+r.join(",")+")")}return a[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=i.call(arguments,1),a=function(){var r=n.concat(i.call(arguments));return this instanceof a?s(t,r.length,r):t.apply(e,r)};return o(t.prototype)&&(a.prototype=t.prototype),a}},function(e,t,n){var r=n(1),o=n(8),i=n(5),a=n(27),s=n(10);r({target:"Reflect",stat:!0,forced:n(2)((function(){Reflect.defineProperty(s.f({},1,{value:1}),1,{value:2})})),sham:!o},{defineProperty:function(e,t,n){i(e);var r=a(t,!0);i(n);try{return s.f(e,r,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(1),o=n(5),i=n(13).f;r({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){var r=n(1),o=n(4),i=n(5),a=n(12),s=n(13),c=n(26);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,u,l=arguments.length<3?t:arguments[2];return i(t)===l?t[n]:(r=s.f(t,n))?a(r,"value")?r.value:void 0===r.get?void 0:r.get.call(l):o(u=c(t))?e(u,n,l):void 0}})},function(e,t,n){var r=n(1),o=n(8),i=n(5),a=n(13);r({target:"Reflect",stat:!0,sham:!o},{getOwnPropertyDescriptor:function(e,t){return a.f(i(e),t)}})},function(e,t,n){var r=n(1),o=n(5),i=n(26);r({target:"Reflect",stat:!0,sham:!n(98)},{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){n(1)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},function(e,t,n){var r=n(1),o=n(5),i=Object.isExtensible;r({target:"Reflect",stat:!0},{isExtensible:function(e){return o(e),!i||i(e)}})},function(e,t,n){n(1)({target:"Reflect",stat:!0},{ownKeys:n(90)})},function(e,t,n){var r=n(1),o=n(24),i=n(5);r({target:"Reflect",stat:!0,sham:!n(59)},{preventExtensions:function(e){i(e);try{var t=o("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(1),o=n(5),i=n(4),a=n(12),s=n(2),c=n(10),u=n(13),l=n(26),d=n(31);r({target:"Reflect",stat:!0,forced:s((function(){var e=function(){},t=c.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}))},{set:function e(t,n,r){var s,f,_=arguments.length<4?t:arguments[3],h=u.f(o(t),n);if(!h){if(i(f=l(t)))return e(f,n,r,_);h=d(0)}if(a(h,"value")){if(!1===h.writable||!i(_))return!1;if(s=u.f(_,n)){if(s.get||s.set||!1===s.writable)return!1;s.value=r,c.f(_,n,s)}else c.f(_,n,d(0,r));return!0}return void 0!==h.set&&(h.set.call(_,r),!0)}})},function(e,t,n){var r=n(1),o=n(5),i=n(126),a=n(41);a&&r({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){o(e),i(t);try{return a(e,t),!0}catch(e){return!1}}})},function(e,t,n){var r=n(8),o=n(3),i=n(50),a=n(73),s=n(10).f,c=n(38).f,u=n(103),l=n(78),d=n(79),f=n(14),_=n(2),h=n(19).enforce,p=n(44),m=n(6)("match"),E=o.RegExp,T=E.prototype,g=/a/g,A=/a/g,b=new E(g)!==g,v=d.UNSUPPORTED_Y;if(r&&i("RegExp",!b||v||_((function(){return A[m]=!1,E(g)!=g||E(A)==A||"/a/i"!=E(g,"i")})))){for(var I=function(e,t){var n,r=this instanceof I,o=u(e),i=void 0===t;if(!r&&o&&e.constructor===I&&i)return e;b?o&&!i&&(e=e.source):e instanceof I&&(i&&(t=l.call(e)),e=e.source),v&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var s=a(b?new E(e,t):E(e,t),r?this:T,I);v&&n&&(h(s).sticky=!0);return s},O=function(e){e in I||s(I,e,{configurable:!0,get:function(){return E[e]},set:function(t){E[e]=t}})},y=c(E),N=0;y.length>N;)O(y[N++]);T.constructor=I,I.prototype=T,f(o,"RegExp",I)}p("RegExp")},function(e,t,n){var r=n(8),o=n(10),i=n(78),a=n(79).UNSUPPORTED_Y;r&&("g"!=/./g.flags||a)&&o.f(RegExp.prototype,"flags",{configurable:!0,get:i})},function(e,t,n){"use strict";var r=n(14),o=n(5),i=n(2),a=n(78),s=RegExp.prototype,c=s.toString,u=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),l="toString"!=c.name;(u||l)&&r(RegExp.prototype,"toString",(function(){var e=o(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in s)?a.call(e):n)}),{unsafe:!0})},function(e,t,n){"use strict";var r=n(72),o=n(130);e.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),o)},function(e,t,n){"use strict";var r=n(1),o=n(81).codeAt;r({target:"String",proto:!0},{codePointAt:function(e){return o(this,e)}})},function(e,t,n){"use strict";var r,o=n(1),i=n(13).f,a=n(9),s=n(104),c=n(16),u=n(105),l=n(28),d="".endsWith,f=Math.min,_=u("endsWith");o({target:"String",proto:!0,forced:!!(l||_||(r=i(String.prototype,"endsWith"),!r||r.writable))&&!_},{endsWith:function(e){var t=String(c(this));s(e);var n=arguments.length>1?arguments[1]:void 0,r=a(t.length),o=void 0===n?r:f(a(n),r),i=String(e);return d?d.call(t,i,o):t.slice(o-i.length,o)===i}})},function(e,t,n){var r=n(1),o=n(39),i=String.fromCharCode,a=String.fromCodePoint;r({target:"String",stat:!0,forced:!!a&&1!=a.length},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?i(t):i(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){"use strict";var r=n(1),o=n(104),i=n(16);r({target:"String",proto:!0,forced:!n(105)("includes")},{includes:function(e){return!!~String(i(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(82),o=n(5),i=n(9),a=n(16),s=n(106),c=n(83);r("match",1,(function(e,t,n){return[function(t){var n=a(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=o(e),u=String(this);if(!a.global)return c(a,u);var l=a.unicode;a.lastIndex=0;for(var d,f=[],_=0;null!==(d=c(a,u));){var h=String(d[0]);f[_]=h,""===h&&(a.lastIndex=s(u,i(a.lastIndex),l)),_++}return 0===_?null:f}]}))},function(e,t,n){"use strict";var r=n(1),o=n(143).end;r({target:"String",proto:!0,forced:n(144)},{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(1),o=n(143).start;r({target:"String",proto:!0,forced:n(144)},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(1),o=n(18),i=n(9);r({target:"String",stat:!0},{raw:function(e){for(var t=o(e.raw),n=i(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){n(1)({target:"String",proto:!0},{repeat:n(101)})},function(e,t,n){"use strict";var r=n(82),o=n(5),i=n(9),a=n(23),s=n(16),c=n(106),u=n(286),l=n(83),d=Math.max,f=Math.min;r("replace",2,(function(e,t,n,r){var _=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=r.REPLACE_KEEPS_$0,p=_?"$":"$0";return[function(n,r){var o=s(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,o,r):t.call(String(o),n,r)},function(e,r){if(!_&&h||"string"==typeof r&&-1===r.indexOf(p)){var s=n(t,e,this,r);if(s.done)return s.value}var m=o(e),E=String(this),T="function"==typeof r;T||(r=String(r));var g=m.global;if(g){var A=m.unicode;m.lastIndex=0}for(var b=[];;){var v=l(m,E);if(null===v)break;if(b.push(v),!g)break;""===String(v[0])&&(m.lastIndex=c(E,i(m.lastIndex),A))}for(var I,O="",y=0,N=0;N<b.length;N++){v=b[N];for(var S=String(v[0]),C=d(f(a(v.index),E.length),0),R=[],D=1;D<v.length;D++)R.push(void 0===(I=v[D])?I:String(I));var w=v.groups;if(T){var M=[S].concat(R,C,E);void 0!==w&&M.push(w);var k=String(r.apply(void 0,M))}else k=u(S,E,C,R,w,r);C>=y&&(O+=E.slice(y,C)+k,y=C+S.length)}return O+E.slice(y)}]}))},function(e,t,n){var r=n(11),o=Math.floor,i="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,c,u,l){var d=n+e.length,f=c.length,_=s;return void 0!==u&&(u=r(u),_=a),i.call(l,_,(function(r,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":a=u[i.slice(1,-1)];break;default:var s=+i;if(0===s)return r;if(s>f){var l=o(s/10);return 0===l?r:l<=f?void 0===c[l-1]?i.charAt(1):c[l-1]+i.charAt(1):r}a=c[s-1]}return void 0===a?"":a}))}},function(e,t,n){"use strict";var r=n(82),o=n(5),i=n(16),a=n(135),s=n(83);r("search",1,(function(e,t,n){return[function(t){var n=i(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var i=o(e),c=String(this),u=i.lastIndex;a(u,0)||(i.lastIndex=0);var l=s(i,c);return a(i.lastIndex,u)||(i.lastIndex=u),null===l?-1:l.index}]}))},function(e,t,n){"use strict";var r=n(82),o=n(103),i=n(5),a=n(16),s=n(43),c=n(106),u=n(9),l=n(83),d=n(80),f=n(79).UNSUPPORTED_Y,_=[].push,h=Math.min;r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(a(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!o(e))return t.call(r,e,i);for(var s,c,u,l=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,p=new RegExp(e.source,f+"g");(s=d.call(p,r))&&!((c=p.lastIndex)>h&&(l.push(r.slice(h,s.index)),s.length>1&&s.index<r.length&&_.apply(l,s.slice(1)),u=s[0].length,h=c,l.length>=i));)p.lastIndex===s.index&&p.lastIndex++;return h===r.length?!u&&p.test("")||l.push(""):l.push(r.slice(h)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var o=a(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o,n):r.call(String(o),t,n)},function(e,o){var a=n(r,e,this,o,r!==t);if(a.done)return a.value;var d=i(e),_=String(this),p=s(d,RegExp),m=d.unicode,E=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(f?"g":"y"),T=new p(f?"^(?:"+d.source+")":d,E),g=void 0===o?4294967295:o>>>0;if(0===g)return[];if(0===_.length)return null===l(T,_)?[_]:[];for(var A=0,b=0,v=[];b<_.length;){T.lastIndex=f?0:b;var I,O=l(T,f?_.slice(b):_);if(null===O||(I=h(u(T.lastIndex+(f?b:0)),_.length))===A)b=c(_,b,m);else{if(v.push(_.slice(A,b)),v.length===g)return v;for(var y=1;y<=O.length-1;y++)if(v.push(O[y]),v.length===g)return v;b=A=I}}return v.push(_.slice(A)),v}]}),f)},function(e,t,n){"use strict";var r,o=n(1),i=n(13).f,a=n(9),s=n(104),c=n(16),u=n(105),l=n(28),d="".startsWith,f=Math.min,_=u("startsWith");o({target:"String",proto:!0,forced:!!(l||_||(r=i(String.prototype,"startsWith"),!r||r.writable))&&!_},{startsWith:function(e){var t=String(c(this));s(e);var n=a(f(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return d?d.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";var r=n(1),o=n(46).trim;r({target:"String",proto:!0,forced:n(107)("trim")},{trim:function(){return o(this)}})},function(e,t,n){"use strict";var r=n(1),o=n(46).end,i=n(107)("trimEnd"),a=i?function(){return o(this)}:"".trimEnd;r({target:"String",proto:!0,forced:i},{trimEnd:a,trimRight:a})},function(e,t,n){"use strict";var r=n(1),o=n(46).start,i=n(107)("trimStart"),a=i?function(){return o(this)}:"".trimStart;r({target:"String",proto:!0,forced:i},{trimStart:a,trimLeft:a})},function(e,t,n){"use strict";var r=n(1),o=n(21);r({target:"String",proto:!0,forced:n(22)("anchor")},{anchor:function(e){return o(this,"a","name",e)}})},function(e,t,n){"use strict";var r=n(1),o=n(21);r({target:"String",proto:!0,forced:n(22)("big")},{big:function(){return o(this,"big","","")}})},function(e,t,n){"use strict";var r=n(1),o=n(21);r({target:"String",proto:!0,forced:n(22)("blink")},{blink:function(){return o(this,"blink","","")}})},function(e,t,n){"use strict";var r=n(1),o=n(21);r({target:"String",proto:!0,forced:n(22)("bold")},{bold:function(){return o(this,"b","","")}})},function(e,t,n){"use strict";var r=n(1),o=n(21);r({target:"String",proto:!0,forced:n(22)("fixed")},{fixed:function(){return o(this,"tt","","")}})},function(e,t,n){"use strict";var r=n(1),o=n(21);r({target:"String",proto:!0,forced:n(22)("fontcolor")},{fontcolor:function(e){return o(this,"font","color",e)}})},function(e,t,n){"use strict";var r=n(1),o=n(21);r({target:"String",proto:!0,forced:n(22)("fontsize")},{fontsize:function(e){return o(this,"font","size",e)}})},function(e,t,n){"use strict";var r=n(1),o=n(21);r({target:"String",proto:!0,forced:n(22)("italics")},{italics:function(){return o(this,"i","","")}})},function(e,t,n){"use strict";var r=n(1),o=n(21);r({target:"String",proto:!0,forced:n(22)("link")},{link:function(e){return o(this,"a","href",e)}})},function(e,t,n){"use strict";var r=n(1),o=n(21);r({target:"String",proto:!0,forced:n(22)("small")},{small:function(){return o(this,"small","","")}})},function(e,t,n){"use strict";var r=n(1),o=n(21);r({target:"String",proto:!0,forced:n(22)("strike")},{strike:function(){return o(this,"strike","","")}})},function(e,t,n){"use strict";var r=n(1),o=n(21);r({target:"String",proto:!0,forced:n(22)("sub")},{sub:function(){return o(this,"sub","","")}})},function(e,t,n){"use strict";var r=n(1),o=n(21);r({target:"String",proto:!0,forced:n(22)("sup")},{sup:function(){return o(this,"sup","","")}})},function(e,t,n){n(30)("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){var r=n(23);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},function(e,t,n){n(30)("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(30)("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(30)("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(30)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(30)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(30)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(30)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(30)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){"use strict";var r=n(7),o=n(120),i=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t){return o.call(i(this),e,t,arguments.length>2?arguments[2]:void 0)}))},function(e,t,n){"use strict";var r=n(7),o=n(15).every,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(7),o=n(94),i=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return o.apply(i(this),arguments)}))},function(e,t,n){"use strict";var r=n(7),o=n(15).filter,i=n(320),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(e){var t=o(a(this),e,arguments.length>1?arguments[1]:void 0);return i(this,t)}))},function(e,t,n){var r=n(7).aTypedArrayConstructor,o=n(43);e.exports=function(e,t){for(var n=o(e,e.constructor),i=0,a=t.length,s=new(r(n))(a);a>i;)s[i]=t[i++];return s}},function(e,t,n){"use strict";var r=n(7),o=n(15).find,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(7),o=n(15).findIndex,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(7),o=n(15).forEach,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(108);(0,n(7).exportTypedArrayStaticMethod)("from",n(146),r)},function(e,t,n){"use strict";var r=n(7),o=n(68).includes,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(7),o=n(68).indexOf,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(3),o=n(7),i=n(71),a=n(6)("iterator"),s=r.Uint8Array,c=i.values,u=i.keys,l=i.entries,d=o.aTypedArray,f=o.exportTypedArrayMethod,_=s&&s.prototype[a],h=!!_&&("values"==_.name||null==_.name),p=function(){return c.call(d(this))};f("entries",(function(){return l.call(d(this))})),f("keys",(function(){return u.call(d(this))})),f("values",p,!h),f(a,p,!h)},function(e,t,n){"use strict";var r=n(7),o=r.aTypedArray,i=r.exportTypedArrayMethod,a=[].join;i("join",(function(e){return a.apply(o(this),arguments)}))},function(e,t,n){"use strict";var r=n(7),o=n(330),i=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return o.apply(i(this),arguments)}))},function(e,t,n){"use strict";var r=n(18),o=n(23),i=n(9),a=n(99),s=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,l=a("lastIndexOf"),d=u||!l;e.exports=d?function(e){if(u)return c.apply(this,arguments)||0;var t=r(this),n=i(t.length),a=n-1;for(arguments.length>1&&(a=s(a,o(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:c},function(e,t,n){"use strict";var r=n(7),o=n(15).map,i=n(43),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(e){return o(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(s(i(e,e.constructor)))(t)}))}))},function(e,t,n){"use strict";var r=n(7),o=n(108),i=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(i(this))(t);t>e;)n[e]=arguments[e++];return n}),o)},function(e,t,n){"use strict";var r=n(7),o=n(147).left,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){return o(i(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(7),o=n(147).right,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){return o(i(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(7),o=r.aTypedArray,i=r.exportTypedArrayMethod,a=Math.floor;i("reverse",(function(){for(var e,t=o(this).length,n=a(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}))},function(e,t,n){"use strict";var r=n(7),o=n(9),i=n(145),a=n(11),s=n(2),c=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(e){c(this);var t=i(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=a(e),s=o(r.length),u=0;if(s+t>n)throw RangeError("Wrong length");for(;u<s;)this[t+u]=r[u++]}),s((function(){new Int8Array(1).set({})})))},function(e,t,n){"use strict";var r=n(7),o=n(43),i=n(2),a=r.aTypedArray,s=r.aTypedArrayConstructor,c=r.exportTypedArrayMethod,u=[].slice;c("slice",(function(e,t){for(var n=u.call(a(this),e,t),r=o(this,this.constructor),i=0,c=n.length,l=new(s(r))(c);c>i;)l[i]=n[i++];return l}),i((function(){new Int8Array(1).slice()})))},function(e,t,n){"use strict";var r=n(7),o=n(15).some,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(7),o=r.aTypedArray,i=r.exportTypedArrayMethod,a=[].sort;i("sort",(function(e){return a.call(o(this),e)}))},function(e,t,n){"use strict";var r=n(7),o=n(9),i=n(39),a=n(43),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length,c=i(e,r);return new(a(n,n.constructor))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,o((void 0===t?r:i(t,r))-c))}))},function(e,t,n){"use strict";var r=n(3),o=n(7),i=n(2),a=r.Int8Array,s=o.aTypedArray,c=o.exportTypedArrayMethod,u=[].toLocaleString,l=[].slice,d=!!a&&i((function(){u.call(new a(1))}));c("toLocaleString",(function(){return u.apply(d?l.call(s(this)):s(this),arguments)}),i((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!i((function(){a.prototype.toLocaleString.call([1,2])})))},function(e,t,n){"use strict";var r=n(7).exportTypedArrayMethod,o=n(2),i=n(3).Uint8Array,a=i&&i.prototype||{},s=[].toString,c=[].join;o((function(){s.call({})}))&&(s=function(){return c.call(this)});var u=a.toString!=s;r("toString",s,u)},function(e,t,n){"use strict";var r,o=n(3),i=n(45),a=n(42),s=n(72),c=n(148),u=n(4),l=n(19).enforce,d=n(111),f=!o.ActiveXObject&&"ActiveXObject"in o,_=Object.isExtensible,h=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},p=e.exports=s("WeakMap",h,c);if(d&&f){r=c.getConstructor(h,"WeakMap",!0),a.REQUIRED=!0;var m=p.prototype,E=m.delete,T=m.has,g=m.get,A=m.set;i(m,{delete:function(e){if(u(e)&&!_(e)){var t=l(this);return t.frozen||(t.frozen=new r),E.call(this,e)||t.frozen.delete(e)}return E.call(this,e)},has:function(e){if(u(e)&&!_(e)){var t=l(this);return t.frozen||(t.frozen=new r),T.call(this,e)||t.frozen.has(e)}return T.call(this,e)},get:function(e){if(u(e)&&!_(e)){var t=l(this);return t.frozen||(t.frozen=new r),T.call(this,e)?g.call(this,e):t.frozen.get(e)}return g.call(this,e)},set:function(e,t){if(u(e)&&!_(e)){var n=l(this);n.frozen||(n.frozen=new r),T.call(this,e)?A.call(this,e,t):n.frozen.set(e,t)}else A.call(this,e,t);return this}})}},function(e,t,n){"use strict";n(72)("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(148))},function(e,t,n){var r=n(3),o=n(149),i=n(346),a=n(17);for(var s in o){var c=r[s],u=c&&c.prototype;if(u&&u.forEach!==i)try{a(u,"forEach",i)}catch(e){u.forEach=i}}},function(e,t,n){"use strict";var r=n(15).forEach,o=n(99)("forEach");e.exports=o?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,n){var r=n(3),o=n(149),i=n(71),a=n(17),s=n(6),c=s("iterator"),u=s("toStringTag"),l=i.values;for(var d in o){var f=r[d],_=f&&f.prototype;if(_){if(_[c]!==l)try{a(_,c,l)}catch(e){_[c]=l}if(_[u]||a(_,u,d),o[d])for(var h in i)if(_[h]!==i[h])try{a(_,h,i[h])}catch(e){_[h]=i[h]}}}},function(e,t,n){var r=n(1),o=n(3),i=n(102);r({global:!0,bind:!0,enumerable:!0,forced:!o.setImmediate||!o.clearImmediate},{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){var r=n(1),o=n(3),i=n(138),a=n(77),s=o.process;r({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=a&&s.domain;i(t?t.bind(e):e)}})},function(e,t,n){"use strict";n(142);var r,o=n(1),i=n(8),a=n(150),s=n(3),c=n(116),u=n(14),l=n(36),d=n(12),f=n(133),_=n(122),h=n(81).codeAt,p=n(351),m=n(29),E=n(151),T=n(19),g=s.URL,A=E.URLSearchParams,b=E.getState,v=T.set,I=T.getterFor("URL"),O=Math.floor,y=Math.pow,N=/[A-Za-z]/,S=/[\d+-.A-Za-z]/,C=/\d/,R=/^(0x|0X)/,D=/^[0-7]+$/,w=/^\d+$/,M=/^[\dA-Fa-f]+$/,k=/[\0\t\n\r #%\/:?@[\\]]/,L=/[\0\t\n\r #\/:?@[\\]]/,P=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,x=/[\t\n\r]/g,U=function(e,t){var n,r,o;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(n=B(t.slice(1,-1))))return"Invalid host";e.host=n}else if(K(e)){if(t=p(t),k.test(t))return"Invalid host";if(null===(n=H(t)))return"Invalid host";e.host=n}else{if(L.test(t))return"Invalid host";for(n="",r=_(t),o=0;o<r.length;o++)n+=V(r[o],$);e.host=n}},H=function(e){var t,n,r,o,i,a,s,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(o=c[r]))return e;if(i=10,o.length>1&&"0"==o.charAt(0)&&(i=R.test(o)?16:8,o=o.slice(8==i?1:2)),""===o)a=0;else{if(!(10==i?w:8==i?D:M).test(o))return e;a=parseInt(o,i)}n.push(a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=y(256,5-t))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*y(256,3-r);return s},B=function(e){var t,n,r,o,i,a,s,c=[0,0,0,0,0,0,0,0],u=0,l=null,d=0,f=function(){return e.charAt(d)};if(":"==f()){if(":"!=e.charAt(1))return;d+=2,l=++u}for(;f();){if(8==u)return;if(":"!=f()){for(t=n=0;n<4&&M.test(f());)t=16*t+parseInt(f(),16),d++,n++;if("."==f()){if(0==n)return;if(d-=n,u>6)return;for(r=0;f();){if(o=null,r>0){if(!("."==f()&&r<4))return;d++}if(!C.test(f()))return;for(;C.test(f());){if(i=parseInt(f(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;d++}c[u]=256*c[u]+o,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==f()){if(d++,!f())return}else if(f())return;c[u++]=t}else{if(null!==l)return;d++,l=++u}}if(null!==l)for(a=u-l,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[l+a-1],c[l+--a]=s;else if(8!=u)return;return c},j=function(e){var t,n,r,o;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=O(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,o=0,i=0;i<8;i++)0!==e[i]?(o>n&&(t=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(t=r,n=o),t}(e),n=0;n<8;n++)o&&0===e[n]||(o&&(o=!1),r===n?(t+=n?":":"::",o=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},$={},F=f({},$,{" ":1,'"':1,"<":1,">":1,"`":1}),W=f({},F,{"#":1,"?":1,"{":1,"}":1}),Y=f({},W,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),V=function(e,t){var n=h(e,0);return n>32&&n<127&&!d(t,e)?e:encodeURIComponent(e)},G={ftp:21,file:null,http:80,https:443,ws:80,wss:443},K=function(e){return d(G,e.scheme)},z=function(e){return""!=e.username||""!=e.password},q=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},X=function(e,t){var n;return 2==e.length&&N.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},J=function(e){var t;return e.length>1&&X(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},Q=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&X(t[0],!0)||t.pop()},Z=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},ne={},re={},oe={},ie={},ae={},se={},ce={},ue={},le={},de={},fe={},_e={},he={},pe={},me={},Ee={},Te={},ge={},Ae={},be=function(e,t,n,o){var i,a,s,c,u,l=n||ee,f=0,h="",p=!1,m=!1,E=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(P,"")),t=t.replace(x,""),i=_(t);f<=i.length;){switch(a=i[f],l){case ee:if(!a||!N.test(a)){if(n)return"Invalid scheme";l=ne;continue}h+=a.toLowerCase(),l=te;break;case te:if(a&&(S.test(a)||"+"==a||"-"==a||"."==a))h+=a.toLowerCase();else{if(":"!=a){if(n)return"Invalid scheme";h="",l=ne,f=0;continue}if(n&&(K(e)!=d(G,h)||"file"==h&&(z(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=h,n)return void(K(e)&&G[e.scheme]==e.port&&(e.port=null));h="","file"==e.scheme?l=_e:K(e)&&o&&o.scheme==e.scheme?l=re:K(e)?l=se:"/"==i[f+1]?(l=oe,f++):(e.cannotBeABaseURL=!0,e.path.push(""),l=Te)}break;case ne:if(!o||o.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(o.cannotBeABaseURL&&"#"==a){e.scheme=o.scheme,e.path=o.path.slice(),e.query=o.query,e.fragment="",e.cannotBeABaseURL=!0,l=Ae;break}l="file"==o.scheme?_e:ie;continue;case re:if("/"!=a||"/"!=i[f+1]){l=ie;continue}l=ce,f++;break;case oe:if("/"==a){l=ue;break}l=Ee;continue;case ie:if(e.scheme=o.scheme,a==r)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query;else if("/"==a||"\\"==a&&K(e))l=ae;else if("?"==a)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query="",l=ge;else{if("#"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.path.pop(),l=Ee;continue}e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query,e.fragment="",l=Ae}break;case ae:if(!K(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,l=Ee;continue}l=ue}else l=ce;break;case se:if(l=ce,"/"!=a||"/"!=h.charAt(f+1))continue;f++;break;case ce:if("/"!=a&&"\\"!=a){l=ue;continue}break;case ue:if("@"==a){p&&(h="%40"+h),p=!0,s=_(h);for(var T=0;T<s.length;T++){var g=s[T];if(":"!=g||E){var A=V(g,Y);E?e.password+=A:e.username+=A}else E=!0}h=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&K(e)){if(p&&""==h)return"Invalid authority";f-=_(h).length+1,h="",l=le}else h+=a;break;case le:case de:if(n&&"file"==e.scheme){l=pe;continue}if(":"!=a||m){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&K(e)){if(K(e)&&""==h)return"Invalid host";if(n&&""==h&&(z(e)||null!==e.port))return;if(c=U(e,h))return c;if(h="",l=me,n)return;continue}"["==a?m=!0:"]"==a&&(m=!1),h+=a}else{if(""==h)return"Invalid host";if(c=U(e,h))return c;if(h="",l=fe,n==de)return}break;case fe:if(!C.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&K(e)||n){if(""!=h){var b=parseInt(h,10);if(b>65535)return"Invalid port";e.port=K(e)&&b===G[e.scheme]?null:b,h=""}if(n)return;l=me;continue}return"Invalid port"}h+=a;break;case _e:if(e.scheme="file","/"==a||"\\"==a)l=he;else{if(!o||"file"!=o.scheme){l=Ee;continue}if(a==r)e.host=o.host,e.path=o.path.slice(),e.query=o.query;else if("?"==a)e.host=o.host,e.path=o.path.slice(),e.query="",l=ge;else{if("#"!=a){J(i.slice(f).join(""))||(e.host=o.host,e.path=o.path.slice(),Q(e)),l=Ee;continue}e.host=o.host,e.path=o.path.slice(),e.query=o.query,e.fragment="",l=Ae}}break;case he:if("/"==a||"\\"==a){l=pe;break}o&&"file"==o.scheme&&!J(i.slice(f).join(""))&&(X(o.path[0],!0)?e.path.push(o.path[0]):e.host=o.host),l=Ee;continue;case pe:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&X(h))l=Ee;else if(""==h){if(e.host="",n)return;l=me}else{if(c=U(e,h))return c;if("localhost"==e.host&&(e.host=""),n)return;h="",l=me}continue}h+=a;break;case me:if(K(e)){if(l=Ee,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(l=Ee,"/"!=a))continue}else e.fragment="",l=Ae;else e.query="",l=ge;break;case Ee:if(a==r||"/"==a||"\\"==a&&K(e)||!n&&("?"==a||"#"==a)){if(".."===(u=(u=h).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(Q(e),"/"==a||"\\"==a&&K(e)||e.path.push("")):Z(h)?"/"==a||"\\"==a&&K(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&X(h)&&(e.host&&(e.host=""),h=h.charAt(0)+":"),e.path.push(h)),h="","file"==e.scheme&&(a==r||"?"==a||"#"==a))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==a?(e.query="",l=ge):"#"==a&&(e.fragment="",l=Ae)}else h+=V(a,W);break;case Te:"?"==a?(e.query="",l=ge):"#"==a?(e.fragment="",l=Ae):a!=r&&(e.path[0]+=V(a,$));break;case ge:n||"#"!=a?a!=r&&("'"==a&&K(e)?e.query+="%27":e.query+="#"==a?"%23":V(a,$)):(e.fragment="",l=Ae);break;case Ae:a!=r&&(e.fragment+=V(a,F))}f++}},ve=function(e){var t,n,r=l(this,ve,"URL"),o=arguments.length>1?arguments[1]:void 0,a=String(e),s=v(r,{type:"URL"});if(void 0!==o)if(o instanceof ve)t=I(o);else if(n=be(t={},String(o)))throw TypeError(n);if(n=be(s,a,null,t))throw TypeError(n);var c=s.searchParams=new A,u=b(c);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(c)||null},i||(r.href=Oe.call(r),r.origin=ye.call(r),r.protocol=Ne.call(r),r.username=Se.call(r),r.password=Ce.call(r),r.host=Re.call(r),r.hostname=De.call(r),r.port=we.call(r),r.pathname=Me.call(r),r.search=ke.call(r),r.searchParams=Le.call(r),r.hash=Pe.call(r))},Ie=ve.prototype,Oe=function(){var e=I(this),t=e.scheme,n=e.username,r=e.password,o=e.host,i=e.port,a=e.path,s=e.query,c=e.fragment,u=t+":";return null!==o?(u+="//",z(e)&&(u+=n+(r?":"+r:"")+"@"),u+=j(o),null!==i&&(u+=":"+i)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},ye=function(){var e=I(this),t=e.scheme,n=e.port;if("blob"==t)try{return new ve(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&K(e)?t+"://"+j(e.host)+(null!==n?":"+n:""):"null"},Ne=function(){return I(this).scheme+":"},Se=function(){return I(this).username},Ce=function(){return I(this).password},Re=function(){var e=I(this),t=e.host,n=e.port;return null===t?"":null===n?j(t):j(t)+":"+n},De=function(){var e=I(this).host;return null===e?"":j(e)},we=function(){var e=I(this).port;return null===e?"":String(e)},Me=function(){var e=I(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},ke=function(){var e=I(this).query;return e?"?"+e:""},Le=function(){return I(this).searchParams},Pe=function(){var e=I(this).fragment;return e?"#"+e:""},xe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(i&&c(Ie,{href:xe(Oe,(function(e){var t=I(this),n=String(e),r=be(t,n);if(r)throw TypeError(r);b(t.searchParams).updateSearchParams(t.query)})),origin:xe(ye),protocol:xe(Ne,(function(e){var t=I(this);be(t,String(e)+":",ee)})),username:xe(Se,(function(e){var t=I(this),n=_(String(e));if(!q(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=V(n[r],Y)}})),password:xe(Ce,(function(e){var t=I(this),n=_(String(e));if(!q(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=V(n[r],Y)}})),host:xe(Re,(function(e){var t=I(this);t.cannotBeABaseURL||be(t,String(e),le)})),hostname:xe(De,(function(e){var t=I(this);t.cannotBeABaseURL||be(t,String(e),de)})),port:xe(we,(function(e){var t=I(this);q(t)||(""==(e=String(e))?t.port=null:be(t,e,fe))})),pathname:xe(Me,(function(e){var t=I(this);t.cannotBeABaseURL||(t.path=[],be(t,e+"",me))})),search:xe(ke,(function(e){var t=I(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",be(t,e,ge)),b(t.searchParams).updateSearchParams(t.query)})),searchParams:xe(Le),hash:xe(Pe,(function(e){var t=I(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",be(t,e,Ae)):t.fragment=null}))}),u(Ie,"toJSON",(function(){return Oe.call(this)}),{enumerable:!0}),u(Ie,"toString",(function(){return Oe.call(this)}),{enumerable:!0}),g){var Ue=g.createObjectURL,He=g.revokeObjectURL;Ue&&u(ve,"createObjectURL",(function(e){return Ue.apply(g,arguments)})),He&&u(ve,"revokeObjectURL",(function(e){return He.apply(g,arguments)}))}m(ve,"URL"),o({global:!0,forced:!a,sham:!i},{URL:ve})},function(e,t,n){"use strict";var r=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",a=Math.floor,s=String.fromCharCode,c=function(e){return e+22+75*(e<26)},u=function(e,t,n){var r=0;for(e=n?a(e/700):e>>1,e+=a(e/t);e>455;r+=36)e=a(e/35);return a(r+36*e/(e+38))},l=function(e){var t,n,r=[],o=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),n--)}else t.push(o)}return t}(e)).length,l=128,d=0,f=72;for(t=0;t<e.length;t++)(n=e[t])<128&&r.push(s(n));var _=r.length,h=_;for(_&&r.push("-");h<o;){var p=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=l&&n<p&&(p=n);var m=h+1;if(p-l>a((2147483647-d)/m))throw RangeError(i);for(d+=(p-l)*m,l=p,t=0;t<e.length;t++){if((n=e[t])<l&&++d>2147483647)throw RangeError(i);if(n==l){for(var E=d,T=36;;T+=36){var g=T<=f?1:T>=f+26?26:T-f;if(E<g)break;var A=E-g,b=36-g;r.push(s(c(g+A%b))),E=a(A/b)}r.push(s(c(E))),f=u(d,m,h==_),d=0,++h}}++d,++l}return r.join("")};e.exports=function(e){var t,n,i=[],a=e.toLowerCase().replace(o,".").split(".");for(t=0;t<a.length;t++)n=a[t],i.push(r.test(n)?"xn--"+l(n):n);return i.join(".")}},function(e,t,n){var r=n(5),o=n(57);e.exports=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},function(e,t,n){"use strict";n(1)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(e,t){var r=e;return"object"===n(e)&&null!==e&&(r=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||"object"!==n(t))return t;if(-1!==r.indexOf(t))return"__circular__";r.push(t);var o={};return Object.getOwnPropertyNames(t).forEach((function(n){o[n]=e(t[n],r)})),o}(e)),JSON.stringify(r,void 0,t)},o=function(){return"function"==typeof ga&&(ga.apply(void 0,arguments),!0)},i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=t[0]||"(null)";"object"===n(a)&&("function"==typeof a.stopPropagation&&a.stopPropagation(),"function"==typeof a.preventDefault&&a.preventDefault(),a.detail&&(a=a.detail),a.promise&&t.push(a.promise),"object"===n(a.reason)&&(a=a.reason));var s=this.type||"error_app",c="object"===n(a)?a.message||a.reason||"__unknown__":a,u=t.map(r).join(", ");return console.error("ERROR",s,c),u=u.replace(/token=[0-9a-fA-F]*/g,"token=<TOKEN>").replace(/"X-Butler-Trello-Token":\s*"[0-9a-fA-F]*"/g,'"X-Butler-Trello-Token": "<TOKEN>"').replace(/[0-9a-fA-F]{64}/g,""),!o("send","event",s,c,u)},a={init:function(){window.onerror=i.bind({type:"error_onerror"}),$(document).ajaxError(i.bind({type:"error_ajax"})),window.addEventListener("unhandledrejection",i.bind({type:"error_unhandledrejection"}))},logError:i,logEvent:function(e,t,n){o("send","event",e,t,n)},logVirtualPageview:function(e){o("set","page","".concat(document.location.pathname,"#").concat(e)),o("send","pageview")}};window.Log=a,e.exports=a},function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i,a,s,c,u=n(64),l={name:"Butler",key:"446cbc1d6532c596ddc610207ead5576",scope:"read,write,account"},d=function(){return a||(a=TrelloPowerUp.util.makeErrorEnum("TrelloApi",["BadRequest","Conflict","Forbidden","InvalidResponse","NotFound","RateLimited","Timeout","Unauthorized","Unknown"])),a},f=function(e){return new TrelloPowerUp.Promise((function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.timeout=3e4,r.onload=function(){if(200===r.status){var e;try{e=JSON.parse(r.responseText)}catch(e){return n((new d).Error.InvalidResponse(e.message))}return t(e)}return n((o=r.status,i=r.responseText,a=d(),s||(s={400:a.BadRequest,401:a.Unauthorized,403:a.Forbidden,404:a.NotFound,409:a.Conflict,429:a.RateLimited}),new(s[o]||a.Unknown)(i)));var o,i,a},r.ontimeout=function(){return n((new d).Error.Timeout())},r.send()}))},_=function(e){return e.requestToken(l).then((function(t){return i=t,e.set("member","private","token",t).then((function(){return t}))})).catch((function(t){throw Sentry.captureMessage("Authorization Error: ".concat(t.message)),e.alert({display:"error",duration:15,message:"Butler is unable to complete setup. Please refresh the page."}).catch((function(){})),t}))},h=function(){return c||(c=TrelloPowerUp.util.makeErrorEnum("Registration",["NoNewUsers","NotConfirmed","NoEnterpriseBeta","Unknown"])),c},p={display:"error",duration:10,message:"Unable to complete setup. Please refresh the page and try again."},m=function(e,t){return new TrelloPowerUp.Promise((function(n,r){$.ajax("".concat(u,"auth"),{type:"POST",data:JSON.stringify({token:i,source:"powerup_trello",tz:moment.tz.guess(),apikey:l.key}),contentType:"application/json"}).done((function(o){var i;(e.hideAlert(),o.success)?n():("MEMBER_NOT_CONFIRMED"===o.error?(i=new(h().NotConfirmed)(o.error),t||e.alert({display:"error",duration:10,message:"Your Trello account is not confirmed. Please confirm your Trello account before using Butler."})):(e.alert(p),i=new(h().Unknown)(o.error),Sentry.captureException(i)),r(i))})).fail((function(t){return Sentry.captureMessage("Registration request failed: ".concat(t.status," - ").concat(t.statusText)),e.alert(p),r(new(h().Unknown)(t.responseText)),!1}))}))},E=function(e){return _(e).then((function(t){return m(e).catch((function(){})).then((function(){return t}))}))},T=function(e){return"string"==typeof e&&/^[0-9a-f]{64}$/i.test(e)},g=function(e,t){var n=e||window._trello;return new TrelloPowerUp.Promise((function(e,r){return i&&T(i)?e(i):n.get("member","private","token").then((function(r){return r&&T(r)?(i=r,e(r)):e(t?E(n):null)})).catch(r)}))},A=function(e,t){return g().then((function(n){if(!n)throw(new d).Unauthorized("No token for API request. Path=".concat((e||"").replace(/[0-9a-f]{64}/gi,"[TOKEN]")));var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:"446cbc1d6532c596ddc610207ead5576",token:n},t||{}),a=Object.keys(i).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(i[e]))})).join("&");return"".concat("https://api.trello.com","/1/").concat(e,"?").concat(a)}))},b=function(){return g().then((function(e){return e?A("tokens/".concat(e)).then((function(e){return f(e)})):null}))};var v,I,O=function(e){return g(e,!1).then((function(e){return e&&T(e)})).catch((function(){return!1}))},y=null,N={authorize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window._trello;return g(e,!0)},authorizeSoft:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window._trello;return g(e,!1)},checkToken:b,clearMemory:function(){i=null},ensureTokenValidity:function(e){if(v)return v;if(y&&y>Date.now()-6e4)return TrelloPowerUp.Promise.resolve();var t=d();return y=Date.now(),v=g(e).then((function(n){return n?b().then((function(){return null})).catch(t.Unauthorized,t.Forbidden,t.NotFound,(function(){return E(e)})).catch(t,(function(e){Sentry.captureException(e)})):null})).catch((function(){})).finally((function(){v=null}))},getToken:g,getActiveToken:function(){return i},reauthorize:E,registerIfNecessary:function(e,t,n,r){return I||(I=TrelloPowerUp.Promise.all([e.get("member","private","registered",!1),O(e),n.getLocalCommands()]).spread((function(n,o,i){return o&&n?null:0!==i.commands.length||t?(e.alert({message:"Powering-Up, give us a moment..."}),o?n?null:m(e,r).then((function(){return e.set("member","private","registered",!0)})):_(e).then((function(){return n?null:m(e,r).then((function(){return e.set("member","private","registered",!0)}))}))):null})).finally((function(){I=null})))},resetToken:_,RegistrationError:h},S={Auth:N,getBoard:function(e,t){return A("boards/".concat(e),t).then((function(e){return f(e)}))},getLists:function(e,t){return A("boards/".concat(e,"/lists"),t).then((function(e){return f(e)}))},getMe:function(e){return A("members/me",e).then((function(e){return f(e)}))},getMember:function(e){return A("members/".concat(e)).then((function(e){return f(e)}))},getMyBoards:function(e){return A("members/me/boards",e).then((function(e){return f(e)}))},getMyTeams:function(){return A("members/me/organizations").then((function(e){return f(e)}))}};window.Auth=N,window.TrelloApi=S,e.exports=S},function(e,t,n){"use strict";var r=n(367);function o(e,t){return void 0===t&&(t=!0),e&&"object"==typeof e?function(e,t){return Object.keys(e).forEach((function(n){e[n]=o(e[n],t)})),e}(e,t):Array.isArray(e)?function(e,t){return e.forEach((function(n,r){e[r]=o(n,t)})),e}(e,t):r.is(e,t)?r.parse(e):e}e.exports=o},function(e,t,n){"use strict";(function(e){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(){return(n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var r=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},i="object"==typeof o&&o&&o.Object===Object&&o,a="object"==typeof self&&self&&self.Object===Object&&self,s=i||a||Function("return this")(),c=function(){return s.Date.now()},u=s.Symbol,l=Object.prototype,d=l.hasOwnProperty,f=l.toString,_=u?u.toStringTag:void 0;var h=function(e){var t=d.call(e,_),n=e[_];try{e[_]=void 0;var r=!0}catch(e){}var o=f.call(e);return r&&(t?e[_]=n:delete e[_]),o},p=Object.prototype.toString;var m=function(e){return p.call(e)},E="[object Null]",T="[object Undefined]",g=u?u.toStringTag:void 0;var A=function(e){return null==e?void 0===e?T:E:g&&g in Object(e)?h(e):m(e)};var b=function(e){return null!=e&&"object"==typeof e},v="[object Symbol]";var I=function(e){return"symbol"==typeof e||b(e)&&A(e)==v},O=NaN,y=/^\s+|\s+$/g,N=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,C=/^0o[0-7]+$/i,R=parseInt;var D=function(e){if("number"==typeof e)return e;if(I(e))return O;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(y,"");var n=S.test(e);return n||C.test(e)?R(e.slice(2),n?2:8):N.test(e)?O:+e},w="Expected a function",M=Math.max,k=Math.min;var L=function(e,t,n){var o,i,a,s,u,l,d=0,f=!1,_=!1,h=!0;if("function"!=typeof e)throw new TypeError(w);function p(t){var n=o,r=i;return o=i=void 0,d=t,s=e.apply(r,n)}function m(e){var n=e-l;return void 0===l||n>=t||n<0||_&&e-d>=a}function E(){var e=c();if(m(e))return T(e);u=setTimeout(E,function(e){var n=t-(e-l);return _?k(n,a-(e-d)):n}(e))}function T(e){return u=void 0,h&&o?p(e):(o=i=void 0,s)}function g(){var e=c(),n=m(e);if(o=arguments,i=this,l=e,n){if(void 0===u)return function(e){return d=e,u=setTimeout(E,t),f?p(e):s}(l);if(_)return u=setTimeout(E,t),p(l)}return void 0===u&&(u=setTimeout(E,t)),s}return t=D(t)||0,r(n)&&(f=!!n.leading,a=(_="maxWait"in n)?M(D(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),g.cancel=function(){void 0!==u&&clearTimeout(u),d=0,o=l=i=u=void 0},g.flush=function(){return void 0===u?s:T(c())},g},P="Expected a function";var x=function(e,t,n){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError(P);return r(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),L(e,t,{leading:o,maxWait:t,trailing:i})},U=["scroll","resize"],H=["wheel","keydown","keyup","mousedown","mousemove","touchstart","touchmove","click","contextmenu"],B=function(){function e(e){var t=e.timeIntervalEllapsedCallbacks,r=void 0===t?[]:t,o=e.absoluteTimeEllapsedCallbacks,i=void 0===o?[]:o,a=e.checkCallbacksIntervalMs,s=void 0===a?100:a,c=e.browserTabInactiveCallbacks,u=void 0===c?[]:c,l=e.idleCallbacks,d=void 0===l?[]:l,f=e.stopTimerOnTabchange,_=void 0===f||f,h=e.activeCallbacks,p=void 0===h?[]:h,m=e.browserTabActiveCallbacks,E=void 0===m?[]:m,T=e.idleTimeoutMs,g=void 0===T?3e3:T,A=this;this.onBrowserTabInactive=function(){A.isRunning()&&A.stopTimerOnTabchange&&A.stopTimer(),A.browserTabInactiveCallbacks.forEach((function(e){return e(A.getTimeInMilliseconds())}))},this.onBrowserTabActive=function(){A.isRunning()||A.startTimer(),A.browserTabActiveCallbacks.forEach((function(e){return e(A.getTimeInMilliseconds())}))},this.onBrowserActiveChange=function(){"visible"===document.visibilityState?A.onBrowserTabActive():A.onBrowserTabInactive()},this.onTimePassed=function(){A.absoluteTimeEllapsedCallbacks.forEach((function(e,t){var n=e.callback,r=e.pending,o=e.timeInMilliseconds;r&&o<=A.getTimeInMilliseconds()&&(n(A.getTimeInMilliseconds()),A.absoluteTimeEllapsedCallbacks[t].pending=!1)})),A.timeIntervalEllapsedCallbacks.forEach((function(e,t){var n=e.callback,r=e.timeInMilliseconds,o=e.multiplier;r<=A.getTimeInMilliseconds()&&(n(A.getTimeInMilliseconds()),A.timeIntervalEllapsedCallbacks[t].timeInMilliseconds=o(r))})),A.currentIdleTimeMs>=A.idleTimeoutMs&&A.isRunning()?(A.idle=!0,A.stopTimer(),A.idleCallbacks.forEach((function(e){return e(A.getTimeInMilliseconds())}))):A.currentIdleTimeMs+=A.checkCallbacksIntervalMs},this.resetIdleTime=function(){A.idle&&A.startTimer(),A.activeCallbacks.forEach((function(e){return e(A.getTimeInMilliseconds())})),A.idle=!1,A.currentIdleTimeMs=0},this.registerEventListeners=function(){var e={passive:!0},t=n({},e,{capture:!0});document.addEventListener("visibilitychange",A.onBrowserActiveChange);var r=x(A.resetIdleTime,2e3,{leading:!0,trailing:!1});U.forEach((function(e){window.addEventListener(e,r,t)})),H.forEach((function(t){return document.addEventListener(t,r,e)}))},this.unregisterEventListeners=function(){document.removeEventListener("visibilitychange",A.onBrowserActiveChange),U.forEach((function(e){return window.removeEventListener(e,A.resetIdleTime)})),H.forEach((function(e){return document.removeEventListener(e,A.resetIdleTime)}))},this.checkCallbacksOnInterval=function(){A.checkCallbackIntervalId=window.setInterval((function(){A.onTimePassed()}),A.checkCallbacksIntervalMs)},this.startTimer=function(){A.checkCallbackIntervalId||A.checkCallbacksOnInterval();var e=A.times[A.times.length-1];e&&null===e.stop||(A.times.push({start:performance.now(),stop:null}),A.running=!0)},this.stopTimer=function(){A.times.length&&(A.times[A.times.length-1].stop=performance.now(),A.running=!1)},this.addTimeIntervalEllapsedCallback=function(e){A.timeIntervalEllapsedCallbacks.push(e)},this.addAbsoluteTimeEllapsedCallback=function(e){A.absoluteTimeEllapsedCallbacks.push(e)},this.addBrowserTabInactiveCallback=function(e){A.browserTabInactiveCallbacks.push(e)},this.addBrowserTabActiveCallback=function(e){A.browserTabActiveCallbacks.push(e)},this.addIdleCallback=function(e){A.idleCallbacks.push(e)},this.addActiveCallback=function(e){A.activeCallbacks.push(e)},this.getTimeInMilliseconds=function(){return A.times.reduce((function(e,t){return t.stop?e+=t.stop-t.start:e+=performance.now()-t.start,e}),0)},this.isRunning=function(){return A.running},this.isIdle=function(){return A.idle},this.reset=function(){A.times=[]},this.destroy=function(){A.unregisterEventListeners(),A.checkCallbackIntervalId&&window.clearInterval(A.checkCallbackIntervalId)},this.running=!1,this.times=[],this.idle=!1,this.currentIdleTimeMs=0,this.marks={},this.measures={},this.stopTimerOnTabchange=_,this.browserTabActiveCallbacks=E,this.browserTabInactiveCallbacks=u,this.checkCallbacksIntervalMs=s,this.idleTimeoutMs=g,this.timeIntervalEllapsedCallbacks=r,this.absoluteTimeEllapsedCallbacks=i,this.idleCallbacks=d,this.activeCallbacks=p,this.registerEventListeners()}return e.prototype.mark=function(e){this.marks[e]||(this.marks[e]=[]),this.marks[e].push({time:this.getTimeInMilliseconds()})},e.prototype.getMarks=function(e){if(!(this.marks[e].length<1))return this.marks[e]},e.prototype.measure=function(e,t,n){var r=this.marks[t],o=r[r.length-1],i=this.marks[n],a=i[i.length-1];this.measures[e]||(this.measures[e]=[]),this.measures[e].push({name:e,startTime:o.time,duration:a.time-o.time})},e.prototype.getMeasures=function(e){if(this.measures[e]||!(this.measures[e].length<1))return this.measures[e]},e}();t.a=B}).call(this,n(84))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,c=a(e),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))o.call(n,l)&&(c[l]=n[l]);if(r){s=r(n);for(var d=0;d<s.length;d++)i.call(n,s[d])&&(c[s[d]]=n[s[d]])}}return c}},function(e,t,n){(function(e,r){var o;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i,a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",u="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",d=500,f="__lodash_placeholder__",_=1,h=2,p=4,m=1,E=2,T=1,g=2,A=4,b=8,v=16,I=32,O=64,y=128,N=256,S=512,C=30,R="...",D=800,w=16,M=1,k=2,L=1/0,P=9007199254740991,x=17976931348623157e292,U=NaN,H=4294967295,B=H-1,j=H>>>1,$=[["ary",y],["bind",T],["bindKey",g],["curry",b],["curryRight",v],["flip",S],["partial",I],["partialRight",O],["rearg",N]],F="[object Arguments]",W="[object Array]",Y="[object AsyncFunction]",V="[object Boolean]",G="[object Date]",K="[object DOMException]",z="[object Error]",q="[object Function]",X="[object GeneratorFunction]",J="[object Map]",Q="[object Number]",Z="[object Null]",ee="[object Object]",te="[object Proxy]",ne="[object RegExp]",re="[object Set]",oe="[object String]",ie="[object Symbol]",ae="[object Undefined]",se="[object WeakMap]",ce="[object WeakSet]",ue="[object ArrayBuffer]",le="[object DataView]",de="[object Float32Array]",fe="[object Float64Array]",_e="[object Int8Array]",he="[object Int16Array]",pe="[object Int32Array]",me="[object Uint8Array]",Ee="[object Uint8ClampedArray]",Te="[object Uint16Array]",ge="[object Uint32Array]",Ae=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,ve=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ie=/&(?:amp|lt|gt|quot|#39);/g,Oe=/[&<>"']/g,ye=RegExp(Ie.source),Ne=RegExp(Oe.source),Se=/<%-([\s\S]+?)%>/g,Ce=/<%([\s\S]+?)%>/g,Re=/<%=([\s\S]+?)%>/g,De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,we=/^\w*$/,Me=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ke=/[\\^$.*+?()[\]{}|]/g,Le=RegExp(ke.source),Pe=/^\s+/,xe=/\s/,Ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,He=/\{\n\/\* \[wrapped with (.+)\] \*/,Be=/,? & /,je=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$e=/[()=,{}\[\]\/\s]/,Fe=/\\(\\)?/g,We=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ye=/\w*$/,Ve=/^[-+]0x[0-9a-f]+$/i,Ge=/^0b[01]+$/i,Ke=/^\[object .+?Constructor\]$/,ze=/^0o[0-7]+$/i,qe=/^(?:0|[1-9]\d*)$/,Xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Je=/($^)/,Qe=/['\n\r\u2028\u2029\\]/g,Ze="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",et="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tt="[\\ud800-\\udfff]",nt="["+et+"]",rt="["+Ze+"]",ot="\\d+",it="[\\u2700-\\u27bf]",at="[a-z\\xdf-\\xf6\\xf8-\\xff]",st="[^\\ud800-\\udfff"+et+ot+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ct="\\ud83c[\\udffb-\\udfff]",ut="[^\\ud800-\\udfff]",lt="(?:\\ud83c[\\udde6-\\uddff]){2}",dt="[\\ud800-\\udbff][\\udc00-\\udfff]",ft="[A-Z\\xc0-\\xd6\\xd8-\\xde]",_t="(?:"+at+"|"+st+")",ht="(?:"+ft+"|"+st+")",pt="(?:"+rt+"|"+ct+")"+"?",mt="[\\ufe0e\\ufe0f]?"+pt+("(?:\\u200d(?:"+[ut,lt,dt].join("|")+")[\\ufe0e\\ufe0f]?"+pt+")*"),Et="(?:"+[it,lt,dt].join("|")+")"+mt,Tt="(?:"+[ut+rt+"?",rt,lt,dt,tt].join("|")+")",gt=RegExp("['’]","g"),At=RegExp(rt,"g"),bt=RegExp(ct+"(?="+ct+")|"+Tt+mt,"g"),vt=RegExp([ft+"?"+at+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[nt,ft,"$"].join("|")+")",ht+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[nt,ft+_t,"$"].join("|")+")",ft+"?"+_t+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ft+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ot,Et].join("|"),"g"),It=RegExp("[\\u200d\\ud800-\\udfff"+Ze+"\\ufe0e\\ufe0f]"),Ot=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Nt=-1,St={};St[de]=St[fe]=St[_e]=St[he]=St[pe]=St[me]=St[Ee]=St[Te]=St[ge]=!0,St[F]=St[W]=St[ue]=St[V]=St[le]=St[G]=St[z]=St[q]=St[J]=St[Q]=St[ee]=St[ne]=St[re]=St[oe]=St[se]=!1;var Ct={};Ct[F]=Ct[W]=Ct[ue]=Ct[le]=Ct[V]=Ct[G]=Ct[de]=Ct[fe]=Ct[_e]=Ct[he]=Ct[pe]=Ct[J]=Ct[Q]=Ct[ee]=Ct[ne]=Ct[re]=Ct[oe]=Ct[ie]=Ct[me]=Ct[Ee]=Ct[Te]=Ct[ge]=!0,Ct[z]=Ct[q]=Ct[se]=!1;var Rt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Dt=parseFloat,wt=parseInt,Mt="object"==typeof e&&e&&e.Object===Object&&e,kt="object"==typeof self&&self&&self.Object===Object&&self,Lt=Mt||kt||Function("return this")(),Pt=t&&!t.nodeType&&t,xt=Pt&&"object"==typeof r&&r&&!r.nodeType&&r,Ut=xt&&xt.exports===Pt,Ht=Ut&&Mt.process,Bt=function(){try{var e=xt&&xt.require&&xt.require("util").types;return e||Ht&&Ht.binding&&Ht.binding("util")}catch(e){}}(),jt=Bt&&Bt.isArrayBuffer,$t=Bt&&Bt.isDate,Ft=Bt&&Bt.isMap,Wt=Bt&&Bt.isRegExp,Yt=Bt&&Bt.isSet,Vt=Bt&&Bt.isTypedArray;function Gt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Kt(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}function zt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function qt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Xt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Jt(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function Qt(e,t){return!!(null==e?0:e.length)&&un(e,t,0)>-1}function Zt(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}function en(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function tn(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function nn(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function rn(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function on(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var an=_n("length");function sn(e,t,n){var r;return n(e,(function(e,n,o){if(t(e,n,o))return r=n,!1})),r}function cn(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function un(e,t,n){return t==t?function(e,t,n){var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):cn(e,dn,n)}function ln(e,t,n,r){for(var o=n-1,i=e.length;++o<i;)if(r(e[o],t))return o;return-1}function dn(e){return e!=e}function fn(e,t){var n=null==e?0:e.length;return n?mn(e,t)/n:U}function _n(e){return function(t){return null==t?i:t[e]}}function hn(e){return function(t){return null==e?i:e[t]}}function pn(e,t,n,r,o){return o(e,(function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)})),n}function mn(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function En(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Tn(e){return e?e.slice(0,Pn(e)+1).replace(Pe,""):e}function gn(e){return function(t){return e(t)}}function An(e,t){return en(t,(function(t){return e[t]}))}function bn(e,t){return e.has(t)}function vn(e,t){for(var n=-1,r=e.length;++n<r&&un(t,e[n],0)>-1;);return n}function In(e,t){for(var n=e.length;n--&&un(t,e[n],0)>-1;);return n}var On=hn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),yn=hn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Nn(e){return"\\"+Rt[e]}function Sn(e){return It.test(e)}function Cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Rn(e,t){return function(n){return e(t(n))}}function Dn(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n];a!==t&&a!==f||(e[n]=f,i[o++]=n)}return i}function wn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Mn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function kn(e){return Sn(e)?function(e){var t=bt.lastIndex=0;for(;bt.test(e);)++t;return t}(e):an(e)}function Ln(e){return Sn(e)?function(e){return e.match(bt)||[]}(e):function(e){return e.split("")}(e)}function Pn(e){for(var t=e.length;t--&&xe.test(e.charAt(t)););return t}var xn=hn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Un=function e(t){var n,r=(t=null==t?Lt:Un.defaults(Lt.Object(),t,Un.pick(Lt,yt))).Array,o=t.Date,xe=t.Error,Ze=t.Function,et=t.Math,tt=t.Object,nt=t.RegExp,rt=t.String,ot=t.TypeError,it=r.prototype,at=Ze.prototype,st=tt.prototype,ct=t["__core-js_shared__"],ut=at.toString,lt=st.hasOwnProperty,dt=0,ft=(n=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",_t=st.toString,ht=ut.call(tt),pt=Lt._,mt=nt("^"+ut.call(lt).replace(ke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Et=Ut?t.Buffer:i,Tt=t.Symbol,bt=t.Uint8Array,It=Et?Et.allocUnsafe:i,Rt=Rn(tt.getPrototypeOf,tt),Mt=tt.create,kt=st.propertyIsEnumerable,Pt=it.splice,xt=Tt?Tt.isConcatSpreadable:i,Ht=Tt?Tt.iterator:i,Bt=Tt?Tt.toStringTag:i,an=function(){try{var e=$i(tt,"defineProperty");return e({},"",{}),e}catch(e){}}(),hn=t.clearTimeout!==Lt.clearTimeout&&t.clearTimeout,Hn=o&&o.now!==Lt.Date.now&&o.now,Bn=t.setTimeout!==Lt.setTimeout&&t.setTimeout,jn=et.ceil,$n=et.floor,Fn=tt.getOwnPropertySymbols,Wn=Et?Et.isBuffer:i,Yn=t.isFinite,Vn=it.join,Gn=Rn(tt.keys,tt),Kn=et.max,zn=et.min,qn=o.now,Xn=t.parseInt,Jn=et.random,Qn=it.reverse,Zn=$i(t,"DataView"),er=$i(t,"Map"),tr=$i(t,"Promise"),nr=$i(t,"Set"),rr=$i(t,"WeakMap"),or=$i(tt,"create"),ir=rr&&new rr,ar={},sr=_a(Zn),cr=_a(er),ur=_a(tr),lr=_a(nr),dr=_a(rr),fr=Tt?Tt.prototype:i,_r=fr?fr.valueOf:i,hr=fr?fr.toString:i;function pr(e){if(Ds(e)&&!gs(e)&&!(e instanceof gr)){if(e instanceof Tr)return e;if(lt.call(e,"__wrapped__"))return ha(e)}return new Tr(e)}var mr=function(){function e(){}return function(t){if(!Rs(t))return{};if(Mt)return Mt(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Er(){}function Tr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function gr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=H,this.__views__=[]}function Ar(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function br(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function vr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ir(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new vr;++t<n;)this.add(e[t])}function Or(e){var t=this.__data__=new br(e);this.size=t.size}function yr(e,t){var n=gs(e),r=!n&&Ts(e),o=!n&&!r&&Is(e),i=!n&&!r&&!o&&Hs(e),a=n||r||o||i,s=a?En(e.length,rt):[],c=s.length;for(var u in e)!t&&!lt.call(e,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||zi(u,c))||s.push(u);return s}function Nr(e){var t=e.length;return t?e[Oo(0,t-1)]:i}function Sr(e,t){return la(ii(e),xr(t,0,e.length))}function Cr(e){return la(ii(e))}function Rr(e,t,n){(n===i||ps(e[t],n))&&(n!==i||t in e)||Lr(e,t,n)}function Dr(e,t,n){var r=e[t];lt.call(e,t)&&ps(r,n)&&(n!==i||t in e)||Lr(e,t,n)}function wr(e,t){for(var n=e.length;n--;)if(ps(e[n][0],t))return n;return-1}function Mr(e,t,n,r){return $r(e,(function(e,o,i){t(r,e,n(e),i)})),r}function kr(e,t){return e&&ai(t,ac(t),e)}function Lr(e,t,n){"__proto__"==t&&an?an(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Pr(e,t){for(var n=-1,o=t.length,a=r(o),s=null==e;++n<o;)a[n]=s?i:tc(e,t[n]);return a}function xr(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function Ur(e,t,n,r,o,a){var s,c=t&_,u=t&h,l=t&p;if(n&&(s=o?n(e,r,o,a):n(e)),s!==i)return s;if(!Rs(e))return e;var d=gs(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&lt.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return ii(e,s)}else{var f=Yi(e),m=f==q||f==X;if(Is(e))return Zo(e,c);if(f==ee||f==F||m&&!o){if(s=u||m?{}:Gi(e),!c)return u?function(e,t){return ai(e,Wi(e),t)}(e,function(e,t){return e&&ai(t,sc(t),e)}(s,e)):function(e,t){return ai(e,Fi(e),t)}(e,kr(s,e))}else{if(!Ct[f])return o?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case ue:return ei(e);case V:case G:return new r(+e);case le:return function(e,t){var n=t?ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case de:case fe:case _e:case he:case pe:case me:case Ee:case Te:case ge:return ti(e,n);case J:return new r;case Q:case oe:return new r(e);case ne:return function(e){var t=new e.constructor(e.source,Ye.exec(e));return t.lastIndex=e.lastIndex,t}(e);case re:return new r;case ie:return o=e,_r?tt(_r.call(o)):{}}var o}(e,f,c)}}a||(a=new Or);var E=a.get(e);if(E)return E;a.set(e,s),Ps(e)?e.forEach((function(r){s.add(Ur(r,t,n,r,e,a))})):ws(e)&&e.forEach((function(r,o){s.set(o,Ur(r,t,n,o,e,a))}));var T=d?i:(l?u?Li:ki:u?sc:ac)(e);return zt(T||e,(function(r,o){T&&(r=e[o=r]),Dr(s,o,Ur(r,t,n,o,e,a))})),s}function Hr(e,t,n){var r=n.length;if(null==e)return!r;for(e=tt(e);r--;){var o=n[r],a=t[o],s=e[o];if(s===i&&!(o in e)||!a(s))return!1}return!0}function Br(e,t,n){if("function"!=typeof e)throw new ot(c);return aa((function(){e.apply(i,n)}),t)}function jr(e,t,n,r){var o=-1,i=Qt,s=!0,c=e.length,u=[],l=t.length;if(!c)return u;n&&(t=en(t,gn(n))),r?(i=Zt,s=!1):t.length>=a&&(i=bn,s=!1,t=new Ir(t));e:for(;++o<c;){var d=e[o],f=null==n?d:n(d);if(d=r||0!==d?d:0,s&&f==f){for(var _=l;_--;)if(t[_]===f)continue e;u.push(d)}else i(t,f,r)||u.push(d)}return u}pr.templateSettings={escape:Se,evaluate:Ce,interpolate:Re,variable:"",imports:{_:pr}},pr.prototype=Er.prototype,pr.prototype.constructor=pr,Tr.prototype=mr(Er.prototype),Tr.prototype.constructor=Tr,gr.prototype=mr(Er.prototype),gr.prototype.constructor=gr,Ar.prototype.clear=function(){this.__data__=or?or(null):{},this.size=0},Ar.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ar.prototype.get=function(e){var t=this.__data__;if(or){var n=t[e];return n===l?i:n}return lt.call(t,e)?t[e]:i},Ar.prototype.has=function(e){var t=this.__data__;return or?t[e]!==i:lt.call(t,e)},Ar.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=or&&t===i?l:t,this},br.prototype.clear=function(){this.__data__=[],this.size=0},br.prototype.delete=function(e){var t=this.__data__,n=wr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Pt.call(t,n,1),--this.size,!0)},br.prototype.get=function(e){var t=this.__data__,n=wr(t,e);return n<0?i:t[n][1]},br.prototype.has=function(e){return wr(this.__data__,e)>-1},br.prototype.set=function(e,t){var n=this.__data__,r=wr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},vr.prototype.clear=function(){this.size=0,this.__data__={hash:new Ar,map:new(er||br),string:new Ar}},vr.prototype.delete=function(e){var t=Bi(this,e).delete(e);return this.size-=t?1:0,t},vr.prototype.get=function(e){return Bi(this,e).get(e)},vr.prototype.has=function(e){return Bi(this,e).has(e)},vr.prototype.set=function(e,t){var n=Bi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ir.prototype.add=Ir.prototype.push=function(e){return this.__data__.set(e,l),this},Ir.prototype.has=function(e){return this.__data__.has(e)},Or.prototype.clear=function(){this.__data__=new br,this.size=0},Or.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Or.prototype.get=function(e){return this.__data__.get(e)},Or.prototype.has=function(e){return this.__data__.has(e)},Or.prototype.set=function(e,t){var n=this.__data__;if(n instanceof br){var r=n.__data__;if(!er||r.length<a-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new vr(r)}return n.set(e,t),this.size=n.size,this};var $r=ui(qr),Fr=ui(Xr,!0);function Wr(e,t){var n=!0;return $r(e,(function(e,r,o){return n=!!t(e,r,o)})),n}function Yr(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(c===i?s==s&&!Us(s):n(s,c)))var c=s,u=a}return u}function Vr(e,t){var n=[];return $r(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function Gr(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=Ki),o||(o=[]);++i<a;){var s=e[i];t>0&&n(s)?t>1?Gr(s,t-1,n,r,o):tn(o,s):r||(o[o.length]=s)}return o}var Kr=li(),zr=li(!0);function qr(e,t){return e&&Kr(e,t,ac)}function Xr(e,t){return e&&zr(e,t,ac)}function Jr(e,t){return Jt(t,(function(t){return Ns(e[t])}))}function Qr(e,t){for(var n=0,r=(t=qo(t,e)).length;null!=e&&n<r;)e=e[fa(t[n++])];return n&&n==r?e:i}function Zr(e,t,n){var r=t(e);return gs(e)?r:tn(r,n(e))}function eo(e){return null==e?e===i?ae:Z:Bt&&Bt in tt(e)?function(e){var t=lt.call(e,Bt),n=e[Bt];try{e[Bt]=i;var r=!0}catch(e){}var o=_t.call(e);r&&(t?e[Bt]=n:delete e[Bt]);return o}(e):function(e){return _t.call(e)}(e)}function to(e,t){return e>t}function no(e,t){return null!=e&&lt.call(e,t)}function ro(e,t){return null!=e&&t in tt(e)}function oo(e,t,n){for(var o=n?Zt:Qt,a=e[0].length,s=e.length,c=s,u=r(s),l=1/0,d=[];c--;){var f=e[c];c&&t&&(f=en(f,gn(t))),l=zn(f.length,l),u[c]=!n&&(t||a>=120&&f.length>=120)?new Ir(c&&f):i}f=e[0];var _=-1,h=u[0];e:for(;++_<a&&d.length<l;){var p=f[_],m=t?t(p):p;if(p=n||0!==p?p:0,!(h?bn(h,m):o(d,m,n))){for(c=s;--c;){var E=u[c];if(!(E?bn(E,m):o(e[c],m,n)))continue e}h&&h.push(m),d.push(p)}}return d}function io(e,t,n){var r=null==(e=ra(e,t=qo(t,e)))?e:e[fa(ya(t))];return null==r?i:Gt(r,e,n)}function ao(e){return Ds(e)&&eo(e)==F}function so(e,t,n,r,o){return e===t||(null==e||null==t||!Ds(e)&&!Ds(t)?e!=e&&t!=t:function(e,t,n,r,o,a){var s=gs(e),c=gs(t),u=s?W:Yi(e),l=c?W:Yi(t),d=(u=u==F?ee:u)==ee,f=(l=l==F?ee:l)==ee,_=u==l;if(_&&Is(e)){if(!Is(t))return!1;s=!0,d=!1}if(_&&!d)return a||(a=new Or),s||Hs(e)?wi(e,t,n,r,o,a):function(e,t,n,r,o,i,a){switch(n){case le:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ue:return!(e.byteLength!=t.byteLength||!i(new bt(e),new bt(t)));case V:case G:case Q:return ps(+e,+t);case z:return e.name==t.name&&e.message==t.message;case ne:case oe:return e==t+"";case J:var s=Cn;case re:var c=r&m;if(s||(s=wn),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=E,a.set(e,t);var l=wi(s(e),s(t),r,o,i,a);return a.delete(e),l;case ie:if(_r)return _r.call(e)==_r.call(t)}return!1}(e,t,u,n,r,o,a);if(!(n&m)){var h=d&&lt.call(e,"__wrapped__"),p=f&&lt.call(t,"__wrapped__");if(h||p){var T=h?e.value():e,g=p?t.value():t;return a||(a=new Or),o(T,g,n,r,a)}}if(!_)return!1;return a||(a=new Or),function(e,t,n,r,o,a){var s=n&m,c=ki(e),u=c.length,l=ki(t).length;if(u!=l&&!s)return!1;var d=u;for(;d--;){var f=c[d];if(!(s?f in t:lt.call(t,f)))return!1}var _=a.get(e),h=a.get(t);if(_&&h)return _==t&&h==e;var p=!0;a.set(e,t),a.set(t,e);var E=s;for(;++d<u;){f=c[d];var T=e[f],g=t[f];if(r)var A=s?r(g,T,f,t,e,a):r(T,g,f,e,t,a);if(!(A===i?T===g||o(T,g,n,r,a):A)){p=!1;break}E||(E="constructor"==f)}if(p&&!E){var b=e.constructor,v=t.constructor;b!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v)&&(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,r,o,a)}(e,t,n,r,so,o))}function co(e,t,n,r){var o=n.length,a=o,s=!r;if(null==e)return!a;for(e=tt(e);o--;){var c=n[o];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var u=(c=n[o])[0],l=e[u],d=c[1];if(s&&c[2]){if(l===i&&!(u in e))return!1}else{var f=new Or;if(r)var _=r(l,d,u,e,t,f);if(!(_===i?so(d,l,m|E,r,f):_))return!1}}return!0}function uo(e){return!(!Rs(e)||(t=e,ft&&ft in t))&&(Ns(e)?mt:Ke).test(_a(e));var t}function lo(e){return"function"==typeof e?e:null==e?Mc:"object"==typeof e?gs(e)?Eo(e[0],e[1]):mo(e):$c(e)}function fo(e){if(!Zi(e))return Gn(e);var t=[];for(var n in tt(e))lt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function _o(e){if(!Rs(e))return function(e){var t=[];if(null!=e)for(var n in tt(e))t.push(n);return t}(e);var t=Zi(e),n=[];for(var r in e)("constructor"!=r||!t&&lt.call(e,r))&&n.push(r);return n}function ho(e,t){return e<t}function po(e,t){var n=-1,o=bs(e)?r(e.length):[];return $r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}function mo(e){var t=ji(e);return 1==t.length&&t[0][2]?ta(t[0][0],t[0][1]):function(n){return n===e||co(n,e,t)}}function Eo(e,t){return Xi(e)&&ea(t)?ta(fa(e),t):function(n){var r=tc(n,e);return r===i&&r===t?nc(n,e):so(t,r,m|E)}}function To(e,t,n,r,o){e!==t&&Kr(t,(function(a,s){if(o||(o=new Or),Rs(a))!function(e,t,n,r,o,a,s){var c=oa(e,n),u=oa(t,n),l=s.get(u);if(l)return void Rr(e,n,l);var d=a?a(c,u,n+"",e,t,s):i,f=d===i;if(f){var _=gs(u),h=!_&&Is(u),p=!_&&!h&&Hs(u);d=u,_||h||p?gs(c)?d=c:vs(c)?d=ii(c):h?(f=!1,d=Zo(u,!0)):p?(f=!1,d=ti(u,!0)):d=[]:ks(u)||Ts(u)?(d=c,Ts(c)?d=Gs(c):Rs(c)&&!Ns(c)||(d=Gi(u))):f=!1}f&&(s.set(u,d),o(d,u,r,a,s),s.delete(u));Rr(e,n,d)}(e,t,s,n,To,r,o);else{var c=r?r(oa(e,s),a,s+"",e,t,o):i;c===i&&(c=a),Rr(e,s,c)}}),sc)}function go(e,t){var n=e.length;if(n)return zi(t+=t<0?n:0,n)?e[t]:i}function Ao(e,t,n){t=t.length?en(t,(function(e){return gs(e)?function(t){return Qr(t,1===e.length?e[0]:e)}:e})):[Mc];var r=-1;return t=en(t,gn(Hi())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(po(e,(function(e,n,o){return{criteria:en(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;for(;++r<a;){var c=ni(o[r],i[r]);if(c){if(r>=s)return c;var u=n[r];return c*("desc"==u?-1:1)}}return e.index-t.index}(e,t,n)}))}function bo(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=Qr(e,a);n(s,a)&&Ro(i,qo(a,e),s)}return i}function vo(e,t,n,r){var o=r?ln:un,i=-1,a=t.length,s=e;for(e===t&&(t=ii(t)),n&&(s=en(e,gn(n)));++i<a;)for(var c=0,u=t[i],l=n?n(u):u;(c=o(s,l,c,r))>-1;)s!==e&&Pt.call(s,c,1),Pt.call(e,c,1);return e}function Io(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;zi(o)?Pt.call(e,o,1):$o(e,o)}}return e}function Oo(e,t){return e+$n(Jn()*(t-e+1))}function yo(e,t){var n="";if(!e||t<1||t>P)return n;do{t%2&&(n+=e),(t=$n(t/2))&&(e+=e)}while(t);return n}function No(e,t){return sa(na(e,t,Mc),e+"")}function So(e){return Nr(pc(e))}function Co(e,t){var n=pc(e);return la(n,xr(t,0,n.length))}function Ro(e,t,n,r){if(!Rs(e))return e;for(var o=-1,a=(t=qo(t,e)).length,s=a-1,c=e;null!=c&&++o<a;){var u=fa(t[o]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=s){var d=c[u];(l=r?r(d,u,c):i)===i&&(l=Rs(d)?d:zi(t[o+1])?[]:{})}Dr(c,u,l),c=c[u]}return e}var Do=ir?function(e,t){return ir.set(e,t),e}:Mc,wo=an?function(e,t){return an(e,"toString",{configurable:!0,enumerable:!1,value:Rc(t),writable:!0})}:Mc;function Mo(e){return la(pc(e))}function ko(e,t,n){var o=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=r(i);++o<i;)a[o]=e[o+t];return a}function Lo(e,t){var n;return $r(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}function Po(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t==t&&o<=j){for(;r<o;){var i=r+o>>>1,a=e[i];null!==a&&!Us(a)&&(n?a<=t:a<t)?r=i+1:o=i}return o}return xo(e,t,Mc,n)}function xo(e,t,n,r){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,c=null===t,u=Us(t),l=t===i;o<a;){var d=$n((o+a)/2),f=n(e[d]),_=f!==i,h=null===f,p=f==f,m=Us(f);if(s)var E=r||p;else E=l?p&&(r||_):c?p&&_&&(r||!h):u?p&&_&&!h&&(r||!m):!h&&!m&&(r?f<=t:f<t);E?o=d+1:a=d}return zn(a,B)}function Uo(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!ps(s,c)){var c=s;i[o++]=0===a?0:a}}return i}function Ho(e){return"number"==typeof e?e:Us(e)?U:+e}function Bo(e){if("string"==typeof e)return e;if(gs(e))return en(e,Bo)+"";if(Us(e))return hr?hr.call(e):"";var t=e+"";return"0"==t&&1/e==-L?"-0":t}function jo(e,t,n){var r=-1,o=Qt,i=e.length,s=!0,c=[],u=c;if(n)s=!1,o=Zt;else if(i>=a){var l=t?null:yi(e);if(l)return wn(l);s=!1,o=bn,u=new Ir}else u=t?[]:c;e:for(;++r<i;){var d=e[r],f=t?t(d):d;if(d=n||0!==d?d:0,s&&f==f){for(var _=u.length;_--;)if(u[_]===f)continue e;t&&u.push(f),c.push(d)}else o(u,f,n)||(u!==c&&u.push(f),c.push(d))}return c}function $o(e,t){return null==(e=ra(e,t=qo(t,e)))||delete e[fa(ya(t))]}function Fo(e,t,n,r){return Ro(e,t,n(Qr(e,t)),r)}function Wo(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?ko(e,r?0:i,r?i+1:o):ko(e,r?i+1:0,r?o:i)}function Yo(e,t){var n=e;return n instanceof gr&&(n=n.value()),nn(t,(function(e,t){return t.func.apply(t.thisArg,tn([e],t.args))}),n)}function Vo(e,t,n){var o=e.length;if(o<2)return o?jo(e[0]):[];for(var i=-1,a=r(o);++i<o;)for(var s=e[i],c=-1;++c<o;)c!=i&&(a[i]=jr(a[i]||s,e[c],t,n));return jo(Gr(a,1),t,n)}function Go(e,t,n){for(var r=-1,o=e.length,a=t.length,s={};++r<o;){var c=r<a?t[r]:i;n(s,e[r],c)}return s}function Ko(e){return vs(e)?e:[]}function zo(e){return"function"==typeof e?e:Mc}function qo(e,t){return gs(e)?e:Xi(e,t)?[e]:da(Ks(e))}var Xo=No;function Jo(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ko(e,t,n)}var Qo=hn||function(e){return Lt.clearTimeout(e)};function Zo(e,t){if(t)return e.slice();var n=e.length,r=It?It(n):new e.constructor(n);return e.copy(r),r}function ei(e){var t=new e.constructor(e.byteLength);return new bt(t).set(new bt(e)),t}function ti(e,t){var n=t?ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ni(e,t){if(e!==t){var n=e!==i,r=null===e,o=e==e,a=Us(e),s=t!==i,c=null===t,u=t==t,l=Us(t);if(!c&&!l&&!a&&e>t||a&&s&&u&&!c&&!l||r&&s&&u||!n&&u||!o)return 1;if(!r&&!a&&!l&&e<t||l&&n&&o&&!r&&!a||c&&n&&o||!s&&o||!u)return-1}return 0}function ri(e,t,n,o){for(var i=-1,a=e.length,s=n.length,c=-1,u=t.length,l=Kn(a-s,0),d=r(u+l),f=!o;++c<u;)d[c]=t[c];for(;++i<s;)(f||i<a)&&(d[n[i]]=e[i]);for(;l--;)d[c++]=e[i++];return d}function oi(e,t,n,o){for(var i=-1,a=e.length,s=-1,c=n.length,u=-1,l=t.length,d=Kn(a-c,0),f=r(d+l),_=!o;++i<d;)f[i]=e[i];for(var h=i;++u<l;)f[h+u]=t[u];for(;++s<c;)(_||i<a)&&(f[h+n[s]]=e[i++]);return f}function ii(e,t){var n=-1,o=e.length;for(t||(t=r(o));++n<o;)t[n]=e[n];return t}function ai(e,t,n,r){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var c=t[a],u=r?r(n[c],e[c],c,n,e):i;u===i&&(u=e[c]),o?Lr(n,c,u):Dr(n,c,u)}return n}function si(e,t){return function(n,r){var o=gs(n)?Kt:Mr,i=t?t():{};return o(n,e,Hi(r,2),i)}}function ci(e){return No((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&qi(n[0],n[1],s)&&(a=o<3?i:a,o=1),t=tt(t);++r<o;){var c=n[r];c&&e(t,c,r,a)}return t}))}function ui(e,t){return function(n,r){if(null==n)return n;if(!bs(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=tt(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function li(e){return function(t,n,r){for(var o=-1,i=tt(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===n(i[c],c,i))break}return t}}function di(e){return function(t){var n=Sn(t=Ks(t))?Ln(t):i,r=n?n[0]:t.charAt(0),o=n?Jo(n,1).join(""):t.slice(1);return r[e]()+o}}function fi(e){return function(t){return nn(Nc(Tc(t).replace(gt,"")),e,"")}}function _i(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=mr(e.prototype),r=e.apply(n,t);return Rs(r)?r:n}}function hi(e){return function(t,n,r){var o=tt(t);if(!bs(t)){var a=Hi(n,3);t=ac(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[a?t[s]:s]:i}}function pi(e){return Mi((function(t){var n=t.length,r=n,o=Tr.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new ot(c);if(o&&!s&&"wrapper"==xi(a))var s=new Tr([],!0)}for(r=s?r:n;++r<n;){var u=xi(a=t[r]),l="wrapper"==u?Pi(a):i;s=l&&Ji(l[0])&&l[1]==(y|b|I|N)&&!l[4].length&&1==l[9]?s[xi(l[0])].apply(s,l[3]):1==a.length&&Ji(a)?s[u]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&gs(r))return s.plant(r).value();for(var o=0,i=n?t[o].apply(this,e):r;++o<n;)i=t[o].call(this,i);return i}}))}function mi(e,t,n,o,a,s,c,u,l,d){var f=t&y,_=t&T,h=t&g,p=t&(b|v),m=t&S,E=h?i:_i(e);return function T(){for(var g=arguments.length,A=r(g),b=g;b--;)A[b]=arguments[b];if(p)var v=Ui(T),I=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(A,v);if(o&&(A=ri(A,o,a,p)),s&&(A=oi(A,s,c,p)),g-=I,p&&g<d){var O=Dn(A,v);return Ii(e,t,mi,T.placeholder,n,A,O,u,l,d-g)}var y=_?n:this,N=h?y[e]:e;return g=A.length,u?A=function(e,t){var n=e.length,r=zn(t.length,n),o=ii(e);for(;r--;){var a=t[r];e[r]=zi(a,n)?o[a]:i}return e}(A,u):m&&g>1&&A.reverse(),f&&l<g&&(A.length=l),this&&this!==Lt&&this instanceof T&&(N=E||_i(N)),N.apply(y,A)}}function Ei(e,t){return function(n,r){return function(e,t,n,r){return qr(e,(function(e,o,i){t(r,n(e),o,i)})),r}(n,e,t(r),{})}}function Ti(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=Bo(n),r=Bo(r)):(n=Ho(n),r=Ho(r)),o=e(n,r)}return o}}function gi(e){return Mi((function(t){return t=en(t,gn(Hi())),No((function(n){var r=this;return e(t,(function(e){return Gt(e,r,n)}))}))}))}function Ai(e,t){var n=(t=t===i?" ":Bo(t)).length;if(n<2)return n?yo(t,e):t;var r=yo(t,jn(e/kn(t)));return Sn(t)?Jo(Ln(r),0,e).join(""):r.slice(0,e)}function bi(e){return function(t,n,o){return o&&"number"!=typeof o&&qi(t,n,o)&&(n=o=i),t=Fs(t),n===i?(n=t,t=0):n=Fs(n),function(e,t,n,o){for(var i=-1,a=Kn(jn((t-e)/(n||1)),0),s=r(a);a--;)s[o?a:++i]=e,e+=n;return s}(t,n,o=o===i?t<n?1:-1:Fs(o),e)}}function vi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Vs(t),n=Vs(n)),e(t,n)}}function Ii(e,t,n,r,o,a,s,c,u,l){var d=t&b;t|=d?I:O,(t&=~(d?O:I))&A||(t&=~(T|g));var f=[e,t,o,d?a:i,d?s:i,d?i:a,d?i:s,c,u,l],_=n.apply(i,f);return Ji(e)&&ia(_,f),_.placeholder=r,ca(_,e,t)}function Oi(e){var t=et[e];return function(e,n){if(e=Vs(e),(n=null==n?0:zn(Ws(n),292))&&Yn(e)){var r=(Ks(e)+"e").split("e");return+((r=(Ks(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var yi=nr&&1/wn(new nr([,-0]))[1]==L?function(e){return new nr(e)}:Uc;function Ni(e){return function(t){var n=Yi(t);return n==J?Cn(t):n==re?Mn(t):function(e,t){return en(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Si(e,t,n,o,a,s,u,l){var d=t&g;if(!d&&"function"!=typeof e)throw new ot(c);var _=o?o.length:0;if(_||(t&=~(I|O),o=a=i),u=u===i?u:Kn(Ws(u),0),l=l===i?l:Ws(l),_-=a?a.length:0,t&O){var h=o,p=a;o=a=i}var m=d?i:Pi(e),E=[e,t,n,o,a,h,p,s,u,l];if(m&&function(e,t){var n=e[1],r=t[1],o=n|r,i=o<(T|g|y),a=r==y&&n==b||r==y&&n==N&&e[7].length<=t[8]||r==(y|N)&&t[7].length<=t[8]&&n==b;if(!i&&!a)return e;r&T&&(e[2]=t[2],o|=n&T?0:A);var s=t[3];if(s){var c=e[3];e[3]=c?ri(c,s,t[4]):s,e[4]=c?Dn(e[3],f):t[4]}(s=t[5])&&(c=e[5],e[5]=c?oi(c,s,t[6]):s,e[6]=c?Dn(e[5],f):t[6]);(s=t[7])&&(e[7]=s);r&y&&(e[8]=null==e[8]?t[8]:zn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=o}(E,m),e=E[0],t=E[1],n=E[2],o=E[3],a=E[4],!(l=E[9]=E[9]===i?d?0:e.length:Kn(E[9]-_,0))&&t&(b|v)&&(t&=~(b|v)),t&&t!=T)S=t==b||t==v?function(e,t,n){var o=_i(e);return function a(){for(var s=arguments.length,c=r(s),u=s,l=Ui(a);u--;)c[u]=arguments[u];var d=s<3&&c[0]!==l&&c[s-1]!==l?[]:Dn(c,l);return(s-=d.length)<n?Ii(e,t,mi,a.placeholder,i,c,d,i,i,n-s):Gt(this&&this!==Lt&&this instanceof a?o:e,this,c)}}(e,t,l):t!=I&&t!=(T|I)||a.length?mi.apply(i,E):function(e,t,n,o){var i=t&T,a=_i(e);return function t(){for(var s=-1,c=arguments.length,u=-1,l=o.length,d=r(l+c),f=this&&this!==Lt&&this instanceof t?a:e;++u<l;)d[u]=o[u];for(;c--;)d[u++]=arguments[++s];return Gt(f,i?n:this,d)}}(e,t,n,o);else var S=function(e,t,n){var r=t&T,o=_i(e);return function t(){return(this&&this!==Lt&&this instanceof t?o:e).apply(r?n:this,arguments)}}(e,t,n);return ca((m?Do:ia)(S,E),e,t)}function Ci(e,t,n,r){return e===i||ps(e,st[n])&&!lt.call(r,n)?t:e}function Ri(e,t,n,r,o,a){return Rs(e)&&Rs(t)&&(a.set(t,e),To(e,t,i,Ri,a),a.delete(t)),e}function Di(e){return ks(e)?i:e}function wi(e,t,n,r,o,a){var s=n&m,c=e.length,u=t.length;if(c!=u&&!(s&&u>c))return!1;var l=a.get(e),d=a.get(t);if(l&&d)return l==t&&d==e;var f=-1,_=!0,h=n&E?new Ir:i;for(a.set(e,t),a.set(t,e);++f<c;){var p=e[f],T=t[f];if(r)var g=s?r(T,p,f,t,e,a):r(p,T,f,e,t,a);if(g!==i){if(g)continue;_=!1;break}if(h){if(!on(t,(function(e,t){if(!bn(h,t)&&(p===e||o(p,e,n,r,a)))return h.push(t)}))){_=!1;break}}else if(p!==T&&!o(p,T,n,r,a)){_=!1;break}}return a.delete(e),a.delete(t),_}function Mi(e){return sa(na(e,i,Aa),e+"")}function ki(e){return Zr(e,ac,Fi)}function Li(e){return Zr(e,sc,Wi)}var Pi=ir?function(e){return ir.get(e)}:Uc;function xi(e){for(var t=e.name+"",n=ar[t],r=lt.call(ar,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function Ui(e){return(lt.call(pr,"placeholder")?pr:e).placeholder}function Hi(){var e=pr.iteratee||kc;return e=e===kc?lo:e,arguments.length?e(arguments[0],arguments[1]):e}function Bi(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function ji(e){for(var t=ac(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,ea(o)]}return t}function $i(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return uo(n)?n:i}var Fi=Fn?function(e){return null==e?[]:(e=tt(e),Jt(Fn(e),(function(t){return kt.call(e,t)})))}:Yc,Wi=Fn?function(e){for(var t=[];e;)tn(t,Fi(e)),e=Rt(e);return t}:Yc,Yi=eo;function Vi(e,t,n){for(var r=-1,o=(t=qo(t,e)).length,i=!1;++r<o;){var a=fa(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Cs(o)&&zi(a,o)&&(gs(e)||Ts(e))}function Gi(e){return"function"!=typeof e.constructor||Zi(e)?{}:mr(Rt(e))}function Ki(e){return gs(e)||Ts(e)||!!(xt&&e&&e[xt])}function zi(e,t){var n=typeof e;return!!(t=null==t?P:t)&&("number"==n||"symbol"!=n&&qe.test(e))&&e>-1&&e%1==0&&e<t}function qi(e,t,n){if(!Rs(n))return!1;var r=typeof t;return!!("number"==r?bs(n)&&zi(t,n.length):"string"==r&&t in n)&&ps(n[t],e)}function Xi(e,t){if(gs(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Us(e))||(we.test(e)||!De.test(e)||null!=t&&e in tt(t))}function Ji(e){var t=xi(e),n=pr[t];if("function"!=typeof n||!(t in gr.prototype))return!1;if(e===n)return!0;var r=Pi(n);return!!r&&e===r[0]}(Zn&&Yi(new Zn(new ArrayBuffer(1)))!=le||er&&Yi(new er)!=J||tr&&"[object Promise]"!=Yi(tr.resolve())||nr&&Yi(new nr)!=re||rr&&Yi(new rr)!=se)&&(Yi=function(e){var t=eo(e),n=t==ee?e.constructor:i,r=n?_a(n):"";if(r)switch(r){case sr:return le;case cr:return J;case ur:return"[object Promise]";case lr:return re;case dr:return se}return t});var Qi=ct?Ns:Vc;function Zi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||st)}function ea(e){return e==e&&!Rs(e)}function ta(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in tt(n)))}}function na(e,t,n){return t=Kn(t===i?e.length-1:t,0),function(){for(var o=arguments,i=-1,a=Kn(o.length-t,0),s=r(a);++i<a;)s[i]=o[t+i];i=-1;for(var c=r(t+1);++i<t;)c[i]=o[i];return c[t]=n(s),Gt(e,this,c)}}function ra(e,t){return t.length<2?e:Qr(e,ko(t,0,-1))}function oa(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ia=ua(Do),aa=Bn||function(e,t){return Lt.setTimeout(e,t)},sa=ua(wo);function ca(e,t,n){var r=t+"";return sa(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Ue,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return zt($,(function(n){var r="_."+n[0];t&n[1]&&!Qt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(He);return t?t[1].split(Be):[]}(r),n)))}function ua(e){var t=0,n=0;return function(){var r=qn(),o=w-(r-n);if(n=r,o>0){if(++t>=D)return arguments[0]}else t=0;return e.apply(i,arguments)}}function la(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var a=Oo(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var da=function(e){var t=us(e,(function(e){return n.size===d&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Me,(function(e,n,r,o){t.push(r?o.replace(Fe,"$1"):n||e)})),t}));function fa(e){if("string"==typeof e||Us(e))return e;var t=e+"";return"0"==t&&1/e==-L?"-0":t}function _a(e){if(null!=e){try{return ut.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ha(e){if(e instanceof gr)return e.clone();var t=new Tr(e.__wrapped__,e.__chain__);return t.__actions__=ii(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var pa=No((function(e,t){return vs(e)?jr(e,Gr(t,1,vs,!0)):[]})),ma=No((function(e,t){var n=ya(t);return vs(n)&&(n=i),vs(e)?jr(e,Gr(t,1,vs,!0),Hi(n,2)):[]})),Ea=No((function(e,t){var n=ya(t);return vs(n)&&(n=i),vs(e)?jr(e,Gr(t,1,vs,!0),i,n):[]}));function Ta(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:Ws(n);return o<0&&(o=Kn(r+o,0)),cn(e,Hi(t,3),o)}function ga(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=Ws(n),o=n<0?Kn(r+o,0):zn(o,r-1)),cn(e,Hi(t,3),o,!0)}function Aa(e){return(null==e?0:e.length)?Gr(e,1):[]}function ba(e){return e&&e.length?e[0]:i}var va=No((function(e){var t=en(e,Ko);return t.length&&t[0]===e[0]?oo(t):[]})),Ia=No((function(e){var t=ya(e),n=en(e,Ko);return t===ya(n)?t=i:n.pop(),n.length&&n[0]===e[0]?oo(n,Hi(t,2)):[]})),Oa=No((function(e){var t=ya(e),n=en(e,Ko);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?oo(n,i,t):[]}));function ya(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Na=No(Sa);function Sa(e,t){return e&&e.length&&t&&t.length?vo(e,t):e}var Ca=Mi((function(e,t){var n=null==e?0:e.length,r=Pr(e,t);return Io(e,en(t,(function(e){return zi(e,n)?+e:e})).sort(ni)),r}));function Ra(e){return null==e?e:Qn.call(e)}var Da=No((function(e){return jo(Gr(e,1,vs,!0))})),wa=No((function(e){var t=ya(e);return vs(t)&&(t=i),jo(Gr(e,1,vs,!0),Hi(t,2))})),Ma=No((function(e){var t=ya(e);return t="function"==typeof t?t:i,jo(Gr(e,1,vs,!0),i,t)}));function ka(e){if(!e||!e.length)return[];var t=0;return e=Jt(e,(function(e){if(vs(e))return t=Kn(e.length,t),!0})),En(t,(function(t){return en(e,_n(t))}))}function La(e,t){if(!e||!e.length)return[];var n=ka(e);return null==t?n:en(n,(function(e){return Gt(t,i,e)}))}var Pa=No((function(e,t){return vs(e)?jr(e,t):[]})),xa=No((function(e){return Vo(Jt(e,vs))})),Ua=No((function(e){var t=ya(e);return vs(t)&&(t=i),Vo(Jt(e,vs),Hi(t,2))})),Ha=No((function(e){var t=ya(e);return t="function"==typeof t?t:i,Vo(Jt(e,vs),i,t)})),Ba=No(ka);var ja=No((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,La(e,n)}));function $a(e){var t=pr(e);return t.__chain__=!0,t}function Fa(e,t){return t(e)}var Wa=Mi((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return Pr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof gr&&zi(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Fa,args:[o],thisArg:i}),new Tr(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));var Ya=si((function(e,t,n){lt.call(e,n)?++e[n]:Lr(e,n,1)}));var Va=hi(Ta),Ga=hi(ga);function Ka(e,t){return(gs(e)?zt:$r)(e,Hi(t,3))}function za(e,t){return(gs(e)?qt:Fr)(e,Hi(t,3))}var qa=si((function(e,t,n){lt.call(e,n)?e[n].push(t):Lr(e,n,[t])}));var Xa=No((function(e,t,n){var o=-1,i="function"==typeof t,a=bs(e)?r(e.length):[];return $r(e,(function(e){a[++o]=i?Gt(t,e,n):io(e,t,n)})),a})),Ja=si((function(e,t,n){Lr(e,n,t)}));function Qa(e,t){return(gs(e)?en:po)(e,Hi(t,3))}var Za=si((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var es=No((function(e,t){if(null==e)return[];var n=t.length;return n>1&&qi(e,t[0],t[1])?t=[]:n>2&&qi(t[0],t[1],t[2])&&(t=[t[0]]),Ao(e,Gr(t,1),[])})),ts=Hn||function(){return Lt.Date.now()};function ns(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Si(e,y,i,i,i,i,t)}function rs(e,t){var n;if("function"!=typeof t)throw new ot(c);return e=Ws(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var os=No((function(e,t,n){var r=T;if(n.length){var o=Dn(n,Ui(os));r|=I}return Si(e,r,t,n,o)})),is=No((function(e,t,n){var r=T|g;if(n.length){var o=Dn(n,Ui(is));r|=I}return Si(t,r,e,n,o)}));function as(e,t,n){var r,o,a,s,u,l,d=0,f=!1,_=!1,h=!0;if("function"!=typeof e)throw new ot(c);function p(t){var n=r,a=o;return r=o=i,d=t,s=e.apply(a,n)}function m(e){var n=e-l;return l===i||n>=t||n<0||_&&e-d>=a}function E(){var e=ts();if(m(e))return T(e);u=aa(E,function(e){var n=t-(e-l);return _?zn(n,a-(e-d)):n}(e))}function T(e){return u=i,h&&r?p(e):(r=o=i,s)}function g(){var e=ts(),n=m(e);if(r=arguments,o=this,l=e,n){if(u===i)return function(e){return d=e,u=aa(E,t),f?p(e):s}(l);if(_)return Qo(u),u=aa(E,t),p(l)}return u===i&&(u=aa(E,t)),s}return t=Vs(t)||0,Rs(n)&&(f=!!n.leading,a=(_="maxWait"in n)?Kn(Vs(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),g.cancel=function(){u!==i&&Qo(u),d=0,r=l=o=u=i},g.flush=function(){return u===i?s:T(ts())},g}var ss=No((function(e,t){return Br(e,1,t)})),cs=No((function(e,t,n){return Br(e,Vs(t)||0,n)}));function us(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ot(c);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(us.Cache||vr),n}function ls(e){if("function"!=typeof e)throw new ot(c);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}us.Cache=vr;var ds=Xo((function(e,t){var n=(t=1==t.length&&gs(t[0])?en(t[0],gn(Hi())):en(Gr(t,1),gn(Hi()))).length;return No((function(r){for(var o=-1,i=zn(r.length,n);++o<i;)r[o]=t[o].call(this,r[o]);return Gt(e,this,r)}))})),fs=No((function(e,t){var n=Dn(t,Ui(fs));return Si(e,I,i,t,n)})),_s=No((function(e,t){var n=Dn(t,Ui(_s));return Si(e,O,i,t,n)})),hs=Mi((function(e,t){return Si(e,N,i,i,i,t)}));function ps(e,t){return e===t||e!=e&&t!=t}var ms=vi(to),Es=vi((function(e,t){return e>=t})),Ts=ao(function(){return arguments}())?ao:function(e){return Ds(e)&&lt.call(e,"callee")&&!kt.call(e,"callee")},gs=r.isArray,As=jt?gn(jt):function(e){return Ds(e)&&eo(e)==ue};function bs(e){return null!=e&&Cs(e.length)&&!Ns(e)}function vs(e){return Ds(e)&&bs(e)}var Is=Wn||Vc,Os=$t?gn($t):function(e){return Ds(e)&&eo(e)==G};function ys(e){if(!Ds(e))return!1;var t=eo(e);return t==z||t==K||"string"==typeof e.message&&"string"==typeof e.name&&!ks(e)}function Ns(e){if(!Rs(e))return!1;var t=eo(e);return t==q||t==X||t==Y||t==te}function Ss(e){return"number"==typeof e&&e==Ws(e)}function Cs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=P}function Rs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ds(e){return null!=e&&"object"==typeof e}var ws=Ft?gn(Ft):function(e){return Ds(e)&&Yi(e)==J};function Ms(e){return"number"==typeof e||Ds(e)&&eo(e)==Q}function ks(e){if(!Ds(e)||eo(e)!=ee)return!1;var t=Rt(e);if(null===t)return!0;var n=lt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ut.call(n)==ht}var Ls=Wt?gn(Wt):function(e){return Ds(e)&&eo(e)==ne};var Ps=Yt?gn(Yt):function(e){return Ds(e)&&Yi(e)==re};function xs(e){return"string"==typeof e||!gs(e)&&Ds(e)&&eo(e)==oe}function Us(e){return"symbol"==typeof e||Ds(e)&&eo(e)==ie}var Hs=Vt?gn(Vt):function(e){return Ds(e)&&Cs(e.length)&&!!St[eo(e)]};var Bs=vi(ho),js=vi((function(e,t){return e<=t}));function $s(e){if(!e)return[];if(bs(e))return xs(e)?Ln(e):ii(e);if(Ht&&e[Ht])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ht]());var t=Yi(e);return(t==J?Cn:t==re?wn:pc)(e)}function Fs(e){return e?(e=Vs(e))===L||e===-L?(e<0?-1:1)*x:e==e?e:0:0===e?e:0}function Ws(e){var t=Fs(e),n=t%1;return t==t?n?t-n:t:0}function Ys(e){return e?xr(Ws(e),0,H):0}function Vs(e){if("number"==typeof e)return e;if(Us(e))return U;if(Rs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Rs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Tn(e);var n=Ge.test(e);return n||ze.test(e)?wt(e.slice(2),n?2:8):Ve.test(e)?U:+e}function Gs(e){return ai(e,sc(e))}function Ks(e){return null==e?"":Bo(e)}var zs=ci((function(e,t){if(Zi(t)||bs(t))ai(t,ac(t),e);else for(var n in t)lt.call(t,n)&&Dr(e,n,t[n])})),qs=ci((function(e,t){ai(t,sc(t),e)})),Xs=ci((function(e,t,n,r){ai(t,sc(t),e,r)})),Js=ci((function(e,t,n,r){ai(t,ac(t),e,r)})),Qs=Mi(Pr);var Zs=No((function(e,t){e=tt(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&qi(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],s=sc(a),c=-1,u=s.length;++c<u;){var l=s[c],d=e[l];(d===i||ps(d,st[l])&&!lt.call(e,l))&&(e[l]=a[l])}return e})),ec=No((function(e){return e.push(i,Ri),Gt(uc,i,e)}));function tc(e,t,n){var r=null==e?i:Qr(e,t);return r===i?n:r}function nc(e,t){return null!=e&&Vi(e,t,ro)}var rc=Ei((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=_t.call(t)),e[t]=n}),Rc(Mc)),oc=Ei((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=_t.call(t)),lt.call(e,t)?e[t].push(n):e[t]=[n]}),Hi),ic=No(io);function ac(e){return bs(e)?yr(e):fo(e)}function sc(e){return bs(e)?yr(e,!0):_o(e)}var cc=ci((function(e,t,n){To(e,t,n)})),uc=ci((function(e,t,n,r){To(e,t,n,r)})),lc=Mi((function(e,t){var n={};if(null==e)return n;var r=!1;t=en(t,(function(t){return t=qo(t,e),r||(r=t.length>1),t})),ai(e,Li(e),n),r&&(n=Ur(n,_|h|p,Di));for(var o=t.length;o--;)$o(n,t[o]);return n}));var dc=Mi((function(e,t){return null==e?{}:function(e,t){return bo(e,t,(function(t,n){return nc(e,n)}))}(e,t)}));function fc(e,t){if(null==e)return{};var n=en(Li(e),(function(e){return[e]}));return t=Hi(t),bo(e,n,(function(e,n){return t(e,n[0])}))}var _c=Ni(ac),hc=Ni(sc);function pc(e){return null==e?[]:An(e,ac(e))}var mc=fi((function(e,t,n){return t=t.toLowerCase(),e+(n?Ec(t):t)}));function Ec(e){return yc(Ks(e).toLowerCase())}function Tc(e){return(e=Ks(e))&&e.replace(Xe,On).replace(At,"")}var gc=fi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ac=fi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),bc=di("toLowerCase");var vc=fi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ic=fi((function(e,t,n){return e+(n?" ":"")+yc(t)}));var Oc=fi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),yc=di("toUpperCase");function Nc(e,t,n){return e=Ks(e),(t=n?i:t)===i?function(e){return Ot.test(e)}(e)?function(e){return e.match(vt)||[]}(e):function(e){return e.match(je)||[]}(e):e.match(t)||[]}var Sc=No((function(e,t){try{return Gt(e,i,t)}catch(e){return ys(e)?e:new xe(e)}})),Cc=Mi((function(e,t){return zt(t,(function(t){t=fa(t),Lr(e,t,os(e[t],e))})),e}));function Rc(e){return function(){return e}}var Dc=pi(),wc=pi(!0);function Mc(e){return e}function kc(e){return lo("function"==typeof e?e:Ur(e,_))}var Lc=No((function(e,t){return function(n){return io(n,e,t)}})),Pc=No((function(e,t){return function(n){return io(e,n,t)}}));function xc(e,t,n){var r=ac(t),o=Jr(t,r);null!=n||Rs(t)&&(o.length||!r.length)||(n=t,t=e,e=this,o=Jr(t,ac(t)));var i=!(Rs(n)&&"chain"in n&&!n.chain),a=Ns(e);return zt(o,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),o=n.__actions__=ii(this.__actions__);return o.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,tn([this.value()],arguments))})})),e}function Uc(){}var Hc=gi(en),Bc=gi(Xt),jc=gi(on);function $c(e){return Xi(e)?_n(fa(e)):function(e){return function(t){return Qr(t,e)}}(e)}var Fc=bi(),Wc=bi(!0);function Yc(){return[]}function Vc(){return!1}var Gc=Ti((function(e,t){return e+t}),0),Kc=Oi("ceil"),zc=Ti((function(e,t){return e/t}),1),qc=Oi("floor");var Xc,Jc=Ti((function(e,t){return e*t}),1),Qc=Oi("round"),Zc=Ti((function(e,t){return e-t}),0);return pr.after=function(e,t){if("function"!=typeof t)throw new ot(c);return e=Ws(e),function(){if(--e<1)return t.apply(this,arguments)}},pr.ary=ns,pr.assign=zs,pr.assignIn=qs,pr.assignInWith=Xs,pr.assignWith=Js,pr.at=Qs,pr.before=rs,pr.bind=os,pr.bindAll=Cc,pr.bindKey=is,pr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return gs(e)?e:[e]},pr.chain=$a,pr.chunk=function(e,t,n){t=(n?qi(e,t,n):t===i)?1:Kn(Ws(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,s=0,c=r(jn(o/t));a<o;)c[s++]=ko(e,a,a+=t);return c},pr.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o},pr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return tn(gs(n)?ii(n):[n],Gr(t,1))},pr.cond=function(e){var t=null==e?0:e.length,n=Hi();return e=t?en(e,(function(e){if("function"!=typeof e[1])throw new ot(c);return[n(e[0]),e[1]]})):[],No((function(n){for(var r=-1;++r<t;){var o=e[r];if(Gt(o[0],this,n))return Gt(o[1],this,n)}}))},pr.conforms=function(e){return function(e){var t=ac(e);return function(n){return Hr(n,e,t)}}(Ur(e,_))},pr.constant=Rc,pr.countBy=Ya,pr.create=function(e,t){var n=mr(e);return null==t?n:kr(n,t)},pr.curry=function e(t,n,r){var o=Si(t,b,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},pr.curryRight=function e(t,n,r){var o=Si(t,v,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},pr.debounce=as,pr.defaults=Zs,pr.defaultsDeep=ec,pr.defer=ss,pr.delay=cs,pr.difference=pa,pr.differenceBy=ma,pr.differenceWith=Ea,pr.drop=function(e,t,n){var r=null==e?0:e.length;return r?ko(e,(t=n||t===i?1:Ws(t))<0?0:t,r):[]},pr.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ko(e,0,(t=r-(t=n||t===i?1:Ws(t)))<0?0:t):[]},pr.dropRightWhile=function(e,t){return e&&e.length?Wo(e,Hi(t,3),!0,!0):[]},pr.dropWhile=function(e,t){return e&&e.length?Wo(e,Hi(t,3),!0):[]},pr.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&qi(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=Ws(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:Ws(r))<0&&(r+=o),r=n>r?0:Ys(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},pr.filter=function(e,t){return(gs(e)?Jt:Vr)(e,Hi(t,3))},pr.flatMap=function(e,t){return Gr(Qa(e,t),1)},pr.flatMapDeep=function(e,t){return Gr(Qa(e,t),L)},pr.flatMapDepth=function(e,t,n){return n=n===i?1:Ws(n),Gr(Qa(e,t),n)},pr.flatten=Aa,pr.flattenDeep=function(e){return(null==e?0:e.length)?Gr(e,L):[]},pr.flattenDepth=function(e,t){return(null==e?0:e.length)?Gr(e,t=t===i?1:Ws(t)):[]},pr.flip=function(e){return Si(e,S)},pr.flow=Dc,pr.flowRight=wc,pr.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},pr.functions=function(e){return null==e?[]:Jr(e,ac(e))},pr.functionsIn=function(e){return null==e?[]:Jr(e,sc(e))},pr.groupBy=qa,pr.initial=function(e){return(null==e?0:e.length)?ko(e,0,-1):[]},pr.intersection=va,pr.intersectionBy=Ia,pr.intersectionWith=Oa,pr.invert=rc,pr.invertBy=oc,pr.invokeMap=Xa,pr.iteratee=kc,pr.keyBy=Ja,pr.keys=ac,pr.keysIn=sc,pr.map=Qa,pr.mapKeys=function(e,t){var n={};return t=Hi(t,3),qr(e,(function(e,r,o){Lr(n,t(e,r,o),e)})),n},pr.mapValues=function(e,t){var n={};return t=Hi(t,3),qr(e,(function(e,r,o){Lr(n,r,t(e,r,o))})),n},pr.matches=function(e){return mo(Ur(e,_))},pr.matchesProperty=function(e,t){return Eo(e,Ur(t,_))},pr.memoize=us,pr.merge=cc,pr.mergeWith=uc,pr.method=Lc,pr.methodOf=Pc,pr.mixin=xc,pr.negate=ls,pr.nthArg=function(e){return e=Ws(e),No((function(t){return go(t,e)}))},pr.omit=lc,pr.omitBy=function(e,t){return fc(e,ls(Hi(t)))},pr.once=function(e){return rs(2,e)},pr.orderBy=function(e,t,n,r){return null==e?[]:(gs(t)||(t=null==t?[]:[t]),gs(n=r?i:n)||(n=null==n?[]:[n]),Ao(e,t,n))},pr.over=Hc,pr.overArgs=ds,pr.overEvery=Bc,pr.overSome=jc,pr.partial=fs,pr.partialRight=_s,pr.partition=Za,pr.pick=dc,pr.pickBy=fc,pr.property=$c,pr.propertyOf=function(e){return function(t){return null==e?i:Qr(e,t)}},pr.pull=Na,pr.pullAll=Sa,pr.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?vo(e,t,Hi(n,2)):e},pr.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?vo(e,t,i,n):e},pr.pullAt=Ca,pr.range=Fc,pr.rangeRight=Wc,pr.rearg=hs,pr.reject=function(e,t){return(gs(e)?Jt:Vr)(e,ls(Hi(t,3)))},pr.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=Hi(t,3);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return Io(e,o),n},pr.rest=function(e,t){if("function"!=typeof e)throw new ot(c);return No(e,t=t===i?t:Ws(t))},pr.reverse=Ra,pr.sampleSize=function(e,t,n){return t=(n?qi(e,t,n):t===i)?1:Ws(t),(gs(e)?Sr:Co)(e,t)},pr.set=function(e,t,n){return null==e?e:Ro(e,t,n)},pr.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Ro(e,t,n,r)},pr.shuffle=function(e){return(gs(e)?Cr:Mo)(e)},pr.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&qi(e,t,n)?(t=0,n=r):(t=null==t?0:Ws(t),n=n===i?r:Ws(n)),ko(e,t,n)):[]},pr.sortBy=es,pr.sortedUniq=function(e){return e&&e.length?Uo(e):[]},pr.sortedUniqBy=function(e,t){return e&&e.length?Uo(e,Hi(t,2)):[]},pr.split=function(e,t,n){return n&&"number"!=typeof n&&qi(e,t,n)&&(t=n=i),(n=n===i?H:n>>>0)?(e=Ks(e))&&("string"==typeof t||null!=t&&!Ls(t))&&!(t=Bo(t))&&Sn(e)?Jo(Ln(e),0,n):e.split(t,n):[]},pr.spread=function(e,t){if("function"!=typeof e)throw new ot(c);return t=null==t?0:Kn(Ws(t),0),No((function(n){var r=n[t],o=Jo(n,0,t);return r&&tn(o,r),Gt(e,this,o)}))},pr.tail=function(e){var t=null==e?0:e.length;return t?ko(e,1,t):[]},pr.take=function(e,t,n){return e&&e.length?ko(e,0,(t=n||t===i?1:Ws(t))<0?0:t):[]},pr.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ko(e,(t=r-(t=n||t===i?1:Ws(t)))<0?0:t,r):[]},pr.takeRightWhile=function(e,t){return e&&e.length?Wo(e,Hi(t,3),!1,!0):[]},pr.takeWhile=function(e,t){return e&&e.length?Wo(e,Hi(t,3)):[]},pr.tap=function(e,t){return t(e),e},pr.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new ot(c);return Rs(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),as(e,t,{leading:r,maxWait:t,trailing:o})},pr.thru=Fa,pr.toArray=$s,pr.toPairs=_c,pr.toPairsIn=hc,pr.toPath=function(e){return gs(e)?en(e,fa):Us(e)?[e]:ii(da(Ks(e)))},pr.toPlainObject=Gs,pr.transform=function(e,t,n){var r=gs(e),o=r||Is(e)||Hs(e);if(t=Hi(t,4),null==n){var i=e&&e.constructor;n=o?r?new i:[]:Rs(e)&&Ns(i)?mr(Rt(e)):{}}return(o?zt:qr)(e,(function(e,r,o){return t(n,e,r,o)})),n},pr.unary=function(e){return ns(e,1)},pr.union=Da,pr.unionBy=wa,pr.unionWith=Ma,pr.uniq=function(e){return e&&e.length?jo(e):[]},pr.uniqBy=function(e,t){return e&&e.length?jo(e,Hi(t,2)):[]},pr.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?jo(e,i,t):[]},pr.unset=function(e,t){return null==e||$o(e,t)},pr.unzip=ka,pr.unzipWith=La,pr.update=function(e,t,n){return null==e?e:Fo(e,t,zo(n))},pr.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Fo(e,t,zo(n),r)},pr.values=pc,pr.valuesIn=function(e){return null==e?[]:An(e,sc(e))},pr.without=Pa,pr.words=Nc,pr.wrap=function(e,t){return fs(zo(t),e)},pr.xor=xa,pr.xorBy=Ua,pr.xorWith=Ha,pr.zip=Ba,pr.zipObject=function(e,t){return Go(e||[],t||[],Dr)},pr.zipObjectDeep=function(e,t){return Go(e||[],t||[],Ro)},pr.zipWith=ja,pr.entries=_c,pr.entriesIn=hc,pr.extend=qs,pr.extendWith=Xs,xc(pr,pr),pr.add=Gc,pr.attempt=Sc,pr.camelCase=mc,pr.capitalize=Ec,pr.ceil=Kc,pr.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=Vs(n))==n?n:0),t!==i&&(t=(t=Vs(t))==t?t:0),xr(Vs(e),t,n)},pr.clone=function(e){return Ur(e,p)},pr.cloneDeep=function(e){return Ur(e,_|p)},pr.cloneDeepWith=function(e,t){return Ur(e,_|p,t="function"==typeof t?t:i)},pr.cloneWith=function(e,t){return Ur(e,p,t="function"==typeof t?t:i)},pr.conformsTo=function(e,t){return null==t||Hr(e,t,ac(t))},pr.deburr=Tc,pr.defaultTo=function(e,t){return null==e||e!=e?t:e},pr.divide=zc,pr.endsWith=function(e,t,n){e=Ks(e),t=Bo(t);var r=e.length,o=n=n===i?r:xr(Ws(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},pr.eq=ps,pr.escape=function(e){return(e=Ks(e))&&Ne.test(e)?e.replace(Oe,yn):e},pr.escapeRegExp=function(e){return(e=Ks(e))&&Le.test(e)?e.replace(ke,"\\$&"):e},pr.every=function(e,t,n){var r=gs(e)?Xt:Wr;return n&&qi(e,t,n)&&(t=i),r(e,Hi(t,3))},pr.find=Va,pr.findIndex=Ta,pr.findKey=function(e,t){return sn(e,Hi(t,3),qr)},pr.findLast=Ga,pr.findLastIndex=ga,pr.findLastKey=function(e,t){return sn(e,Hi(t,3),Xr)},pr.floor=qc,pr.forEach=Ka,pr.forEachRight=za,pr.forIn=function(e,t){return null==e?e:Kr(e,Hi(t,3),sc)},pr.forInRight=function(e,t){return null==e?e:zr(e,Hi(t,3),sc)},pr.forOwn=function(e,t){return e&&qr(e,Hi(t,3))},pr.forOwnRight=function(e,t){return e&&Xr(e,Hi(t,3))},pr.get=tc,pr.gt=ms,pr.gte=Es,pr.has=function(e,t){return null!=e&&Vi(e,t,no)},pr.hasIn=nc,pr.head=ba,pr.identity=Mc,pr.includes=function(e,t,n,r){e=bs(e)?e:pc(e),n=n&&!r?Ws(n):0;var o=e.length;return n<0&&(n=Kn(o+n,0)),xs(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&un(e,t,n)>-1},pr.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:Ws(n);return o<0&&(o=Kn(r+o,0)),un(e,t,o)},pr.inRange=function(e,t,n){return t=Fs(t),n===i?(n=t,t=0):n=Fs(n),function(e,t,n){return e>=zn(t,n)&&e<Kn(t,n)}(e=Vs(e),t,n)},pr.invoke=ic,pr.isArguments=Ts,pr.isArray=gs,pr.isArrayBuffer=As,pr.isArrayLike=bs,pr.isArrayLikeObject=vs,pr.isBoolean=function(e){return!0===e||!1===e||Ds(e)&&eo(e)==V},pr.isBuffer=Is,pr.isDate=Os,pr.isElement=function(e){return Ds(e)&&1===e.nodeType&&!ks(e)},pr.isEmpty=function(e){if(null==e)return!0;if(bs(e)&&(gs(e)||"string"==typeof e||"function"==typeof e.splice||Is(e)||Hs(e)||Ts(e)))return!e.length;var t=Yi(e);if(t==J||t==re)return!e.size;if(Zi(e))return!fo(e).length;for(var n in e)if(lt.call(e,n))return!1;return!0},pr.isEqual=function(e,t){return so(e,t)},pr.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?so(e,t,i,n):!!r},pr.isError=ys,pr.isFinite=function(e){return"number"==typeof e&&Yn(e)},pr.isFunction=Ns,pr.isInteger=Ss,pr.isLength=Cs,pr.isMap=ws,pr.isMatch=function(e,t){return e===t||co(e,t,ji(t))},pr.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,co(e,t,ji(t),n)},pr.isNaN=function(e){return Ms(e)&&e!=+e},pr.isNative=function(e){if(Qi(e))throw new xe(s);return uo(e)},pr.isNil=function(e){return null==e},pr.isNull=function(e){return null===e},pr.isNumber=Ms,pr.isObject=Rs,pr.isObjectLike=Ds,pr.isPlainObject=ks,pr.isRegExp=Ls,pr.isSafeInteger=function(e){return Ss(e)&&e>=-P&&e<=P},pr.isSet=Ps,pr.isString=xs,pr.isSymbol=Us,pr.isTypedArray=Hs,pr.isUndefined=function(e){return e===i},pr.isWeakMap=function(e){return Ds(e)&&Yi(e)==se},pr.isWeakSet=function(e){return Ds(e)&&eo(e)==ce},pr.join=function(e,t){return null==e?"":Vn.call(e,t)},pr.kebabCase=gc,pr.last=ya,pr.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=Ws(n))<0?Kn(r+o,0):zn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):cn(e,dn,o,!0)},pr.lowerCase=Ac,pr.lowerFirst=bc,pr.lt=Bs,pr.lte=js,pr.max=function(e){return e&&e.length?Yr(e,Mc,to):i},pr.maxBy=function(e,t){return e&&e.length?Yr(e,Hi(t,2),to):i},pr.mean=function(e){return fn(e,Mc)},pr.meanBy=function(e,t){return fn(e,Hi(t,2))},pr.min=function(e){return e&&e.length?Yr(e,Mc,ho):i},pr.minBy=function(e,t){return e&&e.length?Yr(e,Hi(t,2),ho):i},pr.stubArray=Yc,pr.stubFalse=Vc,pr.stubObject=function(){return{}},pr.stubString=function(){return""},pr.stubTrue=function(){return!0},pr.multiply=Jc,pr.nth=function(e,t){return e&&e.length?go(e,Ws(t)):i},pr.noConflict=function(){return Lt._===this&&(Lt._=pt),this},pr.noop=Uc,pr.now=ts,pr.pad=function(e,t,n){e=Ks(e);var r=(t=Ws(t))?kn(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return Ai($n(o),n)+e+Ai(jn(o),n)},pr.padEnd=function(e,t,n){e=Ks(e);var r=(t=Ws(t))?kn(e):0;return t&&r<t?e+Ai(t-r,n):e},pr.padStart=function(e,t,n){e=Ks(e);var r=(t=Ws(t))?kn(e):0;return t&&r<t?Ai(t-r,n)+e:e},pr.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Xn(Ks(e).replace(Pe,""),t||0)},pr.random=function(e,t,n){if(n&&"boolean"!=typeof n&&qi(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=Fs(e),t===i?(t=e,e=0):t=Fs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Jn();return zn(e+o*(t-e+Dt("1e-"+((o+"").length-1))),t)}return Oo(e,t)},pr.reduce=function(e,t,n){var r=gs(e)?nn:pn,o=arguments.length<3;return r(e,Hi(t,4),n,o,$r)},pr.reduceRight=function(e,t,n){var r=gs(e)?rn:pn,o=arguments.length<3;return r(e,Hi(t,4),n,o,Fr)},pr.repeat=function(e,t,n){return t=(n?qi(e,t,n):t===i)?1:Ws(t),yo(Ks(e),t)},pr.replace=function(){var e=arguments,t=Ks(e[0]);return e.length<3?t:t.replace(e[1],e[2])},pr.result=function(e,t,n){var r=-1,o=(t=qo(t,e)).length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[fa(t[r])];a===i&&(r=o,a=n),e=Ns(a)?a.call(e):a}return e},pr.round=Qc,pr.runInContext=e,pr.sample=function(e){return(gs(e)?Nr:So)(e)},pr.size=function(e){if(null==e)return 0;if(bs(e))return xs(e)?kn(e):e.length;var t=Yi(e);return t==J||t==re?e.size:fo(e).length},pr.snakeCase=vc,pr.some=function(e,t,n){var r=gs(e)?on:Lo;return n&&qi(e,t,n)&&(t=i),r(e,Hi(t,3))},pr.sortedIndex=function(e,t){return Po(e,t)},pr.sortedIndexBy=function(e,t,n){return xo(e,t,Hi(n,2))},pr.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Po(e,t);if(r<n&&ps(e[r],t))return r}return-1},pr.sortedLastIndex=function(e,t){return Po(e,t,!0)},pr.sortedLastIndexBy=function(e,t,n){return xo(e,t,Hi(n,2),!0)},pr.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Po(e,t,!0)-1;if(ps(e[n],t))return n}return-1},pr.startCase=Ic,pr.startsWith=function(e,t,n){return e=Ks(e),n=null==n?0:xr(Ws(n),0,e.length),t=Bo(t),e.slice(n,n+t.length)==t},pr.subtract=Zc,pr.sum=function(e){return e&&e.length?mn(e,Mc):0},pr.sumBy=function(e,t){return e&&e.length?mn(e,Hi(t,2)):0},pr.template=function(e,t,n){var r=pr.templateSettings;n&&qi(e,t,n)&&(t=i),e=Ks(e),t=Xs({},t,r,Ci);var o,a,s=Xs({},t.imports,r.imports,Ci),c=ac(s),l=An(s,c),d=0,f=t.interpolate||Je,_="__p += '",h=nt((t.escape||Je).source+"|"+f.source+"|"+(f===Re?We:Je).source+"|"+(t.evaluate||Je).source+"|$","g"),p="//# sourceURL="+(lt.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Nt+"]")+"\n";e.replace(h,(function(t,n,r,i,s,c){return r||(r=i),_+=e.slice(d,c).replace(Qe,Nn),n&&(o=!0,_+="' +\n__e("+n+") +\n'"),s&&(a=!0,_+="';\n"+s+";\n__p += '"),r&&(_+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),d=c+t.length,t})),_+="';\n";var m=lt.call(t,"variable")&&t.variable;if(m){if($e.test(m))throw new xe(u)}else _="with (obj) {\n"+_+"\n}\n";_=(a?_.replace(Ae,""):_).replace(be,"$1").replace(ve,"$1;"),_="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+_+"return __p\n}";var E=Sc((function(){return Ze(c,p+"return "+_).apply(i,l)}));if(E.source=_,ys(E))throw E;return E},pr.times=function(e,t){if((e=Ws(e))<1||e>P)return[];var n=H,r=zn(e,H);t=Hi(t),e-=H;for(var o=En(r,t);++n<e;)t(n);return o},pr.toFinite=Fs,pr.toInteger=Ws,pr.toLength=Ys,pr.toLower=function(e){return Ks(e).toLowerCase()},pr.toNumber=Vs,pr.toSafeInteger=function(e){return e?xr(Ws(e),-P,P):0===e?e:0},pr.toString=Ks,pr.toUpper=function(e){return Ks(e).toUpperCase()},pr.trim=function(e,t,n){if((e=Ks(e))&&(n||t===i))return Tn(e);if(!e||!(t=Bo(t)))return e;var r=Ln(e),o=Ln(t);return Jo(r,vn(r,o),In(r,o)+1).join("")},pr.trimEnd=function(e,t,n){if((e=Ks(e))&&(n||t===i))return e.slice(0,Pn(e)+1);if(!e||!(t=Bo(t)))return e;var r=Ln(e);return Jo(r,0,In(r,Ln(t))+1).join("")},pr.trimStart=function(e,t,n){if((e=Ks(e))&&(n||t===i))return e.replace(Pe,"");if(!e||!(t=Bo(t)))return e;var r=Ln(e);return Jo(r,vn(r,Ln(t))).join("")},pr.truncate=function(e,t){var n=C,r=R;if(Rs(t)){var o="separator"in t?t.separator:o;n="length"in t?Ws(t.length):n,r="omission"in t?Bo(t.omission):r}var a=(e=Ks(e)).length;if(Sn(e)){var s=Ln(e);a=s.length}if(n>=a)return e;var c=n-kn(r);if(c<1)return r;var u=s?Jo(s,0,c).join(""):e.slice(0,c);if(o===i)return u+r;if(s&&(c+=u.length-c),Ls(o)){if(e.slice(c).search(o)){var l,d=u;for(o.global||(o=nt(o.source,Ks(Ye.exec(o))+"g")),o.lastIndex=0;l=o.exec(d);)var f=l.index;u=u.slice(0,f===i?c:f)}}else if(e.indexOf(Bo(o),c)!=c){var _=u.lastIndexOf(o);_>-1&&(u=u.slice(0,_))}return u+r},pr.unescape=function(e){return(e=Ks(e))&&ye.test(e)?e.replace(Ie,xn):e},pr.uniqueId=function(e){var t=++dt;return Ks(e)+t},pr.upperCase=Oc,pr.upperFirst=yc,pr.each=Ka,pr.eachRight=za,pr.first=ba,xc(pr,(Xc={},qr(pr,(function(e,t){lt.call(pr.prototype,t)||(Xc[t]=e)})),Xc),{chain:!1}),pr.VERSION="4.17.21",zt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){pr[e].placeholder=pr})),zt(["drop","take"],(function(e,t){gr.prototype[e]=function(n){n=n===i?1:Kn(Ws(n),0);var r=this.__filtered__&&!t?new gr(this):this.clone();return r.__filtered__?r.__takeCount__=zn(n,r.__takeCount__):r.__views__.push({size:zn(n,H),type:e+(r.__dir__<0?"Right":"")}),r},gr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),zt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=n==M||3==n;gr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Hi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),zt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");gr.prototype[e]=function(){return this[n](1).value()[0]}})),zt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");gr.prototype[e]=function(){return this.__filtered__?new gr(this):this[n](1)}})),gr.prototype.compact=function(){return this.filter(Mc)},gr.prototype.find=function(e){return this.filter(e).head()},gr.prototype.findLast=function(e){return this.reverse().find(e)},gr.prototype.invokeMap=No((function(e,t){return"function"==typeof e?new gr(this):this.map((function(n){return io(n,e,t)}))})),gr.prototype.reject=function(e){return this.filter(ls(Hi(e)))},gr.prototype.slice=function(e,t){e=Ws(e);var n=this;return n.__filtered__&&(e>0||t<0)?new gr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=Ws(t))<0?n.dropRight(-t):n.take(t-e)),n)},gr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},gr.prototype.toArray=function(){return this.take(H)},qr(gr.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=pr[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);o&&(pr.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,c=t instanceof gr,u=s[0],l=c||gs(t),d=function(e){var t=o.apply(pr,tn([e],s));return r&&f?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(c=l=!1);var f=this.__chain__,_=!!this.__actions__.length,h=a&&!f,p=c&&!_;if(!a&&l){t=p?t:new gr(this);var m=e.apply(t,s);return m.__actions__.push({func:Fa,args:[d],thisArg:i}),new Tr(m,f)}return h&&p?e.apply(this,s):(m=this.thru(d),h?r?m.value()[0]:m.value():m)})})),zt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=it[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);pr.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(gs(o)?o:[],e)}return this[n]((function(n){return t.apply(gs(n)?n:[],e)}))}})),qr(gr.prototype,(function(e,t){var n=pr[t];if(n){var r=n.name+"";lt.call(ar,r)||(ar[r]=[]),ar[r].push({name:t,func:n})}})),ar[mi(i,g).name]=[{name:"wrapper",func:i}],gr.prototype.clone=function(){var e=new gr(this.__wrapped__);return e.__actions__=ii(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ii(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ii(this.__views__),e},gr.prototype.reverse=function(){if(this.__filtered__){var e=new gr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},gr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=gs(e),r=t<0,o=n?e.length:0,i=function(e,t,n){var r=-1,o=n.length;for(;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=zn(t,e+a);break;case"takeRight":e=Kn(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,s=i.end,c=s-a,u=r?s:a-1,l=this.__iteratees__,d=l.length,f=0,_=zn(c,this.__takeCount__);if(!n||!r&&o==c&&_==c)return Yo(e,this.__actions__);var h=[];e:for(;c--&&f<_;){for(var p=-1,m=e[u+=t];++p<d;){var E=l[p],T=E.iteratee,g=E.type,A=T(m);if(g==k)m=A;else if(!A){if(g==M)continue e;break e}}h[f++]=m}return h},pr.prototype.at=Wa,pr.prototype.chain=function(){return $a(this)},pr.prototype.commit=function(){return new Tr(this.value(),this.__chain__)},pr.prototype.next=function(){this.__values__===i&&(this.__values__=$s(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},pr.prototype.plant=function(e){for(var t,n=this;n instanceof Er;){var r=ha(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},pr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof gr){var t=e;return this.__actions__.length&&(t=new gr(this)),(t=t.reverse()).__actions__.push({func:Fa,args:[Ra],thisArg:i}),new Tr(t,this.__chain__)}return this.thru(Ra)},pr.prototype.toJSON=pr.prototype.valueOf=pr.prototype.value=function(){return Yo(this.__wrapped__,this.__actions__)},pr.prototype.first=pr.prototype.head,Ht&&(pr.prototype[Ht]=function(){return this}),pr}();Lt._=Un,(o=function(){return Un}.call(t,n,t,r))===i||(r.exports=o)}).call(this)}).call(this,n(84),n(358)(e))},,function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var e,o;function i(e){return e.replace(/<[^>]*>?/gi,u)}"object"===r(t)?(e=t,o=n(363).Converter):(e=window.Markdown,o=e.Converter),e.getSanitizingConverter=function(){var e=new o;return e.hooks.chain("postConversion",i),e.hooks.chain("postConversion",l),e};var a=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol(?: start="\d+")?|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,s=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)*[\]$]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,c=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)*[\]$]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i;function u(e){if(e.match(a)||e.match(s)||e.match(c))return e;var t=!1,n=e.replace(/^(<a href="|<img src=")([^"]*)/i,(function(e,n,r){return n+r.replace(/[^-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)*[\]$]/g,(function(e){return t=!0,"'"==e?"%27":encodeURIComponent(e)}))}));return t&&(n.match(s)||n.match(c))?n:""}function l(e){if(""==e)return"";var t,n,r=/<\/?\w+[^>]*(\s|$|>)/g,o=e.toLowerCase().match(r),i=(o||[]).length;if(0==i)return e;for(var a,s=[],c=[],u=!1,l=0;l<i;l++)if(t=o[l].replace(/<\/?(\w+).*/,"$1"),!(s[l]||"<p><img><br><li><hr>".search("<"+t+">")>-1)){if(n=o[l],a=-1,!/^<\//.test(n))for(var d=l+1;d<i;d++)if(!s[d]&&o[d]=="</"+t+">"){a=d;break}-1==a?u=c[l]=!0:s[a]=!0}if(!u)return e;l=0;return e=e.replace(r,(function(e){var t=c[l]?"":e;return l++,t}))}}()},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o;o="object"===r(t)?t:{},function(){function e(e){return e}function t(e){return!1}function n(){}function r(){}n.prototype={chain:function(t,n){var r=this[t];if(!r)throw new Error("unknown hook "+t);this[t]=r===e?n:function(e){var t=Array.prototype.slice.call(arguments,0);return t[0]=r.apply(null,t),n.apply(null,t)}},set:function(e,t){if(!this[e])throw new Error("unknown hook "+e);this[e]=t},addNoop:function(t){this[t]=e},addFalse:function(e){this[e]=t}},o.HookCollection=n,r.prototype={set:function(e,t){this["s_"+e]=t},get:function(e){return this["s_"+e]}},o.Converter=function(t){var o,i,a,s,c=this.hooks=new n;c.addNoop("plainLinkText"),c.addNoop("preConversion"),c.addNoop("postNormalization"),c.addNoop("preBlockGamut"),c.addNoop("postBlockGamut"),c.addNoop("preSpanGamut"),c.addNoop("postSpanGamut"),c.addNoop("postConversion");var u,l,d,f,_,h=e,p=e;(t=t||{}).nonAsciiLetters&&(u=/[Q\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376-\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0523\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u064a\u0660-\u0669\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07c0-\u07ea\u07f4-\u07f5\u07fa\u0904-\u0939\u093d\u0950\u0958-\u0961\u0966-\u096f\u0971-\u0972\u097b-\u097f\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09e6-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a66-\u0a6f\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0ae6-\u0aef\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b66-\u0b6f\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0be6-\u0bef\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58-\u0c59\u0c60-\u0c61\u0c66-\u0c6f\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0ce6-\u0cef\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d3d\u0d60-\u0d61\u0d66-\u0d6f\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e50-\u0e59\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0ed0-\u0ed9\u0edc-\u0edd\u0f00\u0f20-\u0f29\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8b\u1000-\u102a\u103f-\u1049\u1050-\u1055\u105a-\u105d\u1061\u1065-\u1066\u106e-\u1070\u1075-\u1081\u108e\u1090-\u1099\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u17e0-\u17e9\u1810-\u1819\u1820-\u1877\u1880-\u18a8\u18aa\u1900-\u191c\u1946-\u196d\u1970-\u1974\u1980-\u19a9\u19c1-\u19c7\u19d0-\u19d9\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b50-\u1b59\u1b83-\u1ba0\u1bae-\u1bb9\u1c00-\u1c23\u1c40-\u1c49\u1c4d-\u1c7d\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u203f-\u2040\u2054\u2071\u207f\u2090-\u2094\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183-\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2c6f\u2c71-\u2c7d\u2c80-\u2ce4\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fc3\ua000-\ua48c\ua500-\ua60c\ua610-\ua62b\ua640-\ua65f\ua662-\ua66e\ua67f-\ua697\ua717-\ua71f\ua722-\ua788\ua78b-\ua78c\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8d0-\ua8d9\ua900-\ua925\ua930-\ua946\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa50-\uaa59\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe33-\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/g,l="Q".charCodeAt(0),d="A".charCodeAt(0),f="Z".charCodeAt(0),_="a".charCodeAt(0)-f-1,h=function(e){return e.replace(u,(function(e){for(var t,n=e.charCodeAt(0),r="";n>0;)(t=n%51+d)>=l&&t++,t>f&&(t+=_),r=String.fromCharCode(t)+r,n=n/51|0;return"Q"+r+"Q"}))},p=function(e){return e.replace(/Q([A-PR-Za-z]{1,3})Q/g,(function(e,t){for(var n,r=0,o=0;o<t.length;o++)(n=t.charCodeAt(o))>f&&(n-=_),n>l&&n--,r=51*r+(n-=d);return String.fromCharCode(r)}))});var m=t.asteriskIntraWordEmphasis?function(e){return-1===e.indexOf("*")&&-1===e.indexOf("_")?e:(e=(e=(e=h(e)).replace(/(?=[^\r][*_]|[*_])(^|(?=\W__|(?!\*)[\W_]\*\*|\w\*\*\w)[^\r])(\*\*|__)(?!\2)(?=\S)((?:|[^\r]*?(?!\2)[^\r])(?=\S_|\w|\S\*\*(?:[\W_]|$)).)(?=__(?:\W|$)|\*\*(?:[^*]|$))\2/g,"$1<strong>$3</strong>")).replace(/(?=[^\r][*_]|[*_])(^|(?=\W_|(?!\*)(?:[\W_]\*|\D\*(?=\w)\D))[^\r])(\*|_)(?!\2\2\2)(?=\S)((?:(?!\2)[^\r])*?(?=[^\s_]_|(?=\w)\D\*\D|[^\s*]\*(?:[\W_]|$)).)(?=_(?:\W|$)|\*(?:[^*]|$))\2/g,"$1<em>$3</em>"),p(e))}:function(e){return-1===e.indexOf("*")&&-1===e.indexOf("_")?e:(e=(e=(e=h(e)).replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)\2(?=\S)([^\r]*?\S)\2\2(?!\2)(?=[\W_]|$)/g,"$1<strong>$3</strong>")).replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)(?=\S)((?:(?!\2)[^\r])*?\S)\2(?!\2)(?=[\W_]|$)/g,"$1<em>$3</em>"),p(e))};function E(e){return e=(e=(e=(e=(e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,g)).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,g)).replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,g)).replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,g)).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,g)}function T(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(a.push(e)-1)+"K\n\n"}function g(e,t){return T(t)}this.makeHtml=function(e){if(o)throw new Error("Recursive call to converter.makeHtml");return o=new r,i=new r,a=[],s=0,e=(e=L(e="\n\n"+(e=(e=(e=(e=(e=c.preConversion(e)).replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"))+"\n\n")).replace(/^[ \t]+$/gm,""),e=(e=(e=function(e){return e=e.replace(/~E(\d+)E/g,(function(e,t){var n=parseInt(t);return String.fromCharCode(n)}))}(e=b(e=function(e){return e=e.replace(/^[ ]{0,3}\[([^\[\]]+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(\n+)/gm,(function(e,t,n,r,a,s,c){return t=t.toLowerCase(),o.set(t,R(n)),a?r+c:(s&&i.set(t,s.replace(/"/g,"&quot;")),"")}))}(e=E(e=c.postNormalization(e)))))).replace(/~D/g,"$$")).replace(/~T/g,"~"),e=c.postConversion(e),a=i=o=null,e};var A=function(e){return b(e)};function b(e,t,n){return e=function(e){return e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,(function(e,t){var n=t;return T("<blockquote>\n"+(n=(n=(n=b(n=(n=(n=n.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""))).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(e,t){var n=t;return n=(n=n.replace(/^  /gm,"~0")).replace(/~0/g,"")})))+"\n</blockquote>")}))}(e=function(e){return e=(e=(e+="~0").replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,(function(e,t,n){var r=t,o=n;return"\n\n"+(r="<pre><code>"+(r=(r=(r=L(r=C(k(r)))).replace(/^\n+/g,"")).replace(/\n+$/g,""))+"\n</code></pre>")+"\n\n"+o}))).replace(/~0/,"")}(e=function(e,t){e+="~0";var n=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;s?e=e.replace(n,(function(e,n,r){var o,i=n,a=r.search(/[*+-]/g)>-1?"ul":"ol";"ol"===a&&(o=parseInt(r,10));var s=S(i,a,t),c="<"+a;return o&&1!==o&&(c+=' start="'+o+'"'),s=c+">"+(s=s.replace(/\s+$/,""))+"</"+a+">\n"})):(n=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,e=e.replace(n,(function(e,t,n,r){var o,i=t,a=n,s=r.search(/[*+-]/g)>-1?"ul":"ol";"ol"===s&&(o=parseInt(r,10));var c=S(a,s),u="<"+s;return o&&1!==o&&(u+=' start="'+o+'"'),c=i+u+">\n"+c+"</"+s+">\n"})));return e=e.replace(/~0/,"")}(e=(e=(e=(e=function(e){return e=(e=(e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,(function(e,t){return"<h1>"+v(t)+"</h1>\n\n"}))).replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,(function(e,t){return"<h2>"+v(t)+"</h2>\n\n"}))).replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,(function(e,t,n){var r=t.length;return"<h"+r+">"+v(n)+"</h"+r+">\n\n"}))}(e=c.preBlockGamut(e,A))).replace(/^[ ]{0,2}( ?\*){3,}[ \t]*$/gm,"<hr />\n")).replace(/^[ ]{0,2}( ?-){3,}[ \t]*$/gm,"<hr />\n")).replace(/^[ ]{0,2}( ?_){3,}[ \t]*$/gm,"<hr />\n")))),e=function(e,t,n){for(var r=(e=(e=e.replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),o=[],i=/~K(\d+)K/,s=r.length,c=0;c<s;c++){var u=r[c];i.test(u)?o.push(u):/\S/.test(u)&&(u=(u=v(u)).replace(/^([ \t]*)/g,n?"":"<p>"),n||(u+="</p>"),o.push(u))}if(!t){s=o.length;for(c=0;c<s;c++)for(var l=!0;l;)l=!1,o[c]=o[c].replace(/~K(\d+)K/g,(function(e,t){return l=!0,a[t]}))}return o.join("\n\n")}(e=E(e=c.postBlockGamut(e,A)),t,n)}function v(e){return e=R(e=(e=function(e){e=(e=h(e)).replace(D,M),e=p(e);return e=e.replace(/<((https?|ftp):[^'">\s]+)>/gi,(function(e,t){return'<a href="'+P(t)+'">'+c.plainLinkText(t)+"</a>"}))}(e=function(e){return-1===e.indexOf("[")?e:e=(e=(e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,I)).replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,I)).replace(/(\[([^\[\]]+)\])()()()()()/g,I)}(e=function(e){return-1===e.indexOf("![")?e:e=(e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,y)).replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,y)}(e=function(e){return e=(e=e.replace(/\\(\\)/g,U)).replace(/\\([`*_{}\[\]()>#+-.!])/g,U)}(e=function(e){return e=e.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi,(function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return t=x(t,"!"==e.charAt(1)?"\\`*_/":"\\`*_")}))}(e=function(e){return e=e.replace(/(^|[^\\`])(`+)(?!`)([^\r]*?[^`])\2(?!`)/gm,(function(e,t,n,r,o){var i=r;return t+"<code>"+(i=(i=C(i=(i=i.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""))).replace(/:\/\//g,"~P"))+"</code>"}))}(e=c.preSpanGamut(e)))))))).replace(/~P/g,"://")),e=(e=m(e)).replace(/  +\n/g," <br>\n"),e=c.postSpanGamut(e)}function I(e,t,n,r,a,s,c,u){null==u&&(u="");var l=t,d=n.replace(/:\/\//g,"~P"),f=r.toLowerCase(),_=a,h=u;if(""==_)if(""==f&&(f=d.toLowerCase().replace(/ ?\n/g," ")),_="#"+f,null!=o.get(f))_=o.get(f),null!=i.get(f)&&(h=i.get(f));else{if(!(l.search(/\(\s*\)$/m)>-1))return l;_=""}var p='<a href="'+(_=P(_))+'"';return""!=h&&(p+=' title="'+(h=x(h=O(h),"*_"))+'"'),p+=">"+d+"</a>"}function O(e){return e.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function y(e,t,n,r,a,s,c,u){var l=t,d=n,f=r.toLowerCase(),_=a,h=u;if(h||(h=""),""==_){if(""==f&&(f=d.toLowerCase().replace(/ ?\n/g," ")),_="#"+f,null==o.get(f))return l;_=o.get(f),null!=i.get(f)&&(h=i.get(f))}d=x(O(d),"*_[]()");var p='<img src="'+(_=x(_,"*_"))+'" alt="'+d+'"';return p+=' title="'+(h=x(h=O(h),"*_"))+'"',p+=" />"}var N={ol:"\\d+[.]",ul:"[*+-]"};function S(e,t,n){s++,e=e.replace(/\n{2,}$/,"\n"),e+="~0";var r=N[t],o=new RegExp("(^[ \\t]*)("+r+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+r+")[ \\t]+))","gm"),i=!1;return e=(e=e.replace(o,(function(e,t,n,r){var o=r,a=/\n\n$/.test(o),s=a||o.search(/\n{2,}/)>-1||i;return o=b(k(o),!0,!s),i=a,"<li>"+o+"</li>\n"}))).replace(/~0/g,""),s--,e}function C(e){return e=x(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),"*_{}[]\\",!1)}function R(e){return e=(e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?!]|~D)/gi,"&lt;")}var D=new RegExp('(="|<)?\\b(https?|ftp)(://[-A-Z0-9+&@#/%?=~_|[\\]()!:,.;]*[-A-Z0-9+&@#/%=~_|[\\])])(?=$|\\W)',"gi"),w=new RegExp("[-A-Z0-9+&@#/%=~_|[\\])]","i");function M(e,t,n,r){if(t)return e;if(")"!==r.charAt(r.length-1))return"<"+n+r+">";for(var o=r.match(/[()]/g),i=0,a=0;a<o.length;a++)"("===o[a]?i<=0?i=1:i++:i--;var s="";if(i<0){var c=new RegExp("\\){1,"+-i+"}$");r=r.replace(c,(function(e){return s=e,""}))}if(s){var u=r.charAt(r.length-1);w.test(u)||(s=u+s,r=r.substr(0,r.length-1))}return"<"+n+r+">"+s}function k(e){return e=(e=e.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")}function L(e){if(!/\t/.test(e))return e;var t,n=["    ","   ","  "," "],r=0;return e.replace(/[\n\t]/g,(function(e,o){return"\n"===e?(r=o+1,e):(t=(o-r)%4,r=o+1,n[t])}))}function P(e){return e=x(e=O(e),"*_:()[]")}function x(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var o=new RegExp(r,"g");return e=e.replace(o,U)}function U(e,t){return"~E"+t.charCodeAt(0)+"E"}}}()},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;t.parse=function(e){var t=[1,5,6,7,11,12],n=r.exec(e),o=0;if(!n)return new Date(e);for(var i,a=0;i=t[a];a++)n[i]=parseInt(n[i],10)||0;n[2]=parseInt(n[2],10)||1,n[3]=parseInt(n[3],10)||1,n[2]--,n[8]=n[8]?(n[8]+"00").substring(0,3):0," "===n[4]?o=(new Date).getTimezoneOffset():"Z"!==n[9]&&n[10]&&(o=60*n[11]+n[12],"+"===n[10]&&(o=0-o));var s=Date.UTC(n[1],n[2],n[3],n[5],n[6]+o,n[7],n[8]);return new Date(s)},t.is=function(e,t){return"string"==typeof e&&((!t||!1!==/^\d{4}-\d{2}-\d{2}/.test(e))&&r.test(e))}},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function i(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],i(n),i(r))}function a(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=i(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=o.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=a(n[0]);r!==n[0]&&(t[n[0]]=r)}n=o.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),s=0;s<i.length;s++){var c=i[s];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(376),a=n(400).parseCommand,s=n(354),c=n(64),u=n(154).sendTrackEvent,l={init:function(e){var t={};e=e||TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});var n,d=TrelloPowerUp.Promise;function f(){t={}}function _(e){switch(e){case"board-button":case"card-button":return!0;case"rule":case"schedule":case"on-date":return!1;default:throw new Error("Unknown command type.")}}function h(t){return e.set("board","private","overrides",t)}function p(t){return d.join(e.getAll(),e.member("id")).spread((function(e,n){var r,o=[],a={};if(Object.keys(e||[]).forEach((function(t){Object.keys(e[t]).forEach((function(r){var c=e[t][r].commands;if(c){if("string"==typeof c)try{c=JSON.parse(i.decompressFromUTF16(c))}catch(e){return void s.logError(e,"Context: getPupStorageCommands","PARSE DECOMPRESSED DATA",c,t,r,n)}c&&(c.forEach((function(e){e.is_own=e.uid===n.id,a[e.id]=e})),o=o.concat(c))}}))})),t)return{commands:o};try{r=e.board.private.overrides}catch(e){}var c=!1;return Object.keys(r||{}).forEach((function(e){var t=a[e];t?Object.keys(r[e]).forEach((function(n){t[n]=r[e][n]})):+new Date-r[e].ot>7776e6&&(delete r[e],c=!0)})),c?h(r).then((function(){return{commands:o}})):{commands:o}}))}function m(){return e.get("member","private","token")}function E(e,n){var r=e.commands;return r.forEach((function(e){e.is_own=!0,e.enabled=-1!==e.b.indexOf(n)})),t.commands=r,void 0!==e.oboWritable&&(t.oboWritable=e.oboWritable),t}function T(){return t.commands?new d((function(e){e(t)})):m().then((function(t){return new d((function(r,o){var i=e.getContext().board,a="?b=".concat(i),s=n?"&obo=".concat(n):"";$.ajax("".concat(c,"powerup-commands").concat(a).concat(s),{type:"GET",headers:{"X-Butler-Trello-Token":t}}).done((function(e){return e.success?r(E(e.response,i)):o(new Error(e.error||"NO_RESPONSE"))})).fail((function(){o(new Error("NETWORK_ERROR"))}))}))}))}function g(e,t){return(_(e)?p(t):T()).then((function(t){return{commands:t.commands.filter((function(t){return t.type===e})),obo_writable:t.oboWritable}}))}function A(t,n,r){var o=r.filter((function(e){return e.scope===t&&e.shared===n})),a=i.compressToUTF16(JSON.stringify(o));return e.set(t===l.ScopeTeam?"organization":"board",n?"shared":"private","commands",a).then((function(){e.get(t===l.ScopeTeam?"organization":"board",n?"shared":"private","commands").then((function(e){try{e=JSON.parse(i.decompressFromUTF16(e))}catch(t){s.logError(t,"Context: saveFilteredCommands",{in:JSON.stringify(r),out:e})}}))}))}function b(t,n){var i=t.id;return e.get("board","private","overrides").then((function(e){e||(e={});var a=e[i];return a||(a=e[i]={}),a.enabled=n,a.ot=+new Date,h(e).then((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)}))}))}function v(t,r,o){return d.join(p(!0),T(),e.member("id","username")).spread((function(i,a,s){var u=i.commands.findIndex((function(e){return e.id===t}));return-1!==u?function(e,t,n,r,o){var i=e[t];if(i.uid!==n.id&&!o)return d.reject(new Error("Command not own."));var a=i.scope,s=i.shared,c=r(i);return c?(c.uid=n.id,c.username=n.username,c.t=+new Date,e.splice(t,1,c),c.scope===a&&c.shared===s?A(a,s,e).then((function(){return c})):A(i.scope,i.shared,e).then((function(){return A(a,s,e)})).then((function(){return c}))):(e.splice(t,1),A(a,s,e).then((function(){return i})))}(i.commands,u,s,r,o):-1!==(u=a.commands.findIndex((function(e){return e.id===t})))?function(t,r,o){var i=t[r],a=o(i);return d.join(m(),e.board("id","name","url")).spread((function(e,t){var r;return r=a?JSON.stringify({op:"update",params:{command:a,board:t},obo:n}):JSON.stringify({op:"delete",params:{board:t},obo:n}),new d((function(n,o){$.ajax("".concat(c,"powerup-commands/").concat(i.id),{type:"POST",data:r,contentType:"application/json",headers:{"X-Butler-Trello-Token":e}}).done((function(e){if(!e.success)return o(new Error(e.error||"NO_RESPONSE"));E(e.response,t.id);var r=e.response.commands.find((function(e){return e.id===i.id}));return n(r)})).fail((function(){o(new Error("NETWORK_ERROR"))}))}))}))}(a.commands,u,r):d.reject(new Error("Command not found."))}))}l.init=function(t){e=t||TrelloPowerUp.iframe({targetOrigin:"https://trello.com"})},l.setAdminOnBehalfOf=function(e){n!==e&&(n=e||void 0,f())},l.getAdminOnBehalfOf=function(){return n},l.ScopeBoard="board",l.ScopeTeam="team",l.getCommand=function(e,t,n){return g(e,n).then((function(e){return e.commands.find((function(e){return e.id===t}))}))},l.getCommandById=function(e,t,n){return p(t).then((function(t){var r=t.commands.find((function(t){return t.id===e}));return r||(n?void 0:T().then((function(t){return t.commands.find((function(t){return t.id===e}))})))}))},l.getCommands=g,l.getAllCommands=function(e){return d.join(p(e),T()).spread((function(e,t){return{commands:e.commands.concat(t.commands),obo_writable:t.oboWritable}}))},l.getLocalCommands=p,l.addCommand=function(t){return _(t.type)?function(t){return d.join(e.member("id","username"),p(!0)).spread((function(e,n){var r,o=n.commands,i=+new Date;do{r="".concat(e.id,"-").concat(++i)}while(o.some((function(e){return e.id===r})));return t.id=r,t.uid=e.id,t.username=e.username,t.t=i,o.push(t),A(t.scope,t.shared,o).then((function(){t.is_own=!0;var e=a(t.cmd).parse;return u({action:"added",actionSubject:"butlerCommand",source:"automationDirectory",attributes:{actions:e.ACTION.map((function(e){return e.type})),type:t.type}}),t}))}))}(t):function(t){return d.join(m(),e.board("id","name","url")).spread((function(e,r){return new d((function(o,i){$.ajax("".concat(c,"powerup-commands"),{type:"POST",data:JSON.stringify({op:"new",params:{command:t,board:r},obo:n}),contentType:"application/json",headers:{"X-Butler-Trello-Token":e}}).done((function(e){if(!e.success)return i(new Error(e.error||"NO_RESPONSE"));E(e.response,r.id);var n=e.response.commands.find((function(t){return t.id===e.response.cmd_id})),s=a(t.cmd).parse,c=s.TRIGGER;return u({action:"added",actionSubject:"butlerCommand",source:"automationDirectory",attributes:{trigger:c&&c[c.type]&&c[c.type].type||null,actions:s.ACTION.map((function(e){return e.type})),type:t.type}}),o(n)})).fail((function(){return i(new Error("NETWORK_ERROR"))}))}))}))}(t)},l.removeCommandId=function(e,t){return v(e,(function(){return null}),t)},l.updateCommandId=function(e,t,n){return v(e,(function(e){return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}),n)},l.enableCommandId=function(t,r){return d.join(p(!0),T()).spread((function(o,i){var a=o.commands.findIndex((function(e){return e.id===t}));return-1!==a?b(o.commands[a],r):-1!==(a=i.commands.findIndex((function(e){return e.id===t})))?function(t,r){return d.join(m(),e.board("id","name","url")).spread((function(e,o){return new d((function(i,a){$.ajax("".concat(c,"powerup-commands/").concat(t.id),{type:"POST",data:JSON.stringify({op:"enable",params:{enabled:r,board:o},obo:n}),contentType:"application/json",headers:{"X-Butler-Trello-Token":e}}).done((function(e){if(!e.success)return a(new Error(e.error||"NO_RESPONSE"));var n=E(e.response,o.id).commands;return i(n.find((function(e){return e.id===t.id})))})).fail((function(){return a(new Error("NETWORK_ERROR"))}))}))}))}(i.commands[a],r):d.reject(new Error("Command not found."))}))},l.clearCachedServerCommands=f,l.getSharedLibraries=function(){return m().then((function(t){return new d((function(r,o){var i="?b=".concat(e.getContext().board,"&idOrganization=").concat(e.getContext().organization),a=n?"&obo=".concat(n):"";$.ajax("".concat(c,"powerup-commands").concat(i).concat(a),{type:"GET",headers:{"X-Butler-Trello-Token":t}}).done((function(e){return e.success?r(e.response.libs):o(new Error(e.error||"NO_RESPONSE"))})).fail((function(){o(new Error("NETWORK_ERROR"))}))}))}))},l.getSharedLibrary=function(t){return m().then((function(r){return new d((function(o,i){var a="?b=".concat(e.getContext().board,"&idOrganization=").concat(e.getContext().organization),s=n?"&obo=".concat(n):"";$.ajax("".concat(c,"powerup-library/").concat(t).concat(a).concat(s),{type:"GET",headers:{"X-Butler-Trello-Token":r}}).done((function(e){return e.success?o(e.response.lib):i(new Error(e.error||"NO_RESPONSE"))})).fail((function(){i(new Error("NETWORK_ERROR"))}))}))}))},l.startSharing=function(t){return m().then((function(r){return new d((function(o,i){var a={title:t,board:{id:e.getContext().board},idOrganization:e.getContext().organization,obo:n};$.ajax("".concat(c,"powerup-library-share"),{type:"POST",data:JSON.stringify(a),contentType:"application/json",headers:{"X-Butler-Trello-Token":r}}).done((function(e){return e.success?o(e.response.lib):i(new Error(e.error||"NO_RESPONSE"))})).fail((function(){return i(new Error("NETWORK_ERROR"))}))}))}))},l.stopSharing=function(t){return m().then((function(r){var o={board:{id:e.getContext().board},idOrganization:e.getContext().organization,obo:n};return new d((function(e,n){$.ajax("".concat(c,"powerup-library-unshare/").concat(t.link_id),{type:"POST",data:JSON.stringify(o),contentType:"application/json",headers:{"X-Butler-Trello-Token":r}}).done((function(t){return t.success?e():n(new Error(t.error||"NO_RESPONSE"))})).fail((function(){return n(new Error("NETWORK_ERROR"))}))}))}))},l.importLibrary=function(t){return m().then((function(r){var o={board:{id:e.getContext().board},idOrganization:e.getContext().organization,obo:n};return new d((function(n,i){$.ajax("".concat(c,"powerup-library-import/").concat(t),{type:"POST",data:JSON.stringify(o),contentType:"application/json",headers:{"X-Butler-Trello-Token":r}}).done((function(t){return t.success?(E(t.response,e.getContext().board),n()):i(new Error(t.error||"NO_RESPONSE"))})).fail((function(){i(new Error("NETWORK_ERROR"))}))}))}))},l.enableLibrary=function(t,r){return d.join(m(),e.board("id","name","url")).spread((function(o,i){var a={title:t,enable:r,board:i,idOrganization:e.getContext().organization,obo:n};return new d((function(e,t){$.ajax("".concat(c,"powerup-library-enable"),{type:"POST",data:JSON.stringify(a),contentType:"application/json",headers:{"X-Butler-Trello-Token":o}}).done((function(n){return n.success?(E(n.response,i.id),e()):t(new Error(n.error||"NO_RESPONSE"))})).fail((function(){t(new Error("NETWORK_ERROR"))}))}))}))},l.renameLibrary=function(t,r){return m().then((function(o){var i={title:t,new_title:r,board:{id:e.getContext().board},idOrganization:e.getContext().organization,obo:n};return new d((function(t,n){$.ajax("".concat(c,"powerup-library-rename"),{type:"POST",data:JSON.stringify(i),contentType:"application/json",headers:{"X-Butler-Trello-Token":o}}).done((function(r){return r.success?(E(r.response,e.getContext().board),t()):n(new Error(r.error||"NO_RESPONSE"))})).fail((function(){n(new Error("NETWORK_ERROR"))}))}))}))}}};window.CommandStorage=l,e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configureGlobals=t.Logger=t.DEBUG=void 0;const r=n(384),o=n(385);var i=n(384);Object.defineProperty(t,"DEBUG",{enumerable:!0,get:function(){return i.DEBUG}});var a=n(385);Object.defineProperty(t,"Logger",{enumerable:!0,get:function(){return a.Logger}}),t.configureGlobals=function({logger:e,debug:t}={}){o.setLogger((null==e?void 0:e.info)?e:void 0),r.setDebug(null!=t&&t)}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(37),a=n.n(i);let s,c,u,l,d,f,_;!function(e){e.LOCAL="local",e.DEV="dev",e.STAGING="staging",e.PROD="prod"}(s||(s={})),function(e){e.TRACK="track",e.UI="ui",e.OPERATIONAL="operational",e.SCREEN="screen",e.IDENTIFY="identify"}(c||(c={})),function(e){e.MAC="mac",e.LINUX="linux",e.WINDOWS="windows",e.DESKTOP="desktop",e.WEB="web",e.MOBILE_WEB="mobileWeb"}(u||(u={})),function(e){e.DESKTOP="desktop",e.WEB="web"}(l||(l={})),function(e){e.CLOUD_ID="cloudId",e.ORG_ID="orgId",e.OPSGENIE_CUSTOMER_ID="opsgenieCustomerId",e.NONE="none"}(d||(d={})),function(e){e.ATLASSIAN_ACCOUNT="atlassianAccount",e.HASHED_EMAIL="hashedEmail",e.TRELLO="trello",e.OPSGENIE="opsgenie",e.HALP="halp"}(f||(f={})),function(e){e.TRANSITION="transition",e.INITIAL_LOAD="initialLoad"}(_||(_={}));const h=Object.freeze([u.DESKTOP,u.MAC,u.LINUX,u.WINDOWS]),p=Object.freeze([u.WEB,u.MOBILE_WEB]);let m;function E(e){return Object.values(e)}function T(e,t){return Object.values(e).indexOf(t)>-1}!function(e){e.ATL_ORIGIN="atlOrigin"}(m||(m={}));class g{constructor(){o()(this,"_bindEventListeners",()=>{document.addEventListener(this._visibilityChange,this._handleVisibilityChange,!1)}),o()(this,"_handleVisibilityChange",()=>{const e=document[this._hidden];this._isHidden=e,this._callbacks.forEach(t=>t(e))}),this._isHidden=!1,this._callbacks=new Map,this._hidden=void 0,this._visibilityChange=void 0,void 0!==document.hidden?(this._isHidden=document.hidden,this._hidden="hidden",this._visibilityChange="visibilitychange"):void 0!==document.msHidden?(this._isHidden=document.msHidden,this._hidden="msHidden",this._visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this._isHidden=document.webkitHidden,this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==this._hidden&&this._bindEventListeners()}addCallback(e,t){if("string"!=typeof e)throw new Error("Invalid name, must be string");if("function"!=typeof t)throw new Error("Invalid callback, must be function");this._callbacks.set(e,t)}removeCallback(e){this._callbacks.has(e)&&this._callbacks.delete(e)}getIsHidden(){return this._isHidden}}class A{constructor(){this._performance=window.performance}clearMarks(...e){this._performance&&this._performance.clearMarks&&this._performance.clearMarks(...e)}mark(...e){this._performance&&this._performance.mark&&this._performance.mark(...e)}getEntriesByName(...e){return this._performance&&this._performance.getEntriesByName?this._performance.getEntriesByName(...e):[]}getTimeOrigin(){return this._performance&&(this._performance.timeOrigin||this._performance.timing)?this._performance.timeOrigin||this._performance.timing.navigationStart:0}now(){return this._performance&&this._performance.now?this._performance.now():Date.now?Date.now():+new Date}isAvailable(){return!!(this._performance&&this._performance.clearMarks&&this._performance.mark&&this._performance.getEntriesByName&&this._performance.timing)}}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class I{constructor(e,t){if(o()(this,"_getEventKey",({task:e,taskId:t})=>t?`${e}.${t}`:e),o()(this,"_getEventTimingByName",e=>{const t=this._performance.getEntriesByName(e);return t[t.length-1]}),o()(this,"_getApdexFields",e=>{const t=this._getApdexTimings(e),n=this._calculateApdex({duration:t.duration,threshold:e.threshold});return v(v({},t),{},{apdex:n})}),o()(this,"_getApdexTimings",e=>{const t=this._getEventKey(e),n=`${t}-start`,r=e.startTime||this._getStartTime(e,n),o=e.stopTime||this._getStopTime();return this._cleanApdexState(t),{startTime:r,stopTime:o,duration:o-r}}),o()(this,"_getStartTime",(e,t)=>{let n;const r=this._performance.getTimeOrigin();if(e.type===_.INITIAL_LOAD)n=r;else{n=r+this._getEventTimingByName(t).startTime}return n}),o()(this,"_getStopTime",()=>this._performance.getTimeOrigin()+this._performance.now()),o()(this,"_cleanApdexState",e=>{this._performance.clearMarks(`${e}-start`),this._performance.clearMarks(`${e}-stop`),this._startedEvents.delete(e)}),o()(this,"_getVisibilityFields",e=>{let t;if(e.type===_.INITIAL_LOAD)t=!this._wasPreviouslyHidden;else if(e.type===_.TRANSITION){const n=this._getEventKey(e);t=this._isActiveEvents.get(n)}return(e.startTime||e.stopTime)&&(t=!this._pageVisibility.getIsHidden()),{isActiveTab:t}}),o()(this,"_calculateApdex",({duration:e,threshold:t=this._threshold})=>{let n;return n=e<=t?1:e<=4*t?.5:0}),o()(this,"_validateStartEvent",e=>{if(!e)throw new Error('Missing "event" in Apdex start event');if(!e.task)throw new Error('Missing "task" in Apdex start event');if("string"!=typeof e.task)throw new Error('Invalid "task" in Apdex start event');if(e.taskId&&"string"!=typeof e.taskId)throw new Error('Invalid "taskId" in Apdex start event')}),o()(this,"_validateStopEvent",e=>{if(!e)throw new Error('Missing "event" in Apdex stop event');if(!e.task)throw new Error('Missing "task" in Apdex stop event');if("string"!=typeof e.task)throw new Error('Invalid "task" in Apdex stop event');if(e.taskId&&"string"!=typeof e.taskId)throw new Error('Invalid "taskId" in Apdex stop event');if(!e.type)throw new Error('Missing "type" in Apdex stop event');if(e.type&&!T(_,e.type))throw new Error('Invalid "type" in Apdex stop event');if(e.threshold&&"number"!=typeof e.threshold)throw new Error('Invalid "threshold" in Apdex stop event');if(!e.startTime&&e.type===_.TRANSITION){const t=this._getEventKey(e);if(!this._startedEvents.has(t))throw new Error(`Apdex event transition "${t}" was not started`)}if(e.startTime&&!("number"==typeof e.startTime&&e.startTime>=0))throw new Error('Invalid "startTime" in Apdex stop event');if(e.stopTime&&"number"!=typeof e.stopTime)throw new Error('Invalid "stopTime" in Apdex stop event');if(e.stopTime<=e.startTime)throw new Error('"stopTime" should be greater than "startTime" in Apdex stop event')}),o()(this,"_shouldSendEvent",e=>!!e&&"number"==typeof e.apdex),o()(this,"_sendEvent",(e,t)=>{this._shouldSendEvent(e)&&this._onEvent({source:"ui",action:"readyForUser",actionSubject:"ui",attributes:v(v({},e.additionalAttributes),{},{task:e.task,taskId:e.taskId,type:e.type,threshold:e.threshold||this._threshold,apdex:e.apdex,startTime:e.startTime,stopTime:e.stopTime,duration:e.duration,isActiveTab:e.isActiveTab})},t)}),!e)throw new Error("Missing onEvent callback");if("function"!=typeof e)throw new Error("Invalid onEvent, must be function");if(!(t instanceof g))throw new Error("Invalid pageVisibility, must be PageVisibility class");this._startedEvents=new Map,this._performance=new A,this._onEvent=e,this._threshold=1e3,this._wasPreviouslyHidden=t.getIsHidden(),this._isActiveEvents=new Map,this._pageVisibility=t,this._pageVisibility.addCallback("apdexEvent",e=>{this.onVisibilityChange(!e)})}start(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;const t=this._getEventKey(e),n=`${t}-start`;this._startedEvents.set(t,!0),this._isActiveEvents.set(t,!this._pageVisibility.getIsHidden()),this._performance.clearMarks(n),this._performance.mark(n)}getStart(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;const t=`${this._getEventKey(e)}-start`;return this._getEventTimingByName(t)}stop(e,t){if(this._validateStopEvent(e),!this._performance.isAvailable())return;const n=this._getApdexFields(e),r=this._getVisibilityFields(e);this._sendEvent(v(v(v({},e),n),r),t)}onVisibilityChange(e){e||(this._wasPreviouslyHidden=!0,this._isActiveEvents.forEach((e,t)=>this._isActiveEvents.set(t,!1)))}}var O=(e,t)=>()=>{if((e=>"function"==typeof e)(e))try{return e()}catch(e){return void console.error(`${t} - ${e.message}`)}return e};function y(e){return!0==(null!==(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}function N(e){if(!1===y(e))return!1;const t=e.constructor;if("function"!=typeof t)return!1;const n=t.prototype;return!1!==y(n)&&"isPrototypeOf"in n}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const R="4.0.0";function D(e){return{tenantIdType:e.tenantIdType,tenantId:e.tenantId}}function w(e){return{userIdType:e.userIdType}}function M(e){return{orgId:e.orgId}}function k(e,t){return void 0===t?e:t}function L(e,t){const n=t||{};return{env:k(e.env,n.env),product:k(e.product,n.product),subproduct:k(e.subproduct(),n.subproduct),version:k(e.version,n.version),origin:k(e.origin,n.origin),platform:k(e.platform,n.platform)}}function P(e){return N(e)&&Object.keys(e).length>0}function x(e,t){return P(t)?{[e]:t}:void 0}function U(e){if(P(e)){return x("containers",function(e){const t={};return Object.keys(e).forEach(n=>{const r=e[n];t[n]={id:r.id,type:r.type}}),t}(e))}}function H(e,t){return C({containerType:e.containerType,containerId:e.containerId,source:e.source,objectType:e.objectType,objectId:e.objectId,actionSubject:e.actionSubject,action:e.action,actionSubjectId:e.actionSubjectId,attributes:e.attributes,nonPrivacySafeAttributes:e.nonPrivacySafeAttributes,tags:e.tags,highPriority:e.highPriority,eventType:t},U(e.containers))}function B(e,t,n,r,o,i,a,s,u,l,d,f){const _=L(e),h=D(t),p=w(n),m=M(l),E={title:"",path:"",url:"",referrer:"",search:"",eventType:c.SCREEN};return C(C(C(C(C(C(C(C(C({},_),h),p),m),E),function(e){return x("attributes",e)}(r)),function(e){return x("nonPrivacySafeAttributes",e)}(o)),U(f)),{},{tags:i,tabId:a,sessionId:s,taskSessions:u,pageLoadId:d})}function j(e){return`${e.actionSubject} ${e.action}`}function $(e,t,n,r,o,i,a,s,c,u){const l=L(e,function(e){const{env:t,product:n,subproduct:r,version:o,origin:i,platform:a}=e;return{env:t,product:n,subproduct:r,version:o,origin:i,platform:a}}(r)),d=D(t),f=M(c),_=w(n),h=H(r,o);return C(C(C(C(C(C({},l),d),f),_),h),{},{tabId:i,sessionId:a,taskSessions:s,pageLoadId:u})}const F=Object.freeze([c.OPERATIONAL,c.TRACK,c.UI]);function W(e){if(e){if(e&&e.constructor!==Object)throw new Error("properties.containers must be an Object");Object.values(e).forEach(e=>(function(e){if(!N(e))throw new Error("properties.containers must be an Object");if(!("id"in e))throw new Error("properties.containers is missing field 'id'");if("string"!=typeof e.id)throw new Error("properties.containers.id must be of type String");if("type"in e&&"string"!=typeof e.type)throw new Error("properties.containers.type must be of type String")})(e))}}function Y(e){switch(e){case c.OPERATIONAL:case c.TRACK:case c.UI:return!0;default:return!1}}function V(e){if(!e)throw new Error("Missing event");if(!e.source)throw new Error("Missing event.source");if(!e.actionSubject)throw new Error("Missing event.actionSubject");if(!e.action)throw new Error("Missing event.action");W(e.containers)}function G(e){if(!e)throw new Error("Missing event");if(!e.source)throw new Error("Missing event.source");if(!e.actionSubject)throw new Error("Missing event.actionSubject")}const K=(e,t)=>Object.keys(e).reduce((n,r)=>{return n[t(e[r],r,e)]=e[r],n},{}),z=(e,t)=>t.reduce((t,n)=>(n in e&&(t[n]=e[n]),t),{}),q=(e,t)=>Object.keys(e).filter(e=>t.indexOf(e)<0).reduce((t,n)=>(t[n]=e[n],t),{}),X=(e,t)=>{if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(!e||!t||"object"!=typeof e&&"object"!=typeof t)return e===t;if(e.prototype!==t.prototype)return!1;const n=Object.keys(e);return n.length===Object.keys(t).length&&n.every(n=>X(e[n],t[n]))},J=(e,t)=>e.reduce((e,n,r,o)=>(e[t(n,r,o)?0:1].push(n),e),[[],[]]);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class ee{constructor(e,t){if(o()(this,"canCompress",e=>{try{return e&&Y(e.eventType)&&this._predicate(e)}catch(e){return!1}}),o()(this,"compress",e=>{const[t,n]=J(e,e=>this.canCompress(e)),r=this._compressFn(t);if(!r)throw new Error("No events were returned from the compression function");return r.forEach(e=>{!function(e){if(!Y(e))throw new Error(`Invalid action event type: ${e}, must be one of: [${F}]`)}(e.eventType),V(e)}),r.concat(n)}),"function"!=typeof e)throw new Error("Invalid predicate, must be a function that accepts an event and returns a boolean");if("function"!=typeof t)throw new Error("Invalid compressFn, must be a function that both accepts and returns an array of events");this._predicate=e,this._compressFn=t}}class te{constructor(e=[]){if(o()(this,"canCompress",e=>this._compressionRules.some(t=>t.canCompress(e))),o()(this,"compress",e=>{return this._createGroups(e).reduce((e,t)=>{return this._compressGroup(t).forEach(t=>e.push(t)),e},[])}),o()(this,"_createGroups",e=>e.reduce((e,t)=>{let n,r=null;for(let e=0;e<this._compressionRules.length;e++){const n=this._compressionRules[e];if(n.canCompress(t)){r=n;break}}if(r){const e=H(t,t.eventType);n=q(t,Object.keys(e))}let o=null;for(let t=0;t<e.length;t++){const i=e[t];if(r===i.compressor&&X(n,i.contextFields)){o=i;break}}return o?o.events.push(t):e.push({contextFields:n,compressor:r,events:[t]}),e},[])),o()(this,"_compressGroup",e=>{if(!e.compressor)return e.events;try{return e.compressor.compress(e.events).map(t=>Z(Z({},t),e.contextFields))}catch(t){return console.warn("Failed to compress some analytics events. "+`Error: ${t.message}. Sending ${e.events.length} uncompressed events instead`),e.events}}),!Array.isArray(e))throw new Error("Event compressors must be constructed with an array of CompressionRules");if(!e.every(e=>e instanceof ee))throw new Error("Event compressors can only be constructed with instances of CompressionRule");this._compressionRules=e}}const ne=7,re=100;class oe{constructor(e,t){o()(this,"push",(e,t,n,r)=>{this._eventArgs.push({identifier:e,builtEvent:t,context:n,userInfo:r})}),o()(this,"size",()=>this._eventArgs.length),o()(this,"startFlush",()=>{try{this._eventArgs=this._compressEventArgs(this._eventArgs)}catch(e){console.warn("Failed to perform compression on the delayed analytics events. "+`Error: ${e.message}. Sending ${this._eventArgs.length} uncompressed events instead`)}this._flushNextBatch()}),o()(this,"cancelFlush",()=>{this._flushBatchTimeout&&(clearTimeout(this._flushBatchTimeout),this._flushBatchTimeout=null)}),o()(this,"_flushNextBatch",()=>{this._eventArgs.splice(0,ne).forEach(e=>this._processFn(e.identifier,e.builtEvent,e.context,e.userInfo)),this._eventArgs.length>0?this._flushBatchTimeout=setTimeout(()=>this._flushNextBatch(),re):this._flushBatchTimeout=null}),o()(this,"_compressEventArgs",e=>{const[t,n]=J(e,e=>this._compressor.canCompress(e.builtEvent)),r=t.reduce((e,t)=>{let n=null;for(let r=0;r<e.length;r++){const o=e[r];if(X(o.userInfo,t.userInfo)&&X(o.context,t.context)){n=o;break}}return n?n.eventArgs.push(t):e.push({userInfo:t.userInfo,context:t.context,eventArgs:[t]}),e},[]).reduce((e,t)=>{try{const n=t.eventArgs.map(e=>e.builtEvent);return this._compressor.compress(n).map(e=>({identifier:j(e),builtEvent:e,userInfo:t.userInfo,context:t.context})).forEach(t=>e.push(t)),e}catch(e){return console.warn("Failed to compress some analytics events. "+`Error: ${e.message}. Sending ${t.eventArgs.length} uncompressed events instead`),t.eventArgs}},[]);return n.forEach(e=>r.push(e)),r}),this._processFn=e,this._flushBatchTimeout=null,this._eventArgs=[],this._compressor=new te(t)}}let ie,ae;!function(e){e.IN_PROGRESS="inProgress",e.QUEUE="queue",e.RECLAIM_START="reclaimStart",e.RECLAIM_END="reclaimEnd",e.ACK="ack"}(ie||(ie={})),function(e){e[e.RECLAIM_TIMEOUT=1e4]="RECLAIM_TIMEOUT",e[e.RECLAIM_WAIT=500]="RECLAIM_WAIT",e[e.RECLAIM_WAIT_THRESHOLD=2e3]="RECLAIM_WAIT_THRESHOLD"}(ae||(ae={}));const se=(e,t)=>({[ie.ACK]:`${e}.${t}.${ie.ACK}`,[ie.QUEUE]:`${e}.${t}.${ie.QUEUE}`,[ie.IN_PROGRESS]:`${e}.${t}.${ie.IN_PROGRESS}`,[ie.RECLAIM_START]:`${e}.${t}.${ie.RECLAIM_START}`,[ie.RECLAIM_END]:`${e}.${t}.${ie.RECLAIM_END}`}),ce=Object.values(ie);var ue=e=>{if("string"!=typeof e||0===e.length)return 0;try{const t=Object.keys(localStorage).filter(t=>t&&t.startsWith(`${e}.`)||!1).map(e=>e.split(".")).filter(e=>3===e.length&&ce.includes(e[2])).reduce((e,t)=>{const[,n,r]=t;return void 0===e[n]&&(e[n]={}),e[n][r]=!0,e},{}),n=Object.keys(t).filter(e=>!0!==t[e][ie.ACK]);return n.forEach(t=>{const{queue:n,inProgress:r,reclaimStart:o,reclaimEnd:i}=se(e,t);localStorage.removeItem(r),localStorage.removeItem(n),localStorage.removeItem(o),localStorage.removeItem(i)}),n.length}catch(e){}return 0};function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const fe=e=>new Promise(t=>{setTimeout(t,e)}),_e=async(e,t)=>{const{queue:n,inProgress:r}=e.storageKeys,o=JSON.parse(localStorage.getItem(n)||"[]"),i=JSON.parse(localStorage.getItem(r)||"{}"),a=[...o,...Object.entries(i).map(([e,t])=>{return de(de({},t),{},{attemptNumber:t.attemptNumber+1,id:e})})];if(a.length>0){const o=await t(a);if("successful"===o.status)he(e.storageKeys);else if("partial"===o.status){const e=a.filter(e=>!o.acceptedItemIds.includes(e.id));return localStorage.removeItem(r),localStorage.setItem(n,JSON.stringify(e)),{fullReclaim:!1}}}else he(e.storageKeys);return{fullReclaim:!0}},he=e=>{localStorage.removeItem(e.queue),localStorage.removeItem(e.inProgress),localStorage.removeItem(e.reclaimEnd),localStorage.removeItem(e.reclaimStart),localStorage.removeItem(e.ack)};var pe=async(e,t)=>{if("string"!=typeof e||0===e.length)return{fullReclaims:0,partialReclaims:0,failedReclaims:0};const n=a()(),r=(e=>Object.keys(localStorage).filter(t=>t.startsWith(e)).map(e=>e.split(".")).filter(t=>{if(3===t.length&&t[0]===e&&t[2]===ie.ACK)try{const e=localStorage.getItem(t.join("."));if(e){const t=parseInt(e);return ae.RECLAIM_TIMEOUT+t<Date.now()}}catch(e){}return!1}).map(e=>e[1]))(e).map(r=>(async(e,t)=>{const{ack:n,reclaimStart:r,reclaimEnd:o}=e.storageKeys,i=Date.now();if(localStorage.setItem(r,e.reclaimProcessId),localStorage.setItem(n,i.toString()),await fe(ae.RECLAIM_WAIT),Date.now()>i+ae.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(r)!==e.reclaimProcessId)throw new Error("Took to long to callback, reclaim abandonded. After reclaimStart.");if(localStorage.setItem(o,e.reclaimProcessId),await fe(ae.RECLAIM_WAIT),Date.now()>i+ae.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(r)!==e.reclaimProcessId||localStorage.getItem(o)!==e.reclaimProcessId)throw new Error("Took to long to callback, reclaim abandonded. After reclaimEnd.");return _e(e,t)})({queuePrefix:e,reclaimProcessId:n,storageKeys:se(e,r)},t)),o=await Promise.allSettled(r),i=o.filter(e=>"rejected"===e.status),s=o.filter(e=>"fulfilled"===e.status).map(e=>e.value),c=s.filter(e=>e.fullReclaim),u=s.filter(e=>!e.fullReclaim);return{failedReclaims:i.length,partialReclaims:u.length,fullReclaims:c.length}};const me="namespace-timeAdded",Ee="analytics-web-client",Te="analytics-resilience",ge="timeToBeProcessedAfter",Ae="timeAdded",be="retryAttempts",ve=15e3;let Ie,Oe;!function(e){e.INDEXEDDB="indexeddb",e.MEMORY="memory"}(Ie||(Ie={})),function(e){e.IGNORE="ignore",e.ABANDON="abandon",e.EVICT="evict"}(Oe||(Oe={}));const ye="AbandonWriteError";class Ne extends Error{constructor(e){super(`Event Limit reached. Abandoning write to: ${e}`),Object.setPrototypeOf(this,Ne.prototype),this.name=ye}}const Se="CallbackProcessingError";class Ce extends Error{constructor(e){super(`Error thrown while processing events in callback: ${e&&"object"==typeof e&&"toString"in e&&"function"==typeof e.toString&&e.toString()||"string"==typeof e&&e||"Argument passed to CallbackProcessingError was not an Error or string."}`),Object.setPrototypeOf(this,Ce.prototype),this.name=Se}}const Re="InvalidPolicyError";class De extends Error{constructor(e,t){super(`Method '${t}' cannot be called with policy '${e}'.`),this.name=Re}}const we=e=>{if(e&&"object"==typeof e&&"name"in e){const t=e;return"string"==typeof t.name&&(t.name===ye||t.name===Se||t.name===Re)}return!1};var Me=n(63),ke=n.n(Me);const Le=7,Pe=6e4,xe=(e,t,{id:n,retryAttempts:r,timeToProcessOffset:o})=>({item:e,id:n||a()(),retryAttempts:r||0,timeToBeProcessedAfter:Date.now()+(o||0),namespace:t,timeAdded:Date.now()}),Ue=e=>({logger:e.logger||console,useMemory:e.useMemory||!1,maxAttempts:e.maxAttempts||10,maxEventLimit:e.maxEventLimit||5e3}),He=e=>new Promise((t,n)=>{e.onsuccess=e=>{t(e)},e.onerror=e=>{n(e)}}),Be=(e,t)=>{try{"function"==typeof e.commit&&e.commit()}catch(e){throw t.error("Failed to force commit transaction:",e),e}return(e=>new Promise((t,n)=>{e.oncomplete=()=>{t()},e.onerror=e=>{n(e)},e.onabort=e=>{n(e)}}))(e)},je=(e,t)=>{e.onerror=e=>{t.warn("Error thrown from request:",e)}};class $e{constructor(e,t,n,r){if(o()(this,"deleteOldestNEvents",async(e,t)=>{var n;const r=e.index(me),o=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),i=r.getAllKeys(o,t),a=await He(i),s=null==a?void 0:null===(n=a.target)||void 0===n?void 0:n.result;if(s&&Array.isArray(s)&&s.length>0)try{const t=s.map(t=>this.deleteItemHandler(e,t));await Promise.all(t)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}}),!(e>0))throw Error("Event Limit has to be set higher than 1");this.eventLimit=e,this.namespace=t,this.logger=n,this.deleteItemHandler=r}async insertItems(e,t,n=Oe.ABANDON){const r=[...t];let o=0;switch(n){case Oe.ABANDON:await this.throwIfNotEnoughSpace(e,t.length);break;case Oe.EVICT:o=await this.evictIfNotEnoughSpace(e,t.length);break;case Oe.IGNORE:await this.calculateHowManyEventsWeCanAdd(e,r)}const i=r.map(t=>He(e.add(t)));return await Promise.all(i),await Be(e.transaction,this.logger),{items:r,numberOfEvictedItems:o}}async throwIfNotEnoughSpace(e,t){const n=await this.calculateFreeSpace(e);if(n<t)throw new Ne(`Not enough space in IndexedDb. Needed ${t} but only had ${n}`)}async evictIfNotEnoughSpace(e,t){const n=await this.calculateFreeSpace(e);if(n<t){const r=t-n;return await this.deleteOldestNEvents(e,r),r}return 0}async calculateHowManyEventsWeCanAdd(e,t){const n=await this.calculateFreeSpace(e);if(n<t.length){const e=t.length-n,r=t.length-e;t.splice(r,e)}}async calculateFreeSpace(e){const t=await this.getCountofEventsInObjectStore(e);return this.eventLimit-t}async getCountofEventsInObjectStore(e){const t=e.index(me),n=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),r=t.count(n);return(await He(r)).target.result}}const Fe=["item"],We=["items"];function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class Ve{constructor(e,t={}){if(o()(this,"startDB",async()=>new Promise(async(e,t)=>{window.setTimeout(()=>t(new Error("Failed to create Indexeddb connection in time.")),ve);const n=window.indexedDB.open(Ee,1);n.onupgradeneeded=e=>{if(0!==e.oldVersion)throw new Error("We cannot upgarde the database. Do not do this.");const t=n.result.createObjectStore(Te,{keyPath:"id"});t.createIndex(ge,ge,{unique:!1}),t.createIndex(be,be,{unique:!1}),t.createIndex(Ae,Ae,{unique:!1}),t.createIndex(me,["namespace","timeAdded"],{unique:!1})};try{return await He(n),e(n.result)}catch(e){this.logger.error("IndexedDB failed to initialise.",e),t(new Error(`IndexedDB failed to initialise: ${e.message}`))}})),o()(this,"addItem",async(e,t={},n=Oe.ABANDON)=>{const{logger:r,namespace:o}=this,i=xe(e,o,t),{objectStore:a}=await this.getObjectStoreAndTransaction("readwrite");if(n===Oe.IGNORE)throw new De(n,"IndexedDbConnector#addItem");try{if(!i.namespace||0===i.namespace.length||"string"!=typeof i.namespace)throw new Error("Namespace not specified");const e=await this.globalEventLimitGuard.insertItems(a,[i],n);if(1===e.items.length)return{item:e.items[0],numberOfEvictedItems:e.numberOfEvictedItems};throw new Error(`Incorrect number of items added. Expected: 1, got: ${e.items.length}`)}catch(e){if(we(e))throw e;throw r.log("Failed to add item to table",e),new Error("Request to add item to table failed")}}),o()(this,"bulkAddItem",async(e,t=Oe.ABANDON)=>{const{logger:n,namespace:r}=this,o=e.map(e=>{let{item:t}=e,n=ke()(e,Fe);return xe(t,r,n)}),{objectStore:i}=await this.getObjectStoreAndTransaction("readwrite");try{return await this.globalEventLimitGuard.insertItems(i,o,t)}catch(e){if(we(e))throw e;throw n.log("Failed to add item to table",e),new Error("Request to add item to table failed")}}),o()(this,"getItems",async(e=Le)=>{const t=e>0?e:Le,{logger:n}=this,r=this.options.maxAttempts,{transaction:i,objectStore:a}=await this.getObjectStoreAndTransaction("readwrite"),s=a.index(ge),c=IDBKeyRange.upperBound(Date.now()),u=s.openCursor(c),l=await new Promise(async(e,i)=>{const a=[];let s=0;u.onerror=e=>{n.error("Failed to open cursor:",e),i("Failed to open cursor")},u.onsuccess=i=>{const c=i.target.result;if(c){const i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c.value);a.push(i);const u=c.value;if(u.retryAttempts+=1,u.timeToBeProcessedAfter=Date.now()+Pe,u.retryAttempts>=r){++s;const e=c.delete();je(e,n)}else{const e=c.update(u);je(e,n)}a.length<t?c.continue():e({items:a,numberOfDeletedItems:s})}else e({items:a,numberOfDeletedItems:s})}});return await Be(i,this.logger),l}),o()(this,"deleteItems",async e=>{const{transaction:t,objectStore:n}=await this.getObjectStoreAndTransaction("readwrite");try{const r=e.map(e=>this.deleteItem(n,e));await Be(t,this.logger),await Promise.all(r)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}}),o()(this,"getItemCount",async()=>{const{transaction:e,objectStore:t}=await this.getObjectStoreAndTransaction("readonly"),n=t.index(ge),r=IDBKeyRange.upperBound(Date.now()),o=n.count(r),i=await He(o);return await Be(e,this.logger),i.target.result}),o()(this,"processItems",async(e,t=Le)=>{const n=await this.getItems(t),{items:r}=n,o=ke()(n,We);try{const t=await e(r,o),n=r.map(e=>e.id);return await this.deleteItems(n),t}catch(e){throw new Ce(e)}}),o()(this,"deleteItem",async(e,t)=>{const{logger:n}=this;try{await He(e.delete(t))}catch(e){throw n.error("Failed to delete item:",t,e),e}}),o()(this,"getObjectStoreAndTransaction",async e=>{const t=(await this.db).transaction(Te,e),n=t.objectStore(Te);return{transaction:t,objectStore:n}}),this.options=Ue(t),this.namespace=e,this.logger=this.options.logger,!window.indexedDB)throw this.logger.warn("Browser doesn't support a IndexedDB."),new Error("IndexedDB not supported");this.db=this.startDB(),this.globalEventLimitGuard=new $e(this.options.maxEventLimit,this.namespace,this.logger,this.deleteItem)}storeType(){return Ie.INDEXEDDB}}class Ge{constructor(e,t){if(o()(this,"insertItemsToMemoryStore",(e,t)=>{switch(t){case Oe.ABANDON:return this.handleAbandonIfLimitWillExceedPolicy(e);case Oe.EVICT:return Promise.resolve(this.handleEvictOldestIfLimitExceededPolicy(e));case Oe.IGNORE:return this.handleAddAsManyAsPossible(e)}}),!(e>0))throw Error("Event Limit has to be set higher than 1");this.eventLimit=e,this.memoryItemHandlers=t}async handleAbandonIfLimitWillExceedPolicy(e){if(await this.memoryItemHandlers.getItemCount()+e.length>this.eventLimit)throw new Ne(Ie.MEMORY);return this.memoryItemHandlers.addItems(e),{items:e,numberOfEvictedItems:0}}handleEvictOldestIfLimitExceededPolicy(e){return this.memoryItemHandlers.addItems(e),{items:e,numberOfEvictedItems:this.memoryItemHandlers.evictEventsIfNeeded(this.eventLimit)}}async handleAddAsManyAsPossible(e){const t=this.eventLimit-await this.memoryItemHandlers.getItemCount(),n=t>e.length?e:e.slice(0,t);return this.memoryItemHandlers.addItems(n),{items:n,numberOfEvictedItems:0}}}const Ke=["item"],ze=["items"];function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class Je{constructor(e,t={}){this.namespace=e,this.memoryStore=[],this.options=Ue(t),this.globalEventLimitGuard=new Ge(this.options.maxEventLimit,{addItems:this.addItems.bind(this),getItemCount:this.getItemCount.bind(this),evictEventsIfNeeded:this.evictEventsIfNeeded.bind(this)})}async addItem(e,t={},n=Oe.ABANDON){if(n===Oe.IGNORE)throw new De(n,"IndexedDbConnector#addItem");const r=xe(e,this.namespace,t),o=await this.globalEventLimitGuard.insertItemsToMemoryStore([r],n);return Promise.resolve({item:o.items[0],numberOfEvictedItems:o.numberOfEvictedItems})}bulkAddItem(e,t=Oe.ABANDON){const n=e.map(e=>{let{item:t}=e,n=ke()(e,Ke);return xe(t,this.namespace,n)});return this.bulkAddItemWrapperType(n,t)}bulkAddItemWrapperType(e,t=Oe.ABANDON){return Promise.resolve(this.globalEventLimitGuard.insertItemsToMemoryStore(e,t))}getItems(e=Le){return Promise.resolve(this.synchronousGetItems(e))}synchronousGetItems(e=Le){const t=e>0?e:Le,n=Date.now(),r=[],o=[];for(let e of this.memoryStore)if(e.timeToBeProcessedAfter<=n&&(r.push(Xe({},e)),e.timeToBeProcessedAfter+=Pe,e.retryAttempts+=1,e.retryAttempts>=this.options.maxAttempts&&o.push(e)),r.length>=t)break;return o.forEach(e=>{const t=this.memoryStore.indexOf(e);this.memoryStore.splice(t,1)}),{items:r,numberOfDeletedItems:o.length}}deleteItems(e){return this.memoryStore=this.memoryStore.filter(t=>!e.includes(t.id)),Promise.resolve(void 0)}getItemCount(){const e=Date.now(),t=this.memoryStore.filter(t=>t.timeToBeProcessedAfter<=e).length;return Promise.resolve(t)}async processItems(e,t){const n=this.synchronousGetItems(t),{items:r}=n,o=ke()(n,ze),i=r.map(e=>e.id);try{const t=await e(r,o);return await this.deleteItems(i),t}catch(e){throw new Ce(e)}}storeType(){return Ie.MEMORY}addItems(e){this.memoryStore.push(...e),this.memoryStore.sort((function(e,t){return e.timeAdded-t.timeAdded}))}evictEventsIfNeeded(e){const t=this.memoryStore.length;if(t>e){const n=t-e;return this.memoryStore.splice(0,n),n}return 0}}var Qe=class{constructor(e,t={}){if(this.namespace=e,this.options=Ue(t),!e||0===e.length||"string"!=typeof e)throw new Error("Invalid namespace provided");this.resilience=this.getResilienceMechanism(e,t)}getResilienceMechanism(e,t){if(!t.useMemory)try{return new Ve(e,t)}catch(e){var n;null===(n=t.logger)||void 0===n||n.warn("Attempted to create IndexedDbResilience but failed. Using memory instead.")}return new Je(this.namespace,t)}addItem(e,t,n=Oe.ABANDON){return this.runOrFailOver(()=>this.resilience.addItem(e,t,n))}bulkAddItem(e,t=Oe.ABANDON){return this.runOrFailOver(()=>this.resilience.bulkAddItem(e,t))}getItems(e){return this.runOrFailOver(()=>this.resilience.getItems(e))}deleteItems(e){return this.runOrFailOver(()=>this.resilience.deleteItems(e))}getItemCount(){return this.runOrFailOver(()=>this.resilience.getItemCount())}processItems(e,t){return this.runOrFailOver(()=>this.resilience.processItems(e,t))}storeType(){return this.resilience.storeType()}async runOrFailOver(e){try{return await e()}catch(t){if(we(t))throw t;return this.resilience.storeType()===Ie.INDEXEDDB&&await this.failOver(),e()}}async failOver(){const e=this.resilience,t=new Je(this.namespace,this.options);this.resilience=t;try{const{items:n}=await e.getItems(this.options.maxEventLimit);if(n.length>0){const r=(await t.bulkAddItemWrapperType(n,Oe.IGNORE)).items.map(e=>e.id);await e.deleteItems(r)}}catch(e){this.options.logger.warn("Unexpected error from ResilienceDb, switching to MemoryDb")}}};let Ze,et;!function(e){e.INDEXEDDB="indexeddb",e.MEMORY="memory"}(Ze||(Ze={})),function(e){e[e.ONLINE=0]="ONLINE",e[e.OFFLINE=1]="OFFLINE"}(et||(et={}));class tt{constructor(){o()(this,"itemsDiscardedByRetry",0),o()(this,"eventCount",0),o()(this,"itemsDiscardedByOverflow",0),o()(this,"resilienceMechanism",Ze.INDEXEDDB),o()(this,"localstorageNumberOfQueuesPurged",0),o()(this,"localstorageNumberOfFullReclaims",0),o()(this,"localstorageNumberOfPartialReclaims",0),o()(this,"localstorageNumberOfFailedReclaims",0)}addToItemsDiscardedByRetryCounter(e=1){this.itemsDiscardedByRetry+=e}addToEventCount(){this.eventCount++}addToItemsDiscardedByOverflowCounter(e=1){this.itemsDiscardedByOverflow+=e}setResilienceMechanism(e){this.resilienceMechanism=e}addToReclaimMetrics(e){this.localstorageNumberOfFullReclaims+=e.fullReclaims,this.localstorageNumberOfPartialReclaims+=e.partialReclaims,this.localstorageNumberOfFailedReclaims+=e.failedReclaims}addToPurgedQueuesMetrics(e){this.localstorageNumberOfQueuesPurged+=e}subtractFromMetrics(e){this.itemsDiscardedByRetry=this.subtractFromCount(this.itemsDiscardedByRetry,e.itemsDiscardedByRetry),this.eventCount=this.subtractFromCount(this.eventCount,e.eventCount),this.itemsDiscardedByOverflow=this.subtractFromCount(this.itemsDiscardedByOverflow,e.itemsDiscardedByOverflow),this.localstorageNumberOfFullReclaims=this.subtractFromCount(this.localstorageNumberOfFullReclaims,e.fullReclaims),this.localstorageNumberOfPartialReclaims=this.subtractFromCount(this.localstorageNumberOfPartialReclaims,e.partialReclaims),this.localstorageNumberOfFailedReclaims=this.subtractFromCount(this.localstorageNumberOfFailedReclaims,e.failedReclaims),this.localstorageNumberOfQueuesPurged=this.subtractFromCount(this.localstorageNumberOfQueuesPurged,e.localstorageQueuesPurged)}subtractFromCount(e,t){return Math.max(e-(t||0),0)}getMetricsPayload(){return{itemsDiscardedByRetry:this.itemsDiscardedByRetry,eventCount:this.eventCount,itemsDiscardedByOverflow:this.itemsDiscardedByOverflow,resilienceMechanism:this.resilienceMechanism,localstorageQueuesPurged:this.localstorageNumberOfQueuesPurged,fullReclaims:this.localstorageNumberOfFullReclaims,partialReclaims:this.localstorageNumberOfPartialReclaims,failedReclaims:this.localstorageNumberOfFailedReclaims}}}let nt=null;var rt=()=>(nt||(nt=new tt),nt);class ot{constructor(e){window.addEventListener("offline",()=>e(et.OFFLINE)),window.addEventListener("online",()=>e(et.ONLINE))}getNetworkStatus(){return window.navigator.onLine?et.ONLINE:et.OFFLINE}}let it,at,st;!function(e){e.IDLE="idle",e.RUNNING="running",e.COMPLETED="completed",e.TIMED_OUT="timedOut"}(it||(it={})),function(e){e.EXECUTE="execute",e.COMPLETE="complete",e.TIMEOUT="timeout"}(at||(at={}));class ct{constructor(e){if(o()(this,"timeoutHandle",void 0),o()(this,"callbackStatus",it.IDLE),!(e>0))throw new Error("CallbackWithTimeout requires timeout period higher than 0");this.timeoutPeriod=e}transitionCallbackStatus(e,t){switch(e){case it.IDLE:case it.TIMED_OUT:case it.COMPLETED:t===at.EXECUTE&&(this.callbackStatus=it.RUNNING);break;case it.RUNNING:switch(t){case at.COMPLETE:this.callbackStatus=it.COMPLETED;break;case at.TIMEOUT:this.callbackStatus=it.TIMED_OUT}break;default:this.callbackStatus=e}}executeCallbackWithTimeout(e,t,n){this.transitionCallbackStatus(this.callbackStatus,at.EXECUTE),this.timeoutHandle=window.setTimeout(()=>{this.transitionCallbackStatus(this.callbackStatus,at.TIMEOUT),n()},this.timeoutPeriod),e(e=>{this.cancelTimeout(),this.getCallbackStatus()!==it.TIMED_OUT&&(this.transitionCallbackStatus(this.callbackStatus,at.COMPLETE),t(e))})}getCallbackStatus(){return this.callbackStatus}cancelTimeout(){this.timeoutPeriod>0&&this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}}!function(e){e[e.NOOP=0]="NOOP",e[e.SUCCESS=1]="SUCCESS",e[e.ERROR=2]="ERROR"}(st||(st={}));const ut={minRetryDelay:1e3,maxRetryDelay:3e4,backoffFactor:2,backoffJitterPercentage:0,waitInterval:500,callbackTimeoutPeriod:5e3};let lt;!function(e){e[e.NONE=0]="NONE",e[e.IMMEDIATE=1]="IMMEDIATE",e[e.WAIT=2]="WAIT"}(lt||(lt={}));class dt{constructor(e,t){o()(this,"schedule",({immediate:e}={immediate:!1})=>{this.operationInFlight?e?this.queuedSchedule=lt.IMMEDIATE:this.queuedSchedule!==lt.IMMEDIATE&&(this.queuedSchedule=lt.WAIT):(e||this.options.waitInterval<=0)&&0===this.failureCount?(this.clearTimeout(),this.run()):this.failureCount>0&&null===this.scheduledTimeout?this.scheduledTimeout=window.setTimeout(this.run,this.calculateBackoff()):null===this.scheduledTimeout&&(this.scheduledTimeout=window.setTimeout(this.run,this.options.waitInterval))}),o()(this,"stop",()=>{this.clearTimeout(),this.queuedSchedule=lt.NONE}),o()(this,"getFailureCount",()=>this.failureCount),o()(this,"getCallbackStatus",()=>this.callbackTimer.getCallbackStatus()),o()(this,"clearTimeout",()=>{null!==this.scheduledTimeout&&(window.clearTimeout(this.scheduledTimeout),this.scheduledTimeout=null)}),o()(this,"run",()=>{this.operationInFlight=!0,this.clearTimeout();try{this.callbackTimer.executeCallbackWithTimeout(this.callback,this.done,()=>this.done(st.ERROR))}catch(e){this.done(e)}}),o()(this,"done",e=>{this.operationInFlight=!1,e===st.ERROR||this.callbackTimer.getCallbackStatus()===it.TIMED_OUT?(this.failureCount++,this.clearTimeout()):e===st.SUCCESS&&(this.failureCount=0),this.processQueuedSchedule()}),o()(this,"processQueuedSchedule",()=>{if(this.queuedSchedule!==lt.NONE){const e=this.queuedSchedule===lt.IMMEDIATE;this.queuedSchedule=lt.NONE,this.schedule({immediate:e})}else this.failureCount>0&&this.schedule()}),o()(this,"calculateBackoff",()=>{const{minRetryDelay:e,maxRetryDelay:t,backoffFactor:n,backoffJitterPercentage:r}=this.options;let o=e*n**this.failureCount;if(r){const e=Math.random(),t=Math.floor(e*r*o);Math.floor(10*e)<5?o-=t:o+=t}return Number(Math.min(o,t).toPrecision(1))}),this.options={minRetryDelay:e.minRetryDelay||ut.minRetryDelay,maxRetryDelay:e.maxRetryDelay||ut.maxRetryDelay,backoffFactor:e.backoffFactor||ut.backoffFactor,backoffJitterPercentage:e.backoffJitterPercentage||ut.backoffJitterPercentage,waitInterval:void 0!==e.waitInterval?e.waitInterval:ut.waitInterval,callbackTimeoutPeriod:e.callbackTimeoutPeriod||ut.callbackTimeoutPeriod},this.scheduledTimeout=null,this.failureCount=0,this.callback=t,this.operationInFlight=!1,this.queuedSchedule=lt.NONE,this.callbackTimer=new ct(this.options.callbackTimeoutPeriod)}}function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ht={backoffFactor:0,backoffJitterPercentage:0,flushWaitMs:6e4,minRetryDelay:6e4,maxRetryDelay:6e4},pt={backoffFactor:2,backoffJitterPercentage:.2,batchFlushSize:7,flushBeforeUnload:!1,flushWaitMs:500,maxAttempts:10,maxItems:1e3,maxRetryDelay:3e4,minRetryDelay:1e3};class mt{constructor(e,t,n,r){this.queuePrefix=e,this.resilience=new Qe(t,{logger:r,maxAttempts:null==n?void 0:n.maxAttempts,maxEventLimit:null==n?void 0:n.maxItems}),this.options=this.buildOptions(n),this.scheduler=new dt(_t(_t({},this.options),{},{waitInterval:null!=n&&n.flushBeforeUnload?0:this.options.flushWaitMs}),this.scheduleCallback.bind(this)),this.longPollingScheduler=new dt(_t(_t({},ht),{},{waitInterval:ht.flushWaitMs}),this.scheduleLongCallBack.bind(this)),this.metricsCollector=rt(),this.networkStatus=new ot(e=>{e===et.OFFLINE?this.scheduler.stop():this.checkEventCountAndReschedule()})}start(e){this.batchFlushCallback=e,this.longPollingScheduler.schedule()}stop(){this.scheduler.stop(),this.longPollingScheduler.stop()}async addItem(e){const t=JSON.parse(JSON.stringify(e)),{numberOfEvictedItems:n}=await this.resilience.addItem(t,{},Oe.EVICT);this.scheduler.schedule(),this.metricsCollector.addToEventCount(),n>0&&this.metricsCollector.addToItemsDiscardedByOverflowCounter(n)}getGlobalRetryCount(){return this.scheduler.getFailureCount()}async scheduleCallback(e){if(this.networkStatus.getNetworkStatus()!==et.OFFLINE)try{e(await this.resilience.processItems(this.flush.bind(this),this.options.batchFlushSize))}catch(t){if(t.name===Se)return void e(st.ERROR)}finally{await this.checkEventCountAndReschedule()}else e(st.NOOP)}async checkEventCountAndReschedule(){const e=await this.resilience.getItemCount();e>0&&this.scheduler.schedule({immediate:e>=this.options.batchFlushSize})}async scheduleLongCallBack(e){const t=ue(this.queuePrefix);this.metricsCollector.addToPurgedQueuesMetrics(t);const n=await pe(this.queuePrefix,async e=>{const t=e.map(e=>({item:e.item,retryAttempts:e.attemptNumber,id:e.id})),{items:n}=await this.resilience.bulkAddItem(t,Oe.IGNORE);return n.length===t.length?{status:"successful"}:{status:"partial",acceptedItemIds:n.map(e=>e.id)}});this.metricsCollector.addToReclaimMetrics(n),await this.checkEventCountAndReschedule(),e(st.SUCCESS),this.longPollingScheduler.schedule()}flush(e,t){this.metricsCollector.setResilienceMechanism(this.resilience.storeType());const{batchFlushCallback:n}=this;if(!n)throw new Error("batchFlushCallback has not been set. Call PullBatchableQueue#start first.");return new Promise((r,o)=>{if(e.length<=0)return void r(st.NOOP);const i=e.map(e=>{const t=e.item;return e.retryAttempts>0&&t.msg&&(t.msg._metadata||(t.msg._metadata={}),t.msg._metadata.failedAttempts=e.retryAttempts),t});n(i,e=>{e?(t.numberOfDeletedItems>0&&this.metricsCollector.addToItemsDiscardedByRetryCounter(t.numberOfDeletedItems),o(e)):r(st.SUCCESS)})})}buildOptions(e){return{backoffFactor:(null==e?void 0:e.backoffFactor)||pt.backoffFactor,backoffJitterPercentage:void 0!==(null==e?void 0:e.backoffJitterPercentage)?e.backoffJitterPercentage:pt.backoffJitterPercentage,batchFlushSize:(null==e?void 0:e.batchFlushSize)||pt.batchFlushSize,flushBeforeUnload:(null==e?void 0:e.flushBeforeUnload)||pt.flushBeforeUnload,flushWaitMs:(null==e?void 0:e.flushWaitMs)||pt.flushWaitMs,maxItems:(null==e?void 0:e.maxItems)||pt.maxItems,maxAttempts:(null==e?void 0:e.maxAttempts)||pt.maxAttempts,maxRetryDelay:(null==e?void 0:e.maxRetryDelay)||pt.maxRetryDelay,minRetryDelay:(null==e?void 0:e.minRetryDelay)||pt.minRetryDelay}}}var Et=(e,t,n,r)=>new mt(e,t,n||{},r);let Tt,gt,At;function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}async function It(e,t){try{const n=await t;return e.map(e=>(function(e,t){if(!(t&&t instanceof Function))return e;if(e.msg.type===Tt.PAGE||e.msg.type===Tt.TRACK){const n=t();n&&Array.isArray(n)&&(e.msg.properties=vt(vt({},e.msg.properties),{},{xid:n}))}else if(e.msg.traits&&e.msg.type===Tt.IDENTIFY){const n=t();n&&Array.isArray(n)&&(e.msg.traits=vt(vt({},e.msg.traits),{},{xid:n}))}return e})(e,n))}catch(t){return e}}!function(e){e.IDENTIFY="identify",e.PAGE="page",e.TRACK="track"}(Tt||(Tt={})),function(e){e.XC="xc",e.UID="uid"}(gt||(gt={})),function(e){e.NEW="NEW",e.CHANGED="CHANGED",e.EXISTING="EXISTING",e.TIMEOUT="TIMEOUT",e.ERROR="ERROR",e.UNAVAILABLE="UNAVAILABLE",e.MALFORMED="MALFORMED",e.UNKNOWN="UNKNOWN"}(At||(At={}));const Ot=1e4;var yt=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Nt(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],o=t[n],!(r===o||yt(r)&&yt(o)))return!1;var r,o;return!0}function St(e,t){void 0===t&&(t=Nt);var n=null;function r(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return r.clear=function(){n=null},r}function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Rt=async e=>{var t;const n=null===(t=Dt(e))||void 0===t?void 0:t.signal,r=wt(e.url),i=await fetch(e.url,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e.batch),signal:n},r));if(429===i.status||i.status>=500&&i.status<600)throw new Error(`HTTP Error ${i.status} (${i.statusText})`);return i},Dt=e=>{if(e.abortController)return e.abortController;if(e.timeout){const t=new AbortController;return setTimeout(()=>{t.abort()},e.timeout),t}},wt=St(e=>{return new URL(e).origin===location.origin?{}:{mode:"cors",credentials:"include"}});function Mt(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function kt(e){Mt(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Lt(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Pt(e){Mt(1,arguments);var t=kt(e);return t.setHours(0,0,0,0),t}var xt=864e5;function Ut(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Ht(e,t){Mt(2,arguments);var n=kt(e),r=kt(t),o=Ut(n,r),i=Math.abs(function(e,t){Mt(2,arguments);var n=Pt(e),r=Pt(t),o=n.getTime()-Lt(n),i=r.getTime()-Lt(r);return Math.round((o-i)/xt)}(n,r));n.setDate(n.getDate()-o*i);var a=o*(i-Number(Ut(n,r)===-o));return 0===a?0:a}var Bt=n(61),jt=n.n(Bt);const $t={expires:365,secure:"https:"===window.location.protocol,path:"/"};var Ft=new class{constructor(){o()(this,"_data",{}),o()(this,"length",0),o()(this,"setItem",(e,t)=>(this._data[e]=t,this.length=Object.keys(this._data).length,t)),o()(this,"getItem",e=>e in this._data?this._data[e]:null),o()(this,"removeItem",e=>(e in this._data&&delete this._data[e],this.length=Object.keys(this._data).length,null)),o()(this,"clear",()=>{this._data={},this.length=0}),o()(this,"key",e=>Object.keys(this._data)[e])}};const Wt="awc",Yt="awcInMemoryStorageFallback";function Vt(e){if(!e)return!1;try{const t="awc.storage.support";e.setItem(t,"test_value");const n=e.getItem(t);return e.removeItem(t),"test_value"===n}catch(e){return!1}}class Gt{constructor(e,t={}){o()(this,"getStore",()=>this._store),o()(this,"getItem",e=>this._store.getItem(this.createKey(e))),o()(this,"removeItem",e=>this._store.removeItem(this.createKey(e))),o()(this,"setItem",(e,t)=>{try{this._store.setItem(this.createKey(e),t)}catch(n){(function(e){let t=!1;if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else-2147024882===e.number&&(t=!0);return t})(n)&&(this.swapToInMemory(),this._store.setItem(this.createKey(e),t))}}),o()(this,"swapToInMemory",()=>{if(this._store===Ft)return;const e=Object.keys(this._store||{});let t;Vt(window[Yt])?t=window[Yt]:(t=Ft,window[Yt]||(window[Yt]=Ft)),e.forEach(e=>{if(0===e.indexOf(this.getPrefix())){const n=this._store.getItem(e);n&&t.setItem(e,n)}}),this._store=t}),o()(this,"clear",()=>this._store.clear()),o()(this,"key",e=>this._store.key(e)),o()(this,"getPrefix",()=>this._prefix),o()(this,"createKey",e=>this._prefix?`${this.getPrefix()}.${e}`:e),this.options=t;const n=[];(void 0===t.useStoragePrefix||t.useStoragePrefix)&&n.push(Wt),t.envPrefix&&t.envPrefix!==s.PROD&&n.push(t.envPrefix),this._prefix=n.join("-"),Vt(e)?this._store=e:this.swapToInMemory()}}var Kt=class extends Gt{constructor(e){let t;try{t=window.localStorage||Ft}catch(e){t=Ft}super(t,e)}};class zt{constructor(){this.safeStorage=new Kt({useStoragePrefix:!1})}set(e,t){return this.safeStorage.setItem(e,t),t}get(e){return this.safeStorage.getItem(e)||void 0}remove(e){this.safeStorage.removeItem(e)}}const qt=()=>!("file:"===location.protocol||"chrome-extension:"===location.protocol),Xt=St(()=>{const{hostname:e}=location,t=e.split(".");for(let e=1;e<=t.length;e++){const n=`.${t.slice(-1*e).join(".")}`;if(jt.a.set("__awc_tld_test__","tld_test",{domain:n}),"tld_test"===jt.a.get("__awc_tld_test__"))return jt.a.remove("__awc_tld_test__"),n}return e});function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class Zt{constructor(){this.cookieLike=qt()?jt.a:new zt}set(e,t,n){return this.cookieLike.set(e,t,Qt(Qt({},$t),{},{domain:Xt()},n))}get(e){return this.cookieLike.get(e)}remove(e,t){this.cookieLike.remove(e,Qt({},t))}}const en="ajs_anonymous_id";class tn{constructor(){this.store=new Kt({useStoragePrefix:!1}),this.cookie=new Zt}getUserId(){return this.userId||null}setUserId(e){this.userId=e}getAnonymousId(){const e=this.store.getItem(en);if(e){const t=JSON.parse(e);return(!this.lastAnonymousIdCookieUpdate||Ht(new Date,new Date(this.lastAnonymousIdCookieUpdate))>=7)&&this.setAnonymousId(t),t}{const e=this.cookie.get(en);if(e){const t=JSON.parse(e);return this.store.setItem(en,e),t}}const t=a()();return this.setAnonymousId(t),t}setAnonymousId(e){return this.cookie.set(en,JSON.stringify(e)),this.lastAnonymousIdCookieUpdate=Date.now(),this.store.setItem(en,JSON.stringify(e))}}var nn=n(356),rn=n.n(nn);function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const sn=e=>an(an({},e.context),{},{userAgent:navigator.userAgent}),cn=e=>{const t=un(e);return rn()(t)},un=e=>{const t={};return Object.keys(e).forEach(n=>{const r=ln(e,n);void 0!==r&&(Array.isArray(r)?t[n]=r.map(e=>e):t[n]="object"==typeof r&&null!==r?un(r):r)}),t},ln=(e,t)=>e[t];function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class _n{constructor(e){o()(this,"sendEvents",async(e,t)=>{const n=this.resilienceQueue.getGlobalRetryCount(),r=this.metrics.getMetricsPayload(),o=fn(fn({},r),{},{httpRetryCount:n});for(let e in o)0===o[e]&&delete o[e];const i=await this.attachXIDs(e),a=(new Date).toISOString(),s={batch:i.map(e=>(e.msg.sentAt=a,e.msg)),sentAt:a,metadata:o};try{const e=await Rt({url:this.gasv3BatchUrl,batch:s,timeout:this.options.requestTimeout});this.metrics.subtractFromMetrics(r),t(null,e)}catch(e){t(e,null)}}),this.user=new tn,this.options=fn(fn({},e),{},{requestTimeout:e.requestTimeout||Ot,retryQueueOptions:e.retryQueueOptions||{},logger:e.logger||console}),this.xidPromiseCallback=e.xidPromiseGetter(),this.gasv3BatchUrl=`https://${e.apiHost}/batch`,this.metrics=rt(),this.resilienceQueue=Et(e.retryQueuePrefix,e.product,this.options.retryQueueOptions,this.options.logger),this.resilienceQueue.start(this.sendEvents)}getUser(){return this.user}async track(e,t,n,r){const o=fn(fn({},this.buildBaseEvent(n,Tt.TRACK)),{},{type:Tt.TRACK,properties:cn(t),event:e}),i=fn(fn({},o),{},{messageId:this.createMessageId()}),a=this.packageEvent(i);await this.resilienceQueue.addItem(a),r&&r()}async page(e,t,n,r){const o=fn(fn({},this.buildBaseEvent(n,Tt.PAGE)),{},{type:Tt.PAGE,properties:cn(t),name:e}),i=fn(fn({},o),{},{messageId:this.createMessageId()}),a=this.packageEvent(i);await this.resilienceQueue.addItem(a),r&&r()}async identify(e,t,n,r){const o=fn(fn({},this.buildBaseEvent(n,Tt.IDENTIFY)),{},{type:Tt.IDENTIFY,traits:cn(t)}),i=fn(fn({},o),{},{messageId:this.createMessageId()}),a=this.packageEvent(i);await this.resilienceQueue.addItem(a),r&&r()}buildBaseEvent(e,t){const n=cn(e);return{context:sn(n),timestamp:(new Date).toISOString(),type:t,userId:this.user.getUserId(),anonymousId:this.user.getAnonymousId()}}createMessageId(){return`ajs-${a()()}`}packageEvent(e){const{apiHost:t}=this.options;return{headers:{"Content-Type":"text/plain"},msg:e,url:`https://${t}/${e.type.charAt(0)}`}}async attachXIDs(e){return this.xidPromiseCallback?It(e,this.xidPromiseCallback):Promise.resolve(e)}}var hn=n(85);const pn=e=>window.history.replaceState({},"",e);var mn=(e,t=pn)=>{const n=window.location.href,r=window.location.hash,o=""!==r?n.replace(r,""):n,{url:i,query:a}=Object(hn.parseUrl)(o),s=((e,t)=>Object.keys(e).filter(n=>t(e[n],n)).reduce((t,n)=>(t[n]=e[n],t),{}))(a,e);if(Object.keys(s).length>0){const n=((e,t)=>Object.keys(e).filter(n=>!t(e[n],n)).reduce((t,n)=>(t[n]=e[n],t),{}))(a,e);if(Object.keys(n).length>0){t(`${i}?${Object(hn.stringify)(n)}${r}`)}else t(`${i}${r}`)}return s};class En{constructor(){o()(this,"handleOriginParameters",(e,t)=>{const n=Object.keys(e);if(!(n.length>0))throw new Error("Empty parameter mapping provided");const r=n.filter(e=>Object.values(m).indexOf(e)<0);if(r.length>0)throw new Error(`Invalid Origin Tracing Parameter(s) supplied: ${r.join()}!`);const o=mn((e,t)=>n.indexOf(t)>=0,t);return Object.keys(o).map(t=>{return{[t]:e[t](o[t])}}).reduce((e,t)=>Object.assign(e,t),{})}),this._originStore={}}}const Tn="session.id",gn="session.expiry",An=/^\d+$/,bn=18e5,vn=5e3,In=.9;class On{constructor(e={}){o()(this,"_generateNewSessionId",()=>{const e=Date.now().toString();return this._safeLocalStorage.setItem(Tn,e),e}),o()(this,"_updateSessionExpiry",()=>{const e=Date.now()+this._sessionExpiryTime;return this._safeLocalStorage.setItem(gn,e.toString()),e}),o()(this,"_debouncedUpdateSessionExpiry",e=>{const{_updateSessionExpiry:t}=this;if(e<Date.now()+this._sessionExpiryDebounceThresholdPercentage*this._sessionExpiryTime)return t();this._sessionExpiryDebounceTimer&&clearTimeout(this._sessionExpiryDebounceTimer),this._sessionExpiryDebounceTimer=setTimeout(()=>{t()},this._sessionExpiryDebounce)}),this._sessionExpiryTime=e.sessionExpiryTime||bn,this._sessionExpiryDebounce=e.sessionExpiryDebounce||vn,this._sessionExpiryDebounceThresholdPercentage=e.sessionExpiryDebounceThresholdPercentage||In,this._safeLocalStorage=new Kt}getCurrentSessionId(){const e=this._safeLocalStorage.getItem(Tn),t=parseInt(this._safeLocalStorage.getItem(gn)||"0",10)||0;return this._debouncedUpdateSessionExpiry(t),!e||t<=Date.now()||Number.isNaN(t)?this._generateNewSessionId():An.test(e)?e:this._generateNewSessionId()}}var yn=class extends Gt{constructor(e){let t;try{t=window.sessionStorage||Ft}catch(e){t=Ft}super(t,e)}};const Nn="tab.id";class Sn{constructor(){o()(this,"_generateNewTabId",()=>{const e=a()();return this._safeSessionStorage.setItem(Nn,e),e}),this._safeSessionStorage=new yn}getCurrentTabId(){let e=this._safeSessionStorage.getItem(Nn);return e||(e=this._generateNewTabId()),e}}function Cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Dn="taskSessions",wn="taskSessionsInit",Mn="awc.",kn=3e3;class Ln{constructor(){o()(this,"_taskSessionsNotRecentlyInitialised",e=>null===this._safeSessionStorage.getItem(Dn)||null===this._safeSessionStorage.getItem(wn)||parseInt(this._safeSessionStorage.getItem(wn)||"0",10)<e-kn),o()(this,"_removeTaskSessionPrefix",(e,t)=>t.split(Mn)[1]),o()(this,"_isTaskSessionQueryParam",(e,t)=>t.startsWith(Mn)),o()(this,"getAllTaskSessions",()=>{try{return JSON.parse(this._safeSessionStorage.getItem(Dn)||"")}catch(e){return{}}}),o()(this,"_writeToSessionStorage",e=>{try{this._safeSessionStorage.setItem(Dn,JSON.stringify(e))}catch(e){}}),o()(this,"_appendTaskSessions",e=>{const t=this.getAllTaskSessions(),n=null===t?e:Object.assign(t,e);this._writeToSessionStorage(n)}),o()(this,"_safelyRemoveKey",(e,t)=>null===e?{}:(delete e[t],e)),o()(this,"createTaskSession",e=>{const t=a()(),n={};return n[e]=t,this._appendTaskSessions(n),t}),o()(this,"createTaskSessionWithProvidedId",(e,t)=>{if("string"!=typeof t)throw new TypeError("invalid taskSessionId, must be string");const n={};n[e]=t,this._appendTaskSessions(n)}),o()(this,"completeTaskSession",e=>{const t=this.getAllTaskSessions(),n=this._safelyRemoveKey(t,e);this._writeToSessionStorage(n)}),o()(this,"formatTaskSessionQueryString",({uri:e,includedTaskSessions:t})=>{const{url:n,query:r}=Object(hn.parseUrl)(e),o=this.getAllTaskSessions(),i=t?z(o,t):q(o,Object.values(m));if(0===Object.keys(i).length)return e;const a=Rn(Rn({},K(i,(e,t)=>Mn+t)),r);return`${n}?${Object(hn.stringify)(a)}`}),o()(this,"stripQueryParameters",()=>{const e=K(mn(this._isTaskSessionQueryParam),this._removeTaskSessionPrefix);this._appendTaskSessions(e)});const e=Date.now();this._safeSessionStorage=new yn;try{this._taskSessionsNotRecentlyInitialised(e)&&(this._writeToSessionStorage({}),this._safeSessionStorage.setItem(wn,e.toString()))}catch(e){}}}const Pn=100,xn="synthetic",Un=()=>{try{return JSON.parse(jt.a.get("atlassian_analytics_debug")||"false")}catch(e){jt.a.remove("atlassian_analytics_debug")}return!1};var Hn=class{constructor(){o()(this,"_bind",()=>{window.testAnalytics||(window.testAnalytics={eventCache:[],events:()=>window.testAnalytics.eventCache,clear:()=>{window.testAnalytics.eventCache=[],localStorage.removeItem("awc.ui.viewed.last.sent"),localStorage.removeItem("awc-staging.ui.viewed.last.sent"),localStorage.removeItem("awc-dev.ui.viewed.last.sent"),localStorage.removeItem("awc-local.ui.viewed.last.sent")}})}),o()(this,"_cache",e=>{window.testAnalytics.eventCache.length>=Pn&&(window.testAnalytics.eventCache=window.testAnalytics.eventCache.slice(1,window.testAnalytics.eventCache.length)),window.testAnalytics.eventCache.push(e)}),o()(this,"_shouldCacheEvent",()=>this._isDebugCookieEnabled),o()(this,"saveEvent",e=>{e&&this._shouldCacheEvent()&&(window.testAnalytics||this._bind(),e.tags instanceof Array?e.tags.push(xn):e.tags=[xn],this._cache(e))}),this._isDebugCookieEnabled=Un(),this._isDebugCookieEnabled&&this._bind()}};const Bn=["embeddedProduct"];function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Fn=2e3,Wn=36e5,Yn="ui.viewed.last.sent";class Vn{constructor(e,t,n,r={}){if(o()(this,"start",()=>{this._startInterval(),this._bindEventListeners()}),o()(this,"stop",()=>{this._stopInterval(),this._unbindEventListeners()}),o()(this,"resetTimers",()=>{this._intervalId&&(this.stop(),this.start())}),o()(this,"_bindEventListeners",()=>{window.addEventListener("focus",this._focusListener),window.addEventListener("blur",this._blurListener)}),o()(this,"_unbindEventListeners",()=>{window.removeEventListener("focus",this._focusListener),window.removeEventListener("blur",this._blurListener)}),o()(this,"_startInterval",()=>{clearInterval(this._intervalId),this._intervalId=setInterval(this._handleInterval,this._delay)}),o()(this,"_stopInterval",()=>{this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)}),o()(this,"_getProductKey",(e,t)=>{let n=e;return t&&(n+=`-${t}`),n}),o()(this,"_getLastSentTimestamp",(e,t,n)=>{return(((this._parseLocalStorageData()||{})[n]||{})[t]||{})[e]||null}),o()(this,"_parseLocalStorageData",()=>{const e=this._safeLocalStorage.getItem(this._storageKey);try{return JSON.parse(e||"")}catch(e){return this._safeLocalStorage.removeItem(this._storageKey),null}}),o()(this,"_setLastSentTimestamp",(e,t,n)=>{const r=this._parseLocalStorageData()||{},o=r[n]||{},i=o[t]||{};i[e]=Date.now(),o[t]=i,r[n]=o,this._safeLocalStorage.setItem(this._storageKey,JSON.stringify(r))}),o()(this,"_shouldSendEvent",(e,t,n,r)=>{if(!document.hasFocus())return!1;if(t!==d.NONE&&!n||!r)return!1;return Date.now()-this._getLastSentTimestamp(e,n,r)>this._throttle}),o()(this,"_handleInterval",()=>{const e=this._getContext(),{embeddedProduct:t}=e,n=ke()(e,Bn);this._sendEvent(this._product,n),t&&this._sendEvent(t,n,!0)}),o()(this,"_sendEvent",(e,t,n=!1)=>{const{subproduct:r,tenantIdType:o,tenantId:i,userId:a,lastScreenEvent:s,attributes:c}=t,u=this._getProductKey(e,r);if(this._shouldSendEvent(u,o,i,a)){this._setLastSentTimestamp(u,i,a);const t=this._createEvent(e,r,n,s,c);this._onEvent(t)}}),o()(this,"_createEvent",(e,t,n,r,o)=>{const i={product:e,source:"ui",action:"viewed",actionSubject:"ui",attributes:o};return n&&(i.subproduct=null,i.version=null,i.attributes=$n($n({},i.attributes),{},{embeddedInEnv:this._productInfo.env,embeddedInProduct:this._productInfo.product,embeddedInSubproduct:t,embeddedInVersion:this._productInfo.version,embeddedInOrigin:this._productInfo.origin,embeddedInPlatform:this._productInfo.platform})),r&&(i.attributes=$n($n({},i.attributes),{},{lastScreenEvent:{name:r.name,attributes:r.attributes}})),i}),!e)throw new Error("Missing productInfo");if(!e.product)throw new Error("Missing productInfo.product");if(!t)throw new Error("Missing getContext callback");if("function"!=typeof t)throw new Error("Invalid getContext, must be function");if(!n)throw new Error("Missing onEvent callback");if("function"!=typeof n)throw new Error("Invalid onEvent, must be function");this._productInfo=e,this._product=e.product,this._getContext=t,this._onEvent=n,this._delay=r.delay||Fn,this._throttle=r.throttle||Wn,this._storageKey=r.storageKey||Yn,this._safeLocalStorage=new Kt({envPrefix:this._productInfo.env}),this._focusListener=()=>{this._startInterval()},this._blurListener=()=>{this._stopInterval()}}}function Gn(e,t){return e&&"function"==typeof e?()=>{e(t)}:null}let Kn,zn;!function(e){e.XC="xc",e.UID="uid"}(Kn||(Kn={})),function(e){e.NEW="NEW",e.CHANGED="CHANGED",e.EXISTING="EXISTING",e.TIMEOUT="TIMEOUT",e.ERROR="ERROR",e.UNAVAILABLE="UNAVAILABLE",e.MALFORMED="MALFORMED",e.UNKNOWN="UNKNOWN"}(zn||(zn={}));const qn=(e,t)=>{if(e&&t&&"function"==typeof t){const e=()=>new Promise(e=>{setTimeout(()=>e(()=>(()=>[{type:Kn.XC,state:"TIMEOUT"},{type:Kn.UID,state:"TIMEOUT"}])()),5e3)}),n=()=>t().catch(()=>()=>(()=>[{type:Kn.XC,state:"UNKNOWN"},{type:Kn.UID,state:"UNKNOWN"}])());return Promise.race([n(),e()])}};function Xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Qn="as.atlassian.com/api/v1",Zn="api-private.atlassian.com/gasv3/api/v1",er="as.staging.atl-paas.net/api/v1",tr="api-private.stg.atlassian.com/gasv3/api/v1",nr="/gateway/api/gasv3/api/v1",rr="last.screen.event",or=1e4;class ir{constructor(e,t={}){if(o()(this,"_useStargate",e=>null==e||e),o()(this,"_selectHost",({useStargate:e,env:t,useLegacyUrl:n})=>e?n?t===s.PROD?Zn:tr:window.location.host+nr:t===s.PROD?Qn:er),o()(this,"_endsWith",(e,t)=>-1!==e.indexOf(t,e.length-t.length)),o()(this,"_changeInternalUserId",(e,t)=>{this.eventProcessor.getUser().setUserId(e),t&&t!==this.eventProcessor.getUser().getAnonymousId()&&this.eventProcessor.getUser().setAnonymousId(t)}),o()(this,"_createSubproductGetter",e=>O(e,"Cannot get subproduct from the callback. Proceeding without it.")),o()(this,"_createEmbeddedProductGetter",e=>O(e,"Cannot get embeddedProduct from the callback. Proceeding without it.")),o()(this,"_getLastScreenEvent",()=>{try{return JSON.parse(this._safeSessionStorage.getItem(rr)||"")}catch(e){return this._safeSessionStorage.removeItem(rr),null}}),o()(this,"_setLastScreenEvent",e=>{this._safeSessionStorage.setItem(rr,JSON.stringify({name:e.name,attributes:e.attributes}))}),o()(this,"_shouldEventBeDelayed",e=>{if(!e.tags||-1===e.tags.indexOf("measurement"))return!1;const t=!1!==e.highPriority;return this._isDelayingLowPriorityEvents&&!t}),o()(this,"_fireEvent",(e,t,n,r)=>{switch(t.eventType){case c.UI:case c.OPERATIONAL:case c.TRACK:return this.eventProcessor.track(e,t,n,r);case c.SCREEN:return this.eventProcessor.page(e,t,n,r);case c.IDENTIFY:return this.eventProcessor.identify(e,t,n,r);default:throw new Error(`No handler has been defined for events of type ${t.eventType}`)}}),o()(this,"_fireDelayedEvent",(e,t,n,r)=>{try{this._changeInternalUserId(r.userId,r.anonymousId),t.tags=[...t.tags||[],"sentWithDelay"],this._fireEvent(e,t,n,void 0)}finally{this._changeInternalUserId(this._userInfo.userId,this._userInfo.anonymousId)}}),o()(this,"_delayEvent",(e,t,n,r,o)=>{this._delayQueue.push(e,t,n,r),o&&o()}),o()(this,"_processEvent",(e,t,n,r)=>(this._testingCache.saveEvent(t),this._shouldEventBeDelayed(t)?(this._delayEvent(e,t,n,this._userInfo,r),Promise.resolve()):this._fireEvent(e,t,n,r))),o()(this,"setEmbeddedProduct",e=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(e),this.resetUIViewedTimers()}),o()(this,"clearEmbeddedProduct",()=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(null)}),o()(this,"setSubproduct",e=>{this._productInfo.subproduct=this._createSubproductGetter(e),this.resetUIViewedTimers()}),o()(this,"setOriginTracingHandlers",e=>{const t=this.originTracing.handleOriginParameters(e,this._historyReplaceFn);Object.keys(t).forEach(e=>{void 0!==t[e].taskSessionId&&this.task.createTaskSessionWithProvidedId(e,t[e].taskSessionId)});const n={};return Object.keys(t).forEach(e=>{t[e].originTracingAttributes?n[e]=t[e].originTracingAttributes:console.warn(`Handling method for origin parameter ${e} has not returned any attributes`)}),Object.keys(t).length>0?this.sendOperationalEvent({action:"landed",actionSubject:"origin",source:"webClient",attributes:{originTracesLanded:n}},()=>{}):Promise.resolve()}),o()(this,"setTenantInfo",(e,t)=>{if(!e)throw new Error("Missing tenantIdType");if(e!==d.NONE&&!t)throw new Error("Missing tenantId");if(!T(d,e))throw new Error(`Invalid tenantIdType '${e}', `+`must be an tenantType: [${E(d)}]`);this._tenantInfo={tenantIdType:e,tenantId:t}}),o()(this,"clearTenantInfo",()=>{this._tenantInfo={}}),o()(this,"setOrgInfo",e=>{if(!e)throw new Error("Missing orgId");this._orgInfo={orgId:e}}),o()(this,"clearOrgInfo",()=>{this._orgInfo={}}),o()(this,"setUserInfo",(e,t)=>{!function(e,t){if(!e)throw new Error("Missing userIdType");if(!t)throw new Error("Missing userId");if(!T(f,e))throw new Error(`Invalid userIdType '${e}', `+`must be an userType: [${E(f)}]`)}(e,t),this._changeInternalUserId(t),this._userInfo={userIdType:e,userId:t,anonymousId:this.eventProcessor.getUser().getAnonymousId()}}),o()(this,"clearUserInfo",()=>{this._changeInternalUserId(void 0),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId()}}),o()(this,"setUIViewedAttributes",e=>{if(!e)throw new Error("Missing uiViewedAttributes");if("object"!=typeof e||Array.isArray(e))throw new Error("Invalid uiViewedAttributes type, should be a non array object");this._uiViewedAttributes=Jn({},e)}),o()(this,"clearUIViewedAttributes",()=>{this._uiViewedAttributes={}}),o()(this,"sendIdentifyEvent",(e,t,n)=>{this.setUserInfo(e,t);const r={userIdType:e,eventType:c.IDENTIFY};return this._processEvent(t,r,this._context,n)}),o()(this,"sendPageEvent",(e,t)=>this.sendScreenEvent(e,t)),o()(this,"sendScreenEvent",(e,t,n)=>{let r,o,i,a;"object"==typeof e?(r=e.name,o=e.attributes,i=e.containers,a=e.tags):(r=e,o=n),function(e){if(!e)throw new Error("Missing name")}(r),W(i);const s=B(this._productInfo,this._tenantInfo,this._userInfo,o,e.nonPrivacySafeAttributes,a,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,i),c=Jn({name:r},s);return this._setLastScreenEvent(c),this._processEvent(r,s,this._context,Gn(t,c))}),o()(this,"sendTrackEvent",(e,t)=>{!function(e){V(e)}(e);const n=$(this._productInfo,this._tenantInfo,this._userInfo,e,c.TRACK,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId);return this._processEvent(j(e),n,this._context,Gn(t,n))}),o()(this,"sendUIEvent",(e,t)=>{!function(e){V(e)}(e);const n=$(this._productInfo,this._tenantInfo,this._userInfo,e,c.UI,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId);return this._processEvent(j(e),n,this._context,Gn(t,n))}),o()(this,"sendOperationalEvent",(e,t)=>{!function(e){V(e)}(e);const n=$(this._productInfo,this._tenantInfo,this._userInfo,e,c.OPERATIONAL,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId);return this._processEvent(j(e),n,this._context,Gn(t,n))}),o()(this,"startUIViewedEvent",e=>{this.stopUIViewedEvent(),this._uiViewedEvent=new Vn(this._productInfo,()=>({embeddedProduct:this._productInfo.embeddedProduct(),subproduct:this._productInfo.subproduct(),tenantIdType:this._tenantInfo.tenantIdType,tenantId:this._tenantInfo.tenantId,userId:this._userInfo.userId,lastScreenEvent:this._getLastScreenEvent(),attributes:this._uiViewedAttributes}),t=>this.sendUIEvent(t,e)),this._uiViewedEvent.start()}),o()(this,"stopUIViewedEvent",()=>{this._uiViewedEvent&&(this._uiViewedEvent.stop(),this._uiViewedEvent=null)}),o()(this,"resetUIViewedTimers",()=>{this._uiViewedEvent&&this._uiViewedEvent.resetTimers()}),o()(this,"startApdexEvent",e=>{this._apdexEvent.start(e)}),o()(this,"getApdexStart",e=>this._apdexEvent.getStart(e)),o()(this,"stopApdexEvent",(e,t)=>{this._apdexEvent.stop(e,t)}),o()(this,"startLowPriorityEventDelay",e=>{if(void 0!==e&&(Number.isNaN(e)||e<=0))throw new Error(`Invalid timeout period: ${e}, must be a number greater than 0`);this._delayTimeout&&clearTimeout(this._delayTimeout);const t=e?Math.min(e,or):or;this._delayTimeout=setTimeout(()=>this.stopLowPriorityEventDelay(),t),this._delayQueue.cancelFlush(),this._isDelayingLowPriorityEvents=!0}),o()(this,"stopLowPriorityEventDelay",()=>{this._delayTimeout&&(clearTimeout(this._delayTimeout),this._delayTimeout=null),this._delayQueue.startFlush(),this._isDelayingLowPriorityEvents=!1}),o()(this,"onEvent",(e,t)=>{if(!t)throw new Error("Missing analyticsData");if(!t.eventType)throw new Error("Missing analyticsData.eventType");if(t.eventType===c.TRACK)return this.sendTrackEvent(t);if(t.eventType===c.UI)return this.sendUIEvent(t);if(t.eventType===c.OPERATIONAL)return this.sendOperationalEvent(t);if(t.eventType===c.SCREEN)return this.sendScreenEvent(t.name,null,t.attributes);if(t.eventType===c.IDENTIFY)return this.sendIdentifyEvent(t.userIdType,t.userId);throw new Error(`Invalid analyticsData.eventType '${t.eventType}', `+`must be an eventType: [${E(c)}]`)}),!e)throw new Error("Missing productInfo");if(!e.env)throw new Error("Missing productInfo.env");if(!e.product)throw new Error("Missing productInfo.product");if(!T(s,e.env))throw new Error(`Invalid productInfo.env '${e.env}', `+`must be an envType: [${E(s)}]`);if(e.origin){if(!T(l,e.origin))throw new Error(`Invalid productInfo.origin '${e.origin}', `+`must be an originType: [${E(l)}]`)}else e.origin=l.WEB;e.platform?function(e){if(!T(u,e.platform))throw new Error(`Invalid productInfo.platform '${e.platform}', `+`must be a platformType: [${E(u)}]`);if(e.origin===l.DESKTOP&&!T(h,e.platform))throw new Error(`Invalid productInfo.platform '${e.platform}', `+"must be one of [mac, linux, windows]");if(e.origin===l.WEB&&!T(p,e.platform))throw new Error(`Invalid productInfo.platform '${e.platform}', must be one of [web, mobileWeb]`)}(e):e.platform=e.origin===l.WEB?u.WEB:u.DESKTOP,this.logger=t.logger||console,this._productInfo=Jn(Jn({},e),{},{subproduct:this._createSubproductGetter(e.subproduct),embeddedProduct:this._createEmbeddedProductGetter(e.embeddedProduct)}),this._tenantInfo={},this._orgInfo={},this._uiViewedAttributes={},this._context=function(e){const t=window.screen||{};return{context:{locale:e.locale,screen:{width:t.width,height:t.height,density:window.devicePixelRatio},library:{name:"analytics.js",version:R}}}}(this._productInfo),this._safeSessionStorage=new yn;const n=this._useStargate(t.useStargate),r=t.apiHost||this._selectHost({useStargate:n,env:e.env,useLegacyUrl:t.useLegacyUrl}),i={maxRetryDelay:6e4,minRetryDelay:t.minRetryDelay||1e3,backoffFactor:2,flushWaitMs:t.flushWaitInterval,flushBeforeUnload:t.flushBeforeUnload},_=`awc-${e.env}`;this.eventProcessor=new _n({apiHost:r,product:e.product,retryQueuePrefix:_,retryQueueOptions:i,xidPromiseGetter:()=>qn(t.xidConsent,t.xidPromiseFn),logger:this.logger}),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId()},this._pageVisibility=new g,this._tabTracking=new Sn,this._sessionTracking=new On({sessionExpiryTime:t.sessionExpiryTime}),this.task=new Ln,this.originTracing=new En,this._apdexEvent=new I(this.sendOperationalEvent,this._pageVisibility),this._historyReplaceFn="function"==typeof t.historyReplaceFn?t.historyReplaceFn:pn,this._delayQueue=new oe(this._fireDelayedEvent,t.delayQueueCompressors),this._testingCache=new Hn,this._pageLoadId=a()()}}var ar=n(62),sr=n.n(ar);function cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const lr={initialPollInterval:5,pollBackoffRate:2,idleTimeout:30};class dr{constructor(e,t,n,r){if(o()(this,"start",()=>{if(sr.a.active)throw new Error("DwellTimeHelper should only be initialised once per page load.");this._initDwellTimeCounterAndPolling(),window.addEventListener("beforeunload",()=>{this.stop()})}),o()(this,"stop",()=>{sr.a.active&&this._sendDwellEvent(this._eventData,this._searchSessionId,!0),sr.a.stopAllTimers(),sr.a.resetAllRecordedPageTimes(),sr.a.timeElapsedCallbacks=[]}),o()(this,"newPage",(e,t)=>{G(e),this.stop(),this._eventData=e,this._searchSessionId=t,this._initDwellTimeCounterAndPolling()}),o()(this,"_initDwellTimeCounterAndPolling",()=>{sr.a.initialize({idleTimeoutInSeconds:this._timing.idleTimeout}),this._pollDwellTime(this._timing.initialPollInterval,this._searchSessionId,this._eventData)}),o()(this,"_pollDwellTime",(e,t,n)=>{sr.a.callAfterTimeElapsedInSeconds(e,()=>{this._sendDwellEvent(n,t,!1),this._pollDwellTime(e*this._timing.pollBackoffRate,t,n)})}),o()(this,"_sendDwellEvent",(e,t,n)=>{const r={dwellTime:sr.a.getTimeOnCurrentPageInMilliseconds(),searchReferrer:t,finalDwellEvent:n};this._trackCallback({action:"dwelled",actionSubject:e.actionSubject,actionSubjectId:e.actionSubjectId,source:e.source,containerType:e.containerType,containerId:e.containerId,containers:e.containers,objectType:e.objectType,objectId:e.objectId,attributes:ur(ur({},r),e.attributes),tags:e.tags})}),!e)throw new Error("trackCallback is required for DwellTimeHelper");G(t),this._trackCallback=e,this._eventData=t,this._searchSessionId=n,this._timing=ur(ur({},lr),r)}}var fr=n(357);function _r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const pr={initialPollInterval:5e3,idleTimeout:3e4,multiplierCallback:e=>e+e};class mr{constructor(e,t,n,r){if(o()(this,"start",()=>{this.browserInteractionTime.startTimer(),this.browserInteractionTime.addTimeIntervalEllapsedCallback({callback:e=>this._sendDwellEvent(this._eventData,this._searchSessionId,e,!1),timeInMilliseconds:this._timing.initialPollInterval,multiplier:this._timing.multiplierCallback}),window.addEventListener("beforeunload",this._onBeforeUnload)}),o()(this,"stop",()=>{this.browserInteractionTime.isRunning()&&this._sendDwellEvent(this._eventData,this._searchSessionId,this.browserInteractionTime.getTimeInMilliseconds(),!0),this.browserInteractionTime.stopTimer()}),o()(this,"newPage",(e,t)=>{G(e),this.stop(),this.browserInteractionTime.reset(),this.setEventData(e),this.setSearchSessionId(t),this.start()}),o()(this,"setEventData",e=>{this._eventData=e}),o()(this,"getEventData",()=>this._eventData),o()(this,"setSearchSessionId",e=>{this._searchSessionId=e}),o()(this,"getSearchSessionId",()=>this._searchSessionId),o()(this,"destroy",()=>{this.browserInteractionTime.destroy(),window.removeEventListener("beforeunload",this._onBeforeUnload)}),o()(this,"_onBeforeUnload",()=>{this.stop(),this.destroy()}),o()(this,"_sendDwellEvent",(e,t,n,r)=>{const o={dwellTime:n,searchReferrer:t,finalDwellEvent:r};this._trackCallback({action:"dwelled",actionSubject:e.actionSubject,actionSubjectId:e.actionSubjectId,source:e.source,containerType:e.containerType,containerId:e.containerId,objectType:e.objectType,objectId:e.objectId,attributes:hr(hr({},o),e.attributes),tags:e.tags})}),!e)throw new Error("trackCallback is required for DwellTimeHelper");G(t),this._trackCallback=e,this._eventData=t,this._searchSessionId=n,this._timing=hr(hr({},pr),r),this.browserInteractionTime=new fr.a({idleTimeoutMs:this._timing.idleTimeout,checkCallbacksIntervalMs:500})}}function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gr(e,t,n){const r=Tr({action:e},n);return r.attributes=Tr(Tr({},t),r.attributes),r}class Ar{constructor(e,t){this._onEvent=e,this._baseEvent=t,this._searchStartedTime=null,this._lastQueryResultsTime=null,this._queryLength=null,this._baseEvent=Tr({},t)}search(e){if(!e&&""!==e)throw new Error("Missing query param");this._searchStartedTime=Date.now(),this._queryLength=(e||"").length}searched(e){if(!e)throw new Error("Missing results param");if(null===this._queryLength)throw new Error("search() must be called before searched().");const t=Date.now()-this._searchStartedTime;this._lastQueryResultsTime=Date.now(),this._lastResults=e;const n=gr("searched",{responseTimeMs:t,queryLength:this._queryLength,results:e},this._baseEvent);this._onEvent(n)}selected(e){if(!e&&0!==e)throw new Error("Missing selectionIndex param");if(!this._lastQueryResultsTime)throw new Error("searched() must be called before selected().");const t=Date.now(),n=t-this._lastQueryResultsTime,r=t-this._searchStartedTime,o=this._lastResults[e],i=gr("selected",{queryLength:this._queryLength,selectionIndex:e,selectionTimeMs:n,searchTimeMs:r,selectedResultValue:o},this._baseEvent);this._onEvent(i)}}n.d(t,"default",(function(){return ir})),n.d(t,"apdexType",(function(){return _})),n.d(t,"envType",(function(){return s})),n.d(t,"eventType",(function(){return c})),n.d(t,"originType",(function(){return l})),n.d(t,"platformType",(function(){return u})),n.d(t,"tenantType",(function(){return d})),n.d(t,"userType",(function(){return f})),n.d(t,"originTracingType",(function(){return m})),n.d(t,"TypeAheadHelper",(function(){return Ar})),n.d(t,"DwellTimeHelper",(function(){return dr})),n.d(t,"DwellTimeHelperWithBrowserInteraction",(function(){return mr})),n.d(t,"CompressionRule",(function(){return ee})),n.d(t,"ResilienceMechanism",(function(){return Ze}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalizationKeysError=void 0;t.LocalizationKeysError=class extends Error{constructor(e,t){super("Could not localize command"),this.name="LocalizationKeysError",this.elementType=e,this.unsupportedCase=t}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n(375),s=n(428),c=n(64),u=n(355).Auth,l=n(152);"function"!=typeof $().transition&&($.prototype.transition=function(){});var d=function(){var e="unknown",t=/^https:\/\/app\.butlerfortrello\.com\/([\w-]+)\//.exec(window.location.href);t&&t[1]&&(e=o(t,2)[1]);return e},f=function(e){var t=(e||window._trello).getContext().board;return t?"&b=".concat(t):""},_=function(e){return(e||window._trello).get("board","private","plan").catch((function(){return null}))},h=function(e,t,n){return e.get("board","private","attn").then((function(r){var o=(r||"").split(",").filter((function(e){return!!e})),i=-1!==o.indexOf(t);return!!n!=!!i&&(n?o.push(t):o=o.filter((function(e){return e!==t})),e.set("board","private","attn",o.join(",")))})).catch((function(e){return l.handleError.bind("setAttnStatus",e)}))},p=function(e){var t,n,r="";e&&(r=e.plan_id||"",t=e.is_org,n=e.org_name,function(e){var t=!1;if(e&&"undefined"!=typeof moment){var n=moment.tz.guess();n!==e&&(t=!0,$(".butler-account-tz").text(e),$(".butler-local-tz").text(n),$(".butler-update-tz-btn").off("click").click((function(){$.ajax("".concat(c,"settings/pup"),{type:"POST",data:JSON.stringify({tz:n}),headers:{"X-Butler-Trello-Token":u.getActiveToken()}}).done((function(){$(".butler-timezone-warning").transition("fade")})).fail((function(){$(this).transition("shake")}))})),$(".butler-ignore-tz-btn").off("click").click((function(){$(".butler-timezone-warning").transition("fade")})))}$(".butler-timezone-warning").transition(t?"show":"hide")}(e.tz));var o=!r.match(/^TRELLO_/);$(".butler-account-type-legacy").transition(o?"show":"hide"),$(".butler-account-type-trello").transition(o?"hide":"show");TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});r.match(/^ROYAL_TREATMENT/)?($(".butler-bronze").transition("hide"),$(".butler-silver").transition("hide"),$(".butler-free").transition("hide"),$(".butler-standard").transition("hide"),$(".butler-team").transition("hide"),$(".butler-enterprise").transition("hide"),$(".butler-gold").transition("show")):"TRELLO_GOLD"===r||r.match(/^SILVER_PLATTER/)?($(".butler-bronze").transition("hide"),$(".butler-gold").transition("hide"),$(".butler-free").transition("hide"),$(".butler-standard").transition("hide"),$(".butler-team").transition("hide"),$(".butler-enterprise").transition("hide"),$(".butler-silver").transition("show")):"TRELLO_FREE"===r?($(".butler-bronze").transition("hide"),$(".butler-silver").transition("hide"),$(".butler-gold").transition("hide"),$(".butler-standard").transition("hide"),$(".butler-enterprise").transition("hide"),$(".butler-team").transition("hide"),$(".butler-free").transition("show")):"TRELLO_STANDARD"===r?($(".butler-bronze").transition("hide"),$(".butler-silver").transition("hide"),$(".butler-gold").transition("hide"),$(".butler-free").transition("hide"),$(".butler-enterprise").transition("hide"),$(".butler-team").transition("hide"),$(".butler-standard").transition("show")):"TRELLO_BC"===r||r.match(/^TEAM/)?($(".butler-bronze").transition("hide"),$(".butler-silver").transition("hide"),$(".butler-gold").transition("hide"),$(".butler-free").transition("hide"),$(".butler-standard").transition("hide"),$(".butler-enterprise").transition("hide"),$(".butler-team").transition("show"),$(".butler-enterprise-hide").transition("hide"),$(".butler-unlimited").transition("show")):"TRELLO_ENTERPRISE"===r||r.match(/^ENTERPRISE/)?($(".butler-bronze").transition("hide"),$(".butler-silver").transition("hide"),$(".butler-gold").transition("hide"),$(".butler-free").transition("hide"),$(".butler-standard").transition("hide"),$(".butler-team").transition("hide"),$(".butler-enterprise").transition("show"),$(".butler-enterprise-hide").transition("hide"),$(".butler-unlimited").transition("show")):($(".butler-silver").transition("hide"),$(".butler-gold").transition("hide"),$(".butler-free").transition("hide"),$(".butler-standard").transition("hide"),$(".butler-team").transition("hide"),$(".butler-enterprise").transition("hide"),$(".butler-bronze").transition("show")),t?($(".butler-no-org").transition("hide"),$(".butler-org").transition("show"),n?$(".butler-org-name").text(n):$(".butler-org-name").closest(".butler-org").transition("hide")):($(".butler-org").transition("hide"),$(".butler-no-org").transition("show"))},m=function(e,t){var n={user_id:e.user_id,plan_id:e.plan_id,is_org:e.is_org,is_admin:e.is_admin,org_name:e.org_name,features:e.features};return a(e,"no_ui")&&(n.no_ui=e.no_ui),(t||window._trello).get("board","private","plan",{}).then((function(e){return s(e,n)?null:(t||window._trello).set("board","private","plan",n)})).catch(TrelloPowerUp.PostMessageIO.InvalidContext,TrelloPowerUp.PostMessageIO.PluginDisabled,(function(){return null}))},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e||window._trello;if(n.getContext().organization&&n.remove("organization","private","plan").catch((function(){})),TrelloPowerUp.Promise.all([n.remove("board","private","plan"),n.remove("member","private","plan")]).catch((function(){})),!t)try{p()}catch(e){Sentry.captureException(e)}},T=function(e,t){!function(e,t,n,r){if(void 0!==t&&($(".powerup-usage-quota-unit").text(r&&r.match(/^TRELLO_/)?"workspace":"account"),$(".powerup-usage-quota-exceeded").transition(t?"show":"hide"),h(e||window._trello,"quota",t)),n){$(".powerup-usage").transition("hide"),$(".powerup-nousage").transition("hide");var o=n.usage||0;o||a(n,"quota")?($(".powerup-quota").text(n.quota),$(".powerup-used").text(o),$(".powerup-used-percent").text(Math.round(100*o/n.quota)),$(".powerup-usage").transition("slide down"),n.grant?$(".powerup-grant").transition("show").find(".value").text(n.grant):$(".powerup-grant").transition("hide")):$(".powerup-nousage").transition("slide down")}}(t,e.powerup_usage_exceeded,e.powerup_usage,e.plan_id),function(e,t,n,r){if(void 0!==t&&($(".powerup-usage-quota-unit").text(r&&r.match(/^TRELLO_/)?"workspace":"account"),$(".powerup-usage-ops-quota-exceeded").transition(t?"show":"hide"),h(e||window._trello,"quota-ops",t)),n){var o=n.usage||0;$(".ops-quota").text(n.quota),$(".ops-used").text(o),$(".ops-used-percent").text(Math.round(100*o/n.quota)),n.grant?$(".ops-grant").transition("show").find(".value").text(n.grant):$(".ops-grant").transition("hide")}}(t,e.usage_exceeded,e.usage,e.plan_id),p(e);var n=e.features;"object"===r(n)&&("string"==typeof n.show&&$(n.show.split(",").map((function(e){return".".concat(e)})).join(",")).transition("show"),"string"==typeof n.hide&&$(n.hide.split(",").map((function(e){return".".concat(e)})).join(",")).transition("hide")),m(e,t)},g=function(e){var t="".concat(c,"plan?usage=true&powerup_usage=true&v=").concat(d()).concat(f(e));return u.getToken(e).then((function(e){return e?fetch(t,{method:"GET",headers:{"X-Butler-Trello-Token":e}}).then((function(e){return e.json()})).then((function(e){return e.success?e.response:(console.warn("Unable to fetch Butler plan",e.error),Sentry.captureMessage("Fetch user plan got error: ".concat(e.error)),null)})).catch((function(e){return e instanceof TypeError&&"Failed to fetch"===e.message||Sentry.captureException(e),null})):null}))},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window._trello;return u.getToken(e).then((function(t){return e.getContext().dontUpsell&&$(".trello-upsell").transition("hide"),t?_(e).then((function(n){n?p(n):p(),$.ajax("".concat(c,"plan?usage=true&powerup_usage=true&v=").concat(d()).concat(f(e)),{type:"GET",headers:{"X-Butler-Trello-Token":t}}).done((function(t){t.success?T(t.response,e):(E(e),"USER_NOT_FOUND"===t.error&&u.reauthorize(e))})).fail((function(e){Sentry.captureMessage("Refresh user plan request failed: ".concat(e.status," - ").concat(e.statusText))}))})):p()}))},b=0,v={checkUserQuota:function(e){var t=Date.now();return t<b+3e5?TrelloPowerUp.Promise.resolve():(b=t,TrelloPowerUp.Promise.all([u.getToken(e,!1),e.get("member","private","registered",!1)]).spread((function(t,n){return t&&n?g(e).then((function(t){if(!t)return E(e,!0);var n=t.powerup_usage_exceeded;h(e,"quota",n);var r=t.usage_exceeded;return h(e,"quota-ops",r),m(t,e)})):TrelloPowerUp.Promise.resolve()})))},delayedRefreshUserPlan:function(e,t){p(e),setTimeout(A,t)},fetchUserPlan:g,getAttnStatus:function(e,t){return e.get("board","private","attn").then((function(e){var n=(e||"").split(",").filter((function(e){return!!e}));return t?-1!==n.indexOf(t):n.length})).catch((function(e){return l.handleError("getAttnStatus",e)}))},getUserPlanLocal:_,refreshUserPlan:A,savePlan:m,updatePlan:T};window.Plan=v,e.exports=v},function(e,t,n){(function(t){var n="Expected a function",r="__lodash_hash_undefined__",o=1/0,i=9007199254740991,a="[object Arguments]",s="[object Function]",c="[object GeneratorFunction]",u="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/,f=/^\./,_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/\\(\\)?/g,p=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,E="object"==typeof t&&t&&t.Object===Object&&t,T="object"==typeof self&&self&&self.Object===Object&&self,g=E||T||Function("return this")();var A,b=Array.prototype,v=Function.prototype,I=Object.prototype,O=g["__core-js_shared__"],y=(A=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",N=v.toString,S=I.hasOwnProperty,C=I.toString,R=RegExp("^"+N.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=g.Symbol,w=I.propertyIsEnumerable,M=b.splice,k=Y(g,"Map"),L=Y(Object,"create"),P=D?D.prototype:void 0,x=P?P.toString:void 0;function U(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function H(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function B(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function j(e,t){for(var n,r,o=e.length;o--;)if((n=e[o][0])===(r=t)||n!=n&&r!=r)return o;return-1}function $(e,t){return null!=e&&S.call(e,t)}function F(e){return!(!Q(e)||(t=e,y&&y in t))&&(X(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?R:p).test(function(e){if(null!=e){try{return N.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function W(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Y(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return F(n)?n:void 0}function V(e,t,n){for(var r,o,s=-1,c=(t=function(e,t){if(q(e))return!1;var n=typeof e;if("number"==n||"symbol"==n||"boolean"==n||null==e||ee(e))return!0;return d.test(e)||!l.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:q(r=t)?r:G(r)).length;++s<c;){var u=K(t[s]);if(!(o=null!=e&&n(e,u)))break;e=e[u]}return o||!!(c=e?e.length:0)&&J(c)&&function(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||m.test(e))&&e>-1&&e%1==0&&e<t}(u,c)&&(q(e)||function(e){return function(e){return Z(e)&&function(e){return null!=e&&J(e.length)&&!X(e)}(e)}(e)&&S.call(e,"callee")&&(!w.call(e,"callee")||C.call(e)==a)}(e))}U.prototype.clear=function(){this.__data__=L?L(null):{}},U.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},U.prototype.get=function(e){var t=this.__data__;if(L){var n=t[e];return n===r?void 0:n}return S.call(t,e)?t[e]:void 0},U.prototype.has=function(e){var t=this.__data__;return L?void 0!==t[e]:S.call(t,e)},U.prototype.set=function(e,t){return this.__data__[e]=L&&void 0===t?r:t,this},H.prototype.clear=function(){this.__data__=[]},H.prototype.delete=function(e){var t=this.__data__,n=j(t,e);return!(n<0)&&(n==t.length-1?t.pop():M.call(t,n,1),!0)},H.prototype.get=function(e){var t=this.__data__,n=j(t,e);return n<0?void 0:t[n][1]},H.prototype.has=function(e){return j(this.__data__,e)>-1},H.prototype.set=function(e,t){var n=this.__data__,r=j(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},B.prototype.clear=function(){this.__data__={hash:new U,map:new(k||H),string:new U}},B.prototype.delete=function(e){return W(this,e).delete(e)},B.prototype.get=function(e){return W(this,e).get(e)},B.prototype.has=function(e){return W(this,e).has(e)},B.prototype.set=function(e,t){return W(this,e).set(e,t),this};var G=z((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(ee(e))return x?x.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}(t);var n=[];return f.test(e)&&n.push(""),e.replace(_,(function(e,t,r,o){n.push(r?o.replace(h,"$1"):t||e)})),n}));function K(e){if("string"==typeof e||ee(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}function z(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(n);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(z.Cache||B),r}z.Cache=B;var q=Array.isArray;function X(e){var t=Q(e)?C.call(e):"";return t==s||t==c}function J(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Q(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Z(e){return!!e&&"object"==typeof e}function ee(e){return"symbol"==typeof e||Z(e)&&C.call(e)==u}e.exports=function(e,t){return null!=e&&V(e,t,$)}}).call(this,n(84))},function(e,t,n){var r,o=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var n=i._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(n){return o(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),r=0,o=t.length;r<o;r++){var a=t.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(t){if(null==t)return i.decompress(t);for(var n=new Array(t.length/2),r=0,o=n.length;r<o;r++)n[r]=256*t[2*r]+t[2*r+1];var a=[];return n.forEach((function(t){a.push(e(t))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(t){return o(n,e.charAt(t))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,o,i,a={},s={},c="",u="",l="",d=2,f=3,_=2,h=[],p=0,m=0;for(i=0;i<e.length;i+=1)if(c=e.charAt(i),Object.prototype.hasOwnProperty.call(a,c)||(a[c]=f++,s[c]=!0),u=l+c,Object.prototype.hasOwnProperty.call(a,u))l=u;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<_;r++)p<<=1,m==t-1?(m=0,h.push(n(p)),p=0):m++;for(o=l.charCodeAt(0),r=0;r<8;r++)p=p<<1|1&o,m==t-1?(m=0,h.push(n(p)),p=0):m++,o>>=1}else{for(o=1,r=0;r<_;r++)p=p<<1|o,m==t-1?(m=0,h.push(n(p)),p=0):m++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)p=p<<1|1&o,m==t-1?(m=0,h.push(n(p)),p=0):m++,o>>=1}0==--d&&(d=Math.pow(2,_),_++),delete s[l]}else for(o=a[l],r=0;r<_;r++)p=p<<1|1&o,m==t-1?(m=0,h.push(n(p)),p=0):m++,o>>=1;0==--d&&(d=Math.pow(2,_),_++),a[u]=f++,l=String(c)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<_;r++)p<<=1,m==t-1?(m=0,h.push(n(p)),p=0):m++;for(o=l.charCodeAt(0),r=0;r<8;r++)p=p<<1|1&o,m==t-1?(m=0,h.push(n(p)),p=0):m++,o>>=1}else{for(o=1,r=0;r<_;r++)p=p<<1|o,m==t-1?(m=0,h.push(n(p)),p=0):m++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)p=p<<1|1&o,m==t-1?(m=0,h.push(n(p)),p=0):m++,o>>=1}0==--d&&(d=Math.pow(2,_),_++),delete s[l]}else for(o=a[l],r=0;r<_;r++)p=p<<1|1&o,m==t-1?(m=0,h.push(n(p)),p=0):m++,o>>=1;0==--d&&(d=Math.pow(2,_),_++)}for(o=2,r=0;r<_;r++)p=p<<1|1&o,m==t-1?(m=0,h.push(n(p)),p=0):m++,o>>=1;for(;;){if(p<<=1,m==t-1){h.push(n(p));break}m++}return h.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var o,i,a,s,c,u,l,d=[],f=4,_=4,h=3,p="",m=[],E={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)d[o]=o;for(a=0,c=Math.pow(2,2),u=1;u!=c;)s=E.val&E.position,E.position>>=1,0==E.position&&(E.position=n,E.val=r(E.index++)),a|=(s>0?1:0)*u,u<<=1;switch(a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)s=E.val&E.position,E.position>>=1,0==E.position&&(E.position=n,E.val=r(E.index++)),a|=(s>0?1:0)*u,u<<=1;l=e(a);break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)s=E.val&E.position,E.position>>=1,0==E.position&&(E.position=n,E.val=r(E.index++)),a|=(s>0?1:0)*u,u<<=1;l=e(a);break;case 2:return""}for(d[3]=l,i=l,m.push(l);;){if(E.index>t)return"";for(a=0,c=Math.pow(2,h),u=1;u!=c;)s=E.val&E.position,E.position>>=1,0==E.position&&(E.position=n,E.val=r(E.index++)),a|=(s>0?1:0)*u,u<<=1;switch(l=a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)s=E.val&E.position,E.position>>=1,0==E.position&&(E.position=n,E.val=r(E.index++)),a|=(s>0?1:0)*u,u<<=1;d[_++]=e(a),l=_-1,f--;break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)s=E.val&E.position,E.position>>=1,0==E.position&&(E.position=n,E.val=r(E.index++)),a|=(s>0?1:0)*u,u<<=1;d[_++]=e(a),l=_-1,f--;break;case 2:return m.join("")}if(0==f&&(f=Math.pow(2,h),h++),d[l])p=d[l];else{if(l!==_)return null;p=i+i.charAt(0)}m.push(p),d[_++]=i+p.charAt(0),i=p,0==--f&&(f=Math.pow(2,h),h++)}}};return i}();void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){"use strict";(function(t){var r=n(359);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function o(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var a=n(405),s=Object.prototype.hasOwnProperty,c=Array.prototype.slice,u="foo"===function(){}.name;function l(e){return Object.prototype.toString.call(e)}function d(e){return!i(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var f=e.exports=T,_=/\s*function\s+([^\(\s]*)\s*/;function h(e){if(a.isFunction(e)){if(u)return e.name;var t=e.toString().match(_);return t&&t[1]}}function p(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function m(e){if(u||!a.isFunction(e))return a.inspect(e);var t=h(e);return"[Function"+(t?": "+t:"")+"]"}function E(e,t,n,r,o){throw new f.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:o})}function T(e,t){e||E(e,!0,t,"==",f.ok)}function g(e,t,n,r){if(e===t)return!0;if(i(e)&&i(t))return 0===o(e,t);if(a.isDate(e)&&a.isDate(t))return e.getTime()===t.getTime();if(a.isRegExp(e)&&a.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(d(e)&&d(t)&&l(e)===l(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===o(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var s=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==s&&s===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(a.isPrimitive(e)||a.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=A(e),i=A(t);if(o&&!i||!o&&i)return!1;if(o)return e=c.call(e),t=c.call(t),g(e,t,n);var s,u,l=I(e),d=I(t);if(l.length!==d.length)return!1;for(l.sort(),d.sort(),u=l.length-1;u>=0;u--)if(l[u]!==d[u])return!1;for(u=l.length-1;u>=0;u--)if(s=l[u],!g(e[s],t[s],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function A(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function b(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function v(e,t,n,r){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!o&&E(o,n,"Missing expected exception"+r);var i="string"==typeof r,s=!e&&o&&!n;if((!e&&a.isError(o)&&i&&b(o,n)||s)&&E(o,n,"Got unwanted exception"+r),e&&o&&n&&!b(o,n)||!e&&o)throw o}f.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return p(m(e.actual),128)+" "+e.operator+" "+p(m(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||E;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,o=h(t),i=r.indexOf("\n"+o);if(i>=0){var a=r.indexOf("\n",i+1);r=r.substring(a+1)}this.stack=r}}},a.inherits(f.AssertionError,Error),f.fail=E,f.ok=T,f.equal=function(e,t,n){e!=t&&E(e,t,n,"==",f.equal)},f.notEqual=function(e,t,n){e==t&&E(e,t,n,"!=",f.notEqual)},f.deepEqual=function(e,t,n){g(e,t,!1)||E(e,t,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(e,t,n){g(e,t,!0)||E(e,t,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(e,t,n){g(e,t,!1)&&E(e,t,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function e(t,n,r){g(t,n,!0)&&E(t,n,r,"notDeepStrictEqual",e)},f.strictEqual=function(e,t,n){e!==t&&E(e,t,n,"===",f.strictEqual)},f.notStrictEqual=function(e,t,n){e===t&&E(e,t,n,"!==",f.notStrictEqual)},f.throws=function(e,t,n){v(!0,e,t,n)},f.doesNotThrow=function(e,t,n){v(!1,e,t,n)},f.ifError=function(e){if(e)throw e},f.strict=r((function e(t,n){t||E(t,!0,n,"==",e)}),f,{equal:f.strictEqual,deepEqual:f.deepStrictEqual,notEqual:f.notStrictEqual,notDeepEqual:f.notDeepStrictEqual}),f.strict.strict=f.strict;var I=Object.keys||function(e){var t=[];for(var n in e)s.call(e,n)&&t.push(n);return t}}).call(this,n(84))},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(390),i=n(391),a=n(392),s=n(374),c=n(355),u=n(152),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=$(e).not("[bld-dd]");if(n.length){var r;n.attr("bld-dd",1);var o={on:t.click?"click":"hover",onShow:function(){var e=$(this).closest(".ui.dropdown"),t=e.find(".text"),n=t.innerWidth(),o=t.text().trim().length,i=e.innerWidth()-n,a=e.find(".menu").children(".item"),s=0;if(a.each((function(e,t){$(t).text().length>s&&(s=$(t).text().length)})),e.find(".menu").css("min-width",i+1.33*s*n/(o||1)),e.hasClass("toggling")){var c=e.find("select")[0],u=c.options[c.selectedIndex];r=$(u).attr("data-toggle")}return!0},onChange:function(e,t,n){var o=$(this).closest(".ui.dropdown");if(o.hasClass("label-select"))return o.dropdown("set text",u.sanitize(e));if(o.hasClass("toggling")){var i=o.find("select")[0].options[n.index()],a=$(i).attr("data-toggle");a!==r&&(r&&o.siblings(r).transition("toggle"),a&&o.siblings(a).transition("toggle"),r=a)}}};n.find(".ui.dropdown").dropdown(o).filter(".label-select").each((function(){var e=$(this).dropdown("get value")||$(this).find(".menu .item").first().attr("data-value");$(this).dropdown("set selected",e)}))}},d=function(e,t,n){var r=$(e.target).closest(t),o=r.parent().children(n);r.addClass("hidden").hide(),o.removeClass("hidden").show()},f=function(e,t){for(var n,r,o=$(e.target).closest(".clause");(n=o.parent().closest(".clause")).length;)o=n;var i=o.closest(".ui.popup");if(i.length){var a=i.prev("span");r=a.length?a.children(".builder-open.builder-popup"):i.siblings(".builder-open.builder-popup")}else{var s=o.closest(".ui.modal");if(s.length)r=$(s.data("button"));else r=o.closest(".builder-inline").prev(".builder-clauses").children(".builder-open")}var c,u=r.siblings(".builder-optional.clause:last"),f=u.children(".clause-value");t&&$(u).hasClass("multiple-clause")&&(c=u.clone(!1)),f.text(L(o[0])),u.hasClass("hidden")&&(l(u),u.find(".builder-delete").click(h),u.hasClass("multiple-clause")?function(e,t,n){$(e.target).closest(t).parent().children(n).transition({animation:"drop",duration:"0.33s"})}({target:r[0]},r,".builder-optional.clause:last"):d({target:r[0]},r,".builder-optional.clause:last")),c&&c.insertAfter(u)},_=function(e){$(e.target).closest(".clause").find('input[type="text"]:not(.optional):visible').filter((function(){return!this.value})).addClass("error").off("focus").focus((function(){$(this).removeClass("error")})).length||(f(e,!0),$(e.target).closest(".ui.popup").popup("hide all"),$(e.target).closest(".ui.modal").modal("hide"))},h=function(e){var t=$(e.target).closest(".builder-optional");(0===t.siblings(".builder-optional:visible").length?t.add(t.siblings(".prefix")):t).transition({animation:"scale",duration:"0.25s",onComplete:function(){var e=$(this).parent().closest(".clause");t.detach(),e.length&&f({target:e[0]})}})},p=function(e){var t=$(e.target).closest(".multiple-clause"),n=t.prev(".multiple-clause");n&&t.transition({animation:"scale",duration:"0.25s",onComplete:function(){t.detach().insertBefore(n).transition("scale")}})},m=function(e){$(this).data("search-select",u.sanitize(e))},E={},T=function(e,t){return new TrelloPowerUp.Promise((function(n,r){if(E[e])return n(E[e]);var o="".concat(e,"__loading");E[o]||(E[o]=[]),E[o].push({resolve:n,reject:r}),E[o].length>1||t((function(t){E[e]=t;var n=E[o];delete E[o],n.forEach((function(e){e.resolve(t)}))}),(function(e){var t=E[o];delete E[o],t.forEach((function(t){t.reject(e)}))}))}))},g=function(){return T("lists",(function(e,t){TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).lists("name").then((function(t){e(t)})).catch((function(e){t(e)}))}))},A=function(e){var t=$(this).data("search-select");return!t||(u.sanitize(e)!==t?($(this).data("search-select",""),!0):($(this).search("search local",""),!1))},b=function(){return T("boards",(function(e,t){c.getMyBoards({filter:"open",lists:"open",count:100,fields:"id,name"}).then(e).catch(t)}))},v=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.lists,o=n.clear_invalid_value,i=n.listWarning;if(!r)return g().then((function(n){n&&e(t,{lists:n,clear_invalid_value:o})}));var a=r.find((function(e){return e.selected}));a&&t.each((function(){m.bind(this)(a.name),$(this).val(a.name)}));var s={};r=r.filter((function(e){return!s[e.name]&&(s[e.name]=!0,!0)})).map((function(e){return{name:u.sanitize(e.name)}}));var c=t.addClass("prompt").parent().addClass("search").search("clear cache").search("hide results").search({source:r,fields:{title:"name"},searchFields:["name"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:function(e){A.call(this,e),TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).getContext().commandSharing&&i&&(r.some((function(t){return t.name===e}))?(t.css("opacity",1),t.removeClass("quoted-value-highlighted"),i.transition("hide")):(t.css("opacity",.4),t.addClass("quoted-value-highlighted"),i.transition("show")))},onSelect:function(e){m.call(this,e.name),TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).getContext().commandSharing&&i&&r.some((function(t){return t.name===e.name}))&&(t.css("opacity",1),t.removeClass("quoted-value-highlighted"),i.transition("hide"))}});c.each((function(){var e=$(this).search("get value");e&&(o&&!s[e]?$(this).search("set value",""):m.call(this,e))}))},I=function e(t,n,r){if(!n)return b().then((function(n){n&&e(t,n,r)}));var o=n.find((function(e){return e.selected}));o&&t.each((function(){m.call(this,o.name),$(this).val(o.name)}));var i={};n=n.filter((function(e){return!i[e.name]&&(i[e.name]=e,!0)})).map((function(e){return{name:u.sanitize(e.name),lists:e.lists}}));var a=function(e){var t,n=$(e).find('[name="board-name"]');return $(e).closest(".phrase,.clause,.output-phrase").find('[name="list-name"],[name="board-name"]').get().find((function(e,r,o){return e===n[0]&&(t=$(o[r-1]).filter('[name="list-name"]'),!0)})),t};t.addClass("prompt").parent().addClass("search").search({source:n,fields:{title:"name"},searchFields:["name"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:A,onSelect:function(e){m.call(this,e.name);var t=a(this);t&&v(t,{lists:e.lists,clear_invalid_value:!0});var n=$(this);$(this).closest(".builder-optional").find(".builder-close").on("click",(function(){n.search("set value",""),g().then((function(e){v(t,{lists:e,clear_invalid_value:!0})}))}))}}).each((function(){var e=$(this).search("get value");if(e&&(m.call(this,e),r)){var t=i[e];if(t){var n=a(this);n&&v(n,{lists:t.lists})}}}))},O=function e(t,n,r,o){if(o){1===o.length&&r.val(o[0]);var a=o.find((function(e){return e.selected}));a&&r.each((function(){m.bind(this)(a),$(this).val(a)}));var s={},c=o.filter((function(e){return!s[e]&&(s[e]=!0,!0)})).map((function(e){return{name:u.sanitize(e)}}));r.addClass("prompt").parent().addClass("search").search("clear cache").search("hide results").search({source:c,fields:{title:"name"},searchFields:["name"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:A,onSelect:function(e){m.bind(this)(e.name)}}).each((function(){var e=$(this).search("get value");e&&m.bind(this)(e)}))}else(function(e,t){return T("jira_data_".concat(e),i.getJiraSiteData(e)).then((function(e){return t?e.projects.filter((function(e){return e.key===t})).map((function(e){return e.issuetypes}))[0]:e.issueTypes}))})(t,n).then((function(o){o&&e(t,n,r,o)}))},y=function e(t,n,r){if(r){1===r.length&&n.val(r[0].key);var o=r.find((function(e){return e.selected}));o&&n.each((function(){m.bind(this)(o.key),$(this).val(o.key)}));var a={},s=r.filter((function(e){return!a[e.key]&&(a[e.key]=!0,!0)})).map((function(e){return{name:u.sanitize(e.name),key:u.sanitize(e.key),title:u.sanitize("".concat(e.key," (").concat(e.name,")"))}})),c=function(e){return $(e).closest(".phrase,.clause,.output-phrase").find('[name="jira-issue-type"]')};n.addClass("prompt").parent().addClass("search").search("clear cache").search("hide results").search({source:s,fields:{title:"title"},searchFields:["name","key","title"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:A,onSelect:function(e){m.bind(this)(e.key);var n=c(this);return n[0]&&O(t,e.key,n,null),$(this).search("set value",e.key),$(this).search("hide results"),!1}}).each((function(){var e=$(this).search("get value");if(e){m.bind(this)(e);var n=c(this);n[0]&&O(t,e,n,null)}}))}else(function(e){return T("jira_data_".concat(e),i.getJiraSiteData(e)).then((function(e){return e.projects.map((function(e){return{name:e.name,key:e.key}}))}))})(t).then((function(r){r&&e(t,n,r)}))},N=function e(t,n){if(n){1===n.length&&(t.val(n[0].connection_name),t.attr("site_id",n[0].connection_id));var r=n.find((function(e){return e.selected}));r&&t.each((function(){m.bind(this)(r.name),$(this).val(r.name)}));var i={},a={},s=n.filter((function(e){return!i[e.connection_id]&&(i[e.connection_id]=e,!0)})).map((function(e){return a[e.connection_id]=e,{name:u.sanitize(e.connection_name),site_id:u.sanitize(e.connection_id)}})),c=function(e){return $(e).closest(".phrase,.clause,.output-phrase").find('[name="jira-project-ref"]')},l=function(e){return $(e).closest(".phrase,.clause,.output-phrase").find('[name="jira-issue-type"]')};t.addClass("prompt").parent().addClass("search").search({source:s,fields:{title:"name"},searchFields:["name"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:A,onSelect:function(e){m.bind(this)(e.name),$(this).attr("site_id",e.site_id);var t=c(this);t[0]&&y(e.site_id,t,null);var n=l(this);n[0]&&O(e.site_id,void 0,n,null)}}).each((function(){var e=$(this).search("get value");if(e){m.bind(this)(e);var t=$(this).parent().find('[name="jira-site-name"]').attr("site_id"),n=c(this);n[0]&&y(t,n,null);var r=l(this);r[0]&&O(t,void 0,r,null)}}))}else T("jira_context",o.getIntegrationDetails("JIRA")).then((function(n){n&&n.length?e(t,n):$(".unauthorized-jira").transition("show")}))},S=function e(t,n,r){if(r){var o=r.find((function(e){return e.selected}));o&&n.each((function(){m.bind(this)(o.name),$(this).val(o.name)}));var i={},s=r.filter((function(e){return!i[e.id]&&(i[e.id]=!0,!0)})).map((function(e){return{name:u.sanitize(e.name),id:u.sanitize(e.id)}}));n.addClass("prompt").parent().addClass("search").search("clear cache").search("hide results").search({source:s,fields:{title:"name"},searchFields:["name"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:A,onSelect:function(e){m.bind(this)(e.name)}}).each((function(){var e=$(this).search("get value");e&&m.bind(this)(e)}))}else(function(e){return T("slack_channels_".concat(e),a.getSlackChannelsForWorkspace(e))})(t).then((function(r){r&&e(t,n,r)}))},C=function e(t,n){if(n){1===n.length&&(t.val(n[0].connection_name),t.attr("workspace_id",n[0].connection_id));var r=n.find((function(e){return e.selected}));r&&t.each((function(){m.bind(this)(r.name),$(this).val(r.name)}));var i={},a=n.filter((function(e){return!i[e.connection_id]&&(i[e.connection_id]=!0,!0)})).map((function(e){return{name:u.sanitize(e.connection_name),workspace_id:u.sanitize(e.connection_id)}})),s=function(e){return $(e).closest(".phrase,.clause,.output-phrase").find('[name="slack-channel"]')};t.addClass("prompt").parent().addClass("search").search({source:a,fields:{title:"name"},searchFields:["name"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:A,onSelect:function(e){m.bind(this)(e.name),$(this).attr("workspace_id",e.workspace_id);var t=s(this);t[0]&&S(e.workspace_id,t,null)}}).each((function(){var e=$(this).search("get value");if(e){m.bind(this)(e);var t=s(this),n=$(this).parent().find('[name="slack-workspace-name"]').attr("workspace_id");t[0]&&S(n,t,null)}}))}else T("slack_context",o.getIntegrationDetails("Slack")).then((function(n){n&&n.length?e(t,n):$(".unauthorized-slack").transition("show")}))},R=function(){var e=$(this).search("get value");"string"==typeof e&&m.bind(this)(e)},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}),r=$(e).find(".ui.input>input"),o=$(r).filter('[name="list-name"]');o.length&&g().then((function(e){if(t.select_default){var r=n.getContext().list,i=e.find((function(e){return e.id===r}))||e[0];i&&(i.selected=!0)}v(o,{lists:e})}));var i=$(r).filter('[name="board-name"]');i.length&&b().then((function(e){if(t.select_default){var r=n.getContext().board,o=e.find((function(e){return e.id==r}))||e[0];o&&(o.selected=!0)}I(i,e)}));var a=$(r).filter('[name="jira-site-name"]');a.length&&N(a,null);var c=$(r).filter('[name="slack-workspace-name"]');c.length&&C(c,null);var l=$(r).filter('[name="username"]'),d=$(r).filter('[name="field-name"]'),f=$(e).find(".dropdown.label-select");(l.length||d.length)&&n.board("members","customFields","labels").then((function(t){var r;s.getUserPlanLocal(n).then((function(e){return e||s.fetchUserPlan(n)})).then((function(t){$(e).find(".custom-fields-paid-boards").transition("TRELLO_FREE"===t.plan_id?"show":"hide")})),t.members.forEach((function(e){e.username=u.sanitize(e.username),e.fullName=u.sanitize(e.fullName)})),l.addClass("prompt").parent().addClass("search").search({source:t.members,fields:{title:"username",description:"fullName"},searchFields:["username","fullName"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:A,onSelect:function(e){m.bind(this)(e.username)}}),$(e).find(".no-custom-fields").transition(t.customFields.length?"hide":"show"),t.customFields.forEach((function(e){e.name=u.sanitize(e.name)})),d.addClass("prompt").parent().addClass("search").each((function(){var e=t.customFields,n=$(this).find('input[name="field-name"]').attr("data-field-type");n&&(e=e.filter((function(e){return-1!=n.indexOf(e.type)}))),$(this).search({source:e,fields:{title:"name",description:"type"},searchFields:["name"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:A,onSelect:function(e){m.bind(this)(e.name);var t=$(this).siblings().find('input[name="field-value"]');t&&(t.val(""),"list"===e.type?t.addClass("prompt").parent().addClass("search").search("clear cache").search({source:e.options.map((function(e){return{name:u.sanitize(e.value.text)}})),fields:{title:"name"},searchFields:["name"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:A,onSelect:function(e){m.bind(t)(e.name)}}):t.removeClass("prompt").parent().removeClass("search"))}})})),f.find(".menu").html(t.labels.map((function(e,t){var n=[];return e.color&&n.push(e.color),e.name&&n.push('"'.concat(e.name,'"')),n=n.join(" "),t||(r=n),'<div class="item batch-label '.concat(e.color||"colorless").concat(t?"":" active selected",'" data-value="').concat(sanitize(n),'">').concat(e.name?sanitize(e.name):"&nbsp;","</div>")}))),f.dropdown("refresh").dropdown("set selected",r)}))},w=function(e){try{return JSON.parse(e)}catch(t){throw console.log("[ERROR] parsing JSON:",e),t}},M=function(e){var t=new RegExp('["'.concat(String.fromCharCode(8220)).concat(String.fromCharCode(8221),"]"),"g");return e.replace(t,'\\"').split("\n").join("\\n")},k=function e(t,n){if(n){if("object"!==r(t))throw new Error("mergeSchemas: Expected object:\ns=".concat(JSON.stringify(t)));if("object"!==r(n))throw new Error("mergeSchemas: Expected object\nt=".concat(JSON.stringify(n)));Object.getOwnPropertyNames(n).forEach((function(r){r in t?e(t[r],n[r]):t[r]=n[r]}))}},L=function e(t){if(!t)return null;var n=$(t);if(t.nodeType===Node.TEXT_NODE)return t.nodeValue.replace(/^\s+/," ").replace(/\s+$/," ").replace(/^ ,/,",");if(t.nodeType===Node.ELEMENT_NODE){if(n.hasClass("hidden")||n.hasClass("popup")||n.hasClass("builder-comment")||n.hasClass("results")||"none"===n.css("display"))return null;if(n.hasClass("action-output-text")||n.hasClass("trigger-output-text"))return t.textContent.replace(/^\s+/," ").replace(/\s+$/," ").replace(/^ ,/,",");if(n.hasClass("button")){var r=n.find(".default-value");return r.length?e(r[0]):null}if("SCRIPT"===t.nodeName)return null;if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var o=n.prop("value").trim();return n.hasClass("optional")&&!o?null:(o||(o=n.prop("placeholder")),n.hasClass("quoted-value")?'"'.concat(M(o),'"'):o)}if(n.hasClass("dropdown")&&n.hasClass("label-select")){var i=$(n).dropdown("get value").trim(),a=i.substring(i.indexOf('"'),i.lastIndexOf('"')+1);if(a){var s=a.substring(1,a.length-1).replaceAll('"','\\"');return"".concat(i.substring(0,i.indexOf('"')),'"').concat(s,'"').concat(i.substring(i.lastIndexOf('"')+1))}return i}for(var c=[],u=0;u<t.childNodes.length;++u)c.push(e(t.childNodes[u]));var l=c.filter((function(e){return!!e})).map((function(e,t,n){return" "===e.slice(-1)&&t<n.length-1&&-1!==" ,".indexOf(n[t+1][0])?e.slice(0,-1):e})).join("").trim();return n.hasClass("new-phrase")?"\n".concat(l):(n.hasClass("clause")&&","!==l[0]?" ":"")+l}return null},P={setupClauses:function(e,t){e||(e=$("body"));var n=$(e).not("[bld-cl]");n.length&&(n.attr("bld-cl",1),l(n.find(".builder.ui.popup"),t),n.find(".builder.popup .clause.segment, .builder.modal .clause.segment, .builder-inline .clause.segment").prepend('<div class="ui icon transparent right floated small button select-clause-btn" tabindex="0"><i class="plus icon"></i></div>'),n.find(".select-clause-btn").off("click").click(_),n.find(".builder-open:not(.builder-popup)").off("click").click((function(e){d(e,".builder-open",".builder-optional")})),n.find(".builder-close:not(.builder-popup)").off("click").click((function(e){d(e,".builder-optional",".builder-open")})),n.find(".builder-add-clause").off("click").click((function(e){var n=$(e.target).closest(".builder-add-clause"),r=n.siblings(".multiple-clause"),o=r.first(),i=n.attr("max-clauses");if(i&&r.length>i)return n.transition("shake"),void n.siblings(".builder-max-clauses").transition("hide").transition("scale");var a=o.clone(!1);a.find("input").val(""),l(a,t),D(a,t),a.find(".builder-open-nested").click((function(e){d(e,".builder-open-nested",".builder-optional-nested")})),a.find(".builder-delete").click(h),a.find(".builder-up-clause").click(p),a.insertBefore(n).transition("drop")})),n.find(".builder-open.builder-popup").each((function(e,t){var n=$(t),r=n.attr("data-modal-selector");if(r)return n.off("click").click((function(){var e=$(r);e.modal({onShow:function(){e.data("button",n),n.siblings(".prefix").transition("show")},onHide:function(){delete e.__button,n.siblings(".builder-optional:visible").length||n.siblings(".prefix").transition("scale down")}}).modal("show")}));var o=".card-filter.popup"===n.attr("data-popup-selector")||".card-filter-triggers.popup"===n.attr("data-popup-selector"),i=n;n.popup({on:"click",inline:!1,popup:n.attr("data-popup-selector"),target:i,position:"bottom center",lastResort:"bottom left",hoverable:!1,boundary:".builder-wizard-body",onShow:function(){var e=i.parent("span");e.length&&$(e).after($(this).detach()),n.siblings(".prefix").transition("show"),o&&$(".card-filter.popup").find(".item").tab("change tab","card-filter-base")},onHidden:function(){n.siblings(".builder-optional:visible").length||n.siblings(".prefix").transition("scale down")}})})),n.find(".builder-close.builder-popup").off("click").click((function(e){d(e,".builder-optional",".builder-open.builder-popup")})),n.find(".close-popup").off("click").click((function(e){$(e.target).closest(".popup").popup("hide all")})))},setupDropdowns:l,setupInputFields:function(e){var t=$(e).not("[bld-if]");if(t.length){t.attr("bld-if",1);var n=new Date,r=n.getHours(),o=5*Math.ceil(n.getMinutes()/5);o>=60&&(++r,o=0);var i=1===Math.floor(r/12);r=r%12||12;var a=t.find("input");a.filter(".numeric-value").off("blur").blur((function(e){if(!e.target.value.match(/^{.*}$/)){var t=parseInt(e.target.value,10),n=$(e.target).attr("data-min-value")||0,r=$(e.target).attr("data-max-value");void 0===n&&(n=0),isNaN(t)||t<n?e.target.value=n:void 0!==r&&t>r&&(e.target.value=r)}})),a.filter(".hour").val(r).off("blur").blur((function(e){var t=parseInt(e.target.value,10);isNaN(t)||t<1?e.target.value=12:t>12&&(e.target.value=Math.min(t-12,11),$(e.target).parent().siblings(".dropdown").dropdown("set selected","pm"))})),a.filter(".minutes").val(o>9?o:"0".concat(o)).off("blur").blur((function(e){var t=parseInt(e.target.value,10);isNaN(t)||t<0?t=0:e.target.value>59&&(t=59),e.target.value=t>9?t:"0".concat(t)})),t.find(".dropdown.ampm").dropdown("set selected",i?"pm":"am"),a.filter(".year").off("blur").blur((function(e){var t=parseInt(e.target.value,10);isNaN(t)?e.target.value=(new Date).getYear()+1900:t<100&&(e.target.value=2e3+t)})),a.filter('[name="report-var"]').off("blur").blur((function(e){e.target.value=e.target.value.replace(/[^a-zA-Z0-9_]/g,"_")}))}},setupPowerUpAutoComplete:D,setupListNameAutoComplete:v,setupBoardNameAutoComplete:I,setupBoardNameDropdown:function(e,t,n){var r=t.find((function(e){return Boolean(e.selected)}));r&&e.each((function(){m.call(this,r.name),$(this).val(r.name)}));var o={};t=t.filter((function(e){return!o[e.name]&&(o[e.name]=e,!0)})).map((function(e){return{name:u.sanitize(e.name),lists:e.lists,id:e.id}})),e.addClass("prompt").parent().addClass("search").search("clear cache").search({source:t,fields:{title:"name"},searchFields:["name"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:A,onSelect:function(e){m.call(this,e.name),n.removeClass("disabled"),n.attr("command-board",e.name),n.attr("command-board-id",e.id)}}).search("set value","").each((function(){var e=$(this).search("get value");e&&m.call(this,e)}))},setupAutoComplete:function(e,t,n){var r=t.map((function(e){var t={record:e};return t[n]=u.sanitize(e[n]),t}));e.parent().search({source:r,fields:{title:n},searchFields:[n],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:A,onSelect:function(e){m.bind(this)(e.record[n])}}),R.bind(e.parent())()},collectPhrase:L,collectSchema:function e(t){if(!t)return null;switch(t.nodeType){case Node.TEXT_NODE:return null;case Node.ELEMENT_NODE:var n=$(t);if(n.hasClass("hidden")||n.hasClass("popup")||n.hasClass("builder-comment")||n.hasClass("results")||"none"===n.css("display"))return null;if(n.hasClass("button")){var r=n.find(".default-value");return r.length?e(r[0]):null}if("SCRIPT"===t.nodeName)return null;if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var o=n.attr("schema");if(!o)throw new Error("Schema missing from input node:\n".concat(JSON.stringify(t)));var i=n.prop("value").trim();return n.hasClass("optional")&&!i?null:(i||(i=n.prop("placeholder")),o=o.replace("_v_",i).replace("_q_",'"'.concat(M(i),'"')),w(o))}if(n.hasClass("dropdown")){var a,s=$(n),c=s.dropdown("get value"),u=s.attr("schema");if(u||(u=(a=s.dropdown("get item",c)).attr("schema")),!u){var l=s.find(".menu>.item").index(a);u=$(s.find("select option")[l]).attr("schema")}return u?(u=u.replace("_v_",c).replace("_q_",'"'.concat(M(c),'"')),w(u)):null}var d=$(n).attr("schema");if(d)return w(d);d={};for(var f=0;f<t.childNodes.length;++f)k(d,e(t.childNodes[f]));return d;default:return null}},getSelectedBoards:function(e){return b().then((function(t){return $(e).map((function(){return $(this).val().trim()})).get().map((function(e){return t.find((function(t){return t.name.toLowerCase()===e.toLowerCase()}))||{name:e}}))}))},getAllOpenBoards:function(){return T("all_open_boards",(function(e,t){c.getMe({boards:"open",fields:"",board_fields:"id,name"}).then((function(t){e(t.boards)})).catch(t)}))},getListsByBoardId:function(e){return c.getLists(e,{})},joinCommandPhrases:function(e,t){var n;return t?(n="".concat(e[0],",\n"),e=e.slice(1)):n="",e.length>1?n+e.slice(0,-1).join(",\n")+(e[e.length-2].match(/^for each /)?",\n":",\nand ")+e.slice(-1)[0]:n+e.join()},refreshAutoCompleteCache:function(){E={},D(".builder")}};e.exports=P},function(e,t){var n=function(e){$(e).parent().children(".butler-status").transition("hide")},r=function(){return $(".dashboard-tabs .item.active").attr("data-tab").substr("tab-".length)},o=function(e){n(e),$(e).transition("fade down")},i=function(e,t){var n,r="tab-".concat(e),o=$(".dashboard-tabs .item"),i=$(".dashboard-tab-content").children(".ui.tab");o.each((function(){var e=$(this).attr("data-tab"),o=$(this).attr("data-target-tab")||e;if(e!==r){$(this).removeClass("active");var a=$(this).children(".child-text");a.length&&(a.text(a.attr("data-default")),$(this).removeClass("child-active")),o!==n&&i.filter('.ui.tab[data-tab="'.concat(o,'"]')).removeClass("active").filter(":not(.hidden)").transition("hide")}else{var s=$(this).closest(".ui.dropdown");s.length&&(s.children(".child-text").text($(this).text()),s.hasClass("child-active")||s.addClass("child-active"),s.find(".menu").transition("hide")),$(this).hasClass("active")||$(this).addClass("active"),t?i.filter('.ui.tab[data-tab="'.concat(o,'"]')).transition("hide").transition("slide down"):i.filter('.ui.tab.hidden[data-tab="'.concat(o,'"]')).transition("show"),n=o}}))};window.clearStatus=n,window.getCurrentTab=r,window.showStatus=o,window.showTab=i,e.exports={clearStatus:n,getCurrentTab:r,showStatus:o,showTab:i}},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDebug=t.DEBUG=void 0,t.DEBUG=!1,t.setDebug=function(e=!1){t.DEBUG=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setLogger=t.Logger=void 0;const r={info:console.log};t.Logger=r,t.setLogger=function(e=r){t.Logger=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeArray=void 0;t.normalizeArray=e=>Array.isArray(e)?e:[e]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.l10nizeTitle=void 0;t.l10nizeTitle=e=>e?{key:"title",$TITLE:e}:void 0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActionConditions=t.getTriggerConditions=t.getLocalizationKeysForCondition=void 0;const r=n(373);t.getLocalizationKeysForCondition=function(e){switch(e.type){case"WITH_NO_LABELS":return"with no labels";case"WITHOUT_DUE_DATE":return"without due date";case"WITH_OVERDUE_DATE":return{key:"overdue"};case"ASSIGNED_TO":{let t;return e.ASSIGNED_TO.MEMBER["@MEMBER_USERNAME"]?t={key:"member username","@MEMBER_USERNAME":e.ASSIGNED_TO.MEMBER["@MEMBER_USERNAME"]}:e.ASSIGNED_TO.MEMBER.MEMBER_ME&&(t="me"),{key:"assigned to member",member:t}}case"DUE_DATE_CONDITION":{let t={};const{DUE_IN_LESS_THAN_DAYS:n,DUE_IN_MORE_THAN_DAYS:r,DUE_IN_EXACTLY_DAYS:o,DUE_IN_BETWEEN:i,DUE_TODAY:a,DUE_TOMORROW:s,DUE_THIS_WEEK:c,DUE_NEXT_WEEK:u,DUE_THIS_MONTH:l,DUE_NEXT_MONTH:d,WORKING_DAYS:f}=e.DUE_DATE_CONDITION;return n&&(t={key:"due in comparison days",$NUM_DAYS:n,operator:"less than"}),r&&(t={key:"due in comparison days",$NUM_DAYS:r,operator:"more than"}),o&&(t={key:"due in comparison days",$NUM_DAYS:o,operator:"exactly"}),i&&(t={key:"due in between days",$MIN_DAYS:i.MIN_DAYS,$MAX_DAYS:i.MAX_DAYS}),a?t={key:"due when",when:"today"}:s?t={key:"due when",when:"tomorrow"}:c?t={key:"due when",when:"this week"}:u?t={key:"due when",when:"next week"}:l?t={key:"due when",when:"this month"}:d?t={key:"due when",when:"next month"}:t.days=f?"working days":"days",t}}throw new r.LocalizationKeysError(e.type)},t.getTriggerConditions=function(e){var t,n,r,o;const i=e.type,a=null===(t=e[i])||void 0===t?void 0:t.type;return(null===(n=e[i])||void 0===n?void 0:n.CONDITION)||(null===(o=null===(r=e[i])||void 0===r?void 0:r[a])||void 0===o?void 0:o.CONDITION)||[]},t.getActionConditions=function(e){var t;return(null===(t=e[e.type])||void 0===t?void 0:t.CONDITION)||[]}},function(e,t,n){var r=n(375),o=n(64),i=n(378).joinCommandPhrases,a=n(355).Auth,s=n(152),c=s.handleError,u=s.sanitize;function l(e,t,n){var o,a=e.suggestions,s=e.date;if(e.first_action_date&&(o=moment(e.first_action_date).fromNow(!0)),a&&a.length){var c={};t.forEach((function(e){c[e.cmd]=!0}));var u=a.filter((function(e){var t=["rule","schedule","on-date"].includes(e.type),n=i(e.cmd,t);return!r(c,n)})).slice(0,20),l={};return u.forEach((function(e){var t=e.type;t||(t="card"),(!n||new Date(e.t)>new Date(n))&&(l[t]=(l[t]||0)+1)})),{since:o,suggestions:u,suggestionDataToCache:{dateLastSeen:n,dateLastUpdate:new Date(s).toISOString(),counts:l}}}return{since:o,suggestions:a,suggestionDataToCache:{dateLastSeen:n,dateLastUpdate:new Date(s).toISOString(),counts:{}}}}var d,f={},_=function(e,t){return f[t]||!1===t&&f.true?f[t]||!1===t&&f.true:(f[t]=new TrelloPowerUp.Promise((function(n,r){if(!a.getActiveToken())return r(new Error("NOT_AUTHENTICATED"));var i=e||TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}),s=moment.tz.guess(),c=i.getContext().board;return $.ajax("".concat(o,"powerup-suggest/").concat(c,"?tz=").concat(s).concat(t?"&refresh=true":""),{type:"GET",headers:{"X-Butler-Trello-Token":a.getActiveToken()}}).done((function(e){return e.success?n(e.response):r(new Error(e.error||"NO_RESPONSE"))})).fail((function(){return r(new Error("NETWORK_ERROR"))}))})).finally((function(e){if(delete f[t],e)throw e})),f[t])},h=function(e){return(e||TrelloPowerUp.iframe({targetOrigin:"https://trello.com"})).get("board","private","suggestions")},p=function(e){return h(e).then((function(e){if(!e)return 0;var t=e.counts||{};return t.total=Object.values(t).reduce((function(e,t){return e+t}),0),t}))},m=function(e,t){if(!a.getActiveToken())return new TrelloPowerUp.Promise((function(e,t){t(new Error("NOT_AUTHENTICATED"))}));var n=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).getContext().board;return new TrelloPowerUp.Promise((function(r,i){$.ajax("".concat(o,"powerup-suggest/").concat(n),{type:"POST",data:JSON.stringify({suggestion:e,action:t}),contentType:"application/json",headers:{"X-Butler-Trello-Token":a.getActiveToken()}}).done((function(e){e.success?r(e.response):i(new Error(e.error||"NO_RESPONSE"))})).fail((function(){i(new Error("NETWORK_ERROR"))}))}))},E={processSuggestionData:l,getCachedSuggestionData:h,getSuggestions:_,getUnseenSuggestionCount:p,setSuggestionTabUnseenCount:function(e){return p(e).then((function(e){if(e.total)if($(".unseen-suggestion-count").length)$(".unseen-suggestion-count").text(u(e.total));else{var t=$('<div class="ui label unseen-suggestion-count">'.concat(u(e.total),"</div>"));$('.dashboard-tabs .item[data-tab="tab-suggestions"]').append(t)}else $(".unseen-suggestion-count").length&&(d&&clearTimeout(d),d=setTimeout((function(){$(".unseen-suggestion-count").remove()}),4e3))}))},updateSuggestionCounts:function(e,t){var n=e||TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});return TrelloPowerUp.Promise.all([h(n),n.get("member","private","registered",!1)]).spread((function(n,r){if(!r)return n&&n.counts||{};var o,i,a=n&&n.dateLastUpdate,s=n&&n.dateLastSeen;return!(i=(o=a)&&new Date(o).getTime())||new Date>new Date(i+6048e5)?TrelloPowerUp.Promise.join(_(e,!0),t.getLocalCommands()).spread((function(t,n){var r=l(t,n.commands,s).suggestionDataToCache;return r?e.set("board","private","suggestions",r).then((function(){return r.counts||{}})).catch((function(e){return c("updateSuggestionCounts",e),{}})):r.counts})).catch((function(e){return"NOT_AUTHENTICATED"!==e.message&&c("getCachedSuggestions",e),{}})):n&&n.counts||{}}))},accept:function(e){return m(e,"accept")},discard:function(e){return m(e,"discard")}};e.exports=E},function(e,t,n){var r,o,i=n(391),a=n(392),s=n(64),c={},u=function(){return r||(r=TrelloPowerUp.util.makeErrorEnum("Integration",["Unknown"])),r},l=!1,d=function(e,t){if(c.hasOwnProperty(e)&&console.error("App already registered",e),"function"!=typeof t)throw new Error("Invalid handler for ".concat(e,": ").concat(JSON.stringify(t)));c[e]={handler:t}},f=function(e,t){return new TrelloPowerUp.Promise((function(n,r){$.ajax("".concat(s,"integration-connect"),{type:"POST",data:JSON.stringify({appName:e,data:t}),contentType:"application/json",headers:{"X-Butler-Trello-Token":Auth.getActiveToken()}}).done((function(t){if(t.success)return o.refreshAutoCompleteCache(),$(".unauthorized-".concat(e.toLowerCase())).transition("hide"),void n(t.response);var i=(new u).Unknown(t.error);Sentry.captureException(i),r(i)})).fail((function(e){return Sentry.captureMessage("Integration connect request failed: ".concat(e.status," - ").concat(e.statusText)),r((new u).Unknown(e.responseText)),!1}))}))};e.exports={init:function(e){l||(l=!0,o=e,i.registerApps(d),a.registerApps(d))},getIntegrationDetails:function(e){return function(t,n){$.ajax("".concat(s,"integration-details?integrationType=").concat(e),{type:"GET",headers:{"X-Butler-Trello-Token":Auth.getActiveToken()},contentType:"application/json"}).done((function(e){return console.log(e),e.success?t(e.response):n(new Error(e.error||"Unknown error"))})).fail((function(e){return n(e)}))}},getUserIntegrations:function(){return new TrelloPowerUp.Promise((function(e,t){$.ajax("".concat(s,"integrations"),{type:"GET",headers:{"X-Butler-Trello-Token":Auth.getActiveToken()}}).done((function(n){if(n.success)e(n.response);else{var r=(new u).Unknown(n.error);Sentry.captureException(r),t(r)}})).fail((function(e){return Sentry.captureMessage("Get user integrations failed: ".concat(e.status," - ").concat(e.statusText)),t((new u).Unknown(e.responseText)),!1}))}))},handleAction:function(e,t,n){var r=c[e];if(!r)return new TrelloPowerUp.Promise((function(t,n){return n('Unknown app "'.concat(e,'"'))}));var o={t:window._trello||TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}),params:n,submitIntegrationConnectRequest:f.bind(null,e)};return new TrelloPowerUp.Promise((function(e){return e(r.handler(t,o))}))},handleActionSync:function(e,t,n){var r=c[e];if(!r)throw new Error('Unknown app "'.concat(e,'"'));var o={params:n};return r.handler(t,o)}}},function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n(64),a=function(e,t){switch(e){case"describe":return s(t);case"connect":return c(t);case"setupRevocation":return"";default:return console.error("Unknown verb: ".concat(e)),""}},s=function(e){return"Connected sites: `".concat(e.params.map((function(e){return"".concat(Object.values(e).map((function(e){return e.name})).join(", "))})).join(", "),"`")},c=function(e){var t,n=e.t;return Auth.getToken(n).then((function(e){if(!e)throw new Error("ATLASSIAN OAUTH: NO TRELLO TOKEN");var t=TrelloPowerUp.util.crypto,r=[];return t.generateInitVector().forEach((function(e){return r.push("0".concat(e.toString(16)).substr(-2))})),t.sha256Digest("".concat(r.join(""),":").concat(n.getContext().member,":").concat(e))})).then((function(e){t=e;var r="https://auth.atlassian.com/authorize?audience=api.atlassian.com&client_id=".concat("wX2bLMmD2VP17QmjP9OfJFdvpMlRWjGS","&scope=").concat(encodeURIComponent(["read:jira-user","read:jira-work","write:jira-work","offline_access"].join(" ")),"&redirect_uri=").concat(encodeURIComponent("https://app.butlerfortrello.com/internal/powerup-oauth-atlassian.html"),"&state=").concat(t,"&response_type=code&prompt=consent");return n.authorize(r,{})})).then((function(n){var o=r(n.split(":"),2),i=o[0];if(o[1]!==t)throw new Error("ATLASSIAN OAUTH: STATUS MISMATCH");return e.submitIntegrationConnectRequest({code:i})}))},u=function(e){$(".oauth-atlassian-status").addClass("hidden"),$(".oauth-atlassian-status.status-".concat(e)).removeClass("hidden")};e.exports={registerApps:function(e){e("JIRA",a)},getJiraSiteData:function(e){return function(t,n){$.ajax("".concat(i,"jira-site-data?site_id=").concat(e),{type:"GET",headers:{"X-Butler-Trello-Token":Auth.getActiveToken()},contentType:"application/json"}).done((function(e){return e.success?t(e.response):n(new Error(e.error||"Unknown error"))})).fail((function(e){return n(e)}))}}},window.AtlassianOAuthCallback=function(){var e=(window.location.search.match(/[?&]code=([-_a-zA-Z0-9]*)/)||[])[1],t=(window.location.search.match(/[?&]state=([a-fA-F0-9]*)/)||[])[1];if(e){u("requesting");var n="".concat(e,":").concat(t);try{window.opener.authorize(n)}catch(e){try{localStorage.setItem("token",n)}catch(e){throw u("error"),new Error("ATLASSIAN OAUTH: CANNOT RETURN CODE")}}u("success"),setTimeout(window.close,1e3)}else u("error")}},function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n(64),a=function(e,t){switch(e){case"describe":return s(t);case"connect":return c(t);case"revoke":return u(t);case"setupRevocation":return l(t);default:return console.error("Unknown verb: ".concat(e)),""}},s=function(e){return"Connected workspaces: `".concat(e.params.map((function(e){return"".concat(Object.values(e).map((function(e){return e.team_name})).join(", "))})).join(", "),"`")},c=function(e){var t,n=e.t;return Auth.getToken(n).then((function(e){if(!e)throw new Error("SLACK OAUTH: NO TRELLO TOKEN");var t=TrelloPowerUp.util.crypto,r=[];return t.generateInitVector().forEach((function(e){return r.push("0".concat(e.toString(16)).substr(-2))})),t.sha256Digest("".concat(r.join(""),":").concat(n.getContext().member,":").concat(e))})).then((function(e){t=e;var r="https://slack.com/oauth/v2/authorize?client_id=".concat("522979612549.970973374022","&scope=").concat(encodeURIComponent(["chat:write","chat:write.public"].join(" ")),"&user_scope=").concat(encodeURIComponent(["channels:read","chat:write","groups:read","identify","im:read","mpim:read","team:read","users.profile:read","users:read","users:read.email"].join(" ")),"&redirect_uri=").concat(encodeURIComponent("https://app.butlerfortrello.com/internal/powerup-oauth-slack.html"),"&state=").concat(t);return n.authorize(r,{})})).then((function(n){var o=r(n.split(":"),2),i=o[0];if(o[1]!==t)throw new Error("SLACK OAUTH: STATUS MISMATCH");return e.submitIntegrationConnectRequest({code:i})}))},u=function(e){var t=e.t,n=e.params,r=$(n.event.target).text().trim(" ");return r?Auth.getToken(t).then((function(e){if(!e)throw new Error("SLACK DISCONNECT: NO TRELLO TOKEN");return new Promise((function(e,t){$.ajax("".concat(i,"integration-disconnect"),{type:"POST",headers:{"X-Butler-Trello-Token":Auth.getActiveToken()},data:JSON.stringify({appName:"Slack",resourceName:r}),contentType:"application/json"}).done((function(n){return n.success?e():t(new Error(n.error||"Unknown error"))})).fail((function(e){return t(e)}))}))})):""},l=function(e){var t=[];return e.params.forEach((function(e){Object.values(e).forEach((function(e){t.push(e.team_name)}))})),t},d=function(e){$(".oauth-slack-status").addClass("hidden"),$(".oauth-slack-status.status-".concat(e)).removeClass("hidden")};e.exports={getSlackChannelsForWorkspace:function(e){return function(t,n){$.ajax("".concat(i,"slack-channels-for-workspace?team_id=").concat(e),{type:"GET",headers:{"X-Butler-Trello-Token":Auth.getActiveToken()},contentType:"application/json"}).done((function(e){return e.success?t(e.response):n(new Error(e.error||"Unknown error"))})).fail((function(e){return n(e)}))}},registerApps:function(e){e("Slack",a)}},window.SlackOAuthCallback=function(){var e=(window.location.search.match(/[?&]code=([-_a-zA-Z0-9.]*)/)||[])[1],t=(window.location.search.match(/[?&]state=([a-fA-F0-9]*)/)||[])[1];if(e){d("requesting");var n="".concat(e,":").concat(t);try{window.opener.authorize(n)}catch(e){try{localStorage.setItem("token",n)}catch(e){throw d("error"),new Error("SLACK OAUTH: CANNOT RETURN CODE")}}d("success"),setTimeout(window.close,1e3)}else d("error")}},function(e,t,n){var r=n(355).Auth,o=n(64),i=n(152),a=n(370),s={openCommandLog:function(e,t,n){var s=$("#powerup-command-log"),c=s.find(".content"),u=s.find(".loading.message"),l=s.find(".filter.checkbox"),d=s.find(".more.button"),f=s.find(".no-more-entries"),_=s.find(".no-match-filter"),h=u.siblings(".error.message"),p=s.find(".command-log"),m=s.find(".runs"),E=t?"&obo=".concat(t):"",T=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).getContext().board,g=T?"&b=".concat(T):"",A=s.find(".skip-missing");function b(t){var n=A.find(".skip-missing-action-checkbox").prop("checked");A.find(".skip-missing-action-checkbox").prop("disabled",!0),a.updateCommandId(e.id,{skipMissingFailureAction:t}).then((function(){A.find(".skip-missing-action-checkbox").prop("disabled",!1),e.skipMissingFailureAction=t})).catch((function(){A.find(".skip-missing-action-checkbox").prop("disabled",!1),A.find(".skip-missing-action-checkbox").prop("checked",n),A.find(".error").transition("show"),setTimeout((function(){A.find(".error").transition("hide")}),5e3)}))}function v(){c.animate({scrollTop:c.prop("scrollHeight")},500)}e.skipMissingFailureAction?A.find(".skip-missing-action-checkbox").prop("checked",!1):A.find(".skip-missing-action-checkbox").prop("checked",!0),A.checkbox({onChecked:function(){b(!1)},onUnchecked:function(){b(!0)}}),p.empty(),s.modal({detachable:!0,autofocus:!1,onHide:function(){p.empty(),n()}}).modal("show"),l.find(".filter-checkbox").prop("checked",!1),l.checkbox({onChecked:function(){p.find(".valid").addClass("hidden").hide(),0===p.find(".invalid").length&&_.transition("show")},onUnchecked:function(){p.find(".valid").removeClass("hidden").show(),_.transition("hide")}}),function t(n){u.show(),m.hide(),l.hide(),d.transition("hide"),f.transition("hide"),h.transition("hide"),_.transition("hide"),r.authorize().then((function(){$.ajax("".concat(o,"powerup-command-log/").concat(e.id,"?before=").concat(n).concat(E).concat(g),{type:"GET",headers:{"X-Butler-Trello-Token":r.getActiveToken()}}).done((function(e){u.hide(),e.success?e.response.log.length?(Number.isInteger(e.response.monthUsage)&&m.text("Current estimated monthly runs: ".concat(e.response.monthUsage)).show(),e.response.log.forEach((function(e){var t=e.output;"string"==typeof t&&(t=[{message:t,type:"MESSAGE"}]);var r=e.data&&e.data.command_card&&Number.isInteger(e.data.command_card.operations)?e.data.command_card.operations:"",o=function(e){return e?e.map((function(e){var t='<div class="item">';switch(e.type){case"ERROR":t+='<i class="red warning circle icon"></i>';break;case"WARNING":t+='<i class="yellow warning circle icon"></i>';break;case"MESSAGE":t+='<i class="blue info circle icon"></i>'}return t+='<div class="content">'.concat(i.markdownToHtml(e.message),"</div>"),t+="</div>"})).join(""):'<div class="item"><i class="blue info circle icon"></i><div class="content">No details.</div></div>'}(t),a=function(e){return e&&e.some((function(e){return["ERROR","WARNING"].includes(e.type)}))}(t)?'<tr class="invalid">':'<tr class="valid">';p.append(a+'<td><div class="ui list"><div class="item"><small>'+moment(e.t).format("LLLL")+"</small></div>"+o+(r?"<div>Total operations: ".concat(r,"</div>"):"")+"</div></td></tr>"),n=e.t})),p.find(".content a").attr("target","_blank"),l.find(".filter-checkbox").prop("checked")?(p.find(".valid").addClass("hidden").hide(),0===p.find(".invalid").length&&_.transition("show")):(p.find(".valid").removeClass("hidden").show(),_.transition("hide")),d.transition("show").off("click").click((function(){v(),t(n)})),l.show()):(Number.isInteger(e.response.monthUsage)&&m.text("Current estimated monthly runs: ".concat(e.response.monthUsage)).show(),l.show(),d.transition("hide"),f.transition("show")):(h.transition("show"),v(),s.find(".retry-btn").off("click").click((function(){return t(n),!1})))})).fail((function(){u.hide(),h.transition("show"),v()}))}))}((new Date).toISOString())}};e.exports=s},function(e,t,n){var r,o=n(429),i=function(){return r&&r.isConnected()},a=function(){},s={connect:function(e){r=null;var t=new o.Client(e.url,e.client_id),n={useSSL:!0,timeout:15,mqttVersion:4,onSuccess:function(){e.topic&&t.subscribe(e.topic),r=t,(e.onConnectionSuccess||a)(t)},onFailure:function(t){var n=t.errorCode,r=t.errorMessage;console.warn((new Date).toISOString(),"MQTT CONNECTION FAILURE"),console.warn((new Date).toISOString(),{errorCode:n,errorMessage:r}),(e.onConnectionFailure||a)("MQTT_CONNECTION_FAILURE")}};t.connect(n),t.onConnectionLost=function(){console.warn((new Date).toISOString(),"MQTT CONNECTION LOST"),r=null,e.onConnectionLost&&e.onConnectionLost(t)},t.onMessageArrived=function(n){e.onMessageReceived&&e.onMessageReceived(t,n.destinationName,n.payloadString)}},getSessionClient:function(){return i()?r:null},getSessionId:function(){return i()?r.clientId:null},isSessionActive:i};window.MessageBroker=s,e.exports=s},,,,,function(e,t,n){"use strict";n.r(t);n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(179),n(71),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(190),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(219),n(220),n(221),n(222),n(223),n(224),n(226),n(228),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(251),n(252),n(257),n(258),n(259),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(141),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(142),n(280),n(281),n(282),n(283),n(284),n(285),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(347),n(348),n(349),n(350),n(353),n(151);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}if("undefined"==typeof $)throw window.ButlerPowerUp={init:function(){console.log("[ERROR] Could not load Butler - jQuery not available."),"undefined"!=typeof TrelloPowerUp&&TrelloPowerUp.initialize({"board-buttons":function(){return[]},"card-buttons":function(){return[]},"show-settings":function(){return[]},"remove-data":function(){return[]}},{targetOrigin:"https://trello.com"})}},new Error("jQuery is undefined");n(375);var i=n(376),a=n(154),s=n(354),c=n(152),u=n(355),l=n(370),d=n(389),f=n(374);n(64),n(378),n(379),n(393),n(394),n(430),n(431),n(434),s.init();var _={},h=u.Auth;!function(){function e(e,t,n){"private"===t.prefs.permissionLevel&&e.get("board","private","overrides").then((function(i){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i||{});n.forEach((function(n){var r,o;r=t.members,o=n,r.some((function(e){return e.id===o.uid}))||(a[n.id]||(a[n.id]={enabled:!1,ot:+new Date}),e.set("board","private","overrides",a))}))}))}function t(t,n){return window.Sentry&&Sentry.configureScope((function(e){t.isMemberSignedIn()&&e.setUser({id:t.getContext().member}),e.setTag("webClient",t.getContext().version||"unknown"),e.setTag("idBoard",t.getContext().board)})),t.isMemberSignedIn()&&t.memberCanWriteToModel("board")?(l.init(t),h.ensureTokenValidity(t).catch((function(e){return c.handleError("ensureTokenValidity",e)})).then((function(){return h.registerIfNecessary(t,!1,l,!0)})).catch((function(e){if(e instanceof h.RegistrationError().NotConfirmed)throw e;c.handleError("registerIfNecessary",e)})).then((function(){return Promise.all([f.checkUserQuota(t).catch((function(e){return c.handleError("checkUserQuota",e)})),d.updateSuggestionCounts(t,l).catch((function(e){return c.handleError("updateSuggestionCounts",e)}))])})).catch(h.RegistrationError().NotConfirmed,(function(){})),l.getLocalCommands().then((function(r){var o=r.commands.filter((function(e){return e.enabled}));return o.length>0?u.getBoard(n.context.board,{fields:"prefs",members:"all",member_fields:"id"}).then((function(n){return n.members.find((function(e){return e.id===t.getContext().member}))?(e(t,n,o),o.filter((function(e){return"board-button"===e.type})).sort((function(e,t){return e.is_own?t.is_own?0:-1:t.is_own?1:0})).slice(0,20).map((function(e){return{icon:"./assets/fa-5.1.1/icons/white/".concat(e.image,".svg"),text:e.label,callback:function(t){t.boardBar({height:38,url:"./powerup-command-runner.html?cmd=".concat(e.id,"&type=boardButton")}).catch((function(e){return c.handleError("boardButtonClick",e)}))}}}))):[]})):[]})).catch((function(e){return c.handleError("getBoardButtons",e),[]}))):[]}function n(e,t){return!e.getContext().omitCardButtons&&e.isMemberSignedIn()&&e.memberCanWriteToModel("card")?(l.init(e),f.checkUserQuota(e).catch((function(e){return c.handleError("checkUserQuota",e)})),TrelloPowerUp.Promise.all([f.getUserPlanLocal(e),l.getLocalCommands(),d.getUnseenSuggestionCount(e)]).spread((function(e,n,r){var o,i=n.commands.filter((function(e){return"card-button"===e.type&&e.enabled}));r.total&&(o={icon:"./img/butler-powerup-card-btn.svg",text:"Butler Tip".concat(r.total>1?"s":""," (").concat(r.total,")"),callback:function(e){return a.sendUIEvent({action:"clicked",actionSubject:"button",actionSubjectId:"butlerUnseenSuggestionsButton",source:"cardDetailScreen",attributes:{numUnseenSuggestions:r.total,section:"powerupsSection"}}),h.registerIfNecessary(e,!0,l).then((function(){return e.hideCard().then((function(){return e.overlay({url:"./powerup-dashboard.html?board=".concat(t.context.board,"&tab=suggestions"),inset:!0})}))})).catch(h.RegistrationError(),(function(){})).catch((function(e){return c.handleError("registerIfNecessary",e)}))}});var s=i.sort((function(e,t){return e.is_own?t.is_own?0:-1:t.is_own?1:0})).slice(0,20).map((function(e){return{icon:"./assets/fa-5.1.1/icons/grey/".concat(e.image,".svg"),text:e.label,callback:function(t){a.sendUIEvent({action:"clicked",actionSubject:"button",actionSubjectId:"butlerCardButton",source:"cardDetailScreen",attributes:{close:e.close,section:"powerupsSection"}}),t.boardBar({height:38,url:"./powerup-command-runner.html?cmd=".concat(e.id)}),e.close&&t.hideCard().catch((function(){}))}}}));return o&&s.push(o),s})).catch((function(e){return c.handleError("getCardButtons",e),[{icon:"./img/butler-powerup-card-attn-btn.svg",text:"Butler",callback:function(e){return h.registerIfNecessary(e,!0,l).then((function(){return e.overlay({url:"./powerup-dashboard.html?board=".concat(t.context.board),inset:!0})})).catch(h.RegistrationError(),(function(){})).catch((function(e){return c.handleError("registerIfNecessary",e)}))}}]}))):[]}function s(e,t){return e.closePopup().catch((function(){})),"canShowButlerUI"in e.getContext()&&!e.getContext().canShowButlerUI?e.alert({message:"Your enterprise has restricted the Butler dashboard to workspace admins.",duration:10}):e.isMemberSignedIn()&&e.memberCanWriteToModel("board")?(l.init(e),h.registerIfNecessary(e,!0,l).then((function(){var n,r={board:t.context.board},o=new URLSearchParams;if(t.butlerTab&&(r.tab=t.butlerTab),t.butlerCmdEdit&&(r.commandEdit=t.butlerCmdEdit),t.butlerCmdLog&&(r.commandLog=t.butlerCmdLog),t.newCommand)try{var a=i.decompressFromEncodedURIComponent(t.newCommand);n=a?t.newCommand:i.compressToEncodedURIComponent(t.newCommand),r.newCommand=n,o.set("c",n)}catch(e){n=null}t.newIcon&&(r.newIcon=t.newIcon,o.set("i",t.newIcon)),t.newLabel&&(r.newLabel=t.newLabel,o.set("l",t.newLabel)),t.highlightCommand&&(r.highlightCommand=t.highlightCommand);var s=new URLSearchParams(r);if(!0===e.getContext().useNewButton){var u=TrelloPowerUp.util.relativeUrl("./powerup-dashboard.html?".concat(s.toString()));return e.signUrl(u,{inset:!0})}return!0===e.getContext().useRoutes?e.board("shortLink","name").then((function(r){var i=c.makeSlug(r.name),a=t.butlerTab?c.normalizeTabForUrl(t.butlerTab):"",u=(n?"/new?".concat(o.toString()):"")||(t.butlerCmdEdit&&"new"===t.butlerCmdEdit?"/new/":""),l=t.butlerCmdEdit?"/edit/".concat(t.butlerCmdEdit):"",d=t.butlerCmdEdit?"/log/".concat(t.butlerCmdLog):"",f=u||l||d,_="https://trello.com/b/".concat(r.shortLink,"/").concat(i,"/butler/").concat(a).concat(f);return e.navigate({url:_}),e.overlay({url:"./powerup-dashboard.html?".concat(s.toString()),inset:!0}).catch((function(e){return c.handleError("showDashboard",e)}))})):e.overlay({url:"./powerup-dashboard.html?".concat(s.toString()),inset:!0}).catch((function(e){return c.handleError("showDashboard",e)}))})).catch(h.RegistrationError(),(function(){!0===e.getContext().useNewButton&&e.board("shortLink","name").then((function(t){var n=c.makeSlug(t.name);setTimeout((function(){e.navigate({url:"https://trello.com/b/".concat(t.shortLink,"/").concat(n),trigger:!0})}),500)})).catch((function(){}))})).catch((function(e){return c.handleError("registerIfNecessary",e)}))):e.alert({display:"warning",duration:10,message:"To use Butler on this board you must be a member of the board."})}function p(e){return h.clearMemory(e),!0}_.init=function(){if("undefined"==typeof TrelloPowerUp)return Sentry.captureException(new Error("TrelloPowerUp is undefined")),console.log("[ERROR] TrelloPowerUp library not available.");window._trello=TrelloPowerUp.initialize({"board-buttons":t,"card-buttons":n,"show-settings":s,"remove-data":p},{targetOrigin:"https://trello.com"}),window._trello.member("id").then((function(e){Sentry.configureScope((function(t){e&&"notLoggedIn"!==e.id&&t.setUser({id:e.id})}))})).catch((function(e){return c.handleError("configureSentry",e)}))}}(),window.ButlerPowerUp=_},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalizationKeysForCommand=t.localizeCommandToButlerEnglish=t.parseInlineDate=t.parseEnterpriseCommand=t.parseCondition=t.parseCommand=t.getTimezoneName=t.correctParseResult=t.configureCommandParser=void 0;var i=n(371);Object.defineProperty(t,"configureCommandParser",{enumerable:!0,get:function(){return i.configureGlobals}});var a=n(401);Object.defineProperty(t,"correctParseResult",{enumerable:!0,get:function(){return a.correctParseResult}}),Object.defineProperty(t,"getTimezoneName",{enumerable:!0,get:function(){return a.getTimezoneName}}),Object.defineProperty(t,"parseCommand",{enumerable:!0,get:function(){return a.parseCommand}}),Object.defineProperty(t,"parseCondition",{enumerable:!0,get:function(){return a.parseCondition}}),Object.defineProperty(t,"parseEnterpriseCommand",{enumerable:!0,get:function(){return a.parseEnterpriseCommand}}),Object.defineProperty(t,"parseInlineDate",{enumerable:!0,get:function(){return a.parseInlineDate}});var s=n(419);Object.defineProperty(t,"localizeCommandToButlerEnglish",{enumerable:!0,get:function(){return s.localizeCommandToButlerEnglish}}),Object.defineProperty(t,"getLocalizationKeysForCommand",{enumerable:!0,get:function(){return s.getLocalizationKeysForCommand}}),o(n(427),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseInlineDate=t.parseEnterpriseCommand=t.parseCondition=t.parseCommand=t.getTimezoneName=t.correctParseResult=void 0;var r=n(153);Object.defineProperty(t,"correctParseResult",{enumerable:!0,get:function(){return r.correctParseResult}}),Object.defineProperty(t,"getTimezoneName",{enumerable:!0,get:function(){return r.getTimezoneName}}),Object.defineProperty(t,"parseCommand",{enumerable:!0,get:function(){return r.parseCommand}}),Object.defineProperty(t,"parseCondition",{enumerable:!0,get:function(){return r.parseCondition}}),Object.defineProperty(t,"parseEnterpriseCommand",{enumerable:!0,get:function(){return r.parseEnterpriseCommand}}),Object.defineProperty(t,"parseInlineDate",{enumerable:!0,get:function(){return r.parseInlineDate}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCommandGrammar=void 0;const r=n(153);let o;t.getCommandGrammar=()=>(o||(o=o||{_COMMA:r.optional(r.or(",",";")),_COMMA__HELP:",",_A:r.or("a","an","one","the"),_A__HELP:"a",_AN:"_A",_AN__HELP:"an",_THE:r.or("the","a","an"),_THE__HELP:"the",_AND:r.or(["_COMMA",r.optional("and")],"and"),_AND__HELP:"and",_OR:r.or(["_COMMA",r.optional("or")],"or"),_OR__HELP:"or",_AND_OR:r.or(["_COMMA",r.optional(r.or("and","or"))],r.or("and","or")),_AND_OR__HELP:"and",_THAT_IS:r.or(["that","is"],"that's"),_THAT_IS_NOT:r.or(["that","is","not"],["that","isn't"],["that's","not"]),_EVERY:r.or("every","each"),_EVERY__HELP:"every",_IN:r.or("in","on","of"),_IN__HELP:"in",_INTO:r.or(["in","to"],"in","into","to","at","on"),_INTO__HELP:"into",_OUTOF:r.or(["out","of"],[r.optional("away"),"from"]),_OUTOF__HELP:["out","of"],_TO:"_INTO",_TO__HELP:"to",_FROM:"from",_CALLED:r.or("called","named","titled",["with","name"],["with","title"]),_THE_CARD:r.or("it",[r.optional(r.or("the","this","that")),r.optional("same"),"card"]),THE_CARD:"_THE_CARD",_THE_CARD__HELP:["the","card"],_TO_THE_CARD:["_TO","_THE_CARD"],_IN_THE_CARD:["_IN","_THE_CARD"],_THE_CARD_S:r.or("its",[r.optional(r.or("the","this","that")),r.optional("same"),r.or("card's","card")],"the"),_THE_CARD_S__HELP:["the","card's"],_ALL_THE_CARDS:r.or(["all",r.optional("the"),"cards"],["the","cards"],["_EVERY","card"],["any",r.or("card","cards")]),_ALL_THE_CARDS_NEW:r.or(["all",r.optional("the"),"cards"],["the","cards"],["any",r.or("card","cards")]),_ALL_THE_CARDS__HELP:r.or(["all","the","cards"],["_EVERY","card"]),_THE_LIST:r.or("it",[r.optional(r.or("the","this","that")),r.optional("same"),"list"]),THE_LIST:"_THE_LIST",_THE_LIST__HELP:["the","list"],_THIS_BOARD:[r.or("this","the"),"board"],THIS_BOARD:"_THIS_BOARD",_THIS_BOARD__HELP:["this","board"],_IN_THIS_BOARD:[r.or("in","on","of"),"_THIS_BOARD"],_INTO_BOARD:["_INTO","_THIS_BOARD"],_OUTOF_BOARD:["_OUTOF","_THIS_BOARD"],_TEAM:r.or("team","workspace"),_IN_A_CHECKLIST:["in","a","checklist"],_TO_A_CHECKLIST:["to","a","checklist"],_FROM_A_CHECKLIST:["from","a","checklist"],DAY:r.or_index(r.or("sunday","sun"),r.or("monday","mon"),r.or("tuesday","tue"),r.or("wednesday","wed"),r.or("thursday","thu"),r.or("friday","fri"),r.or("saturday","sat")),_DAY_LIST:["DAY",r.optional(["_AND_OR?","_DAY_LIST"])],_DAY_LIST__HELP:r.or("DAY",["DAY","and","DAY"]),LAST_MONTH_WEEK:"last",MONTH_WEEK_NUMBER:r.or(r.or_index("","first","second","third","fourth"),r.or_index("","1st","2nd","3rd","4th")),NOW:"now",IN_MINUTES:r.small_numeral("a number of minutes, e.g. 30 minutes",!0),_IN_MINUTES:[r.optional("in"),r.or("IN_MINUTES","{IN_MINUTES}"),r.or("minute","minutes"),r.optional(r.or(["from","now"],"later"))],IN_HOURS:r.small_numeral("a number of hours, e.g. 24",!0),_IN_HOURS:[r.optional("in"),r.or("IN_HOURS","{IN_HOURS}"),r.or("hour","hours"),r.optional(r.or(["from","now"],"later"))],TODAY:"today",TOMORROW:"tomorrow",YESTERDAY:"yesterday",END_OF_DAY:["the","end","of"],BEFORE_DAY:["before","END_OF_DAY?","DAY"],NEXT_DAY:["_THE?",r.optional("next"),"DAY"],NEXT_WEEK:["_THE?","next","week",r.optional(["on","DAY"])],NEXT_MONTH:["_THE?","next","month",r.optional(["on","the","MONTH_DAY_NUMBER"])],MONTH_DAY_NUMBER:r.or(r.ordinal("an ordinal day of the month, e.g. fifth",1,31),r.small_numeral("a day of the month, e.g. 21",!1,1,31)),WHICH_MONTH_THIS:"this",WHICH_MONTH_THE:"the",WHICH_MONTH_NEXT:[r.optional("the"),r.or("next","upcoming")],_WHICH_MONTH:[r.optional("of"),r.or("WHICH_MONTH_THIS","WHICH_MONTH_NEXT","WHICH_MONTH_THE"),"month"],NTH_WEEK_DAY:[r.optional("the"),r.or("MONTH_WEEK_NUMBER","LAST_MONTH_WEEK"),"DAY","_WHICH_MONTH?"],WORKING:"working",FIRST_MONTH_DAY:r.or(["first","WORKING?","day"],"start"),_LAST_MONTH_DAY:r.or(["last","WORKING?","day"],"end"),LAST_MONTH_DAY:"_LAST_MONTH_DAY",MONTH_DAY:r.or(["the","MONTH_DAY_NUMBER",r.optional("day"),"_WHICH_MONTH?"],["the",r.or("FIRST_MONTH_DAY","LAST_MONTH_DAY"),"_WHICH_MONTH"]),X_DAYS:r.small_numeral("a number of days, e.g. two days",!0),X_WORKING_DAYS:r.small_numeral("a number of days, e.g. two days",!0),X_WEEKS:r.small_numeral("a number of weeks, e.g. two weeks"),X_MONTHS:r.small_numeral("a number of months, e.g. two months"),IN_X_FROM_TODAY:[r.optional("in"),r.or([r.or("X_DAYS","{X_DAYS}"),r.or("day","days")],[r.or("X_WORKING_DAYS","{X_WORKING_DAYS}"),"working",r.or("day","days")],[r.or("X_WEEKS","{X_WEEKS}"),r.or("week","weeks")],[r.or("X_MONTHS","{X_MONTHS}"),r.or("month","months")]),r.optional(r.or(["from",r.or("now","today")],"later"))],THE_NEXT_WORKING_DAY:["the","next","working","day"],_RELATIVE_DATE:r.or("NOW","_IN_MINUTES","_IN_HOURS","TODAY","TOMORROW","YESTERDAY","BEFORE_DAY","NEXT_DAY","NEXT_WEEK","NEXT_MONTH","NTH_WEEK_DAY","MONTH_DAY","IN_X_FROM_TODAY","THE_NEXT_WORKING_DAY"),TIME:r.time(),MONTH:r.or(r.or_index("","january","february","march","april",["may",r.optional(".")],"june","july","august","september","october","november","december"),r.or_index("",["jan",r.optional(".")],["feb",r.optional(".")],["mar",r.optional(".")],["apr",r.optional(".")],["may",r.optional(".")],["jun",r.optional(".")],["jul",r.optional(".")],["aug",r.optional(".")],[r.or("sep","sept"),r.optional(".")],["oct",r.optional(".")],["nov",r.optional(".")],["dec",r.optional(".")])),YEAR:r.year(),END_OF_MONTH:[r.optional("the"),"_LAST_MONTH_DAY",r.optional("of")],WRITTEN_DATE:[r.or([r.optional(["DAY","_COMMA"]),r.or(["MONTH",r.optional("the"),"MONTH_DAY_NUMBER"],[r.optional("the"),"MONTH_DAY_NUMBER",r.optional("of"),"MONTH"])],["END_OF_MONTH?","MONTH"]),r.optional(["_COMMA",r.optional("of"),"YEAR"])],INLINE_WRITTEN_DATE:[r.or([r.optional(["DAY","_COMMA"]),r.or(["MONTH",r.optional("the"),"MONTH_DAY_NUMBER"],[r.optional("the"),"MONTH_DAY_NUMBER",r.optional("of"),"MONTH"])],["END_OF_MONTH?","MONTH"]),r.optional(["_COMMA",r.optional("of"),"YEAR"])],NUMERIC_DATE:r.numeric_date(),_DATE:r.or("NUMERIC_DATE","WRITTEN_DATE","_RELATIVE_DATE"),FROM_DATE:[r.or("from",["starting",r.optional("on")]),"_DATE"],_DATE_TIME:r.or(["_DATE","TIME?"],"TIME"),DATE_TIME:"_DATE_TIME",_INLINE_DATE:r.or("NUMERIC_DATE","INLINE_WRITTEN_DATE=>WRITTEN_DATE","_RELATIVE_DATE"),_INLINE_DATE_TIME:r.or(["_INLINE_DATE","TIME?"],"TIME"),INLINE_DATE_TIME:["_INLINE_DATE_TIME","<INLINE_END>"],END_DATE_TIME:["_INLINE_DATE_TIME",r.optional("."),"<END>"],EVERY_DAY:["_EVERY","day"],EVERY_WEEKDAY:["_EVERY","weekday"],_OF_THE_MONTH:["of","the","month"],CERTAIN_DAYS:["_EVERY",r.optional(r.or("MONTH_WEEK_NUMBER","LAST_MONTH_WEEK")),"_DAY_LIST","_OF_THE_MONTH?"],_ON_DAY_LIST:["on","_DAY_LIST"],EVERY_WEEK:["_EVERY",r.or("week",["X_WEEKS","weeks"]),"_ON_DAY_LIST?"],EVERY_MONTH:r.or(["_EVERY",r.or("month",["X_MONTHS","months"]),r.optional(["on","the",r.or("FIRST_MONTH_DAY","LAST_MONTH_DAY","MONTH_DAY_NUMBER"),"_OF_THE_MONTH?"])],["_EVERY",r.or("FIRST_MONTH_DAY","LAST_MONTH_DAY"),"_OF_THE_MONTH?"],["on","the",r.or("MONTH_DAY_NUMBER","FIRST_MONTH_DAY","LAST_MONTH_DAY"),"of","_EVERY","month"],["at","the",r.or("FIRST_MONTH_DAY","LAST_MONTH_DAY"),"of","_EVERY","month"]),EVERY_YEAR:r.or(["_EVERY",r.optional(["year","on"]),"MONTH","MONTH_DAY_NUMBER"],["_EVERY",r.optional(["year","on","the"]),"MONTH_DAY_NUMBER","of","MONTH"],["_EVERY",r.optional(["year","in"]),"MONTH"],["_EVERY","year"],["on","MONTH","MONTH_DAY_NUMBER",r.optional([r.optional("of"),"_EVERY","year"])],["on",r.optional("the"),"MONTH_DAY_NUMBER","of",r.or(["_EVERY?","MONTH"],["MONTH",r.optional([r.optional("of"),"_EVERY","year"])])]),FROM_HOUR:["from",r.time()],TO_HOUR:["to",r.time()],FROM_DAY:["from","DAY",r.optional(r.time())],TO_DAY:["to","DAY",r.optional(r.time())],MINUTE:r.small_numeral("the minute number, between 0 and 59",!1,0,59),_ON_MINUTE:["_COMMA","on","minute","MINUTE","_COMMA"],EVERY_HOUR:["_EVERY","hour","_COMMA","_ON_MINUTE?",r.optional(["FROM_HOUR","TO_HOUR?"]),r.optional(["FROM_DAY","TO_DAY"])],EVERY:r.or([r.or("EVERY_DAY","EVERY_WEEKDAY","EVERY_YEAR","CERTAIN_DAYS"),"TIME?"],[r.or("EVERY_WEEK","EVERY_MONTH"),r.optional(r.or(r.swappable("TIME","FROM_DATE"),"TIME","FROM_DATE"))],"EVERY_HOUR"),WHO_I:"i",WHO_ANYONE:r.or("someone","anyone"),WHO_ANYONE_BUT:["anyone",r.or("but","except"),"MEMBER"],WHO:r.or("WHO_I","WHO_ANYONE_BUT","WHO_ANYONE","MEMBER"),_BY_WHOM:["by","WHO"],COLOR:r.or("blue","green","orange","purple","red","yellow","sky","lime","pink","black"),LABEL:["_A?",r.or(["COLOR","label",r.optional(["_CALLED?","$TITLE"])],["COLOR","$TITLE?","label"],["label","_CALLED?","$TITLE"],["$TITLE","COLOR?","label"])],ANY_LABEL:[r.or("a","any"),"label"],_ATTACHMENT_CONDITION:r.or("_STARTING_WITH","_NOT_STARTING_WITH","_ENDING_WITH","_NOT_ENDING_WITH","_CONTAINING","_NOT_CONTAINING"),ATTACHMENT_ADDED:r.or(["_AN?","attachment","_ATTACHMENT_CONDITION?",r.optional("is"),"added","_INTO_TARGET_CARD?","_BY_WHOM?"],["WHO",r.or("add","adds"),"_AN?","attachment","_ATTACHMENT_CONDITION?","_INTO_TARGET_CARD?"]),ATTACHMENT_REMOVED:r.or(["_AN?","attachment","_ATTACHMENT_CONDITION?",r.optional("is"),"removed","_FROM_TARGET_CARD?","_BY_WHOM?"],["WHO",r.or("remove","removes"),"_AN?","attachment","_ATTACHMENT_CONDITION?","_FROM_TARGET_CARD?"]),LINK_ADDED:r.or(["_A?","link","_ATTACHMENT_CONDITION?",r.optional("is"),"added","_INTO_TARGET_CARD","_BY_WHOM?"],["WHO",r.or("add","adds"),"_A?","link","_ATTACHMENT_CONDITION?","_INTO_TARGET_CARD"]),_LABEL_ADDED_VERB:r.or("add","adds","added","apply","applies","applied","put","puts"),LABEL_ADDED:r.or([r.or("LABEL","ANY_LABEL"),r.optional("is"),"_LABEL_ADDED_VERB","_INTO_TARGET_CARD?","_BY_WHOM?"],["WHO","_LABEL_ADDED_VERB",r.or("LABEL","ANY_LABEL"),"_INTO_TARGET_CARD?"]),LABEL_REMOVED:r.or([r.or("LABEL","ANY_LABEL"),r.optional("is"),"removed",r.optional(["from","_TARGET_CARD"]),"_BY_WHOM?"],["WHO",r.or("remove","removes"),r.or("LABEL","ANY_LABEL"),r.optional(["from","_TARGET_CARD"])]),MEMBER_ADDED:r.or(["MEMBER",r.optional("is"),r.or("added","assigned"),r.optional(["_TO?","_TARGET_CARD"]),"_BY_WHOM?"],["WHO",r.or("add","adds","assign","assigns"),"MEMBER",r.optional(["_TO?","_TARGET_CARD"])],["WHO",r.or("assign","assigns"),["_TARGET_CARD","_TO"],"MEMBER"],["_TARGET_CARD","is","assigned","_TO","MEMBER"]),MEMBER_REMOVED:r.or(["MEMBER",r.optional("is"),r.or("removed"),r.optional(["from","_TARGET_CARD"]),"_BY_WHOM?"],["WHO",r.or("remove","removes"),"MEMBER",r.optional(["from","_TARGET_CARD"])]),CHECKLIST_ADDED:r.or([r.or("_CHECKLIST","_UNNAMED_CHECKLIST"),r.optional("is"),"added","_INTO_TARGET_CARD?","_BY_WHOM?"],["WHO",r.or("add","adds"),r.or("_CHECKLIST","_UNNAMED_CHECKLIST"),"_INTO_TARGET_CARD?"]),CHECKLIST_REMOVED:r.or([r.or("_CHECKLIST","_UNNAMED_CHECKLIST"),r.optional("is"),"removed",r.optional(["from","_TARGET_CARD"]),"_BY_WHOM?"],["WHO",r.or("remove","removes"),r.or("_CHECKLIST","_UNNAMED_CHECKLIST"),r.optional(["from","_TARGET_CARD"])]),_A_COMMENT:["_A","comment"],_COMMENT_ADDED_VERB_PASSIVE:r.or("added","posted"),_COMMENT_ADDED_VERB:r.or("add","adds","write","writes","post","posts"),_COMMENT_CONDITION:r.or("_STARTING_WITH","_NOT_STARTING_WITH","_ENDING_WITH","_NOT_ENDING_WITH","_CONTAINING","_NOT_CONTAINING"),COMMENT_ADDED:r.or(["_A_COMMENT","_COMMENT_CONDITION?",r.optional("is"),"_COMMENT_ADDED_VERB_PASSIVE","_INTO_TARGET_CARD?","_BY_WHOM?"],["WHO","_COMMENT_ADDED_VERB","_A_COMMENT","_COMMENT_CONDITION?","_INTO_TARGET_CARD?"]),VOTE_ADDED:["a","vote","is","added",r.or("to","on")],_ADDS_VOTE_TO:r.or([r.or("votes","vote"),r.optional("on")],[r.or("adds","add"),"a","vote",r.or("to","on")]),VOTE_REMOVED:["a","vote","is","removed","from"],_REMOVES_VOTE_FROM:r.or([r.or("unvotes","unvote"),r.optional("on")],[r.or("removes","remove"),r.or("a","the"),"vote",r.or("from","on")]),_CARD_VOTED:["voted",r.optional("on")],_CARD_UNVOTED:["unvoted"],VOTE_ON_CARD:r.or(["VOTE_ADDED","_TARGET_CARD?","_BY_WHOM?"],["WHO","_ADDS_VOTE_TO=>VOTE_ADDED","_TARGET_CARD?"],["VOTE_REMOVED","_TARGET_CARD?","_BY_WHOM?"],["WHO","_REMOVES_VOTE_FROM=>VOTE_REMOVED","_TARGET_CARD?"],["_TARGET_CARD","is",r.or("_CARD_VOTED=>VOTE_ADDED","_CARD_UNVOTED=>VOTE_REMOVED")]),_A_START_DATE:[r.or("_A","_THE"),"start","date"],_A_DUE_DATE:[r.or("_A","_THE"),"due","date"],THE_DUE_DATE:[r.optional(r.or("the","its")),"due","date"],_DATE_ADDED_VERB_PASSIVE:r.or("added","applied","assigned","set","given","scheduled"),_DATE_ADDED_VERB:r.or("add","adds","apply","applies","assign","assigns","set","give","gives","schedule","schedules"),DUE_DATE_MOVED:r.or("moved","move","moves"),START_DATE_MOVED:r.or("moved","move","moves"),DUE_DATE_ADDED:r.or(["_A_DUE_DATE","DATE_CONDITION?",r.optional("is"),r.or("_DATE_ADDED_VERB_PASSIVE","DUE_DATE_MOVED"),"_INTO_TARGET_CARD?","_BY_WHOM?"],["WHO",r.or("_DATE_ADDED_VERB","DUE_DATE_MOVED"),"_A_DUE_DATE","_INTO_TARGET_CARD?"],["_TARGET_CARD","is","scheduled","_BY_WHOM?"],["WHO",r.or("schedule","schedules"),"_TARGET_CARD"],["_TARGET_CARD","is","given","_A_DUE_DATE","_BY_WHOM?"],["WHO",r.or("give","gives"),"_TARGET_CARD","_A_DUE_DATE"]),START_DATE_ADDED:r.or(["_A_START_DATE","DATE_CONDITION?",r.optional("is"),r.or("_DATE_ADDED_VERB_PASSIVE","START_DATE_MOVED"),"_INTO_TARGET_CARD?","_BY_WHOM?"],["WHO",r.or("_DATE_ADDED_VERB","START_DATE_MOVED"),"_A_START_DATE","_INTO_TARGET_CARD?"],["_TARGET_CARD","is","scheduled","_BY_WHOM?"],["WHO",r.or("schedule","schedules"),"_TARGET_CARD"],["_TARGET_CARD","is","given","_A_START_DATE","_BY_WHOM?"],["WHO",r.or("give","gives"),"_TARGET_CARD","_A_START_DATE"]),_DATE_REMOVED_VERB_PASSIVE:r.or("removed","deleted"),_DATE_REMOVED_VERB:r.or("remove","removes","delete","deletes"),DUE_DATE_REMOVED:r.or(["_A_DUE_DATE",r.optional("is"),"_DATE_REMOVED_VERB_PASSIVE","_FROM_TARGET_CARD?","_BY_WHOM?"],["WHO","_DATE_REMOVED_VERB","_A_DUE_DATE","_FROM_TARGET_CARD?"]),START_DATE_REMOVED:r.or(["_A_START_DATE",r.optional("is"),"_DATE_REMOVED_VERB_PASSIVE","_FROM_TARGET_CARD?","_BY_WHOM?"],["WHO","_DATE_REMOVED_VERB","_A_START_DATE","_FROM_TARGET_CARD?"]),DUE_DATE_COMPLETED:r.or(["_A_DUE_DATE",r.optional("is"),r.or("completed","checked",["marked",r.optional("as"),"complete"]),"_IN_TARGET_CARD?","_BY_WHOM?"],["WHO",r.or([r.or("completes","complete","checks","check"),"_A_DUE_DATE","_ON_TARGET_CARD?"],[r.or("marks","mark"),"_A_DUE_DATE",r.swappable([r.optional("as"),"complete"],"_ON_TARGET_CARD?")])]),DUE_DATE_INCOMPLETED:r.or(["_A_DUE_DATE",r.optional("is"),r.or("incompleted","unchecked",["marked",r.optional("as"),"incomplete"],["unmarked",r.optional("as"),"complete"]),"_IN_TARGET_CARD?","_BY_WHOM?"],["WHO",r.or([r.or("incompletes","incomplete","unchecks","uncheck"),"_A_DUE_DATE","_ON_TARGET_CARD?"],[r.or("marks","mark"),"_A_DUE_DATE",r.swappable([r.optional("as"),"incomplete"],"_ON_TARGET_CARD?")],[r.or("unmarks","unmark"),"_A_DUE_DATE",r.swappable([r.optional("as"),"complete"],"_ON_TARGET_CARD?")])]),_FROM_LIST_CONDITION:"_FROM_LISTS",DESTINATION_POSITION:[r.optional("the"),"POSITION_TOP",r.optional("position"),"of"],_DESTINATION_POSITION_CONDITION:"DESTINATION_POSITION",CARD_INTO_LIST:r.or(["_TARGET_CARD","is","_CARD_VERBS","_FROM_LIST_CONDITION=>CONDITION?","_INTO","_DESTINATION_POSITION_CONDITION=>CONDITION?","_LISTS","_BY_WHOM?"],["WHO","_CARD_VERBS","_TARGET_CARD","_INTO","_DESTINATION_POSITION_CONDITION=>CONDITION?","_LIST"]),CARD_OUTOF_LIST:r.or(["_TARGET_CARD","is","MOVED","_OUTOF","_LIST","_BY_WHOM?"],["WHO","MOVED","_TARGET_CARD","_OUTOF","_LIST"]),CARD_MOVED:r.or(["_TARGET_CARD","is","MOVED","_BY_WHOM?"],["WHO","MOVED","_TARGET_CARD"]),DAYS_IN_LIST:r.small_numeral("a number of days, e.g. two days"),MATCH_START:[r.optional(["the",r.or("text","word","words")]),"$TEXT"],_MATCH_START_LIST:["MATCH_START",r.optional([r.optional(","),"or","_MATCH_START_LIST"])],_STARTS_WITH:[r.or("starts","begins"),"with","_MATCH_START_LIST"],_NOT_STARTS_WITH:[r.or("doesn't",["does","not"]),r.or("start","begin"),"with","_MATCH_START_LIST","NEGATIVE_MATCH"],_STARTING_WITH:[r.or("starting","beginning",["that",r.or("starts","begins")]),"with","_MATCH_START_LIST"],_NOT_STARTING_WITH:[r.or(["not",r.or("starting","beginning")],["that",r.or("doesn't",["does","not"]),r.or("start","begin")]),"with","_MATCH_START_LIST","NEGATIVE_MATCH"],MATCH_END:[r.optional(["the",r.or("text","word","words")]),"$TEXT"],_MATCH_END_LIST:["MATCH_END",r.optional([r.optional(","),"or","_MATCH_END_LIST"])],_ENDS_WITH:["ends","with","_MATCH_END_LIST"],_NOT_ENDS_WITH:[r.or("doesn't",["does","not"]),"end","with","_MATCH_END_LIST","NEGATIVE_MATCH"],_ENDING_WITH:[r.or("ending",["that","ends"]),"with","_MATCH_END_LIST"],_NOT_ENDING_WITH:[r.or(["not","ending"],["that",r.or("doesn't",["does","not"]),"end"]),"with","_MATCH_END_LIST","NEGATIVE_MATCH"],MATCH_CONTENT:[r.optional(["the",r.or("text","word","words")]),"$TEXT"],_MATCH_CONTENT_LIST:["MATCH_CONTENT",r.optional([r.optional(","),"or","_MATCH_CONTENT_LIST"])],_CONTAINS:["contains","_MATCH_CONTENT_LIST"],NEGATIVE_MATCH:[],_WITHOUT:["without","NEGATIVE_MATCH"],_NOT_CONTAINS:[r.or("doesn't",["does","not"]),"contain","_MATCH_CONTENT_LIST","NEGATIVE_MATCH"],_CONTAINING:[r.or("containing",["that","contains"]),"_MATCH_CONTENT_LIST"],_NOT_CONTAINING:[r.or(["not","containing"],["that",r.or("doesn't",["does","not"]),"contain"]),"_MATCH_CONTENT_LIST","NEGATIVE_MATCH"],_AFTER_TEXT:["after",r.optional(["the",r.or("text","word","words")]),"$AFTER_TEXT"],_A_DATE_AFTER:["a","date","_AFTER_TEXT?"],DATE_AT_START:[r.or("starts","begins"),"with","_A_DATE_AFTER"],NOT_DATE_AT_START:[r.or("doesn't",["does","not"]),r.or("start","begin"),"with","_A_DATE_AFTER"],_NOT_DATE_AT_START:["NOT_DATE_AT_START=>DATE_AT_START","NEGATIVE_MATCH"],STARTING_WITH_DATE:[r.or("starting","beginning",["that","starts"],["that","begins"]),"with","_A_DATE_AFTER"],_STARTING_WITH_DATE:"STARTING_WITH_DATE=>DATE_AT_START",NOT_STARTING_WITH_DATE:[r.or(["not",r.or("starting","beginning")],["that",r.or("doesn't",["does","not"]),r.or("start","begin")]),"with","_A_DATE_AFTER"],_NOT_STARTING_WITH_DATE:["NOT_STARTING_WITH_DATE=>DATE_AT_START","NEGATIVE_MATCH"],DATE_AT_END:["ends","with","_A_DATE_AFTER"],NOT_DATE_AT_END:[r.or("doesn't",["does","not"]),"end","with","_A_DATE_AFTER"],_NOT_DATE_AT_END:["NOT_DATE_AT_END=>DATE_AT_END","NEGATIVE_MATCH"],ENDING_WITH_DATE:[r.or("ending",["that","ends"]),"with","_A_DATE_AFTER"],_ENDING_WITH_DATE:"ENDING_WITH_DATE=>DATE_AT_END",NOT_ENDING_WITH_DATE:[r.or(["not","ending"],["that",r.or("doesn't",["does","not"]),"end"]),"with","_A_DATE_AFTER"],_NOT_ENDING_WITH_DATE:["NOT_ENDING_WITH_DATE=>DATE_AT_END","NEGATIVE_MATCH"],CONTAINS_DATE:["contains","_A_DATE_AFTER"],NOT_CONTAINS_DATE:[r.or("doesn't",["does","not"]),"contain","_A_DATE_AFTER"],_NOT_CONTAINS_DATE:["NOT_CONTAINS_DATE=>CONTAINS_DATE","NEGATIVE_MATCH"],CONTAINING_DATE:[r.or("containing",["that","contains"]),"_A_DATE_AFTER"],_CONTAINING_DATE:"CONTAINING_DATE=>CONTAINS_DATE",NOT_CONTAINING_DATE:[r.or(["not","containing"],["that",r.or("doesn't",["does","not"]),"contain"]),"_A_DATE_AFTER"],_NOT_CONTAINING_DATE:["NOT_CONTAINING_DATE=>CONTAINS_DATE","NEGATIVE_MATCH"],LONGER_THAN:r.small_numeral(),_TEXT_LENGTH:[r.optional("is"),"longer","than","LONGER_THAN",r.optional("characters")],NAME_FIELD:[r.optional(r.or("a","the")),r.optional("card"),r.or("name","title")],DESCRIPTION_FIELD:[r.optional(r.or("a","the")),r.optional("card"),"description"],_WHAT_FIELD:[r.or(["NAME_FIELD","or","DESCRIPTION_FIELD"],"NAME_FIELD","DESCRIPTION_FIELD")],CARD_MATCHES:[r.or(["_TARGET_CARD",r.optional(r.or("title","name"))],["_WHAT_FIELD","of","_TARGET_CARD"]),r.or("_STARTS_WITH","_NOT_STARTS_WITH","_ENDS_WITH","_NOT_ENDS_WITH","_CONTAINS","_NOT_CONTAINS","DATE_AT_START","_NOT_DATE_AT_START","DATE_AT_END","_NOT_DATE_AT_END","CONTAINS_DATE","_NOT_CONTAINS_DATE","_TEXT_LENGTH")],ENTERED:[],ENTERED_CARD_FIELD_MATCHES:["WHO",r.or("enter","enters","entered"),"_WHAT_FIELD",r.or("_STARTING_WITH","_NOT_STARTING_WITH","_ENDING_WITH","_NOT_ENDING_WITH","_CONTAINING","_NOT_CONTAINING","_STARTING_WITH_DATE","_NOT_STARTING_WITH_DATE","_ENDING_WITH_DATE","_NOT_ENDING_WITH_DATE","_CONTAINING_DATE","_NOT_CONTAINING_DATE"),"ENTERED"],_ENTERED_CARD_FIELD_MATCHES:"ENTERED_CARD_FIELD_MATCHES=>CARD_MATCHES",CARD_CHANGED:r.or(["WHO",r.or("change","changes","changed"),"_WHAT_FIELD",r.or("of","in"),"_TARGET_CARD"],["_WHAT_FIELD","of","_TARGET_CARD",r.or("is","was"),"changed","_BY_WHOM?"],["_WHAT_FIELD","of","_TARGET_CARD","changes"]),CREATED:r.or("create","creates","created"),MOVED:r.or("move","moves","moved","transfer","transfers","transferred","tranferred"),COPIED:r.or("copy","copies","copied"),EMAILED:r.or("email","emails","emailed","e-mail","e-mails","e-mailed"),ADDED:r.or("add","adds","added","put","puts"),_CARD_VERB:r.or("CREATED","MOVED","COPIED","ADDED","EMAILED"),_CARD_VERBS:["_CARD_VERB",r.optional(["_OR?","_CARD_VERB",r.optional(["_OR?","_CARD_VERB"])])],_CARD_VERBS__HELP:["_CARD_VERB"],_LIST:r.or(["_THE?","list","_CALLED?","$LIST"],["_THE?","$LIST",r.optional("list")]),_LISTS:["_LIST",r.optional(["_COMMA","_OR","_LISTS"])],CARD_INTO_BOARD:r.or(["_TARGET_CARD","is","MOVED","_INTO_BOARD","_BY_WHOM?"],["WHO","MOVED","_TARGET_CARD","_INTO_BOARD"],["_TARGET_CARD","is",r.or("CREATED","ADDED"),"_INTO_BOARD?","_BY_WHOM?"],["WHO",r.or("CREATED","ADDED"),"_TARGET_CARD","_INTO_BOARD?"],["_TARGET_CARD","is",r.or("EMAILED"),r.or("in","_INTO_BOARD?"),"_BY_WHOM?"],["WHO",r.or("EMAILED"),"_TARGET_CARD",r.or("in","_INTO_BOARD?")]),CARD_OUTOF_BOARD:r.or(["_TARGET_CARD","is","MOVED","_OUTOF_BOARD","_BY_WHOM?"],["WHO","MOVED","_TARGET_CARD","_OUTOF_BOARD"]),CARD_ARCHIVED:r.or(["_TARGET_CARD","is","archived","_BY_WHOM?"],["WHO",r.or("archive","archives"),"_TARGET_CARD"]),CARD_UNARCHIVED:r.or(["_TARGET_CARD","is","unarchived","_BY_WHOM?"],["WHO",r.or("unarchive","unarchives"),"_TARGET_CARD"]),CARD_DELETED:r.or(["_TARGET_CARD","is","deleted","_BY_WHOM?"],["WHO",r.or("delete","deletes"),"_TARGET_CARD"]),MENTION_IN_DESCRIPTION:["in",r.optional(r.or(["_A",r.or("card's","card")],"_THE")),"description"],MENTION_IN_COMMENT:["in","_A?","comment"],MENTION_IN_CHECKLIST:["in","_A?","checklist",r.optional("item")],MENTIONING_CARD:"_TARGET_CARD",_MENTION_CONTEXT:r.or([r.or("MENTION_IN_DESCRIPTION","MENTION_IN_COMMENT","MENTION_IN_CHECKLIST"),r.optional([r.or("in","of","on"),"MENTIONING_CARD"])],["_IN","MENTIONING_CARD"]),CARD_MENTIONED:r.or(["_TARGET_CARD","is","mentioned","_MENTION_CONTEXT?","_BY_WHOM?"],["WHO",r.or("mention","mentions"),"_TARGET_CARD","_MENTION_CONTEXT?"]),_MEMBER_MENTIONED_VERB:r.or("mention","mentions"),MEMBER_MENTIONED:r.or(["MEMBER",r.optional("is"),"mentioned","_MENTION_CONTEXT?","_BY_WHOM?"],["WHO",r.or("mention","mentions"),"MEMBER","_MENTION_CONTEXT?"]),ALL_CHECKLISTS:["all",r.optional("of"),r.optional(r.or("the",["a","card's"])),"checklists"],_UNNAMED_CHECKLIST:["_THE?","checklist"],CHECKLIST_COMPLETE:r.or([r.or("_CHECKLIST","_UNNAMED_CHECKLIST"),r.optional("is"),r.or([r.optional("made"),"complete"],"completed"),"_IN_TARGET_CARD?","_BY_WHOM?"],["WHO",r.or("complete","completes"),r.or("_CHECKLIST","_UNNAMED_CHECKLIST"),"_IN_TARGET_CARD?"],["ALL_CHECKLISTS","_IN_TARGET_CARD?",r.optional("are"),r.or([r.optional("made"),"complete"],"completed"),"_IN_TARGET_CARD?","_BY_WHOM?"],["WHO",r.or("complete","completes"),"ALL_CHECKLISTS","_IN_TARGET_CARD?"]),CHECKLIST_INCOMPLETE:r.or([r.or("_CHECKLIST","_UNNAMED_CHECKLIST"),r.optional("is"),r.or([r.optional("made"),"incomplete"],"incompleted"),"_IN_TARGET_CARD?","_BY_WHOM?"],["WHO",r.or("incomplete","incompletes"),r.or("_CHECKLIST","_UNNAMED_CHECKLIST"),"_IN_TARGET_CARD?"]),_NAMED_CHECKLIST_ITEM:["_THE?",r.swappable("$ITEM_NAME",[r.optional("checklist"),"item"])],_ITEM_CONDITION:r.or("_STARTING_WITH","_NOT_STARTING_WITH","_ENDING_WITH","_NOT_ENDING_WITH","_CONTAINING","_NOT_CONTAINING","_STARTING_WITH_DATE","_ENDING_WITH_DATE","_CONTAINING_DATE","_NOT_CONTAINING_DATE"),_UNNAMED_CHECKLIST_ITEM:["_A?",r.optional("checklist"),"item","_ITEM_CONDITION?"],_CHECKLIST_ITEM:r.or("_NAMED_CHECKLIST_ITEM","_UNNAMED_CHECKLIST_ITEM"),ITEM_CHECKED:[r.or("check","checks","checked","complete","completes","completed"),r.optional("off")],ITEM_UNCHECKED:r.or("uncheck","unchecks","unchecked","incomplete"),_ITEM_VERB:r.or("ITEM_CHECKED","ITEM_UNCHECKED"),ITEM_ADDED:r.or("add","adds","added"),ITEM_REMOVED:r.or("remove","removes","removed"),ITEM_CONVERTED:r.or("convert","converts","converted"),_IN_CHECKLIST:r.or(["in","_CHECKLIST"],"_IN_A_CHECKLIST"),_TO_CHECKLIST:r.or(["to","_CHECKLIST"],"_TO_A_CHECKLIST"),_FROM_CHECKLIST:r.or(["from","_CHECKLIST"],"_FROM_A_CHECKLIST"),_ITEM_FILTERS_TO:r.or(["_TO_CHECKLIST","_IN_TARGET_CARD?"],"_TO_TARGET_CARD"),_ITEM_FILTERS_FROM:r.or(["_FROM_CHECKLIST","_IN_TARGET_CARD?"],"_FROM_TARGET_CARD"),CHECKLIST_ITEM:r.or(["_CHECKLIST_ITEM",r.optional("is"),"_ITEM_VERB","_IN_CHECKLIST?","_IN_TARGET_CARD?","_BY_WHOM?"],["WHO","_ITEM_VERB","_CHECKLIST_ITEM","_IN_CHECKLIST?","_IN_TARGET_CARD?"],["_CHECKLIST_ITEM","is","ITEM_ADDED","_ITEM_FILTERS_TO?","_BY_WHOM?"],["WHO","ITEM_ADDED","_CHECKLIST_ITEM","_ITEM_FILTERS_TO?"],["_CHECKLIST_ITEM","is","ITEM_REMOVED","_ITEM_FILTERS_FROM?","_BY_WHOM?"],["WHO","ITEM_REMOVED","_CHECKLIST_ITEM","_ITEM_FILTERS_FROM?"],["_CHECKLIST_ITEM","_IN_CHECKLIST?","_IN_TARGET_CARD?","is","ITEM_CONVERTED",r.optional(["_INTO","a","card"]),"_BY_WHOM?"],["WHO","ITEM_CONVERTED","_CHECKLIST_ITEM","_IN_CHECKLIST?","_IN_TARGET_CARD?",r.optional(["_INTO","a","card"])]),CHECKLIST_ITEM_MATCHES:[r.or(["_A","checklist","item","_IN_CHECKLIST?"],["an","item","_IN_CHECKLIST"]),"_IN_TARGET_CARD?",r.or("_STARTS_WITH","_NOT_STARTS_WITH","_ENDS_WITH","_NOT_ENDS_WITH","_CONTAINS","_NOT_CONTAINS","DATE_AT_START","_NOT_DATE_AT_START","DATE_AT_END","_NOT_DATE_AT_END","CONTAINS_DATE","_NOT_CONTAINS_DATE")],_A_LIST:["_A?","list"],LIST_CREATED:r.or(["_A_LIST","is","CREATED","_BY_WHOM?"],["WHO","CREATED","_A_LIST"]),LIST_RENAMED:r.or(["_A_LIST","is","renamed","_BY_WHOM?"],["WHO","renamed","_A_LIST"]),LIST_ARCHIVED:r.or(["_A_LIST","is","archived","_BY_WHOM?"],["WHO",r.or("archive","archives"),"_A_LIST"]),LIST_UNARCHIVED:r.or(["_A_LIST","is","unarchived","_BY_WHOM?"],["WHO",r.or("unarchive","unarchives"),"_A_LIST"]),LIST_CARD_COUNT_MATCHES:["_LIST_NAME","has","_NUMBER_CONDITIONS","cards"],MEMBER_ADDED_TO_BOARD:r.or(["MEMBER","is","added","to","the","board","_BY_WHOM?"],["WHO",r.or("add","adds"),"MEMBER","to","the","board"]),_CUSTOM_FIELD:r.or(["custom","field","$FIELD_NAME"],[r.or("a","any"),"custom","field"]),_CUSTOM_FIELD_LIST:["$FIELD_NAME",r.optional(["_AND","_CUSTOM_FIELD_LIST"])],_SET_TO_VALUE:["to","$VALUE"],DATE_LESS_THAN_DAYS:r.small_numeral("a number of days, e.g. two days"),DATE_MORE_THAN_DAYS:r.small_numeral("a number of days, e.g. two days"),DATE_FROM_NOW:["from","now"],DATE_AGO:["ago"],HOURS_NOT_DAYS:r.or("hour","hours"),_DATE_OFFSET:[r.or(["WORKING_DAYS?",r.or("day","days")],"HOURS_NOT_DAYS"),r.or("DATE_FROM_NOW","DATE_AGO")],_DATE_LESS:[r.optional("in"),"less","than","DATE_LESS_THAN_DAYS","_DATE_OFFSET"],_DATE_MORE:[r.optional("in"),"more","than","DATE_MORE_THAN_DAYS","_DATE_OFFSET"],DATE_BETWEEN:[r.optional("between"),"MIN_DAYS",r.or("to","and"),"MAX_DAYS"],_DATE_BETWEEN:["DATE_BETWEEN","_DATE_OFFSET"],NOT:"not",DATE_THIS_WEEK:["NOT?","in","this","week"],DATE_NEXT_WEEK:["NOT?","in","next","week"],DATE_THIS_MONTH:["NOT?","in","this","month"],DATE_NEXT_MONTH:["NOT?","in","next","month"],DATE_CONDITION:r.or("_DATE_LESS","_DATE_MORE","_DATE_BETWEEN","DATE_THIS_WEEK","DATE_NEXT_WEEK","DATE_THIS_MONTH","DATE_NEXT_MONTH"),_SET_TO_DATE:["to","a","date","DATE_CONDITION?"],NUMBER_THAN:r.decimal(),NUMBER_EQ:r.or(["equal","to"],"exactly"),NUMBER_GREATER_EQ:[r.or("more","greater"),r.optional("than"),"or",r.or(["equal","to"],"exactly")],NUMBER_GREATER:[r.or("more","greater"),"than"],NUMBER_LOWER_EQ:[r.or("lower","fewer"),r.optional("than"),"or",r.or(["equal","to"],"exactly")],NUMBER_LOWER:[r.or("lower","fewer"),"than"],NUMBER_CONDITION:[r.or("NUMBER_EQ","NUMBER_GREATER_EQ","NUMBER_GREATER","NUMBER_LOWER_EQ","NUMBER_LOWER"),"NUMBER_THAN"],_NUMBER_CONDITIONS:["NUMBER_CONDITION",r.optional(["and","NUMBER_CONDITION"])],_SET_TO_NUMBER:["to","a","number","_NUMBER_CONDITIONS"],FIELD_CHECKED:[],_FIELD_CHECKED:["checked",r.optional("off"),"FIELD_CHECKED"],_CHECKS_FIELD:[r.or("check","checks"),r.optional("off"),"FIELD_CHECKED"],FIELD_UNCHECKED:[],_FIELD_UNCHECKED:["unchecked",r.optional("off"),"FIELD_UNCHECKED"],_UNCHECKS_FIELD:[r.or("uncheck","unchecks"),"FIELD_UNCHECKED"],FIELD_CLEARED:[],_FIELD_CLEARED:["cleared","FIELD_CLEARED"],_CLEARS_FIELD:[r.or("clear","clears"),"FIELD_CLEARED"],CUSTOM_FIELD_SET:r.or(["_CUSTOM_FIELD","is",r.or(["set",r.optional(r.or("_SET_TO_VALUE","_SET_TO_DATE","_SET_TO_NUMBER"))],"_FIELD_CHECKED","_FIELD_UNCHECKED","_FIELD_CLEARED"),"_IN_TARGET_CARD?","_BY_WHOM?"],["WHO",r.or([r.or("set","sets"),"_CUSTOM_FIELD",r.optional(r.or("_SET_TO_VALUE","_SET_TO_DATE","_SET_TO_NUMBER"))],[r.or("_CHECKS_FIELD","_UNCHECKS_FIELD"),"_CUSTOM_FIELD"],["_CLEARS_FIELD","_CUSTOM_FIELD"]),"_IN_TARGET_CARD?"]),CUSTOM_FIELD_VALUE_CONDITION:[r.or("with","_WITHOUT"),"_CUSTOM_FIELD",r.or(["set",r.optional(r.or("_SET_TO_VALUE","_SET_TO_DATE","_SET_TO_NUMBER"))],"_FIELD_CHECKED","_FIELD_UNCHECKED","_FIELD_CLEARED")],CUSTOM_FIELDS_COMPLETE:[r.or(["all",r.optional("the"),"custom","fields"],["custom","fields","_CUSTOM_FIELD_LIST"]),"are",r.or("full","filled","complete","completed"),"_IN_TARGET_CARD?"],CUSTOM_FIELDS_COMPLETE_CONDITION:[r.or("with","_WITHOUT"),r.or(["all",r.optional("the"),"custom","fields"],["custom","fields","_CUSTOM_FIELD_LIST"]),r.or("full","filled","complete","completed")],WHEN:[r.or("when","if"),r.or("MEMBER_ADDED_TO_BOARD","ATTACHMENT_ADDED","ATTACHMENT_REMOVED","LINK_ADDED","LABEL_ADDED","LABEL_REMOVED","MEMBER_ADDED","MEMBER_REMOVED","CHECKLIST_ADDED","CHECKLIST_REMOVED","COMMENT_ADDED","VOTE_ON_CARD","START_DATE_ADDED","START_DATE_REMOVED","DUE_DATE_ADDED","DUE_DATE_REMOVED","DUE_DATE_COMPLETED","DUE_DATE_INCOMPLETED","CARD_INTO_LIST","CARD_OUTOF_LIST","CARD_INTO_BOARD","CARD_OUTOF_BOARD","CARD_MOVED","CARD_ARCHIVED","CARD_UNARCHIVED","CARD_DELETED","CARD_MATCHES","_ENTERED_CARD_FIELD_MATCHES","CARD_CHANGED","CARD_MENTIONED","MEMBER_MENTIONED","CHECKLIST_COMPLETE","CHECKLIST_INCOMPLETE","CHECKLIST_ITEM","CHECKLIST_ITEM_MATCHES","LIST_CREATED","LIST_RENAMED","LIST_ARCHIVED","LIST_UNARCHIVED","LIST_CARD_COUNT_MATCHES",r.hidden("CUSTOM_FIELD_SET"),r.hidden("CUSTOM_FIELDS_COMPLETE"))],IN_LIST:[r.or("in","from"),"_LIST"],_IN_LISTS_OR:["_LIST",r.optional(["or",r.optional(r.or("in","from")),"_IN_LISTS_OR"])],_FROM_LISTS_OR:["_LIST",r.optional(["or",r.optional("from"),"_IN_LISTS_OR"])],IN_LISTS:[r.or("in","from"),"_IN_LISTS_OR"],FROM_LISTS:["from","_FROM_LISTS_OR=>IN_LISTS"],_FROM_LISTS:"FROM_LISTS=>IN_LISTS",NOT_IN_LIST:["not","in","_LIST"],NOT_IN_LISTS:["not","in","_IN_LISTS_OR"],WITH_LABEL:[r.or("with","having",["that",r.or("has","have")]),"LABEL"],WITHOUT_LABEL:[r.or("without",["not","having"],["that",r.or("doesn't",["does","not"]),"have"]),"LABEL"],WITH_ANY_LABEL:[r.or("with","having",["that",r.or("has","have")]),r.or([r.optional(r.or("a","any")),"label"],[r.optional("any"),"labels"])],WITH_NO_LABELS:[r.or(["without",r.optional("any")],[r.or("with","having",["that",r.or("has","have")]),"no"]),r.or("label","labels")],ONLY_MEMBER:"only",ASSIGNED_TO:[r.or("with",["assigned","ONLY_MEMBER?","_TO"]),"MEMBER"],NOT_ASSIGNED_TO:[r.or("without",["not","assigned","_TO"]),"MEMBER"],WITH_DUE_COMPLETE:[r.optional("a"),r.or("complete","completed")],WITHOUT_DUE_COMPLETE:[r.optional("an"),r.or("incomplete","incompleted")],WITH_DUE_DATE:["with",r.optional(r.or("WITH_DUE_COMPLETE","WITHOUT_DUE_COMPLETE","a")),"due","date"],WITH_START_DATE:["with",r.optional(r.or("a")),"start","date"],WITHOUT_DUE_DATE:["without",r.optional(r.or("WITH_DUE_COMPLETE","WITHOUT_DUE_COMPLETE","a")),"due","date"],WITHOUT_START_DATE:["without","_A_START_DATE"],WITH_OVERDUE_DATE:r.or([r.optional(r.or("that's",["that","is"])),"overdue"],["with",r.optional("an"),"overdue",r.optional("due"),"date"]),WITHOUT_OVERDUE_DATE:r.or([r.optional(r.or("that's",["that","is"])),"not","overdue"],["without",r.optional("an"),"overdue",r.optional("due"),"date"]),EXACT_NAME_CONDITION:"$TEXT",_EXACT_NAME_CONDITION_LIST:["EXACT_NAME_CONDITION",r.optional([r.optional(","),"or","_EXACT_NAME_CONDITION_LIST"])],_EXACT_NAME_CONDITION:[r.optional(r.or("called","named","titled")),"_EXACT_NAME_CONDITION_LIST"],CARD_MATCHES_CONDITION:[r.optional(["with","_WHAT_FIELD"]),r.or("_STARTING_WITH","_NOT_STARTING_WITH","_ENDING_WITH","_NOT_ENDING_WITH","_CONTAINING","_NOT_CONTAINING","_STARTING_WITH_DATE","_NOT_STARTING_WITH_DATE","_ENDING_WITH_DATE","_NOT_ENDING_WITH_DATE","_CONTAINING_DATE","_NOT_CONTAINING_DATE")],EMPTY_DESCRIPTION:"with",NON_EMPTY_DESCRIPTION:"without",EMPTY_DESCRIPTION_CONDITION:[r.or("EMPTY_DESCRIPTION","NON_EMPTY_DESCRIPTION"),"an","empty","description"],INACTIVE_DAYS:r.small_numeral("a number of days",!1,1),INACTIVITY_CONDITION:["inactive",r.optional("for"),r.optional(["more","than"]),"INACTIVE_DAYS","WORKING_DAYS?",r.or("day","days")],DUE_DATE_CONDITION:["NOT?",r.or("_DUE_IN_LESS","_DUE_IN_MORE","_DUE_IN_EXACTLY","DUE_IN_BETWEEN","DUE_TODAY","DUE_TOMORROW","DUE_THIS_WEEK","DUE_NEXT_WEEK","DUE_THIS_MONTH","DUE_NEXT_MONTH")],START_DATE_CONDITION:["NOT?",r.or("_STARTING_IN_LESS","_STARTING_IN_MORE","_STARTING_IN_EXACTLY","STARTING_IN_BETWEEN","STARTING_TODAY","STARTING_TOMORROW","STARTING_THIS_WEEK","STARTING_NEXT_WEEK","STARTING_THIS_MONTH","STARTING_NEXT_MONTH")],COMPLETE:"complete",INCOMPLETE:"incomplete",WITH_ALL_CHECKLISTS:["with","all","checklists",r.optional(r.or("COMPLETE","INCOMPLETE"))],WITH_CHECKLIST:[r.optional("with"),"_A?",r.swappable(r.or("_CHECKLIST","checklist"),r.optional(r.or("COMPLETE","INCOMPLETE")))],WITHOUT_CHECKLIST:["without",r.or("_CHECKLIST","checklists")],CONDITION:r.or("IN_LISTS","NOT_IN_LISTS","WITH_LABEL","WITHOUT_LABEL","WITH_ANY_LABEL","WITH_NO_LABELS","ASSIGNED_TO","NOT_ASSIGNED_TO","WITH_DUE_DATE","WITH_START_DATE","WITHOUT_DUE_DATE","WITHOUT_START_DATE","WITH_OVERDUE_DATE","WITHOUT_OVERDUE_DATE","DUE_DATE_CONDITION","START_DATE_CONDITION","_EXACT_NAME_CONDITION","EMPTY_DESCRIPTION_CONDITION","CARD_MATCHES_CONDITION","INACTIVITY_CONDITION","WITH_ALL_CHECKLISTS","WITH_CHECKLIST","WITHOUT_CHECKLIST","CUSTOM_FIELD_VALUE_CONDITION","CUSTOM_FIELDS_COMPLETE_CONDITION"),_CONDITION:["CONDITION",r.optional([r.optional("and"),"_CONDITION"])],CONDITION_LIST:"_CONDITION",_TARGET_CARD:["_A?","card","_CONDITION?"],_IN_TARGET_CARD:["in","_TARGET_CARD"],_ON_TARGET_CARD:[r.or("on","in"),"_TARGET_CARD"],_TO_TARGET_CARD:["_TO","_TARGET_CARD"],_INTO_TARGET_CARD:["_INTO","_TARGET_CARD"],_FROM_TARGET_CARD:["_FROM","_TARGET_CARD"],THE_DAY_BEFORE:[r.or([r.optional("on"),"the"],"a")],THE_DAY_AFTER:[r.or([r.optional("on"),"the"],"a")],DAYS_BEFORE:r.small_numeral("a number of days, e.g. two days"),DAYS_AFTER:r.small_numeral("a number of days, e.g. two days"),WORKING_DAYS:["working"],_BEFORE_DATE:[r.or("THE_DAY_BEFORE","DAYS_BEFORE"),"WORKING_DAYS?",r.or("day","days"),"before"],_AFTER_DATE:[r.or("THE_DAY_AFTER","DAYS_AFTER"),"WORKING_DAYS?",r.or("day","days"),"after"],HOURS_BEFORE:r.small_numeral("a number of hours, e.g. two hours"),HOURS_AFTER:r.small_numeral("a number of hours, e.g. two hours"),_BEFORE_DATE_TIME:["HOURS_BEFORE",r.or("hour","hours"),"before"],_AFTER_DATE_TIME:["HOURS_AFTER",r.or("hour","hours"),"after"],NAMED_DAY_BEFORE:["on","the","DAY","before"],NAMED_DAY_AFTER:["on","the","DAY","after"],WEEK_BEFORE:["week","before"],NAMED_WEEKDAY:["on","the","DAY","of","the",r.or("WEEK_BEFORE","week")],USE_START_TIME:[],STARTING_TODAY:["starting","today"],STARTING_TOMORROW:["starting","tomorrow"],STARTING_THIS_WEEK:["starting","this","week"],STARTING_NEXT_WEEK:["starting","next","week"],STARTING_THIS_MONTH:["starting","this","month"],STARTING_NEXT_MONTH:["starting","next","month"],STARTING_IN_LESS_THAN_DAYS:r.small_numeral("a number of days, e.g. two days"),STARTING_IN_MORE_THAN_DAYS:r.small_numeral("a number of days, e.g. two days"),STARTING_IN_EXACTLY_DAYS:r.small_numeral("a number of days, e.g. two days"),_STARTING_IN_LESS:["starting","in","less","than","STARTING_IN_LESS_THAN_DAYS","WORKING_DAYS?",r.or("day","days")],_STARTING_IN_MORE:["starting","in","more","than","STARTING_IN_MORE_THAN_DAYS","WORKING_DAYS?",r.or("day","days")],_STARTING_IN_EXACTLY:["starting","in","STARTING_IN_EXACTLY_DAYS","WORKING_DAYS?",r.or("day","days")],STARTING_IN_BETWEEN:["starting","in",r.optional("between"),"MIN_DAYS",r.or("to","and"),"MAX_DAYS","WORKING_DAYS?","days"],_STARTING_TARGET_CARD:[r.or("OPEN_CARD","ARCHIVED_CARD","_A?"),"card","_CONDITION?"],ON_START_DATE:r.or([r.or("_BEFORE_DATE","_AFTER_DATE","on"),r.optional(["_A","card's"]),"start","date","TIME?"],[r.or("NAMED_DAY_BEFORE","NAMED_DAY_AFTER"),r.optional(["_A","card's"]),"start","date","TIME?"],[r.or("NAMED_DAY_BEFORE","NAMED_DAY_AFTER","NAMED_WEEKDAY"),"_STARTING_TARGET_CARD","is","due","TIME?"],[r.or("_BEFORE_DATE_TIME","_AFTER_DATE_TIME","at"),r.optional(["_A","card's"]),"start","time","USE_START_TIME"],[r.or("_BEFORE_DATE_TIME","_AFTER_DATE_TIME",[r.optional("at"),"the",r.or("time","moment")]),"_STARTING_TARGET_CARD","is","due","USE_START_TIME"],["when","_STARTING_TARGET_CARD","is",r.or(["USE_START_TIME"],"_STARTING_IN_LESS","_STARTING_IN_MORE","_STARTING_IN_EXACTLY","STARTING_IN_BETWEEN","STARTING_TODAY","STARTING_TOMORROW")]),USE_DUE_TIME:[],OVERDUE:"overdue",DUE_TODAY:["due","today"],DUE_TOMORROW:["due","tomorrow"],DUE_THIS_WEEK:["due","this","week"],DUE_NEXT_WEEK:["due","next","week"],DUE_THIS_MONTH:["due","this","month"],DUE_NEXT_MONTH:["due","next","month"],DUE_IN_LESS_THAN_DAYS:r.small_numeral("a number of days, e.g. two days"),DUE_IN_MORE_THAN_DAYS:r.small_numeral("a number of days, e.g. two days"),DUE_IN_EXACTLY_DAYS:r.small_numeral("a number of days, e.g. two days"),_DUE_IN_LESS:["due","in","less","than","DUE_IN_LESS_THAN_DAYS","WORKING_DAYS?",r.or("day","days")],_DUE_IN_MORE:["due","in","more","than","DUE_IN_MORE_THAN_DAYS","WORKING_DAYS?",r.or("day","days")],_DUE_IN_EXACTLY:["due","in","DUE_IN_EXACTLY_DAYS","WORKING_DAYS?",r.or("day","days")],MIN_DAYS:r.small_numeral("a number of days, e.g. two days"),MAX_DAYS:r.small_numeral("a number of days, e.g. two days"),DUE_IN_BETWEEN:["due","in",r.optional("between"),"MIN_DAYS",r.or("to","and"),"MAX_DAYS","WORKING_DAYS?","days"],OPEN_CARD:["an","open"],ARCHIVED_CARD:["an","archived"],_DUE_TARGET_CARD:[r.or("OPEN_CARD","ARCHIVED_CARD","_A?"),"card","_CONDITION?"],ON_DUE_DATE:r.or([r.or("_BEFORE_DATE","_AFTER_DATE","on"),r.optional(["_A","card's"]),"due","date","TIME?"],[r.or("_BEFORE_DATE","_AFTER_DATE",[r.optional("on"),"the","day"]),"_DUE_TARGET_CARD","is","due","TIME?"],[r.or("NAMED_DAY_BEFORE","NAMED_DAY_AFTER"),r.optional(["_A","card's"]),"due","date","TIME?"],[r.or("NAMED_DAY_BEFORE","NAMED_DAY_AFTER","NAMED_WEEKDAY"),"_DUE_TARGET_CARD","is","due","TIME?"],[r.or("_BEFORE_DATE_TIME","_AFTER_DATE_TIME","at"),r.optional(["_A","card's"]),"due","time","USE_DUE_TIME"],[r.or("_BEFORE_DATE_TIME","_AFTER_DATE_TIME",[r.optional("at"),"the",r.or("time","moment")]),"_DUE_TARGET_CARD","is","due","USE_DUE_TIME"],["when","_DUE_TARGET_CARD","is",r.or(["OVERDUE","USE_DUE_TIME"],"_DUE_IN_LESS","_DUE_IN_MORE","_DUE_IN_EXACTLY","DUE_IN_BETWEEN","DUE_TODAY","DUE_TOMORROW")]),POSITION_TOP:"top",POSITION_BOTTOM:"bottom",_POSITION:[r.optional(r.or("at","to","in")),r.optional("the"),r.or("POSITION_TOP","POSITION_BOTTOM"),r.optional("position")],POSITION_NUMBER:r.small_numeral("a number for the position"),_POSITION_NUMBER:r.or("_POSITION",[r.or("in","at"),"position","POSITION_NUMBER"]),_TO_POSITION:r.or("_POSITION",["to","position","POSITION_NUMBER"]),_LIST_NAME:r.or(["_THE?","list","_CALLED?","$LIST"],["_THE?","$LIST",r.optional("list")]),_BOARD_NAME:r.or(["_THE?","board","_CALLED?","$BOARD"],["_THE?","$BOARD","board"]),_IN_BOARD_NAME:[r.optional(r.or("in","on")),"_BOARD_NAME"],_FROM_BOARD_NAME:["from","_BOARD_NAME"],_DESTINATION_BOARD_NAME:r.or(["_THE?","board","_CALLED?","$DESTINATION_BOARD"],["_THE?","$DESTINATION_BOARD","board"]),SOURCE:[r.or("in","from"),"_LIST"],SOURCE_WITH_BOARD:[r.or("in","from"),"_LIST","_IN_BOARD_NAME?"],_SOURCE_WITH_BOARD:"SOURCE_WITH_BOARD=>SOURCE",DESTINATION:["_INTO",r.or(["_LIST_NAME",r.optional(["_COMMA","_IN_BOARD_NAME"])],["_POSITION","of","_LIST_NAME","_IN_BOARD_NAME?"],["_POSITION",r.optional(["of","the","list"])],"_THE_LIST")],THE_NEXT_LIST:[r.optional("the"),"next","list"],THE_PREVIOUS_LIST:[r.optional("the"),"previous","list"],RELATIVE_DESTINATION:["_TO",r.optional(["_POSITION","of"]),r.or("THE_NEXT_LIST","THE_PREVIOUS_LIST"),"_ON_THE_BOARD?"],_RELATIVE_DESTINATION:"RELATIVE_DESTINATION=>DESTINATION",SAME_NAME:["with","the","same",r.or("name","title")],SAME_DESCRIPTION:["and",r.optional("with"),r.optional("the"),r.optional("same"),"description"],_CARD_PARAMETERS:r.or(["_CALLED?","$TITLE",r.optional(["_AND?","_THE?","description","$DESCRIPTION"])],["SAME_NAME","SAME_DESCRIPTION?"]),_CARD_PARAMETERS__HELP:["_CALLED?","$TITLE",r.optional(["_AND","description","$DESCRIPTION"])],FIND_OR_CREATE_CARD:["find","or","create"],CREATE_UNIQUE_CARD:"unique",CREATE_CARD_ACTION:[r.or("FIND_OR_CREATE_CARD","create","add"),"_A?",r.optional(r.or("new","CREATE_UNIQUE_CARD")),"card",r.or(["DESTINATION","_COMMA","_CARD_PARAMETERS"],["_CARD_PARAMETERS",r.optional("DESTINATION")])],CREATE_CARD_ACTION__HELP:[r.or("create","add"),"_A","card","DESTINATION","_COMMA","_CARD_PARAMETERS"],WITHOUT_COMMENTS:["without","comments"],COPY_CARD_ACTION:["copy","_THE_CARD",r.swappable("DESTINATION","WITHOUT_COMMENTS?"),"CAN_SWITCH_TO_COPY"],CAN_SWITCH_TO_COPY:[],SWITCH_TO_COPY_ACTION:["on","the","copy",r.trap("!CAN_SWITCH_TO_COPY","`on the copy` can only be used after copying a card")],SWITCH_TO_TRIGGER_CARD_ACTION:[r.or("on","in"),"the","trigger","card"],MOVE_CARD_ACTION:["move","_THE_CARD",r.or("_RELATIVE_DESTINATION","DESTINATION")],MOVE_ALL_CARDS_ACTION:["move","_ALL_THE_CARDS_NEW",r.or(["_SOURCE_WITH_BOARD","WITH_LABEL?"],["WITH_LABEL","_SOURCE_WITH_BOARD?"],"TIME_IN_LIST_CONDITION"),"DESTINATION"],COPY_ALL_CARDS_ACTION:["copy","_ALL_THE_CARDS_NEW","_SOURCE_WITH_BOARD","DESTINATION"],MOVE_EACH_CARD:["DESTINATION"],_MOVE_EACH_CARD_ACTION:["move","_FOR_EACH_CARD_IMPLICIT",r.make_sibling(),"MOVE_EACH_CARD=>MOVE_CARD_ACTION"],COPY_EACH_CARD:["DESTINATION","CAN_SWITCH_TO_COPY"],_COPY_EACH_CARD_ACTION:["copy","_FOR_EACH_CARD_IMPLICIT",r.make_sibling(),"COPY_EACH_CARD=>COPY_CARD_ACTION"],RANDOM_CARD_COUNT:r.small_numeral("a number of random cards, e.g. two random cards"),RANDOM_COPY:["copy","CAN_SWITCH_TO_COPY"],RANDOM_MOVE:"move",RANDOM_CARDS_ACTION:[r.or("RANDOM_COPY","RANDOM_MOVE"),"RANDOM_CARD_COUNT",r.or([r.or("random",["randomly","selected"],"randomly-selected"),r.or("card","cards")],[r.or("card","cards"),"at","random"]),"SOURCE?","DESTINATION"],ALL_CARDS_IN_LIST:["_ALL_THE_CARDS",r.optional(["_IN","_LIST"])],ALL_CARDS_IN_NAMED_LIST:["_ALL_THE_CARDS","_IN","_LIST"],ALL_ARCHIVED_CARDS:["all","archived","cards"],THE_LABEL:["the","label"],ADD_LABEL_ACTION:r.or([r.or("apply","add","set"),r.or("LABEL","THE_LABEL"),r.optional(r.or("_TO_THE_CARD",["_TO","ALL_CARDS_IN_NAMED_LIST=>ALL_CARDS_IN_LIST"]))],["give","it","LABEL"],["give","LABEL","to","it"]),ADD_LABEL_ACTION__HELP:["add","LABEL",r.or("_TO_THE_CARD",["_TO","ALL_CARDS_IN_NAMED_LIST"])],STICKER_TYPE:r.or_index("check",r.or("heart","love"),"warning","clock","smile","laugh","huh","frown",r.or(["thumbs","up"],"thumbsup"),r.or(["thumbs","down"],"thumbsdown"),"star","rocket"),STICKER_LOCATION_LEFT:[r.or("to","at"),r.optional("the"),"left"],STICKER_LOCATION_RIGHT:[r.or("to","at"),r.optional("the"),"right"],STICKER_LOCATION_CENTER:[r.or("to","at","in"),r.optional("the"),"center"],STICKER_LOCATION_RANDOM:[r.or("at","in"),r.optional("a"),"random",r.or("position","location")],_STICKER_LOCATION:r.or("STICKER_LOCATION_LEFT","STICKER_LOCATION_RIGHT","STICKER_LOCATION_CENTER","STICKER_LOCATION_RANDOM"),_STICKER:["_THE?","STICKER_TYPE","sticker"],ADD_STICKER_ACTION:[r.or("apply","add"),"_STICKER",r.optional(r.or(["_STICKER_LOCATION",r.optional([r.or("of","in"),r.or("_THE_CARD","ALL_CARDS_IN_LIST")])],["_TO_THE_CARD"],["_TO","ALL_CARDS_IN_LIST"]))],DUE_DATE:"_DATE_TIME",START_DATE:"_DATE_TIME",THE_DATE:["the","date"],NO_PARSE_RESET:["or",r.or("clear","reset"),"the","date"],_PARSED_DATE:["$TEXT","TIME?","NO_PARSE_RESET?"],PLUS:"plus",MINUS:"minus",DATE_ADJUST:[r.or("PLUS","MINUS"),r.or([r.or("X_DAYS","{X_DAYS}"),r.or("day","days")],[r.or("X_WORKING_DAYS","{X_WORKING_DAYS}"),"working",r.or("day","days")],[r.or("X_WEEKS","{X_WEEKS}"),r.or("week","weeks")],[r.or("X_MONTHS","{X_MONTHS}"),r.or("month","months")])],DATE_IN_CUSTOM_FIELD:["the","date","in","custom","field","$FIELD_NAME","DATE_ADJUST?"],ADD_DUE_DATE_ACTION:[r.or("apply","add","assign","set",["give","_THE_CARD?"],"schedule"),r.optional(r.or("_A","_THE_CARD_S","it")),"due",r.optional("date"),r.optional(r.or("of","on","at","for","to")),r.or("DATE_IN_CUSTOM_FIELD","DUE_DATE","THE_DATE","_PARSED_DATE"),"_TO_THE_CARD?"],ADD_DUE_DATE_ACTION__HELP:["add","a","due","date","of","DUE_DATE","_TO_THE_CARD"],ADD_START_DATE_ACTION:[r.or("apply","add","assign","set",["give","_THE_CARD?"],"schedule"),r.optional(r.or("_A","_THE_CARD_S","it")),"start",r.optional("date"),r.optional(r.or("of","on","at","for","to")),r.or("DATE_IN_CUSTOM_FIELD","START_DATE","THE_DATE","_PARSED_DATE"),"_TO_THE_CARD?"],ADD_START_DATE_ACTION__HELP:["add","_A_START_DATE","of","START_DATE","_TO_THE_CARD"],MARK_DUE_COMPLETE_ACTION:[r.or("mark","check"),r.optional("the"),"due","date",r.optional("as"),r.or("complete","completed")],UNMARK_DUE_COMPLETE_ACTION:r.or([r.or("unmark","uncheck"),r.optional("the"),"due","date",r.optional("as"),r.or("complete","completed")],[r.or("mark","check"),r.optional("the"),"due","date",r.optional("as"),r.or("incomplete","incompleted")]),TO_PREVIOUS_DAY:["to","the","previous","day"],TO_PREVIOUS_WORKING_DAY:["to","the","previous","working","day"],TO_NEXT_DAY:["to","the","next","day"],TO_NEXT_WORKING_DAY:["to","the","next","working","day"],TO_SAME_DAY_NEXT_WEEK:["next","week"],TO_SAME_DAY_NEXT_MONTH:["next","month"],TO_SAME_DAY_NEXT_YEAR:["next","year"],_TO_SAME_DAY:["to","the","same","day",r.or("TO_SAME_DAY_NEXT_WEEK","TO_SAME_DAY_NEXT_MONTH","TO_SAME_DAY_NEXT_YEAR")],TO_TIME:["to",r.time()],TO_DATE:["to","_DATE"],BY_DATE:["by","_DATE"],BY_SAME_TIME_AMOUNT:["by","the","same","amount","of","time",r.trap(["!DUE_DATE_ADDED","!START_DATE_ADDED"],"`by the same amount of time` can only be used with a suitable trigger such as `when a due date is added to a card`")],ADJUST_START_DATE_ACTION:["move",r.or("the","_THE_CARD_S","its"),"start",r.optional("date"),r.or("TO_PREVIOUS_DAY","TO_PREVIOUS_WORKING_DAY","TO_NEXT_DAY","TO_NEXT_WORKING_DAY","_TO_SAME_DAY","TO_TIME","TO_DATE","BY_DATE","BY_SAME_TIME_AMOUNT")],ADJUST_DUE_DATE_ACTION:["move",r.or("the","_THE_CARD_S","its"),"due",r.optional("date"),r.or("TO_PREVIOUS_DAY","TO_PREVIOUS_WORKING_DAY","TO_NEXT_DAY","TO_NEXT_WORKING_DAY","_TO_SAME_DAY","TO_TIME","TO_DATE","BY_DATE","BY_SAME_TIME_AMOUNT")],_CHECKLIST:r.or(["_THE?",r.swappable("$CHECKLIST_NAME","checklist")],["_A","checklist",r.or("called","named","titled"),"$CHECKLIST_NAME"]),_CHECKLIST__HELP:["checklist","$CHECKLIST_NAME"],NEW_CHECKLIST:[r.or("new","empty"),"checklist"],_NEW_CHECKLIST:["_A?","NEW_CHECKLIST",r.optional(r.or("called","named","titled")),"$CHECKLIST_NAME"],_RENAME_CHECKLIST:[r.or(["with","name"],["renamed","to"],"as"),"$NEW_CHECKLIST_NAME"],THE_CHECKLIST:["the","checklist"],_FROM_CARD:["from","card","$FROM_CARD"],ADD_CHECKLIST_ACTION:r.or(["add","_CHECKLIST","_FROM_CARD?",r.or(r.swappable("_TO_THE_CARD","_RENAME_CHECKLIST?"),"_RENAME_CHECKLIST?")],["add",r.or("_NEW_CHECKLIST","THE_CHECKLIST"),"_TO_THE_CARD?"]),MOVE_CHECKLIST_ACTION:["move",r.or("_CHECKLIST","_UNNAMED_CHECKLIST"),"to",r.optional("the"),r.or("POSITION_TOP","POSITION_BOTTOM"),r.optional("position")],UNIQUE_ITEM:["_A?","unique"],ADD_CHECKLIST_ITEM_ACTION:["add","UNIQUE_ITEM?",r.optional("checklist"),"item","$CHECKLIST_ITEM_NAME",r.or(["_TO","_CHECKLIST"],r.optional(["_TO","the","checklist"])),"_IN_THE_CARD?"],_TARGET_CHECKLIST_ITEM:[r.optional("the"),r.swappable([r.optional("checklist"),"item"],"$CHECKLIST_ITEM_NAME?"),r.optional([r.or("in","from"),r.or("_CHECKLIST","_UNNAMED_CHECKLIST")])],RENAME_CHECKLIST_ITEM_ACTION:["rename","_TARGET_CHECKLIST_ITEM",r.optional(r.or("to","as")),"$CHECKLIST_ITEM_NEW_NAME"],REMOVE_CHECKLIST_ITEM_ACTION:["remove","_TARGET_CHECKLIST_ITEM"],MOVE_CHECKLIST_ITEM_ACTION:["move","_TARGET_CHECKLIST_ITEM","to",r.optional("the"),r.or("POSITION_TOP","POSITION_BOTTOM"),r.optional("position"),r.optional(["of","the",r.or("checklist","list")])],CHECK_ITEM_ACTION:[r.or(["check",r.optional("off")],"complete"),"_TARGET_CHECKLIST_ITEM"],UNCHECK_ITEM_ACTION:[r.or("uncheck","uncomplete","reset","clear"),"_TARGET_CHECKLIST_ITEM"],SET_ITEM_DUE_DATE_ACTION:[r.or("set","schedule"),"the","item","due",r.optional("date"),r.optional(r.or("on","to")),r.or("DATE_IN_CUSTOM_FIELD","DUE_DATE","THE_DATE","_PARSED_DATE")],MEMBER_ME:r.or("me","myself",r.or(["i","am"],"i'm")),MEMBER_ANYONE:r.or("anyone","someone",["a","member"],["any","member"],["some","member"]),MEMBER:r.or([r.optional("member"),"@MEMBER_USERNAME"],[r.optional("member"),"$MEMBER_FULLNAME"],"MEMBER_ME","MEMBER_ANYONE"),AT_RANDOM:["at","random"],IN_TURN:["in","turn"],_MEMBER_SELECTION:r.or("AT_RANDOM","IN_TURN"),PICK_MEMBER:["a","member","_MEMBER_SELECTION","_FROM_CARD?"],_RANDOM_MEMBER_LIST:["MEMBER",r.optional(["or","_RANDOM_MEMBER_LIST"])],RANDOM_MEMBER_LIST:["MEMBER","or","_RANDOM_MEMBER_LIST"],ADD_MEMBER_ACTION:r.or(["add",r.or("PICK_MEMBER","RANDOM_MEMBER_LIST","MEMBER"),"_TO_THE_CARD?"],["assign","_THE_CARD?","to","MEMBER"]),ASSIGN_ITEM_ACTION:r.or(["assign","the",r.optional("checklist"),"item","to","MEMBER"]),JOIN_CARD_ACTION:["join","_THE_CARD"],LEAVE_CARD_ACTION:["leave","_THE_CARD"],SUBSCRIBE_THE_MEMBER:["the","member"],_SUBSCRIBE_WHO:r.or("me","SUBSCRIBE_THE_MEMBER"),SUBSCRIBE:["subscribe","_SUBSCRIBE_WHO?","to"],UNSUBSCRIBE:["unsubscribe","_SUBSCRIBE_WHO?","from"],SUBSCRIBE_TO_CARD_ACTION:[r.or("SUBSCRIBE","UNSUBSCRIBE"),"_THE_CARD"],_RANDOM_COMMENT:["or","$COMMENT","_RANDOM_COMMENT?"],ADD_COMMENT_ACTION:[r.or("add","post"),"_A?","comment","$COMMENT","_RANDOM_COMMENT?"],ADD_COMMENT_ACTION__HELP:["add","a","comment","$COMMENT"],DELETE_COMMENT_ACTION:["delete","the","comment"],_NAME_LINK:[r.or(["with","name"],"as"),"$LINK_NAME"],ADD_LINK_ACTION:[r.or("add","post"),"_A?","link","$LINK","_NAME_LINK?"],LINK_IN_ATTACHMENTS:[r.or("as","using","with",["in","the"]),"attachments"],LINK_IN_DESCRIPTION:[r.or("using","in"),"the","description"],UNLINK:"unlink",LINK_CARDS_ACTION:[r.or("link","UNLINK"),r.or(["the",r.optional("two")],"both"),"cards",r.optional(r.or("together",["to","each","other"])),r.optional(r.or("LINK_IN_ATTACHMENTS","LINK_IN_DESCRIPTION"))],LINK_CARD_TO_ITEM_ACTION:["link","the","card",r.or("with","and","to"),"the","item"],RENAME_CARD_ACTION:r.or(["rename","_THE_CARD?",r.optional(r.or("to","as")),"$NEW_NAME"],["change","_THE_CARD_S?",r.or("name","title"),"to","$NEW_NAME"]),REPLACE_TEXT_ACTION:["replace",r.optional("the"),"matched","text","with","$TEXT"],REPLACE_ALL_ACTION:["replace",r.optional(["all","occurrences","of"]),"$PATTERN","with","$TEXT","in","the","description"],DELETE_TEXT_ACTION:[r.or("delete","remove"),r.optional("the"),"matched","text"],SET_DESCRIPTION_ACTION:["set","_THE_CARD_S?","description",r.optional("to"),"$NEW_DESCRIPTION"],SET_DESCRIPTION_ACTION__HELP:["set","_THE_CARD_S","description","to","$NEW_DESCRIPTION"],CLEAR_FIELD:"clear",CHECK_FIELD:"check",UNCHECK_FIELD:"uncheck",INCREASE_FIELD:"increase",DECREASE_FIELD:"decrease",ADJUST_FIELD_DATE:r.or("TO_PREVIOUS_DAY","TO_PREVIOUS_WORKING_DAY","TO_NEXT_DAY","TO_NEXT_WORKING_DAY","_TO_SAME_DAY","TO_TIME","TO_DATE","BY_DATE","BY_SAME_TIME_AMOUNT"),SET_CUSTOM_FIELD_ACTION:r.or(["set","custom","field","$FIELD_NAME","to","_VALUE"],[r.or("CLEAR_FIELD","CHECK_FIELD","UNCHECK_FIELD"),"custom","field","$FIELD_NAME"],[r.or("INCREASE_FIELD","DECREASE_FIELD"),"the","number","in","custom","field","$FIELD_NAME","_BY_AMOUNT?"],["set","date","custom","field","$FIELD_NAME","to",r.or("DATE_TIME","THE_DATE","_PARSED_DATE")],["move","the","date","in","custom","field","$FIELD_NAME","ADJUST_FIELD_DATE"]),CHECK_ALL:r.or("complete",["check","all","_THE","items","in"]),_UNCHECK_ALL:r.or("reset",["uncheck","all","_THE","items","in"]),RESET_CHECKLIST_ACTION:[r.or("_UNCHECK_ALL","CHECK_ALL"),r.or("_CHECKLIST","_UNNAMED_CHECKLIST","ALL_CHECKLISTS"),"_IN_THE_CARD?"],COMPLETE_ITEMS:[r.or("complete","completed"),"items"],INCOMPLETE_ITEMS:["incomplete","items"],_EXPLODE_ITEM_FILTER:[r.optional("all"),"_THE?",r.or("items","COMPLETE_ITEMS","INCOMPLETE_ITEMS"),"in"],COPY_LABELS:[r.optional("all"),r.optional("the"),"labels"],COPY_MEMBERS:[r.optional("all"),r.optional("the"),"members"],_COPY_FROM_SOURCE_CARD:["copying",r.or(r.swappable("COPY_LABELS","COPY_MEMBERS",r.or(",","and")),"COPY_LABELS","COPY_MEMBERS")],_IN_THE_ITEMS:[r.or("in","from"),"the",r.or("item","items")],_OF_THE_ITEMS:["of","the",r.or("item","items")],_FIND_DATE_IN_ITEMS:["_IN_THE_ITEMS?","_AFTER_TEXT?"],FIND_DATE_AT_START:[r.or("at","from"),"the","start","_OF_THE_ITEMS?","_AFTER_TEXT?"],FIND_DATE_AT_END:[r.or("at","from"),"the","end","_OF_THE_ITEMS?","_AFTER_TEXT?"],DELETE_FOUND:["extracting"],FIND_DUE_DATES:[r.or("finding","DELETE_FOUND"),"_THE?","due",r.or("dates","date"),r.optional(r.or("FIND_DATE_AT_START=>DATE_AT_START","FIND_DATE_AT_END=>DATE_AT_END","_FIND_DATE_IN_ITEMS"))],FIND_MEMBERS:[r.or("finding","DELETE_FOUND"),"members","_IN_THE_ITEMS?"],_FIND_IN_ITEM:[r.or(r.swappable("FIND_DUE_DATES","FIND_MEMBERS?",r.optional("and")),"FIND_MEMBERS")],LINKED:["linked"],UNLINKED:["unlinked"],EXPLODE_CHECKLIST_ACTION:["convert","_EXPLODE_ITEM_FILTER?",r.or("_CHECKLIST","_UNNAMED_CHECKLIST"),"_INTO",r.optional(r.or("LINKED","UNLINKED")),"cards","DESTINATION?","_USING_PATTERN?",r.optional(r.or(r.swappable("_COPY_FROM_SOURCE_CARD","_FIND_IN_ITEM?",r.optional("and")),"_FIND_IN_ITEM"))],_USING_PATTERN:["using","pattern","$ITEM_PATTERN"],LINKS:"links",COLLECT_CHECKLIST_ACTION:["collect",r.optional("all"),r.optional("the"),"cards","_CONDITION?","into",r.or([r.optional(r.or("LINKED","UNLINKED")),"items"],"LINKS"),r.swappable(["in","_CHECKLIST"],"_USING_PATTERN?")],REMOVE_CHECKLIST_ITEMS_ACTION:[r.or("remove","delete"),r.optional("all"),"_THE?",r.or("items","COMPLETE_ITEMS","INCOMPLETE_ITEMS"),r.or("in","from"),r.or("_CHECKLIST","_UNNAMED_CHECKLIST","ALL_CHECKLISTS")],FIRST_INCOMPLETE_ITEM:r.or("incomplete","unchecked"),FIRST_COMPLETE_ITEM:r.or("complete","completed","checked"),FIRST_CHECKLIST_ITEM:["the","first",r.optional(r.or("FIRST_INCOMPLETE_ITEM","FIRST_COMPLETE_ITEM")),r.optional("checklist"),"item"],_FIRST_CHECKLIST_ITEM:["FIRST_CHECKLIST_ITEM",r.optional([r.or("in","from"),r.or("_CHECKLIST","_UNNAMED_CHECKLIST")])],CONVERT_ITEM_ACTION:["convert",r.or("_TARGET_CHECKLIST_ITEM","_FIRST_CHECKLIST_ITEM"),"_INTO",r.optional(r.or([r.optional("a"),"LINKED"],[r.optional("an"),"UNLINKED"],"a")),"card","DESTINATION?","_USING_PATTERN?",r.optional(r.or(r.swappable("_COPY_FROM_SOURCE_CARD","_FIND_IN_ITEM?",r.optional("and")),"_FIND_IN_ITEM"))],REMOVE_ALL_LABELS:r.or([r.optional(r.or("any",["all",r.optional([r.optional("of"),r.or("the","its")])])),"labels"],[r.optional("the"),"labels"],"label"),REMOVE_ALL_LABELS__HELP:["all","the","labels"],REMOVE_ALL_STICKERS:r.or([r.optional(r.or("any",["all",r.optional([r.optional("of"),r.or("the","its")])])),"stickers"],[r.optional("the"),r.or("sticker","stickers")]),REMOVE_ALL_STICKERS__HELP:["all","the","stickers"],REMOVE_DUE_DATE:[r.optional(r.or("the","its")),"due","date"],REMOVE_START_DATE:[r.optional(r.or("the","its")),"start","date"],REMOVE_ALL_CHECKLISTS:["all",r.optional("the"),"checklists"],REMOVE_CHECKLIST:"_CHECKLIST",REMOVE_COVER:[r.optional(r.or("the","its")),"cover",r.optional(r.or("image","picture","attachment"))],REMOVE_ALL_MEMBERS:["all",r.optional("the"),"members"],THE_ATTACHMENT:["_THE?","attachment"],REMOVE_ATTACHMENT:r.or(["_THE?","attachment","_CALLED?","$ATTACHMENT_NAME"],"THE_ATTACHMENT",["_THE?","link","$ATTACHMENT_LINK"]),_REMOVE_WHAT_FROM_CARD:r.or("LABEL","THE_LABEL","REMOVE_ALL_LABELS","_STICKER","REMOVE_ALL_STICKERS","REMOVE_START_DATE","REMOVE_DUE_DATE","REMOVE_CHECKLIST","REMOVE_ALL_CHECKLISTS","REMOVE_COVER","MEMBER","REMOVE_ALL_MEMBERS","REMOVE_ATTACHMENT"),_REMOVE_WHAT_FROM_CARD_LIST:["_REMOVE_WHAT_FROM_CARD",r.optional(["_AND?","_REMOVE_WHAT_FROM_CARD_LIST"])],_REMOVE_WHAT_FROM_CARD_LIST__HELP:r.or("_REMOVE_WHAT_FROM_CARD",["_REMOVE_WHAT_FROM_CARD","and","_REMOVE_WHAT_FROM_CARD"]),REMOVE_FROM_CARD_ACTION:[r.or("remove","delete"),"_REMOVE_WHAT_FROM_CARD_LIST",r.optional(r.or(["_FROM","_THE_CARD"],["_FROM","ALL_CARDS_IN_LIST"],["_FROM","ALL_ARCHIVED_CARDS"]))],COPY_DESCRIPTION:[r.optional("the"),"description"],COPY_ALL_LABELS:[r.optional("all"),r.optional("the"),"labels"],COPY_DUE_DATE:[r.optional("the"),"due","date"],COPY_ALL_MEMBERS:[r.optional("all"),r.optional("the"),"members"],COPY_ALL_CHECKLISTS:[r.optional("all"),r.optional("the"),"checklists"],COPY_CHECKLIST:"_CHECKLIST",COPY_ALL_ATTACHMENTS:[r.optional("all"),r.optional("the"),"attachments"],_COPY_WHAT:r.or("COPY_DESCRIPTION","COPY_ALL_LABELS","COPY_DUE_DATE","COPY_CHECKLIST","COPY_ALL_CHECKLISTS","COPY_ALL_MEMBERS","COPY_ALL_ATTACHMENTS"),_COPY_WHAT_LIST:["_COPY_WHAT",r.optional(["_AND?","_COPY_WHAT_LIST"])],THE_TRIGGER_CARD:["the","trigger","card"],THE_FOUND_CARD:["the","found","card"],_WHICH_CARD:r.or("THE_TRIGGER_CARD","THE_FOUND_CARD"),TO_WHICH_CARD:["to","_WHICH_CARD"],FROM_WHICH_CARD:["from","_WHICH_CARD"],COPY_PARTS_ACTION:["copy","_COPY_WHAT_LIST",r.or("TO_WHICH_CARD","FROM_WHICH_CARD")],USE_TRIGGER_CARD:"trigger",ARCHIVE_CARD_ACTION:["archive",r.or("_THE_CARD",["the","USE_TRIGGER_CARD","card"])],UNARCHIVE_CARD_ACTION:["unarchive",r.or("_THE_CARD",["the","USE_TRIGGER_CARD","card"])],TIME_IN_LIST_CONDITION:["more","than","DAYS_IN_LIST","WORKING_DAYS?","days","in","_LIST"],ARCHIVE_ALL_CARDS_ACTION:["archive","all",r.optional("the"),"cards",r.or("WITH_LABEL","IN_LIST","TIME_IN_LIST_CONDITION")],DELETE_CARD_ACTION:["delete","_THE_CARD",r.trap("!FOR_EACH_CARD","`delete` can only be used in `for each archived card inactive for more than X days`"),r.trap("!ARCHIVED","`delete` can only be used in `for each archived card inactive for more than X days`"),r.trap("!INACTIVITY_CONDITION","`delete` can only be used in `for each archived card inactive for more than X days`")],DONT_SWITCH_TO_CARD:"lookup",_FIND_OR_LOOKUP:r.or("find","DONT_SWITCH_TO_CARD"),FIND_CARD_BY_TITLE:["_FIND_OR_LOOKUP","_A?","card","_CALLED?","$TITLE",r.optional(["in","_LIST_NAME"]),"_IN_BOARD_NAME?"],FIND_CARD_BY_ID:["_FIND_OR_LOOKUP","_A?","card","with",r.or("id","link","url"),"$ID"],CARD_IN_POSITION:r.ordinal("The position of the card, e.g. first, 3rd."),CARD_IN_LAST_POSITION:"last",FIND_CARD_BY_POSITION:["_FIND_OR_LOOKUP","the",r.or("CARD_IN_POSITION","CARD_IN_LAST_POSITION"),"card","in","_LIST_NAME","_IN_BOARD_NAME?"],FIND_CARD_ABOVE:["_FIND_OR_LOOKUP",r.optional("the"),"card","above"],FIND_CARD_ACTION:r.or("FIND_CARD_BY_TITLE","FIND_CARD_BY_ID","FIND_CARD_BY_POSITION","FIND_CARD_ABOVE"),FIND_MENTIONED_CARD_ACTION:["_FIND_OR_LOOKUP","_THE?",r.or("linked","mentioned"),"card"],FIND_CARD_IN_DESCRIPTION_ACTION:["_FIND_OR_LOOKUP","_THE?","card",r.or("linked","mentioned"),"in","the","description"],FIRST_CARD_IN_ATTACHMENTS:"first",LAST_CARD_IN_ATTACHMENTS:"last",FIND_CARD_IN_ATTACHMENTS_ACTION:["_FIND_OR_LOOKUP","_THE?",r.optional(r.or("FIRST_CARD_IN_ATTACHMENTS","LAST_CARD_IN_ATTACHMENTS")),"card","linked",r.or("in","from"),r.or(["the","attachments"],["an","attachment"])],DECIMAL_VALUE:r.decimal(),DISPLAY_VALUE_ACTION:["display",r.optional("value"),r.or("$TEXT_VALUE","{VARIABLE_VALUE}","DECIMAL_VALUE"),r.or(r.swappable("_DASH_TITLE","_DASH_COLOR?"),"_DASH_COLOR?")],CREATE_REPORT_ACTION:["create","_A?","report",r.optional(["in","variable","$REPORT_VAR"]),"with",r.optional("all"),r.optional("the"),"cards","_CONDITION?","_REPORT_USING_PATTERN?","_REPORT_GROUP_BY_CLAUSE?"],REPORT_GROUP_BY:r.enum_value("THE_LIST","THE_DUE_DATE"),_REPORT_GROUP_BY_CLAUSE:[r.or("group","grouped"),"by","REPORT_GROUP_BY"],_REPORT_USING_PATTERN:"_USING_PATTERN",CONFETTI_TARGET_LOCATION:[r.or("THE_CHECKLIST","THE_DUE_DATE","THE_LIST","THE_CARD","THIS_BOARD"),r.optional(["_CALLED?","$NAME"])],THROW_CONFETTI_ACTION:["throw","confetti","on","CONFETTI_TARGET_LOCATION"],_CARD_ACTION:r.or("CREATE_CARD_ACTION","COPY_CARD_ACTION","SWITCH_TO_COPY_ACTION","SWITCH_TO_TRIGGER_CARD_ACTION","MOVE_CARD_ACTION","MOVE_ALL_CARDS_ACTION","COPY_ALL_CARDS_ACTION","RANDOM_CARDS_ACTION","_MOVE_EACH_CARD_ACTION","_COPY_EACH_CARD_ACTION","ADD_LABEL_ACTION","ADD_STICKER_ACTION","ADD_DUE_DATE_ACTION","ADD_START_DATE_ACTION","ADJUST_DUE_DATE_ACTION","ADJUST_START_DATE_ACTION","MARK_DUE_COMPLETE_ACTION","UNMARK_DUE_COMPLETE_ACTION","ADD_CHECKLIST_ACTION","MOVE_CHECKLIST_ACTION","ADD_CHECKLIST_ITEM_ACTION","RENAME_CHECKLIST_ITEM_ACTION","REMOVE_CHECKLIST_ITEM_ACTION","MOVE_CHECKLIST_ITEM_ACTION","ADD_MEMBER_ACTION","ADD_COMMENT_ACTION","ADD_LINK_ACTION","RENAME_CARD_ACTION","SET_DESCRIPTION_ACTION","LINK_CARDS_ACTION","LINK_CARD_TO_ITEM_ACTION",r.hidden("SET_CUSTOM_FIELD_ACTION"),"DELETE_COMMENT_ACTION","REPLACE_TEXT_ACTION","REPLACE_ALL_ACTION","DELETE_TEXT_ACTION","JOIN_CARD_ACTION","LEAVE_CARD_ACTION","SUBSCRIBE_TO_CARD_ACTION","CONVERT_ITEM_ACTION","CHECK_ITEM_ACTION","UNCHECK_ITEM_ACTION","ASSIGN_ITEM_ACTION","SET_ITEM_DUE_DATE_ACTION","RESET_CHECKLIST_ACTION","EXPLODE_CHECKLIST_ACTION","COLLECT_CHECKLIST_ACTION","REMOVE_CHECKLIST_ITEMS_ACTION","REMOVE_FROM_CARD_ACTION","COPY_PARTS_ACTION","ARCHIVE_CARD_ACTION","ARCHIVE_ALL_CARDS_ACTION","UNARCHIVE_CARD_ACTION","DELETE_CARD_ACTION","FIND_CARD_ACTION","FIND_MENTIONED_CARD_ACTION","FIND_CARD_IN_DESCRIPTION_ACTION","FIND_CARD_IN_ATTACHMENTS_ACTION","DISPLAY_VALUE_ACTION","CREATE_REPORT_ACTION","THROW_CONFETTI_ACTION"),_IN_TEAM:["in","_TEAM","$TEAM"],CREATE_BOARD_ACTION:[r.or("create","add","start"),"_A?",r.optional("new"),"board","_CALLED?","$NAME","_IN_TEAM?"],_TO_TEAM:[r.or("in","to"),"_TEAM","$TEAM"],COPY_BOARD_ACTION:["copy",r.or(["board","$NAME"],[r.optional(r.or("the","this")),"board"]),"_TO_TEAM?",r.optional(["with","name","$NEW_NAME"])],SWITCH_CURRENT_BOARD_ACTION:["switch","to","_BOARD_NAME",r.trap("_ACTION_MULTIPLIER","`switch to board` can not be used within a multiplier")],CREATE_UNIQUE_LIST:"unique",CREATE_LIST_ACTION:[r.or("create","add","start"),"_A?",r.optional(r.or("new","CREATE_UNIQUE_LIST")),"list","_CALLED?","$NAME",r.or(["_POSITION_NUMBER",r.optional([r.or("of","in","on"),r.or("_BOARD_NAME",[r.or("the","this"),"board"])])],["_IN_BOARD_NAME?","_POSITION_NUMBER?"])],RENAME_LIST_ACTION:["rename","_LIST",r.or("to","as"),"$NEW_NAME"],DESTINATION_THIS_BOARD:[r.or("this","the"),"board"],MOVE_LIST_ACTION:["move",r.optional("the"),r.swappable("list","$LIST"),r.optional(r.or("_IN_BOARD_NAME","_FROM_BOARD_NAME")),r.or(["_TO_POSITION",r.optional(["_IN",r.or("_DESTINATION_BOARD_NAME","DESTINATION_THIS_BOARD")])],["_TO",r.or("_DESTINATION_BOARD_NAME","DESTINATION_THIS_BOARD")])],COPY_LIST_ACTION:["copy",r.optional("the"),r.swappable("list","$LIST"),r.optional(r.or("_IN_BOARD_NAME","_FROM_BOARD_NAME")),r.optional(r.or(["_TO_POSITION",r.optional(["_IN",r.or("_DESTINATION_BOARD_NAME","DESTINATION_THIS_BOARD")])],["_TO",r.or("_DESTINATION_BOARD_NAME","DESTINATION_THIS_BOARD")])),r.optional(["with","name","$NEW_NAME"])],ARCHIVE_LIST_ACTION:["archive","list","$LIST","_IN_BOARD_NAME?"],UNARCHIVE_LIST_ACTION:["unarchive","list","$LIST","_IN_BOARD_NAME?"],SHUFFLE_LIST_ACTION:["shuffle",r.optional(["_ALL_THE_CARDS","_IN"]),"_LIST_NAME"],SORT_BY_TITLE:["by",r.or("name","title")],SORT_BY_DATE_IN_TITLE:["by",r.optional("the"),"date","in",r.optional("the"),"title"],SORT_BY_START_DATE:["by","start","date"],SORT_BY_DUE_DATE:["by","due","date"],SORT_BY_VOTES:["by","votes"],SORT_LABEL:r.or(["COLOR","$TITLE?"],"$TITLE"),_SORT_LABEL_LIST:[r.or("SORT_LABEL","LABEL=>SORT_LABEL"),r.optional(["_AND","_SORT_LABEL_LIST"])],SORT_BY_LABEL:["by",r.optional("label"),"_SORT_LABEL_LIST"],SORT_BY_TIME_IN_LIST:["by","time","in",r.optional("the"),"list"],SORT_BY_AGE:["by",r.optional("card"),"age"],SORT_BY_CUSTOM_FIELD:["by","custom","field","$CUSTOM_FIELD_NAME"],SORT_ASCENDING:[r.optional(","),"ascending"],SORT_DESCENDING:[r.optional(","),"descending"],_SORT_CRITERION:[r.or("SORT_BY_TITLE","SORT_BY_DATE_IN_TITLE","SORT_BY_START_DATE","SORT_BY_DUE_DATE","SORT_BY_VOTES","SORT_BY_TIME_IN_LIST","SORT_BY_AGE","SORT_BY_LABEL","SORT_BY_CUSTOM_FIELD"),r.optional(r.or("SORT_ASCENDING","SORT_DESCENDING"))],SECONDARY_SORT:["_AND?",r.optional("then"),"_SORT_CRITERION"],SORT_LIST_ACTION:["sort",r.or([r.optional(["_ALL_THE_CARDS","_IN"]),"_LIST_NAME","_IN_BOARD_NAME?"],[r.optional("the"),"list"]),"_SORT_CRITERION","SECONDARY_SORT?"],EXCEPT_LIST_COUNT:r.small_numeral("a number of lists"),_EXCEPT_LIST_COUNT:[r.optional("the"),r.optional("first"),r.or("list",["EXCEPT_LIST_COUNT","lists"])],EXCEPT_LEFT_LISTS:["_EXCEPT_LIST_COUNT",r.optional(["on","the","left"])],EXCEPT_RIGHT_LISTS:["_EXCEPT_LIST_COUNT","on","the","right"],_EXCEPT_LISTS:["except",r.or("EXCEPT_RIGHT_LISTS",["EXCEPT_LEFT_LISTS",r.optional(["and","EXCEPT_RIGHT_LISTS"])])],SPECIFIC_LIST:["position","the","list"],ARRANGE_LISTS_ACTION:[r.or(["arrange","the","lists","_IN_THIS_BOARD?"],"SPECIFIC_LIST"),r.or("SORT_BY_TITLE","SORT_BY_DATE_IN_TITLE"),r.optional(r.or("SORT_ASCENDING","SORT_DESCENDING")),"_EXCEPT_LISTS?"],COUNT_LABELS_ACTION:["count",r.optional("the"),"labels",r.or(["in","_LIST_NAME"],"_IN_THIS_BOARD?")],IN_ALL_LISTS:["in",r.optional(r.or(["all",r.optional("of"),r.optional("the")],"_EVERY","the")),r.or("list","lists"),"_IN_THIS_BOARD?"],COUNT_CARDS_ACTION:["count",r.optional("the"),"ARCHIVED?","cards",r.optional(r.or("_CONDITION","IN_THE_LIST","IN_ALL_LISTS","_IN_THIS_BOARD"))],COUNT_CARDS_ACTION__HELP:["count","the","cards",r.or(["in","_LIST_NAME"],"IN_ALL_LISTS","_IN_THIS_BOARD")],_TO_THE_BOARD:["to","the","board"],INVITE_MEMBER_TO_BOARD_ACTION:["invite","MEMBER","_TO_THE_BOARD","_AS_BOARD_MEMBER_TYPE?"],DO_NOTHING_ACTION:r.or(["do","nothing"],"nop"),MAKE_COMMAND_ACTION:["convert","_THE_CARD","_INTO","_A?","command"],MATCH_TEXT_ACTION:["match",r.or("$TEXT","{TEXT}"),r.or("to","with"),"$PATTERN"],PRINT_VARIABLES:"variables",PRINT_CARD_VARIABLES:["card","variables"],PRINT_BOARD_VARIABLES:["board","variables"],_PRINT_VARIABLES:r.or("PRINT_VARIABLES","PRINT_CARD_VARIABLES","PRINT_BOARD_VARIABLES"),PRINT_USAGE:"usage",PRINT_ACTION:["print",r.or("$TEXT","_PRINT_VARIABLES","PRINT_USAGE")],TIMEZONE:r.timezone(),SET_TIMEZONE_ACTION:r.or(["set","timezone",r.optional("to"),"TIMEZONE"],[r.optional(r.or("the","my","our")),"timezone",r.optional("is"),"TIMEZONE"]),SILENT:r.or_index("off","on"),SET_SILENT_ACTION:["set","silent","SILENT"],BOT_STICKERS:r.or_index("off","on"),SET_BOT_STICKERS_ACTION:["set","stickers","BOT_STICKERS"],_BOARD_ACTION:r.or("SET_TIMEZONE_ACTION","SET_SILENT_ACTION","SET_BOT_STICKERS_ACTION","CREATE_BOARD_ACTION","COPY_BOARD_ACTION",r.hidden("INVITE_MEMBER_TO_BOARD_ACTION"),r.hidden("SWITCH_CURRENT_BOARD_ACTION"),"CREATE_LIST_ACTION","RENAME_LIST_ACTION","MOVE_LIST_ACTION","COPY_LIST_ACTION","SHUFFLE_LIST_ACTION","SORT_LIST_ACTION","ARRANGE_LISTS_ACTION","ARCHIVE_LIST_ACTION","UNARCHIVE_LIST_ACTION","COUNT_LABELS_ACTION","COUNT_CARDS_ACTION","MAKE_COMMAND_ACTION","MATCH_TEXT_ACTION",r.hidden("DO_NOTHING_ACTION"),r.hidden("PRINT_ACTION")),CARD_VARIABLE:"card",BOARD_VARIABLE:"board",VARIABLE_VALUE:r.or(r.small_numeral("a number"),r.decimal("a decimal number")),SET_VARIABLE_ACTION:[r.or(["set","_THE?",r.or("CARD_VARIABLE","BOARD_VARIABLE"),"variable","$VARIABLE_NAME"],["set",r.optional("variable"),"{VARIABLE_NAME}"]),"to",r.or("$VARIABLE_VALUE","VARIABLE_VALUE")],AMOUNT:r.or(r.small_numeral("a number"),r.decimal("a decimal number")),_BY_AMOUNT:["by",r.or("AMOUNT","{AMOUNT}")],INCREASE_VARIABLE_ACTION:r.or(["increase",r.or("CARD_VARIABLE","BOARD_VARIABLE"),"variable","$VARIABLE_NAME","_BY_AMOUNT?"],["increase",r.optional("variable"),"{VARIABLE_NAME}","_BY_AMOUNT?"]),DECREASE_VARIABLE_ACTION:r.or(["decrease",r.or("CARD_VARIABLE","BOARD_VARIABLE"),"variable","$VARIABLE_NAME","_BY_AMOUNT?"],["decrease",r.optional("variable"),"{VARIABLE_NAME}","_BY_AMOUNT?"]),_VARIABLE_ACTION:r.or("SET_VARIABLE_ACTION","INCREASE_VARIABLE_ACTION","DECREASE_VARIABLE_ACTION"),HTTP_GET_METHOD:"get",HTTP_POST_METHOD:"post",HTTP_PUT_METHOD:"put",HTTP_FORM_PAYLOAD:"form",_HTTP_GET_ACTION:["HTTP_GET_METHOD","url","$URL"],_HTTP_POST_ACTION:["HTTP_POST_METHOD",r.optional("to"),"url","$URL",r.optional([r.optional("with"),"headers","$HEADERS",r.optional("and")]),r.optional("with"),"HTTP_FORM_PAYLOAD?","payload","$PAYLOAD"],_HTTP_PUT_ACTION:["HTTP_PUT_METHOD",r.optional("to"),"url","$URL",r.optional([r.optional("with"),"headers","$HEADERS",r.optional("and")]),r.optional("with"),"HTTP_FORM_PAYLOAD?","payload","$PAYLOAD"],HTTP_REQUEST_ACTION:r.or("_HTTP_GET_ACTION","_HTTP_POST_ACTION","_HTTP_PUT_ACTION"),ALL_MEMBERS_ON_BOARD:r.or("@board",["every","member","on","the","board"]),ALL_MEMBERS_ON_CARD:r.or("@card",["every","member","on","the","card"]),SEND_EMAIL_ACTION:["send",r.optional("an"),"email",r.optional("notification"),"to",r.or("$ADDRESS","ALL_MEMBERS_ON_BOARD","ALL_MEMBERS_ON_CARD"),r.optional(","),r.optional("with"),"subject","$SUBJECT",r.optional([r.optional(","),r.optional("and"),r.optional("with"),r.or("message","body"),"$MESSAGE"])],_MISC_ACTION:r.or("HTTP_REQUEST_ACTION","SEND_EMAIL_ACTION"),IN_THE_CARD:"_IN_THE_CARD",_ON_THE_BOARD:[r.or("on","in"),"the","board"],ON_THE_BOARD:"_ON_THE_BOARD",FOR_EACH_MEMBER:["for","each","member",r.or("IN_THE_CARD","ON_THE_BOARD")],FOR_EACH_LABEL:["for","each","label",r.optional(r.or("IN_THE_CARD","ON_THE_BOARD"))],FOR_EACH_CHECKLIST:["for","each","checklist","IN_THE_CARD?"],FOR_EACH_ATTACHMENT:["for","each","attachment","IN_THE_CARD?"],COMPLETE_ITEM:r.or("complete","completed","checked"),INCOMPLETE_ITEM:r.or("incomplete","unchecked"),FOR_EACH_CHECKLIST_ITEM:["for","each",r.optional(r.or("COMPLETE_ITEM","INCOMPLETE_ITEM")),r.optional("checklist"),"item","_IN_CHECKLIST?","IN_THE_CARD?"],EMPTY_LIST:r.or(["empty","list","ON_THE_BOARD?"],["list","ON_THE_BOARD?","_THAT_IS","empty"]),NON_EMPTY_LIST:r.or([r.or("non-empty",["non","empty"],["not","empty"]),"list","ON_THE_BOARD?"],["list","ON_THE_BOARD?","_THAT_IS_NOT","empty"]),FOR_EACH_LIST:["for","each",r.or("NON_EMPTY_LIST","EMPTY_LIST",["list","ON_THE_BOARD?"])],ARCHIVED:"archived",IN_THE_LIST:["in","the","list"],EXCEPT_TRIGGER_CARD:["except","the","trigger",r.optional("card")],INCLUDE_COMMANDS:["including","commands"],FOR_EACH_CARD:["for","each","ARCHIVED?","card",r.optional(r.or("_CONDITION","IN_THE_LIST")),"_IN_BOARD_NAME?","EXCEPT_TRIGGER_CARD?","INCLUDE_COMMANDS?"],FOR_EACH_CARD_IMPLICIT:[r.or("each","every"),"card",r.optional(r.or("_CONDITION","IN_THE_LIST")),"_IN_BOARD_NAME?","EXCEPT_TRIGGER_CARD?"],_FOR_EACH_CARD_IMPLICIT:"FOR_EACH_CARD_IMPLICIT=>FOR_EACH_CARD",MENTIONED_IN_DESCRIPTION:["the","description"],MENTIONED_IN_ATTACHMENTS:["the","attachments"],MENTIONED_IN_CHECKLIST:[r.optional(["_A",r.optional(r.or("COMPLETE_ITEM","INCOMPLETE_ITEM")),"item","in"]),"_CHECKLIST"],FOR_EACH_MENTIONED_CARD:["for","each","card",r.or("linked","mentioned"),r.or("from","in"),r.or("MENTIONED_IN_DESCRIPTION","MENTIONED_IN_ATTACHMENTS","MENTIONED_IN_CHECKLIST"),r.optional(["of","the","card"]),"EXCEPT_TRIGGER_CARD?"],START_VALUE:r.small_numeral(),END_VALUE:r.small_numeral(),LOOP:["loop","START_VALUE","to","END_VALUE"],_WITH_TAG:[r.or(["with","tag"],["in","collection"]),"$TAG"],SWITCH_TO_BOARD:"on",FOR_EACH_BOARD:[r.or("for",r.hidden("SWITCH_TO_BOARD")),"each","BOARD_VISIBILITY_CONDITION?","board",r.swappable("_IN_TEAM","_WITH_TAG?"),"INACTIVITY_CONDITION?"],_ACTION_MULTIPLIER:r.or("FOR_EACH_MEMBER","FOR_EACH_LABEL","FOR_EACH_CHECKLIST_ITEM","FOR_EACH_CHECKLIST","FOR_EACH_ATTACHMENT","FOR_EACH_LIST","FOR_EACH_MENTIONED_CARD","FOR_EACH_CARD","FOR_EACH_BOARD",r.hidden("LOOP")),_VALUE:r.or("$TEXT_VALUE","{VARIABLE_VALUE}","NUMERIC_VALUE"),OP_CMP_EQ:r.or("equals","="),OP_CMP_LT:r.or(["is",r.or("less","lower"),"than"],"<"),OP_CMP_LE:r.or(["is","lower",r.optional("than"),"or","equal","to"],"<=","≤"),OP_CMP_GT:r.or(["is",r.or("more","greater"),"than"],">"),OP_CMP_GE:r.or(["is","greater",r.optional("than"),"or","equal","to"],">=","≥"),COMPARE_OP:r.or("OP_CMP_LT","OP_CMP_LE","OP_CMP_GT","OP_CMP_GE","OP_CMP_EQ"),L_VALUE:"_VALUE",R_VALUE:"_VALUE",_COMPARE_EXPRESSION:["L_VALUE","COMPARE_OP","R_VALUE"],MATCH_EXACT:"$TEXT",_MATCH_EXACT:[r.or("is",["matches",r.optional("with")]),"MATCH_EXACT"],_NOT_MATCH_EXACT:[r.or("isn't",["is","not"],[r.or("doesn't",["does","not"]),"match",r.optional("with")]),"MATCH_EXACT","NEGATIVE_MATCH"],NUMERIC_VALUE:r.or(r.decimal("a number",!0),r.small_numeral("a number")),TEXT_MATCH_OP:r.or("_MATCH_EXACT","_NOT_MATCH_EXACT","_STARTS_WITH","_NOT_STARTS_WITH","_ENDS_WITH","_NOT_ENDS_WITH","_CONTAINS","_NOT_CONTAINS","DATE_AT_START","_NOT_DATE_AT_START","DATE_AT_END","_NOT_DATE_AT_END","CONTAINS_DATE","_NOT_CONTAINS_DATE","_TEXT_LENGTH"),TEXT_VALUE:"_VALUE",_TEXT_MATCH_EXPRESSION:["TEXT_VALUE","TEXT_MATCH_OP"],COMPARE_AND:["and","_COMPARE_EXPRESSION_LIST"],COMPARE_OR:["or","_COMPARE_EXPRESSION_LIST"],COMPARE_GROUP:["(","_COMPARE_EXPRESSION_LIST",")"],_COMPARE_EXPRESSION_LIST:[r.or("_COMPARE_EXPRESSION","COMPARE_GROUP","_TEXT_MATCH_EXPRESSION"),r.optional(r.or("COMPARE_AND","COMPARE_OR"))],IF_ACTION:["if","_COMPARE_EXPRESSION_LIST","_COMMA",r.optional("then"),"ELSE_ALLOWED"],_EXISTS:"exists",NOT_EXISTS:[r.or(["does","not"],"doesn't"),"exist"],_IF_EXISTS_LIST:["_LIST",r.or("_EXISTS","NOT_EXISTS"),"_IN_BOARD_NAME?"],IF_EXISTS_ACTION:["if","_IF_EXISTS_LIST",r.optional("then"),"ELSE_ALLOWED"],ELSE_ALLOWED:[],ELSE_ACTION:["else",r.trap("!ELSE_ALLOWED","`else` can only be used after `if`")],APP_ACTION:r.or("APP_JIRA_ACTION","APP_SLACK_ACTION"),APP_JIRA_ACTION:r.or("APP_JIRA_CREATE_ISSUE_ACTION","APP_JIRA_POST_ISSUE_COMMENT_ACTION"),_APP_JIRA_PROJECT:["in","project","$PROJECT"],_APP_JIRA_SITE:["in","site","$SITE"],APP_JIRA_CREATE_ISSUE_ACTION:["create","a","jira","$ISSUE_TYPE","with",r.or("summary","title"),"$SUMMARY",r.optional(["_AND","description","$DESCRIPTION"]),"_APP_JIRA_PROJECT","_APP_JIRA_SITE"],APP_JIRA_POST_ISSUE_COMMENT_ACTION:["post","a","comment","to","jira","issue","$ISSUE_REF","_APP_JIRA_SITE","with","message","$COMMENT"],APP_SLACK_ACTION:r.or("APP_SLACK_POST_MESSAGE_ACTION"),_APP_SLACK_WORKSPACE:["in","workspace","$WORKSPACE"],APP_SLACK_AS_BUTLER:"butler",APP_SLACK_AS_MYSELF:"myself",_APP_SLACK_ACT_AS:r.or("APP_SLACK_AS_BUTLER","APP_SLACK_AS_MYSELF"),APP_SLACK_POST_MESSAGE_ACTION:["post","message","$MESSAGE","to","slack","channel","$CHANNEL","_APP_SLACK_WORKSPACE","as","_APP_SLACK_ACT_AS"],ACTION:r.or("_BOARD_ACTION","_CARD_ACTION","_VARIABLE_ACTION",r.hidden("_MISC_ACTION"),"_ACTION_MULTIPLIER","IF_ACTION","IF_EXISTS_ACTION","ELSE_ACTION","APP_ACTION"),_ACTION_LIST_LIST:["_ACTION_LIST",r.optional([".","_ACTION_LIST_LIST"])],RETURN_MESSAGE:["return","message","$MESSAGE"],SCRIPT_RETURN:"RETURN_MESSAGE",SCRIPT:["script:","_ACTION_LIST_LIST",r.optional([r.or(",","."),"SCRIPT_RETURN"])],IN_THIS_BOARD:"_IN_THIS_BOARD",_DASH_CARDS_FILTER:r.or(["in","_LIST_NAME"],"IN_THIS_BOARD",[r.optional("with"),"LABEL"],["assigned","to","MEMBER"],"WITH_CHECKLIST","WITH_ALL_CHECKLISTS"),DASH_CARDS_FILTER_AND:[r.optional(","),r.optional("and"),"_DASH_CARDS_FILTER_LIST"],DASH_CARDS_FILTER_OR:[r.optional(","),"or","_DASH_CARDS_FILTER_LIST"],_DASH_CARDS_FILTER_LIST:["_DASH_CARDS_FILTER",r.optional([r.or("DASH_CARDS_FILTER_AND","DASH_CARDS_FILTER_OR")])],DASH_CARDS_FILTER:"_DASH_CARDS_FILTER_LIST",COUNT_CARDS_DASH:["cards","DASH_CARDS_FILTER?"],SUM_AVERAGE:["average"],SUM_CARDS_DASH:[r.or("sum","SUM_AVERAGE"),"custom","field","$CUSTOM_FIELD",r.optional(["for","cards"]),"DASH_CARDS_FILTER?"],NO_TITLE:[r.optional(","),r.optional("with"),"no","title"],_DASH_TITLE:r.or([r.optional(","),r.or([r.optional("with"),"title"],"titled"),"$DASH_TITLE"],"NO_TITLE"),_DASH_COLOR:[r.optional(","),r.optional("in"),r.swappable("COLOR",r.optional(r.or("color","background")))],DASH_CARD:[r.or("COUNT_CARDS_DASH","SUM_CARDS_DASH"),r.or(r.swappable("_DASH_TITLE","_DASH_COLOR?"),"_DASH_COLOR?")],_TRIGGERED_DASH_CARD:["TRIGGER","_COMMA",r.optional(["update","with"]),"DASH_CARD"],_IMMEDIATE_DASH_CARD:"DASH_CARD",TRIGGER:[r.or("EVERY","WHEN","ON_DUE_DATE","ON_START_DATE")],_ACTION_LIST:["ACTION",r.optional(["_AND?","_ACTION_LIST"])],_ACTION_LIST__HELP:"ACTION",_TRIGGERED_COMMAND:["TRIGGER","_COMMA","_ACTION_LIST"],_IMMEDIATE_COMMAND:"_ACTION_LIST",COMMAND:[r.or("_TRIGGERED_COMMAND","_IMMEDIATE_COMMAND",r.hidden("_TRIGGERED_DASH_CARD"),r.hidden("_IMMEDIATE_DASH_CARD"),r.hidden("SCRIPT")),r.optional("."),"<END>"],_USER:r.or("user","member"),USER_NEGATIVE_MATCH:"not",ADMIN_USER:["_AN",r.or("administrator","admin"),"_USER?"],NON_ADMIN_USER:["_A",r.or("non-administrator","non-admin"),"_USER?"],USER_TEAM_CONDITION:["USER_NEGATIVE_MATCH?","in","_TEAM","$TEAM_NAME"],USER_ENTERPRISE_CONDITION:["USER_NEGATIVE_MATCH?","in","the","enterprise"],_USER_FILTER:[r.or("ADMIN_USER","NON_ADMIN_USER",["_A","_USER?"]),r.optional(r.or("USER_ENTERPRISE_CONDITION","USER_TEAM_CONDITION"))],USER_FILTER:"_USER_FILTER",BY_USER_FILTER:["by","_USER_FILTER"],_BOARD_CONDITION:r.or(["named","$BOARD_NAME"],["not","named","$BOARD_NAME","NEGATIVE_MATCH"]),VISIBILITY_PUBLIC:"public",VISIBILITY_PRIVATE:"private",VISIBILITY_TEAM:r.or("team-visible","workspace-visible"),_BOARD_VISIBILITY:r.or("VISIBILITY_PUBLIC","VISIBILITY_PRIVATE","VISIBILITY_TEAM"),BOARD_VISIBILITY_CONDITION:"_BOARD_VISIBILITY",ANY_TEAM:[r.or("a","any","the","its"),"_TEAM"],_NAMED_TEAM:["_TEAM","$TEAM_NAME"],_TEAM_CONDITION:r.or(["named","$TEAM_NAME"],["not","named","$TEAM_NAME","NEGATIVE_MATCH"]),BOARD_CREATED:["_A","board","_BOARD_CONDITION?","is","created","BY_USER_FILTER?"],TEAM_CREATED:["_A","_TEAM","_TEAM_CONDITION?","is","created","BY_USER_FILTER?"],BOARD_VISIBILITY_CHANGED:["_A","board","is","made","_BOARD_VISIBILITY","BY_USER_FILTER?"],BOARD_REMOVED_FROM_TEAM:["_A","board","is","removed","from",r.or("ANY_TEAM","_NAMED_TEAM"),"BY_USER_FILTER?"],MEMBER_TYPE_ADMIN:["_AN?",r.or("admin","administrator")],MEMBER_TYPE_NORMAL:["_A?","normal","_USER"],MEMBER_TYPE_OBSERVER:["_AN?","observer"],BOARD_MEMBER_TYPE:r.or("MEMBER_TYPE_ADMIN","MEMBER_TYPE_NORMAL","MEMBER_TYPE_OBSERVER"),_AS_BOARD_MEMBER_TYPE:["as","BOARD_MEMBER_TYPE"],ENT_MEMBER_ADDED_TO_BOARD:["USER_FILTER","is","added","to","a","board","_AS_BOARD_MEMBER_TYPE?","BY_USER_FILTER?"],MEMBER_ADDED_TO_TEAM:["USER_FILTER","is","added","to",r.or("ANY_TEAM","_NAMED_TEAM"),"BY_USER_FILTER?"],UNCONFIRMED_TEAM_INVITATION_ISSUED:["_AN?","unconfirmed","invitation","is","added","to",r.or("ANY_TEAM","_NAMED_TEAM"),"BY_USER_FILTER?"],_POWERUP:r.or("power-up","powerup"),POWERUP_NEGATIVE_MATCH:"not",_POWERUP_NAME_LIST:["$POWERUP_NAME",r.optional(["or","_POWERUP_NAME_LIST"])],POWERUP_FILTER:["POWERUP_NEGATIVE_MATCH?","named","_POWERUP_NAME_LIST"],POWERUP_ENABLED:"enabled",POWERUP_DISABLED:"disabled",POWERUP_ENABLED_STATE_CHANGED:["_A","_POWERUP","POWERUP_FILTER?","is",r.or("POWERUP_ENABLED","POWERUP_DISABLED"),"BY_USER_FILTER?"],_THE_BOARD:[r.optional("the"),"board"],MOVE_BOARD_TO_TEAM_ACTION:["move","_THE_BOARD","to","_TEAM","$TEAM_NAME"],ADD_BOARD_TO_COLLECTION_ACTION:["add","_THE_BOARD","to","collection","$COLLECTION_NAME"],CHANGE_BOARD_VISIBILITY_ACTION:["make","_THE_BOARD",r.or("VISIBILITY_PUBLIC","VISIBILITY_PRIVATE","VISIBILITY_TEAM")],ALLOW:"allow",DO_NOT_ALLOW:[r.or("don't",["do","not"]),"allow"],ALLOW_TEAM_MEMBERS_TO_JOIN_ACTION:[r.or("ALLOW","DO_NOT_ALLOW"),"_TEAM","members","to","join","_THE_BOARD?"],CLOSE_BOARD_ACTION:[r.or("close","archive"),"_THE_BOARD"],REOPEN_BOARD_ACTION:[r.or("reopen","unarchive"),"_THE_BOARD"],RESTRICT_TEAM_MEMBERSHIP_ACTION:["restrict","_TEAM","membership","to","users","in","domain","$DOMAIN"],TEAM_MEMBERS:["_TEAM","members"],TEAM_ADMINS:["_TEAM",r.or("administrators","admins")],NOBODY:["nobody"],ANYBODY:["anybody"],RESTRICT_TEAM_BOARD_CREATION_ACTION:["restrict","_BOARD_VISIBILITY","board","creation",r.optional(["for","the","_TEAM"]),"to",r.or("TEAM_MEMBERS","TEAM_ADMINS","NOBODY")],RESTRICT_TEAM_BOARD_INVITATIONS_ACTION:["allow",r.or([r.optional("only"),"TEAM_MEMBERS"],"ANYBODY"),"to","be","invited",r.optional(["to",r.optional("the"),"boards",r.or("in","inside"),"the","_TEAM"])],ENABLE_POWERUP:"enable",DISABLE_POWERUP:"disable",THE_POWERUP:["the","_POWERUP"],CHANGE_POWERUP_ENABLED_STATE_ACTION:[r.or("ENABLE_POWERUP","DISABLE_POWERUP"),r.or("THE_POWERUP",["_POWERUP","$POWERUP_NAME"])],SET_BOARD_MEMBER_TYPE_ACTION:["make","the",r.or("member","user"),"BOARD_MEMBER_TYPE",r.optional(["of","the","board"])],REMOVE_MEMBER_FROM_BOARD_ACTION:["remove","the",r.or("member","user"),"from","the","board"],REMOVE_MEMBER_FROM_TEAM_ACTION:["remove","the",r.or("member","user"),"from","the","_TEAM"],REMOVE_UNCONFIRMED_TEAM_INVITATIONS_ACTION:["remove","all","the","unconfirmed","invitations","from","the","_TEAM"],DELETE_TEAM_ACTION:["delete","the","_TEAM"],ENTERPRISE_WHEN:["when",r.or("BOARD_CREATED","BOARD_VISIBILITY_CHANGED","BOARD_REMOVED_FROM_TEAM","ENT_MEMBER_ADDED_TO_BOARD","MEMBER_ADDED_TO_TEAM","UNCONFIRMED_TEAM_INVITATION_ISSUED","POWERUP_ENABLED_STATE_CHANGED","TEAM_CREATED")],ENTERPRISE_TRIGGER:["ENTERPRISE_WHEN"],ENTERPRISE_ACTION:r.or("MOVE_BOARD_TO_TEAM_ACTION","ADD_BOARD_TO_COLLECTION_ACTION","CHANGE_BOARD_VISIBILITY_ACTION","ALLOW_TEAM_MEMBERS_TO_JOIN_ACTION","CLOSE_BOARD_ACTION","REOPEN_BOARD_ACTION","CHANGE_POWERUP_ENABLED_STATE_ACTION","SET_BOARD_MEMBER_TYPE_ACTION","REMOVE_MEMBER_FROM_BOARD_ACTION","REMOVE_MEMBER_FROM_TEAM_ACTION","REMOVE_UNCONFIRMED_TEAM_INVITATIONS_ACTION","RESTRICT_TEAM_MEMBERSHIP_ACTION","RESTRICT_TEAM_BOARD_CREATION_ACTION","RESTRICT_TEAM_BOARD_INVITATIONS_ACTION","DELETE_TEAM_ACTION"),_ENTERPRISE_ACTION_LIST:[r.or("ENTERPRISE_ACTION=>ACTION","ACTION"),r.optional(["_AND?","_ENTERPRISE_ACTION_LIST"])],_ENTERPRISE_TRIGGERED_COMMAND:[r.or("ENTERPRISE_TRIGGER","TRIGGER"),"_COMMA","_ENTERPRISE_ACTION_LIST"],_ENTERPRISE_IMMEDIATE_COMMAND:["_ENTERPRISE_ACTION_LIST"],ENTERPRISE_COMMAND:[r.or("_ENTERPRISE_TRIGGERED_COMMAND","_ENTERPRISE_IMMEDIATE_COMMAND"),r.optional("."),"<END>"]}),o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.correctParseResult=void 0;const r=n(371),o=n(153);function i(e,t,n){r.DEBUG&&r.Logger.info("CORRECTION",{corrected_errors:e.corrections.corrected_errors,tokens:t});const i={corrected_errors:e.corrections.corrected_errors+1,tokens:t.slice(),replaced_tokens:e.corrections.replaced_tokens,added_tokens:e.corrections.added_tokens};Object.keys(n).forEach((function(e){i[e]=i[e].concat(n[e])}));const a=o.parseTokens(t);return a.corrections=i,a}t.correctParseResult=function(e,t,n){return void 0===n&&(n=1),void 0===t&&(t=1),e.corrections={corrected_errors:0,tokens:e.hint?e.hint.tokens:[],replaced_tokens:[],added_tokens:[]},function e(t,n,r){if(t.parse||t.halt_message||!n)return t;const o=function(e){return e.parse&&e.corrections.corrected_errors===t.corrections.corrected_errors+2};const a=function(e,t){return e.parse?!t.parse||e.corrections.corrected_errors<t.corrections.corrected_errors:!t.parse&&e.corrections.corrected_errors<t.corrections.corrected_errors};const s=t.hint;if(!s.expecting.length){const e=s.tokens.slice(0,s.at_token);return i(t,e,{})}if(s.at_token===s.tokens.length){if(!r)return t;const c=[];for(let e=0;e<s.expecting.length;++e){const n=s.tokens.concat(s.expecting[e]),r=i(t,n,{added_tokens:s.at_token});if(r.parse)return r;c.push(r)}let u=null;for(let t=0;t<c.length;++t){const i=c[t],s=e(i,n-1,r-1);if(o(s))return s;u&&!a(s,u)||(u=s)}return u}const c=function(e,t){const n=t.split("").sort(),r={};return e.forEach((function(e){const t=e.split("").sort();let o=0,i=0,a=0,s=0;for(;o<t.length&&i<n.length;)t[o]<n[i]?(++s,++o):t[o]>n[i]?(++s,++i):(++a,++o,++i);for(;o<t.length;)++s,++o;for(;i<n.length;)++s,++i;r[e]=a/(a+s)})),e.slice().sort((function(e,t){return r[t]-r[e]}))}(s.expecting.slice(),s.tokens[s.at_token]);const u=[];for(let e=0;e<c.length;++e){const n=s.tokens.slice();n[s.at_token]=c[e];const r=i(t,n,{replaced_tokens:s.at_token});if(r.parse)return r;u.push(r)}const l=[];if(r)for(let e=0;e<s.expecting.length;++e){const n=s.tokens.slice();n.splice(s.at_token,0,s.expecting[e]);const r=i(t,n,{added_tokens:s.at_token});if(r.parse)return r;l.push(r)}let d=null;for(let t=0;t<u.length;++t){const i=u[t],s=e(i,n-1,r);if(o(s))return s;d&&!a(s,d)||(d=s)}for(let t=0;t<l.length;++t){const i=l[t],s=e(i,n-1,r-1);if(o(s))return s;d&&!a(s,d)||(d=s)}return d}(e,t,n)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.flatten=void 0;const o=r(n(377)),i=n(371),a=n(153),s="__⤣";t.flatten=function e(t,n){switch(typeof t){case"string":case"number":return t;case"object":{if(Array.isArray(t)){if(-1!==t.indexOf(s))return function(e,t){const n=[];for(;;){const r=e.indexOf(t);if(-1===r)return n.push(e),n;n.push(e.slice(0,r)),e=e.slice(r+1)}}(t,s).map((function(t){return e(t,n)}));const r={};let o=0;if(t.forEach((function(t){const a=e(t,n);if(i.DEBUG&&i.Logger.info("flatten array item",{left_symbol:n,branch:t,flat_branch:a}),"object"==typeof a)for(const e in a)r[e]=(r[e]||[]).concat(a[e]),++o})),!o)return!0;for(const e in r)if("ACTION"!==e&&"CONDITION"!==e&&1===r[e].length&&(r[e]=r[e][0]),"ACTION"===e||"CONDITION"===e)r[e].forEach(e=>{e.type=Object.keys(e)[0]});else if("TRIGGER"===e){const t=Object.keys(r[e])[0];r[e].type=t;const n=r[e][t];"object"==typeof n&&(n.type=Object.keys(n)[0])}return r}const r=Object.keys(t);o.default(1===r.length&&(a.isSymbol(r[0])||a.isStringVariable(r[0])||a.isVariableName(r[0])||a.isAtMention(r[0])),`Expecting one symbol and only one symbol as key for object: ${JSON.stringify(t)}`);const c=r[0];let u=e(t[c],c);if(i.DEBUG&&i.Logger.info("flatten object value",{left_symbol:n,parse_tree_key:t[c],value:u}),c===n||a.isHiddenSymbol(c))return u;const l={};return"string"==typeof u&&(a.isStringValue(u)?u=u.slice(1,-1):a.isAtMentionValue(u)&&(u=u.slice(1))),l[c]=u,l}default:return o.default(!1,`Unexpected branch type: ${JSON.stringify(t)}`),!0}}},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!E(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),c=r[n];n<i;c=r[++n])p(c)||!A(c)?a+=" "+c:a+=" "+s(c);return a},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var i,a={};function s(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&t._extend(r,n),T(r.showHidden)&&(r.showHidden=!1),T(r.depth)&&(r.depth=2),T(r.colors)&&(r.colors=!1),T(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),l(r,e,r.depth)}function c(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function u(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&I(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return E(o)||(o=l(e,o,r)),o}var i=function(e,t){if(T(t))return e.stylize("undefined","undefined");if(E(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(m(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(p(t))return e.stylize("null","null")}(e,n);if(i)return i;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),v(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(n);if(0===a.length){if(I(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(g(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(b(n))return e.stylize(Date.prototype.toString.call(n),"date");if(v(n))return d(n)}var u,A="",O=!1,y=["{","}"];(_(n)&&(O=!0,y=["[","]"]),I(n))&&(A=" [Function"+(n.name?": "+n.name:"")+"]");return g(n)&&(A=" "+RegExp.prototype.toString.call(n)),b(n)&&(A=" "+Date.prototype.toUTCString.call(n)),v(n)&&(A=" "+d(n)),0!==a.length||O&&0!=n.length?r<0?g(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=O?function(e,t,n,r,o){for(var i=[],a=0,s=t.length;a<s;++a)C(t,String(a))?i.push(f(e,t,n,r,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(f(e,t,n,r,o,!0))})),i}(e,n,r,s,a):a.map((function(t){return f(e,n,r,s,t,O)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,A,y)):y[0]+A+y[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,o,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),C(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=p(n)?l(e,c.value,null):l(e,c.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),T(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function _(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function p(e){return null===e}function m(e){return"number"==typeof e}function E(e){return"string"==typeof e}function T(e){return void 0===e}function g(e){return A(e)&&"[object RegExp]"===O(e)}function A(e){return"object"==typeof e&&null!==e}function b(e){return A(e)&&"[object Date]"===O(e)}function v(e){return A(e)&&("[object Error]"===O(e)||e instanceof Error)}function I(e){return"function"==typeof e}function O(e){return Object.prototype.toString.call(e)}function y(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(T(i)&&(i=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(i)){var r=e.pid;a[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else a[n]=function(){};return a[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=_,t.isBoolean=h,t.isNull=p,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=E,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=T,t.isRegExp=g,t.isObject=A,t.isDate=b,t.isError=v,t.isFunction=I,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(407);var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(){var e=new Date,t=[y(e.getHours()),y(e.getMinutes()),y(e.getSeconds())].join(":");return[e.getDate(),N[e.getMonth()],t].join(" ")}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",S(),t.format.apply(t,arguments))},t.inherits=n(408),t._extend=function(e,t){if(!t||!A(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var R="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function D(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(R&&e[R]){var t;if("function"!=typeof(t=e[R]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,o)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),R&&Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=R,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};t.apply(this,n).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(D,t,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(406))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&_())}function _(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(_)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.swappable=t.enum_value=t.or_index=t.or=t.hidden=t.optional=t.make_sibling=t.decimal=t.small_numeral=t.ordinal=t.timezone=t.year=t.numeric_date=t.time=t.trap=void 0;const o=r(n(377)),i=n(386),a=n(153);t.trap=function(e,t){return o.default(2===arguments.length),{parse:(n,r,o)=>i.normalizeArray(e).every((function(e){return"!"!==e[0]?-1!==r.indexOf(e):-1===r.indexOf(e.slice(1))}))?o(n,null,t):"_"}},t.time=function(){return{parse:(e,t,n)=>{const r=a.parseTime(e);return r||n(e,"a time, e.g. 8:30am")}}},t.numeric_date=function(){return{parse:(e,t,n)=>{const r=a.parseNumericDate(e);return r||n(e,"a date in numeric format, e.g. 07/29/2016")}}},t.year=function(){return{parse:(e,t,n)=>{const r=a.parseYear(e);return r||n(e,"a year, e.g. 2016")}}},t.timezone=function(){return{parse:(e,t,n)=>{const r=a.parseTimezone(e);return r||n(e,"a timezone (check out [this Trello card](https://trello.com/c/7Qd0SKIe/41-timezones) for examples)")}}},t.ordinal=function(e,t,n){return{parse:(r,o,i)=>{const s=a.parseOrdinal(r);return null===s?i(r,e||"an ordinal number, e.g. third"):"number"==typeof t&&s<t?i(r,e||"a larger ordinal number"):"number"==typeof n&&s>n?i(r,e||"a smaller ordinal number"):s}}},t.small_numeral=function(e,t,n,r){return{parse:(o,i,s)=>{const c=a.parseSmallNumeral(o,t);return null===c?s(o,e||"a number"):"number"==typeof n&&c<n?s(o,e||`a number larger than or equal to ${n}`):"number"==typeof r&&c>r?s(o,e||`a number smaller than or equal to ${r}`):c}}},t.decimal=function(e,t,n,r){return{parse:(o,i,s)=>{const c=a.parseDecimal(o,t);return null===c?s(o,e||"a decimal number"):"number"==typeof n&&c<n?s(o,e||`a number larger than or equal to ${n}`):"number"==typeof r&&c>r?s(o,e||`a number smaller than or equal to ${r}`):c}}};t.make_sibling=()=>({parse:()=>"__⤣"}),t.optional=function(e){return o.default(1===arguments.length),{parse:(t,n,r)=>{const o=t.slice(),i=n.slice(),s=a.parser(o,e,i,r);return null===s?"_":(t.splice(0,t.length-o.length),n.push(...i.slice(n.length)),s)}}},t.hidden=function(e){return o.default(1===arguments.length),{parse:(t,n,r)=>a.parser(t,e,n,(function(e){return r(e)}))}},t.or=function(...e){const t=[...e];return{parse:(e,n,r)=>{for(let o=0;o<t.length;++o){const i=e.slice(),s=n.slice(),c=a.parser(i,t[o],s,r);if(null!=c)return e.splice(0,e.length-i.length),n.push(...s.slice(n.length)),c}return null}}},t.or_index=function(...e){const t=[...e];return{parse:(e,n,r)=>{for(let o=0;o<t.length;++o){const i=e.slice(),s=n.slice();if(a.parser(i,t[o],s,r))return e.splice(0,e.length-i.length),n.push(...s.slice(n.length)),o}return null}}},t.enum_value=function(...e){const t=[...e];return{parse:(e,n,r)=>{for(const o of t){const t=e.slice(),i=n.slice();if(a.parser(t,o,i,r))return e.splice(0,e.length-t.length),n.push(...i.slice(n.length)),o}return null}}},t.swappable=function(e,t,n){return{parse:(r,i,s)=>{o.default(!("string"==typeof e&&a.isOptional(e)||"function"==typeof e.parse&&"optional"===e.parse.name),"Setting the first argument in a swappable as optional prevents the swap from being accepted.");let c=r.slice(),u=i.slice(),l=a.parser(c,e,u,s),d=n?a.parser(c,n,u,s):[],f=a.parser(c,t,u,s);return l&&f&&d?(r.splice(0,r.length-c.length),i.push(...u.slice(i.length)),[].concat(l,f,d)):(c=r.slice(),u=i.slice(),d=a.parser(c,t,u,s),f=n?a.parser(c,n,u,s):[],l=a.parser(c,e,u,s),d&&f&&l?(r.splice(0,r.length-c.length),i.push(...u.slice(i.length)),[].concat(d,f,l)):null)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnterpriseCommand=t.parseCondition=t.parseCommand=void 0;const r=n(153);t.parseCommand=(e,t)=>r.parseTokens(r.tokenize(e),t);t.parseCondition=e=>t.parseCommand(e,"CONDITION_LIST");t.parseEnterpriseCommand=e=>t.parseCommand(e,"ENTERPRISE_COMMAND")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseInlineDate=void 0;const r=n(153);t.parseInlineDate=function(e,t={}){var n,o,i;const a=r.tokenize(e),s=r.tokenize((null==t?void 0:t.after)||"");for(let c=0;c<a.length;++c){if(s.some((e,t)=>a[c+t]!==e)){if(null==t?void 0:t.at_start)break;continue}const u=r.parseTokens(a.slice(c+s.length),(null==t?void 0:t.at_end)?"END_DATE_TIME":"INLINE_DATE_TIME");if(null==u?void 0:u.parse){const t=r.tokenizeIndices(e).slice(c,u.extra_tokens?-u.extra_tokens.length:void 0);return u.match={source_text:e,matched_text:e.slice(null===(n=t[0])||void 0===n?void 0:n.from,null===(o=t.slice(-1)[0])||void 0===o?void 0:o.to),match_pos:null===(i=t[0])||void 0===i?void 0:i.from},u}if(null==t?void 0:t.at_start)break}return{}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDecimal=t.parseSmallNumeral=t.parseOrdinal=void 0;const r={"1st":1,first:1,"2nd":2,second:2,"3rd":3,third:3,"4th":4,fourth:4,"5th":5,fifth:5,"6th":6,sixth:6,"7th":7,seventh:7,"8th":8,eighth:8,"9th":9,ninth:9,"10th":10,tenth:10,"11th":11,eleventh:11,"12th":12,twelfth:12,"13th":13,thirteenth:13,"14th":14,fourteenth:14,"15th":15,fifteenth:15,"16th":16,sixteenth:16,"17th":17,seventeenth:17,"18th":18,eighteenth:18,"19th":19,nineteenth:19,"20th":20,twentieth:20,"21st":21,"twenty-first":21,twentyfirst:21,"22nd":22,"twenty-second":22,twentysecond:22,"23rd":23,"twenty-third":23,twentythird:23,"24th":24,"twenty-fourth":24,twentyfourth:24,"25th":25,"twenty-fifth":25,twentyfifth:25,"26th":26,"twenty-sixth":26,twentysixth:26,"27th":27,"twenty-seventh":27,twentyseventh:27,"28th":28,"twenty-eighth":28,twentyeighth:28,"29th":29,"twenty-ninth":29,twentyninth:29,"30th":30,thirtieth:30,"31st":31,"thirty-first":31,thirtyfirst:31};t.parseOrdinal=function(e){const t=r[e[0]];return t?(e.shift(),t):null};const o={zero:0,one:1,a:1,an:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19,twenty:20,"twenty-one":21,twentyone:21,"twenty-two":22,twentytwo:22,"twenty-three":23,twentythree:23,"twenty-four":24,twentyfour:24,"twenty-five":25,twentyfive:25,"twenty-six":26,twentysix:26,"twenty-seven":27,twentyseven:27,"twenty-eight":28,twentyeight:28,"twenty-nine":29,twentynine:29,thirty:30,sixty:60,ninety:90};t.parseSmallNumeral=function(e,t=!1){let n=o[e[0]];if(void 0===n)try{if(n=parseInt(e[0]),Number.isNaN(n)||!e[0].match(/^[+-]?\d+$/))return null;if(n<0&&!t)return null}catch(e){return null}return e.shift(),n},t.parseDecimal=function(e,t=!1){let n;try{if(n=parseFloat(e[0]),Number.isNaN(n)||!e[0].match(/^[+-]?\d+(?:\.\d+)?$/))return null;if(n<0&&!t)return null}catch(e){return null}return e.shift(),n}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parser=void 0;const o=r(n(377)),i=n(371),a=n(153);function s(e){return`(${e.join(", ")})`}function c(e){switch(typeof e){case"string":return e;case"object":return Array.isArray(e)?`[${e.map((function(e){return c(e)})).join(", ")}]`:"function"==typeof e.parse?`${e.parse.name}()`:`expecting_function(${JSON.stringify(e)})`;default:return`invalid_type_for_rule(${JSON.stringify(e)})`}}t.parser=function e(t,n,r,u){switch(i.DEBUG&&i.Logger.info("parser",{numTokens:t.length,firstToken:t.length&&t[0],seen:s(r),rule:c(n)}),typeof n){case"string":{if(a.isEnd(n))return t.length?u(t,null):n;if(a.isInlineEnd(n))return n;if(a.isOptional(n))return a.optional(a.getOptional(n)).parse(t,r,u);if(a.isStringVariable(n)){if(!t[0]||'"'!==t[0][0])return u(t,'quoted text, e.g. "Name"');const e={};return e[n]=t.shift(),e}if(a.isVariableName(n)){if(!t[0]||!a.isVariableNameValue(t[0]))return u(t,"a variable name, e.g. {{name}}");const e={};return e[n.slice(1,-1)]=t.shift(),e}if(a.isAtMention(n)){if(!t[0]||"@"!==t[0][0])return u(t,"a mention, e.g. @username");const e={};return e[n]=t.shift(),e}if(a.isTerminal(n))return t[0]===n?t.shift():u(t,n);const l=function(e,t,n){const r=e.split(t);return n&&n<r.length?r.slice(0,n).concat([r.slice(n).join(t)]):r}(n,"?",1);if(l.length>1){const s=l[0],c=function(e,t,n){const r=e.split(t);return n&&n<r.length?[r.slice(0,-n).join(t)].concat(r.slice(-n)):r}(l[1],":"),d=c[0],f=c[1];o.default(a.isSymbol(s),`Not a symbol: ${s} in conditional ${n}`);const _=-1!==r.indexOf(s);return i.DEBUG&&i.Logger.info("conditional",{rule:n,found:_}),_?e(t,d,r,u):f?e(t,f,r,u):null}let d;const f=n.split("=>");if(2===f.length&&a.isSymbol(f[0])&&a.isSymbol(f[1])?(d=f[1],n=a.getCommandGrammar()[f[0]]):(o.default(a.isSymbol(n),`Not a symbol: ${n}`),d=n,n=a.getCommandGrammar()[d]),!n)return o.default(!1,`Symbol '${d}' not found.`),null;const _={};return _[d]=e(t,n,r,u),null===_[d]?(i.DEBUG&&i.Logger.info("-prune",{numTokens:t.length,firstToken:t.length&&t[0],seen:s(r),symbol:d,rule:c(n)}),null):(i.DEBUG&&i.Logger.info("+accept",{numTokens:t.length,firstToken:t.length&&t[0],seen:s(r),symbol:d,rule:c(n)}),r.push(d),_)}case"object":if(Array.isArray(n)){const o=t.slice(),i=r.slice(),a=[];for(let t=0;t<n.length;++t){const r=e(o,n[t],i,u);if(null===r)return null;a.push(r)}return t.splice(0,t.length-o.length),r.push(...i.slice(r.length)),a}return o.default("function"==typeof n.parse,`Cannot handle rule: ${JSON.stringify(n)}`),n.parse(t,r,u);default:return o.default(!1,`Cannot handle rule: ${JSON.stringify(n)}`),u(t,"(internal error)")}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseYear=t.parseNumericDate=t.getTimezoneName=t.parseTimezone=t.parseTime=void 0;const o=r(n(415)),i={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};function a(e){if(e.length){let t=o.default[e[0]];if(t)return e.shift(),t;if(e.length>1&&(t=o.default[`${e[0]}_${e[1]}`]))return e.splice(0,2),t}return null}t.parseTime=function(e){let t=0,n=!1;"at"!==e[0]&&"@"!==e[0]||(n=!0,++t);const r=[],o=e[t]||"",s=o.match(/^(@)?(0?[0-9]|1[0-9]|2[0-3])(:[0-5][0-9])?([ap]m)?$/)||o.match(/^(@)?(0?[0-9]|1[0-9]|2[0-3])(\.[0-5][0-9])([ap]m)$/);if(s){if(++t,s[1]&&(n=!0),r.push({HOUR:parseInt(s[2])}),s[3]&&(r.push({MINUTES:parseInt(s[3].slice(1))}),n=!0),"am"===s[4]?(r.push({AM:"am"}),n=!0):"pm"===s[4]?(r.push({PM:"pm"}),n=!0):"am"===e[t]?(r.push({AM:"am"}),n=!0,++t):"pm"===e[t]&&(r.push({PM:"pm"}),n=!0,++t),!n)return null}else{if(!(o in i))return null;if(++t,r.push({HOUR:i[o]}),"am"===e[t]?(r.push({AM:"am"}),n=!0,++t):"pm"===e[t]&&(r.push({PM:"pm"}),n=!0,++t),!n)return null}e.splice(0,t);const c=a(e);return c&&r.push({TZ:c}),r},t.parseTimezone=a,t.getTimezoneName=function(e){return o.default[e.toLowerCase()]},t.parseNumericDate=function(e){const t=e[0]||"";let n=t.match(/^(0?[1-9]|1[0-9]|2[0-9]|3[0-1])[\/.-](0?[1-9]|1[0-9]|2[0-9]|3[0-1])(?:[\/.-]((?:19|20)?[0-9][0-9]))?$/);if(n){const t=parseInt(n[1]),r=parseInt(n[2]);let o=n[3]?parseInt(n[3]):void 0;if(t<=12||r<=12){e.shift();const n=[{MONTH_OR_DAY:t},{DAY_OR_MONTH:r}];return o&&(o<100&&(o+=2e3),n.push({YEAR:o})),n}}else if(n=t.match(/^((?:19|20)[0-9][0-9])[\/.-]([1-9]|0[1-9]|1[0-2])[\/.-](0?[1-9]|1[0-9]|2[0-9]|3[0-1])$/))return e.shift(),[{YEAR:parseInt(n[1])},{MONTH:parseInt(n[2])},{DAY:parseInt(n[3])}];return null},t.parseYear=function(e){const t=(e[0]||"").match(/^((?:19|20)?[0-9][0-9])?$/);if(t){e.shift();let n=parseInt(t[1]);return n<100&&(n+=2e3),n}return null}},function(e){e.exports=JSON.parse('{"british":"Europe/London","bst":"Europe/London","cest":"Europe/Brussels","mesz":"Europe/Brussels","cet":"Europe/Brussels","mez":"Europe/Brussels","eest":"Europe/Athens","oesz":"Europe/Athens","eet":"Europe/Athens","oez":"Europe/Athens","fet":"Europe/Minsk","gmt":"Europe/London","irish":"Europe/Dublin","ireland":"Europe/Dublin","msd":"Europe/Moscow","msk":"Europe/Moscow","samt":"Europe/Samara","west":"Europe/Lisbon","wet":"Europe/Lisbon","atlantic":"America/Halifax","at":"America/Halifax","adt":"America/Halifax","haa":"America/Halifax","ast":"America/Halifax","hna":"America/Halifax","alaska":"America/Anchorage","akdt":"America/Anchorage","akst":"America/Anchorage","central":"America/Chicago","ct":"America/Chicago","cdt":"America/Chicago","hac":"America/Chicago","cst":"America/Chicago","hnc":"America/Chicago","eastern":"America/New_York","et":"America/New_York","edt":"America/New_York","hae":"America/New_York","est":"America/New_York","hne":"America/New_York","hawaii":"America/Adak","hadt":"America/Adak","hast":"America/Adak","mountain":"America/Denver","mt":"America/Denver","mdt":"America/Denver","har":"America/Denver","mst":"America/Denver","hnr":"America/Denver","arizona":"America/Phoenix","ndt":"America/St_Johns","nst":"America/St_Johns","pacific":"America/Los_Angeles","pt":"America/Los_Angeles","pdt":"America/Los_Angeles","hap":"America/Los_Angeles","pst":"America/Los_Angeles","hnp":"America/Los_Angeles","pmdt":"America/Miquelon","pmst":"America/Miquelon","wgst":"America/Godthab","wgt":"America/Godthab","act":"Australia/Adelaide","acdt":"Australia/Adelaide","acst":"Australia/Adelaide","acwst":"Australia/Eucla","aet":"Australia/Sydney","aedt":"Australia/Sydney","aest":"Australia/Sydney","awdt":"Australia/Perth","awst":"Australia/Perth","lhdt":"Australia/Lord_Howe","lhst":"Australia/Lord_Howe","sast":"Africa/Johannesburg","africa/abidjan":"Africa/Abidjan","abidjan":"Africa/Abidjan","africa/accra":"Africa/Accra","accra":"Africa/Accra","africa/algiers":"Africa/Algiers","algiers":"Africa/Algiers","africa/bissau":"Africa/Bissau","bissau":"Africa/Bissau","africa/cairo":"Africa/Cairo","cairo":"Africa/Cairo","africa/casablanca":"Africa/Casablanca","casablanca":"Africa/Casablanca","africa/ceuta":"Africa/Ceuta","ceuta":"Africa/Ceuta","africa/el_aaiun":"Africa/El_Aaiun","el_aaiun":"Africa/El_Aaiun","africa/johannesburg":"Africa/Johannesburg","johannesburg":"Africa/Johannesburg","africa/khartoum":"Africa/Khartoum","khartoum":"Africa/Khartoum","africa/lagos":"Africa/Lagos","lagos":"Africa/Lagos","africa/maputo":"Africa/Maputo","maputo":"Africa/Maputo","africa/monrovia":"Africa/Monrovia","monrovia":"Africa/Monrovia","africa/nairobi":"Africa/Nairobi","nairobi":"Africa/Nairobi","africa/ndjamena":"Africa/Ndjamena","ndjamena":"Africa/Ndjamena","africa/tripoli":"Africa/Tripoli","tripoli":"Africa/Tripoli","africa/tunis":"Africa/Tunis","tunis":"Africa/Tunis","africa/windhoek":"Africa/Windhoek","windhoek":"Africa/Windhoek","america/adak":"America/Adak","adak":"America/Adak","america/anchorage":"America/Anchorage","anchorage":"America/Anchorage","america/araguaina":"America/Araguaina","araguaina":"America/Araguaina","america/argentina/buenos_aires":"America/Argentina/Buenos_Aires","buenos_aires":"America/Argentina/Buenos_Aires","america/argentina/catamarca":"America/Argentina/Catamarca","catamarca":"America/Argentina/Catamarca","america/argentina/cordoba":"America/Argentina/Cordoba","cordoba":"America/Argentina/Cordoba","america/argentina/jujuy":"America/Argentina/Jujuy","jujuy":"America/Argentina/Jujuy","america/argentina/la_rioja":"America/Argentina/La_Rioja","la_rioja":"America/Argentina/La_Rioja","america/argentina/mendoza":"America/Argentina/Mendoza","mendoza":"America/Argentina/Mendoza","america/argentina/rio_gallegos":"America/Argentina/Rio_Gallegos","rio_gallegos":"America/Argentina/Rio_Gallegos","america/argentina/salta":"America/Argentina/Salta","salta":"America/Argentina/Salta","america/argentina/san_juan":"America/Argentina/San_Juan","san_juan":"America/Argentina/San_Juan","america/argentina/san_luis":"America/Argentina/San_Luis","san_luis":"America/Argentina/San_Luis","america/argentina/tucuman":"America/Argentina/Tucuman","tucuman":"America/Argentina/Tucuman","america/argentina/ushuaia":"America/Argentina/Ushuaia","ushuaia":"America/Argentina/Ushuaia","america/asuncion":"America/Asuncion","asuncion":"America/Asuncion","america/atikokan":"America/Atikokan","atikokan":"America/Atikokan","america/bahia":"America/Bahia","bahia":"America/Bahia","america/bahia_banderas":"America/Bahia_Banderas","bahia_banderas":"America/Bahia_Banderas","america/barbados":"America/Barbados","barbados":"America/Barbados","america/belem":"America/Belem","belem":"America/Belem","america/belize":"America/Belize","belize":"America/Belize","america/blanc-sablon":"America/Blanc-Sablon","blanc-sablon":"America/Blanc-Sablon","america/boa_vista":"America/Boa_Vista","boa_vista":"America/Boa_Vista","america/bogota":"America/Bogota","bogota":"America/Bogota","america/boise":"America/Boise","boise":"America/Boise","america/cambridge_bay":"America/Cambridge_Bay","cambridge_bay":"America/Cambridge_Bay","america/campo_grande":"America/Campo_Grande","campo_grande":"America/Campo_Grande","america/cancun":"America/Cancun","cancun":"America/Cancun","america/caracas":"America/Caracas","caracas":"America/Caracas","america/cayenne":"America/Cayenne","cayenne":"America/Cayenne","america/chicago":"America/Chicago","chicago":"America/Chicago","america/chihuahua":"America/Chihuahua","chihuahua":"America/Chihuahua","america/costa_rica":"America/Costa_Rica","costa_rica":"America/Costa_Rica","america/creston":"America/Creston","creston":"America/Creston","america/cuiaba":"America/Cuiaba","cuiaba":"America/Cuiaba","america/curacao":"America/Curacao","curacao":"America/Curacao","america/danmarkshavn":"America/Danmarkshavn","danmarkshavn":"America/Danmarkshavn","america/dawson":"America/Dawson","dawson":"America/Dawson","america/dawson_creek":"America/Dawson_Creek","dawson_creek":"America/Dawson_Creek","america/denver":"America/Denver","denver":"America/Denver","america/detroit":"America/Detroit","detroit":"America/Detroit","america/edmonton":"America/Edmonton","edmonton":"America/Edmonton","america/eirunepe":"America/Eirunepe","eirunepe":"America/Eirunepe","america/el_salvador":"America/El_Salvador","el_salvador":"America/El_Salvador","america/fort_nelson":"America/Fort_Nelson","fort_nelson":"America/Fort_Nelson","america/fortaleza":"America/Fortaleza","fortaleza":"America/Fortaleza","america/glace_bay":"America/Glace_Bay","glace_bay":"America/Glace_Bay","america/godthab":"America/Godthab","godthab":"America/Godthab","america/goose_bay":"America/Goose_Bay","goose_bay":"America/Goose_Bay","america/grand_turk":"America/Grand_Turk","grand_turk":"America/Grand_Turk","america/guatemala":"America/Guatemala","guatemala":"America/Guatemala","america/guayaquil":"America/Guayaquil","guayaquil":"America/Guayaquil","america/guyana":"America/Guyana","guyana":"America/Guyana","america/halifax":"America/Halifax","halifax":"America/Halifax","america/havana":"America/Havana","havana":"America/Havana","america/hermosillo":"America/Hermosillo","hermosillo":"America/Hermosillo","america/indiana/indianapolis":"America/Indiana/Indianapolis","indianapolis":"America/Indiana/Indianapolis","america/indiana/knox":"America/Indiana/Knox","knox":"America/Indiana/Knox","america/indiana/marengo":"America/Indiana/Marengo","marengo":"America/Indiana/Marengo","america/indiana/petersburg":"America/Indiana/Petersburg","petersburg":"America/Indiana/Petersburg","america/indiana/tell_city":"America/Indiana/Tell_City","tell_city":"America/Indiana/Tell_City","america/indiana/vevay":"America/Indiana/Vevay","vevay":"America/Indiana/Vevay","america/indiana/vincennes":"America/Indiana/Vincennes","vincennes":"America/Indiana/Vincennes","america/indiana/winamac":"America/Indiana/Winamac","winamac":"America/Indiana/Winamac","america/inuvik":"America/Inuvik","inuvik":"America/Inuvik","america/iqaluit":"America/Iqaluit","iqaluit":"America/Iqaluit","america/jamaica":"America/Jamaica","jamaica":"America/Jamaica","america/juneau":"America/Juneau","juneau":"America/Juneau","america/kentucky/louisville":"America/Kentucky/Louisville","louisville":"America/Kentucky/Louisville","america/kentucky/monticello":"America/Kentucky/Monticello","monticello":"America/Kentucky/Monticello","america/la_paz":"America/La_Paz","la_paz":"America/La_Paz","america/lima":"America/Lima","lima":"America/Lima","america/los_angeles":"America/Los_Angeles","los_angeles":"America/Los_Angeles","america/maceio":"America/Maceio","maceio":"America/Maceio","america/managua":"America/Managua","managua":"America/Managua","america/manaus":"America/Manaus","manaus":"America/Manaus","america/martinique":"America/Martinique","martinique":"America/Martinique","america/matamoros":"America/Matamoros","matamoros":"America/Matamoros","america/mazatlan":"America/Mazatlan","mazatlan":"America/Mazatlan","america/menominee":"America/Menominee","menominee":"America/Menominee","america/merida":"America/Merida","merida":"America/Merida","america/metlakatla":"America/Metlakatla","metlakatla":"America/Metlakatla","america/mexico_city":"America/Mexico_City","mexico_city":"America/Mexico_City","america/miquelon":"America/Miquelon","miquelon":"America/Miquelon","america/moncton":"America/Moncton","moncton":"America/Moncton","america/monterrey":"America/Monterrey","monterrey":"America/Monterrey","america/montevideo":"America/Montevideo","montevideo":"America/Montevideo","america/nassau":"America/Nassau","nassau":"America/Nassau","america/new_york":"America/New_York","new_york":"America/New_York","america/nipigon":"America/Nipigon","nipigon":"America/Nipigon","america/nome":"America/Nome","nome":"America/Nome","america/noronha":"America/Noronha","noronha":"America/Noronha","america/north_dakota/beulah":"America/North_Dakota/Beulah","beulah":"America/North_Dakota/Beulah","america/north_dakota/center":"America/North_Dakota/Center","center":"America/North_Dakota/Center","america/north_dakota/new_salem":"America/North_Dakota/New_Salem","new_salem":"America/North_Dakota/New_Salem","america/ojinaga":"America/Ojinaga","ojinaga":"America/Ojinaga","america/panama":"America/Panama","panama":"America/Panama","america/pangnirtung":"America/Pangnirtung","pangnirtung":"America/Pangnirtung","america/paramaribo":"America/Paramaribo","paramaribo":"America/Paramaribo","america/phoenix":"America/Phoenix","phoenix":"America/Phoenix","america/port-au-prince":"America/Port-au-Prince","port-au-prince":"America/Port-au-Prince","america/port_of_spain":"America/Port_of_Spain","port_of_spain":"America/Port_of_Spain","america/porto_velho":"America/Porto_Velho","porto_velho":"America/Porto_Velho","america/puerto_rico":"America/Puerto_Rico","puerto_rico":"America/Puerto_Rico","america/rainy_river":"America/Rainy_River","rainy_river":"America/Rainy_River","america/rankin_inlet":"America/Rankin_Inlet","rankin_inlet":"America/Rankin_Inlet","america/recife":"America/Recife","recife":"America/Recife","america/regina":"America/Regina","regina":"America/Regina","america/resolute":"America/Resolute","resolute":"America/Resolute","america/rio_branco":"America/Rio_Branco","rio_branco":"America/Rio_Branco","america/santarem":"America/Santarem","santarem":"America/Santarem","america/santiago":"America/Santiago","santiago":"America/Santiago","america/santo_domingo":"America/Santo_Domingo","santo_domingo":"America/Santo_Domingo","america/sao_paulo":"America/Sao_Paulo","sao_paulo":"America/Sao_Paulo","america/scoresbysund":"America/Scoresbysund","scoresbysund":"America/Scoresbysund","america/sitka":"America/Sitka","sitka":"America/Sitka","america/st_johns":"America/St_Johns","st_johns":"America/St_Johns","america/swift_current":"America/Swift_Current","swift_current":"America/Swift_Current","america/tegucigalpa":"America/Tegucigalpa","tegucigalpa":"America/Tegucigalpa","america/thule":"America/Thule","thule":"America/Thule","america/thunder_bay":"America/Thunder_Bay","thunder_bay":"America/Thunder_Bay","america/tijuana":"America/Tijuana","tijuana":"America/Tijuana","america/toronto":"America/Toronto","toronto":"America/Toronto","america/vancouver":"America/Vancouver","vancouver":"America/Vancouver","america/whitehorse":"America/Whitehorse","whitehorse":"America/Whitehorse","america/winnipeg":"America/Winnipeg","winnipeg":"America/Winnipeg","america/yakutat":"America/Yakutat","yakutat":"America/Yakutat","america/yellowknife":"America/Yellowknife","yellowknife":"America/Yellowknife","antarctica/casey":"Antarctica/Casey","casey":"Antarctica/Casey","antarctica/davis":"Antarctica/Davis","davis":"Antarctica/Davis","antarctica/dumontdurville":"Antarctica/DumontDUrville","dumontdurville":"Antarctica/DumontDUrville","antarctica/macquarie":"Antarctica/Macquarie","macquarie":"Antarctica/Macquarie","antarctica/mawson":"Antarctica/Mawson","mawson":"Antarctica/Mawson","antarctica/palmer":"Antarctica/Palmer","palmer":"Antarctica/Palmer","antarctica/rothera":"Antarctica/Rothera","rothera":"Antarctica/Rothera","antarctica/syowa":"Antarctica/Syowa","syowa":"Antarctica/Syowa","antarctica/troll":"Antarctica/Troll","troll":"Antarctica/Troll","antarctica/vostok":"Antarctica/Vostok","vostok":"Antarctica/Vostok","asia/almaty":"Asia/Almaty","almaty":"Asia/Almaty","asia/amman":"Asia/Amman","amman":"Asia/Amman","asia/anadyr":"Asia/Anadyr","anadyr":"Asia/Anadyr","asia/aqtau":"Asia/Aqtau","aqtau":"Asia/Aqtau","asia/aqtobe":"Asia/Aqtobe","aqtobe":"Asia/Aqtobe","asia/ashgabat":"Asia/Ashgabat","ashgabat":"Asia/Ashgabat","asia/baghdad":"Asia/Baghdad","baghdad":"Asia/Baghdad","asia/baku":"Asia/Baku","baku":"Asia/Baku","asia/bangkok":"Asia/Bangkok","bangkok":"Asia/Bangkok","asia/barnaul":"Asia/Barnaul","barnaul":"Asia/Barnaul","asia/beirut":"Asia/Beirut","beirut":"Asia/Beirut","asia/bishkek":"Asia/Bishkek","bishkek":"Asia/Bishkek","asia/brunei":"Asia/Brunei","brunei":"Asia/Brunei","asia/chita":"Asia/Chita","chita":"Asia/Chita","asia/choibalsan":"Asia/Choibalsan","choibalsan":"Asia/Choibalsan","asia/colombo":"Asia/Colombo","colombo":"Asia/Colombo","asia/damascus":"Asia/Damascus","damascus":"Asia/Damascus","asia/dhaka":"Asia/Dhaka","dhaka":"Asia/Dhaka","asia/dili":"Asia/Dili","dili":"Asia/Dili","asia/dubai":"Asia/Dubai","dubai":"Asia/Dubai","asia/dushanbe":"Asia/Dushanbe","dushanbe":"Asia/Dushanbe","asia/gaza":"Asia/Gaza","gaza":"Asia/Gaza","asia/hebron":"Asia/Hebron","hebron":"Asia/Hebron","asia/ho_chi_minh":"Asia/Ho_Chi_Minh","ho_chi_minh":"Asia/Ho_Chi_Minh","asia/hong_kong":"Asia/Hong_Kong","hong_kong":"Asia/Hong_Kong","hkt":"Asia/Hong_Kong","asia/hovd":"Asia/Hovd","hovd":"Asia/Hovd","asia/irkutsk":"Asia/Irkutsk","irkutsk":"Asia/Irkutsk","asia/jakarta":"Asia/Jakarta","jakarta":"Asia/Jakarta","asia/jayapura":"Asia/Jayapura","jayapura":"Asia/Jayapura","asia/jerusalem":"Asia/Jerusalem","jerusalem":"Asia/Jerusalem","asia/kabul":"Asia/Kabul","kabul":"Asia/Kabul","asia/kamchatka":"Asia/Kamchatka","kamchatka":"Asia/Kamchatka","asia/karachi":"Asia/Karachi","karachi":"Asia/Karachi","asia/kathmandu":"Asia/Kathmandu","kathmandu":"Asia/Kathmandu","asia/khandyga":"Asia/Khandyga","khandyga":"Asia/Khandyga","asia/kolkata":"Asia/Kolkata","kolkata":"Asia/Kolkata","india":"Asia/Kolkata","ist":"Asia/Kolkata","asia/krasnoyarsk":"Asia/Krasnoyarsk","krasnoyarsk":"Asia/Krasnoyarsk","asia/kuala_lumpur":"Asia/Kuala_Lumpur","kuala_lumpur":"Asia/Kuala_Lumpur","asia/kuching":"Asia/Kuching","kuching":"Asia/Kuching","asia/macau":"Asia/Macau","macau":"Asia/Macau","asia/magadan":"Asia/Magadan","magadan":"Asia/Magadan","asia/makassar":"Asia/Makassar","makassar":"Asia/Makassar","asia/manila":"Asia/Manila","manila":"Asia/Manila","asia/nicosia":"Asia/Nicosia","nicosia":"Asia/Nicosia","asia/novokuznetsk":"Asia/Novokuznetsk","novokuznetsk":"Asia/Novokuznetsk","asia/novosibirsk":"Asia/Novosibirsk","novosibirsk":"Asia/Novosibirsk","asia/omsk":"Asia/Omsk","omsk":"Asia/Omsk","asia/oral":"Asia/Oral","oral":"Asia/Oral","asia/pontianak":"Asia/Pontianak","pontianak":"Asia/Pontianak","asia/pyongyang":"Asia/Pyongyang","pyongyang":"Asia/Pyongyang","asia/qatar":"Asia/Qatar","qatar":"Asia/Qatar","asia/qyzylorda":"Asia/Qyzylorda","qyzylorda":"Asia/Qyzylorda","asia/rangoon":"Asia/Rangoon","rangoon":"Asia/Rangoon","asia/riyadh":"Asia/Riyadh","riyadh":"Asia/Riyadh","asia/sakhalin":"Asia/Sakhalin","sakhalin":"Asia/Sakhalin","asia/samarkand":"Asia/Samarkand","samarkand":"Asia/Samarkand","asia/seoul":"Asia/Seoul","seoul":"Asia/Seoul","asia/shanghai":"Asia/Shanghai","shanghai":"Asia/Shanghai","asia/singapore":"Asia/Singapore","singapore":"Asia/Singapore","asia/srednekolymsk":"Asia/Srednekolymsk","srednekolymsk":"Asia/Srednekolymsk","asia/taipei":"Asia/Taipei","taipei":"Asia/Taipei","asia/tashkent":"Asia/Tashkent","tashkent":"Asia/Tashkent","asia/tbilisi":"Asia/Tbilisi","tbilisi":"Asia/Tbilisi","asia/tehran":"Asia/Tehran","tehran":"Asia/Tehran","asia/thimphu":"Asia/Thimphu","thimphu":"Asia/Thimphu","asia/tokyo":"Asia/Tokyo","tokyo":"Asia/Tokyo","asia/ulaanbaatar":"Asia/Ulaanbaatar","ulaanbaatar":"Asia/Ulaanbaatar","asia/urumqi":"Asia/Urumqi","urumqi":"Asia/Urumqi","asia/ust-nera":"Asia/Ust-Nera","ust-nera":"Asia/Ust-Nera","asia/vladivostok":"Asia/Vladivostok","vladivostok":"Asia/Vladivostok","asia/yakutsk":"Asia/Yakutsk","yakutsk":"Asia/Yakutsk","asia/yekaterinburg":"Asia/Yekaterinburg","yekaterinburg":"Asia/Yekaterinburg","asia/yerevan":"Asia/Yerevan","yerevan":"Asia/Yerevan","atlantic/azores":"Atlantic/Azores","azores":"Atlantic/Azores","atlantic/bermuda":"Atlantic/Bermuda","bermuda":"Atlantic/Bermuda","atlantic/canary":"Atlantic/Canary","canary":"Atlantic/Canary","atlantic/cape_verde":"Atlantic/Cape_Verde","cape_verde":"Atlantic/Cape_Verde","atlantic/faroe":"Atlantic/Faroe","faroe":"Atlantic/Faroe","atlantic/madeira":"Atlantic/Madeira","madeira":"Atlantic/Madeira","atlantic/reykjavik":"Atlantic/Reykjavik","reykjavik":"Atlantic/Reykjavik","atlantic/south_georgia":"Atlantic/South_Georgia","south_georgia":"Atlantic/South_Georgia","atlantic/stanley":"Atlantic/Stanley","stanley":"Atlantic/Stanley","australia/adelaide":"Australia/Adelaide","adelaide":"Australia/Adelaide","australia/brisbane":"Australia/Brisbane","brisbane":"Australia/Brisbane","australia/broken_hill":"Australia/Broken_Hill","broken_hill":"Australia/Broken_Hill","australia/currie":"Australia/Currie","currie":"Australia/Currie","australia/darwin":"Australia/Darwin","darwin":"Australia/Darwin","australia/eucla":"Australia/Eucla","eucla":"Australia/Eucla","australia/hobart":"Australia/Hobart","hobart":"Australia/Hobart","australia/lindeman":"Australia/Lindeman","lindeman":"Australia/Lindeman","australia/lord_howe":"Australia/Lord_Howe","lord_howe":"Australia/Lord_Howe","australia/melbourne":"Australia/Melbourne","melbourne":"Australia/Melbourne","australia/perth":"Australia/Perth","perth":"Australia/Perth","australia/sydney":"Australia/Sydney","sydney":"Australia/Sydney","europe/amsterdam":"Europe/Amsterdam","amsterdam":"Europe/Amsterdam","europe/andorra":"Europe/Andorra","andorra":"Europe/Andorra","europe/astrakhan":"Europe/Astrakhan","astrakhan":"Europe/Astrakhan","europe/athens":"Europe/Athens","athens":"Europe/Athens","europe/belgrade":"Europe/Belgrade","belgrade":"Europe/Belgrade","europe/berlin":"Europe/Berlin","berlin":"Europe/Berlin","europe/brussels":"Europe/Brussels","brussels":"Europe/Brussels","europe/bucharest":"Europe/Bucharest","bucharest":"Europe/Bucharest","europe/budapest":"Europe/Budapest","budapest":"Europe/Budapest","europe/chisinau":"Europe/Chisinau","chisinau":"Europe/Chisinau","europe/copenhagen":"Europe/Copenhagen","copenhagen":"Europe/Copenhagen","europe/dublin":"Europe/Dublin","dublin":"Europe/Dublin","europe/gibraltar":"Europe/Gibraltar","gibraltar":"Europe/Gibraltar","europe/helsinki":"Europe/Helsinki","helsinki":"Europe/Helsinki","europe/istanbul":"Europe/Istanbul","istanbul":"Europe/Istanbul","europe/kaliningrad":"Europe/Kaliningrad","kaliningrad":"Europe/Kaliningrad","europe/kiev":"Europe/Kiev","kiev":"Europe/Kiev","europe/lisbon":"Europe/Lisbon","lisbon":"Europe/Lisbon","europe/london":"Europe/London","london":"Europe/London","europe/luxembourg":"Europe/Luxembourg","luxembourg":"Europe/Luxembourg","europe/madrid":"Europe/Madrid","madrid":"Europe/Madrid","europe/malta":"Europe/Malta","malta":"Europe/Malta","europe/minsk":"Europe/Minsk","minsk":"Europe/Minsk","europe/monaco":"Europe/Monaco","monaco":"Europe/Monaco","europe/moscow":"Europe/Moscow","moscow":"Europe/Moscow","europe/oslo":"Europe/Oslo","oslo":"Europe/Oslo","europe/paris":"Europe/Paris","paris":"Europe/Paris","europe/prague":"Europe/Prague","prague":"Europe/Prague","europe/riga":"Europe/Riga","riga":"Europe/Riga","europe/rome":"Europe/Rome","rome":"Europe/Rome","europe/samara":"Europe/Samara","samara":"Europe/Samara","europe/simferopol":"Europe/Simferopol","simferopol":"Europe/Simferopol","europe/sofia":"Europe/Sofia","sofia":"Europe/Sofia","europe/stockholm":"Europe/Stockholm","stockholm":"Europe/Stockholm","europe/tallinn":"Europe/Tallinn","tallinn":"Europe/Tallinn","europe/tirane":"Europe/Tirane","tirane":"Europe/Tirane","europe/ulyanovsk":"Europe/Ulyanovsk","ulyanovsk":"Europe/Ulyanovsk","europe/uzhgorod":"Europe/Uzhgorod","uzhgorod":"Europe/Uzhgorod","europe/vienna":"Europe/Vienna","vienna":"Europe/Vienna","europe/vilnius":"Europe/Vilnius","vilnius":"Europe/Vilnius","europe/volgograd":"Europe/Volgograd","volgograd":"Europe/Volgograd","europe/warsaw":"Europe/Warsaw","warsaw":"Europe/Warsaw","europe/zaporozhye":"Europe/Zaporozhye","zaporozhye":"Europe/Zaporozhye","europe/zurich":"Europe/Zurich","zurich":"Europe/Zurich","indian/chagos":"Indian/Chagos","chagos":"Indian/Chagos","indian/christmas":"Indian/Christmas","christmas":"Indian/Christmas","indian/cocos":"Indian/Cocos","cocos":"Indian/Cocos","indian/kerguelen":"Indian/Kerguelen","kerguelen":"Indian/Kerguelen","indian/mahe":"Indian/Mahe","mahe":"Indian/Mahe","indian/maldives":"Indian/Maldives","maldives":"Indian/Maldives","indian/mauritius":"Indian/Mauritius","mauritius":"Indian/Mauritius","indian/reunion":"Indian/Reunion","reunion":"Indian/Reunion","pacific/apia":"Pacific/Apia","apia":"Pacific/Apia","pacific/auckland":"Pacific/Auckland","auckland":"Pacific/Auckland","pacific/bougainville":"Pacific/Bougainville","bougainville":"Pacific/Bougainville","pacific/chatham":"Pacific/Chatham","chatham":"Pacific/Chatham","pacific/chuuk":"Pacific/Chuuk","chuuk":"Pacific/Chuuk","pacific/easter":"Pacific/Easter","easter":"Pacific/Easter","pacific/efate":"Pacific/Efate","efate":"Pacific/Efate","pacific/enderbury":"Pacific/Enderbury","enderbury":"Pacific/Enderbury","pacific/fakaofo":"Pacific/Fakaofo","fakaofo":"Pacific/Fakaofo","pacific/fiji":"Pacific/Fiji","fiji":"Pacific/Fiji","pacific/funafuti":"Pacific/Funafuti","funafuti":"Pacific/Funafuti","pacific/galapagos":"Pacific/Galapagos","galapagos":"Pacific/Galapagos","pacific/gambier":"Pacific/Gambier","gambier":"Pacific/Gambier","pacific/guadalcanal":"Pacific/Guadalcanal","guadalcanal":"Pacific/Guadalcanal","pacific/guam":"Pacific/Guam","guam":"Pacific/Guam","pacific/honolulu":"Pacific/Honolulu","honolulu":"Pacific/Honolulu","pacific/kiritimati":"Pacific/Kiritimati","kiritimati":"Pacific/Kiritimati","pacific/kosrae":"Pacific/Kosrae","kosrae":"Pacific/Kosrae","pacific/kwajalein":"Pacific/Kwajalein","kwajalein":"Pacific/Kwajalein","pacific/majuro":"Pacific/Majuro","majuro":"Pacific/Majuro","pacific/marquesas":"Pacific/Marquesas","marquesas":"Pacific/Marquesas","pacific/nauru":"Pacific/Nauru","nauru":"Pacific/Nauru","pacific/niue":"Pacific/Niue","niue":"Pacific/Niue","pacific/norfolk":"Pacific/Norfolk","norfolk":"Pacific/Norfolk","pacific/noumea":"Pacific/Noumea","noumea":"Pacific/Noumea","pacific/pago_pago":"Pacific/Pago_Pago","pago_pago":"Pacific/Pago_Pago","pacific/palau":"Pacific/Palau","palau":"Pacific/Palau","pacific/pitcairn":"Pacific/Pitcairn","pitcairn":"Pacific/Pitcairn","pacific/pohnpei":"Pacific/Pohnpei","pohnpei":"Pacific/Pohnpei","pacific/port_moresby":"Pacific/Port_Moresby","port_moresby":"Pacific/Port_Moresby","pacific/rarotonga":"Pacific/Rarotonga","rarotonga":"Pacific/Rarotonga","pacific/tahiti":"Pacific/Tahiti","tahiti":"Pacific/Tahiti","pacific/tarawa":"Pacific/Tarawa","tarawa":"Pacific/Tarawa","pacific/tongatapu":"Pacific/Tongatapu","tongatapu":"Pacific/Tongatapu","pacific/wake":"Pacific/Wake","wake":"Pacific/Wake","pacific/wallis":"Pacific/Wallis","wallis":"Pacific/Wallis","utc":"Etc/UTC","universal":"Etc/UTC","etc/utc":"Etc/UTC"}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTokens=void 0;const r=n(371),o=n(153);t.parseTokens=function(e,t="COMMAND"){const n={tokens_left:1/0,expecting:[],halt_message:void 0},i=o.parser(e,t,[],(function(e,t,o){return r.DEBUG&&(o?r.Logger.info("!halt",{numTokens:e.length,message:o}):r.Logger.info("!stall",{numTokens:e.length,expecting:t})),e.length<n.tokens_left||e.length===n.tokens_left&&o?(n.tokens_left=e.length,n.expecting=t?[t]:[],n.halt_message=o):e.length===n.tokens_left&&t&&-1===n.expecting.indexOf(t)&&n.expecting.push(t),null}));if(!i)return{parse:null,hint:{expecting:n.expecting,tokens:e,at_token:e.length-n.tokens_left},halt_message:n.halt_message};r.DEBUG&&r.Logger.info("parse_tree",{parse_tree:i});const a={parse:o.flatten(i)[t]};return e.length&&(a.extra_tokens=e),a}},function(e,t,n){"use strict";function r(e){return null!=e.match(/^\$[A-Z_]+\??$/)}function o(e){return null!=e.match(/^{[A-Z_]+}$/)}function i(e){return null!=e.match(/^@[A-Z_]+\??$/)}function a(e){return!(s(e)||function(e){return null!=e.match(/^[A-Z_][A-Z_?:]*\??$/)}(e)||function(e){const t=e.split("=>");return 2===t.length&&s(t[0])&&s(t[1])}(e)||r(e)||o(e)||i(e))}function s(e){return null!=e.match(/^[A-Z_]+\??$/)}Object.defineProperty(t,"__esModule",{value:!0}),t.isAtMentionVariableValue=t.isVariableNameValue=t.isAtMentionValue=t.isStringValue=t.isHiddenSymbol=t.isSymbol=t.getOptional=t.isOptional=t.isTerminal=t.isAtMention=t.isVariableName=t.isStringVariable=t.isInlineEnd=t.isEnd=void 0,t.isEnd=function(e){return"<END>"===e},t.isInlineEnd=function(e){return"<INLINE_END>"===e},t.isStringVariable=r,t.isVariableName=o,t.isAtMention=i,t.isTerminal=a,t.isOptional=function(e){return!a(e)&&"?"===e.slice(-1)},t.getOptional=function(e){return e.slice(0,-1)},t.isSymbol=s,t.isHiddenSymbol=function(e){return s(e)&&"_"===e[0]},t.isStringValue=function(e){return'"'===e[0]&&'"'===e[e.length-1]},t.isAtMentionValue=function(e){return null!=e.match(/^@.*$/)},t.isVariableNameValue=function(e){return null!=e.match(/^{{[#%]?[a-zA-Z0-9_+-]+}}$|^{\$?[a-zA-Z0-9_+-]+}$/)},t.isAtMentionVariableValue=function(e){return null!=e.match(/^@{.*}$/)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tokenizeIndices=t.tokenize=void 0;const r=n(153),o=(e,t)=>e.concat(t);function i(e,...t){let n=[e];return t.forEach(e=>{n=Array.prototype.concat.apply([],n.map(t=>t.split(e).reduce((n,r,o)=>(o&&n.push(e),t.length&&n.push(r),n),[])))}),n}t.tokenize=function(e){return e?e.replace(/\\"/g,"__QUOTE__").replace(/\.(\d)/g,"__DECIMAL__$1").split(/["“”]/).map((e,t)=>t%2?[`"${e}"`]:i(e,",",".","(",")").map(e=>e.split(/\s/).filter(Boolean).map(e=>r.isVariableNameValue(e)||r.isAtMentionVariableValue(e)?e:e.toLowerCase())).reduce(o,[])).reduce(o,[]).map(e=>e.replace(/__QUOTE__/gi,'"').replace(/__DECIMAL__/gi,".")):[]},t.tokenizeIndices=function(e){let t=0;return e.replace(/\\"/g,"__").replace(/\.(\d)/g,"_$1").split(/["“”]/).map((e,n)=>n%2?{from:t,to:t+=e.length+2}:i(e,",",".","(",")").map(e=>e.split(/\s/).map((e,n,r)=>{const o=t;return t+=e.length+(n!==r.length-1?1:0),e.length?{from:o,to:o+e.length}:null}).filter(Boolean)).reduce(o,[])).reduce(o,[])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localizeCommandToButlerEnglish=t.getLocalizationKeysForCommand=void 0;const r=n(420),o=n(423),i=n(426);function a(e){return"string"==typeof e?e.replace(/"/g,'\\"'):Array.isArray(e)?e.map(a):e&&"object"==typeof e?Object.keys(e).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:a(e[n])}),{}):e}const s=({TRIGGER:e,ACTION:t})=>({TRIGGER:a(e),ACTION:a(t)});function c(e){const{ACTION:t,TRIGGER:n}=s(e),r={actions:t.map(o.getLocalizationKeysForAction)};return n&&(r.trigger=i.getLocalizationKeysForTrigger(n)),r}t.getLocalizationKeysForCommand=c,t.localizeCommandToButlerEnglish=function(e){const{actions:t,trigger:n}=c(e),o=function(e){const t=e.map(e=>r.localize(e));return t.length>1?t.slice(0,-1).join(",\n")+(t[t.length-2].match(/^for each /)?",\n":",\nand ")+t.slice(-1)[0]:t[0]}(t);return n?`${r.localize(n)},\n${o}`:o}},function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.localize=void 0;const i=o(n(421)),a=o(n(422)),s={"*COLOR":e=>e,"*DATE":({month:e,day:t=1,year:n})=>{let r=`${i.default.months[e]} ${t}`;return n&&(r+=`, ${n}`),r},"*MONTH":e=>i.default.months[e],"*ORDINAL":e=>{switch(e){case 1:return"1st";case 2:return"2nd";case 3:return"3rd";case void 0:return;default:return`${e}th`}},"*STICKER":e=>i.default.stickers[e],"*TIME":({HOUR:e,MINUTES:t,AM:n,PM:r})=>{let o=String(e);if(void 0!==t){let e=String(t);e.length<2&&(e=`0${e}`),o+=`:${e}`}return(n||r)&&(o+=` ${(n||r||"").toUpperCase()}`),o},"*WEEKDAY":e=>i.default.weekdays[e]},c=new Set(["verb_custom_field_to_value_action","due in between days","due in comparison days"]);function u(e,t){let n=a.default[e];if(!n)throw new Error(`${e} not found in translations`);if(t)for(const[e,r]of Object.entries(t))n=n.replace(`{${e}}`,r);return n}function l(e){var{key:t}=e,n=r(e,["key"]);const o=Object.entries(n).reduce((e,[t,n])=>{const r=function e(t,n){var r;if(Array.isArray(n))return n.map(n=>e(t,n)).join(" and ");if(t.startsWith("*")&&void 0!==n)return null===(r=s[t])||void 0===r?void 0:r.call(s,n);switch(typeof n){case"number":return String(n);case"string":if(t.startsWith("$"))return n;if(t.startsWith("@"))return`@${n}`;if(!u(n))throw new Error(`Could not localize ${n}`);return n;case"object":return l(n);default:return}}(t,n);return r&&(e[t]=r),e},{});return u(t,o)}t.localize=e=>(function(e,t){const n=t.replace(/("[^"]+")/g,"").match(/{[^{}]+}/g);return n&&!c.has(e)&&n.forEach(e=>{t=t.replace(` ${e}`,"")}),t})(e.key,l(e))},function(e){e.exports=JSON.parse('{"months":["","January","February","March","April","May","June","July","August","September","October","November","December"],"stickers":["check","heart","warning","clock","smile","laugh","huh","frown","thumbs up","thumbs down","star","rocket"],"weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}')},function(e){e.exports=JSON.parse('{"every_certain_days_trigger":"every {*ORDINAL} {*WEEKDAY} {time}","every_day_trigger":"every day","every_weekday_trigger":"every weekday","on_due_date_days_before_trigger":"{$X} days before a card {conditions} is due","on_due_date_use_due_time_trigger":"at the time a card is due","when_card_into_list_trigger":"when a card {conditions} is added into {list}","when_date_added_trigger":"when a {date_type} is added","add_checklist_action":"add checklist {title} {from} {new_name}","add_comment_action":"post the comment {title}","add_date_action":"set the {date_type} to {date} {time}","add_label_action":"add {label} to {target}","add_member_action":"add {member} to the card","copy_card_action":"copy the card to {position} {list} {board} {comments}","count_cards_action":"count the cards {conditions}","create_report_action":"create a report {report_var} with all the cards {conditions} {item_pattern} {grouped_by}","increment_custom_field_action":"{verb} the number in custom field {title} by {$AMOUNT}","join_card_action":"join the card","leave_card_action":"leave the card","mark_due_date_complete_action":"mark due date {field}","move_card_action":"move the card to {position} {list} {board}","remove_from_card_action":"remove {fields} from {location}","send_email_to_recipient_action":"send email to {$ADDRESS} {subject} {message}","sort_list_action":"sort {list} by {field} {direction} {secondary_sort}","verb_custom_field_action":"{verb} custom field {title}","verb_custom_field_to_value_action":"{verb} custom field {title} {to_value}","age":"age","all archived cards":"all archived cards","all checklists":"all checklists","all labels":"all labels","all members":"all members","all stickers":"all stickers","all the cards in list":"all the cards in {list}","anyone":"anyone","ascending":"ascending","assigned to member":"assigned to {member}","at time":"at {*TIME}","before day":"before {*WEEKDAY}","before the end of day":"before the end of {*WEEKDAY}","bottom":"bottom","check":"check","clear":"clear","complete":"complete","custom field":"custom field {title}","date in title":"date in title","days":"days","decrease":"decrease","descending":"descending","due date":"due date","due in between days":"due in between {$MIN_DAYS} and {$MAX_DAYS} {days}","due in comparison days":"due in {operator} {$NUM_DAYS} {days}","due when":"due {when}","exactly":"exactly","from card":"from card {title}","grouped by":"grouped by {group}","hours":"hours","in variable":"in variable {title}","incomplete":"incomplete","increase":"increase","item pattern":"using pattern {title}","last day":"last day","last weekday":"last {*WEEKDAY}","last working day":"last working day","less than":"less than","list":"list","me":"me","member username":"{@MEMBER_USERNAME}","minutes":"minutes","month":"{*MONTH}","months":"months","more than":"more than","name":"name","next day":"next {*WEEKDAY}","next month on the day":"next month on the {*ORDINAL}","next month":"next month","next week on day":"next week on {*WEEKDAY}","next week":"next week","now":"now","nth day":"{*ORDINAL} {*WEEKDAY}","of the list":"of the list {title}","on board":"on board {title}","ordinal":"{*ORDINAL}","overdue":"overdue","secondary sort":"and then by {field} {direction}","set":"set","start date":"start date","the attachment":"the attachment {title}","the card":"the card","the checklist":"the checklist {title}","the cover":"the cover","the day of month":"the {day} of {month}","the due date":"the due date","the label":"the {*COLOR} {title} label","the link":"the link {title}","the list":"the list {title}","the month":"the month","the next working day":"the next working day","the start date":"the start date","the sticker":"the {*STICKER} sticker","this month":"this month","this week":"this week","time in list":"time in list","title":"\\"{$TITLE}\\"","to all cards":"to all cards","to value":"to {$VALUE}","today":"today","tomorrow":"tomorrow","top":"top","uncheck":"uncheck","votes":"votes","weeks":"weeks","with message":"with message {title}","with name":"with name {title}","with no labels":"with no labels","with subject":"with subject {title}","without comments":"without comments","without due date":"without due date","working days":"working days","written date":"{*DATE}","x time frame later":"{$X} {time_frame} later","yesterday":"yesterday"}')},function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalizationKeysForAction=void 0;const o=n(373),i=n(387),a=n(424),s=n(425),c=n(388);t.getLocalizationKeysForAction=function(e){var t;const n=null===(t=c.getActionConditions(e))||void 0===t?void 0:t.map(c.getLocalizationKeysForCondition);switch(e.type){case"CREATE_REPORT_ACTION":{const{$REPORT_VAR:t,$ITEM_PATTERN:r,REPORT_GROUP_BY:o}=e.CREATE_REPORT_ACTION;let a,s,c;return t&&(a={key:"in variable",title:i.l10nizeTitle(t)}),r&&(s={key:"item pattern",title:i.l10nizeTitle(r)}),"THE_LIST"===o&&(c={key:"grouped by",group:"list"}),"THE_DUE_DATE"===o&&(c={key:"grouped by",group:"due date"}),{key:"create_report_action",report_var:a,conditions:n,item_pattern:s,grouped_by:c}}case"MOVE_CARD_ACTION":{const{$LIST:t,$BOARD:n}=e.MOVE_CARD_ACTION.DESTINATION,r={key:e.MOVE_CARD_ACTION.DESTINATION.POSITION_TOP||e.MOVE_CARD_ACTION.DESTINATION.POSITION_BOTTOM};let o,i;return n&&(o={key:"on board",title:{key:"title",$TITLE:n}}),{key:"move_card_action",position:r,list:i=t?{key:"of the list",title:{key:"title",$TITLE:t}}:{key:"of the list"},board:o}}case"COPY_CARD_ACTION":{const{$LIST:t,$BOARD:n}=e.COPY_CARD_ACTION.DESTINATION,r={key:e.COPY_CARD_ACTION.DESTINATION.POSITION_TOP||e.COPY_CARD_ACTION.DESTINATION.POSITION_BOTTOM};let o,i,a;return n&&(o={key:"on board",title:{key:"title",$TITLE:n}}),i=t?{key:"of the list",title:{key:"title",$TITLE:t}}:{key:"of the list"},e.COPY_CARD_ACTION.WITHOUT_COMMENTS&&(a={key:"without comments"}),{key:"copy_card_action",position:r,list:i,board:o,comments:a}}case"ADD_COMMENT_ACTION":return{key:"add_comment_action",title:{key:"title",$TITLE:e.ADD_COMMENT_ACTION.$COMMENT}};case"ADD_LABEL_ACTION":{const{LABEL:{COLOR:t,$TITLE:n},ALL_CARDS_IN_LIST:r}=e.ADD_LABEL_ACTION;return{key:"add_label_action",label:{key:"the label","*COLOR":t,title:n?{key:"title",$TITLE:n}:void 0},target:r?{key:"all the cards in list",list:{key:"the list",title:{key:"title",$TITLE:r.$LIST}}}:{key:"the card"}}}case"ADD_MEMBER_ACTION":return e.ADD_MEMBER_ACTION.MEMBER["@MEMBER_USERNAME"]?{key:"add_member_action",member:{key:"member username","@MEMBER_USERNAME":e.ADD_MEMBER_ACTION.MEMBER["@MEMBER_USERNAME"]}}:{key:"join_card_action"};case"REMOVE_FROM_CARD_ACTION":return s.l10nizeRemoveFromCardAction(e);case"MARK_DUE_COMPLETE_ACTION":return{key:"mark_due_date_complete_action",field:{key:"complete"}};case"UNMARK_DUE_COMPLETE_ACTION":return{key:"mark_due_date_complete_action",field:{key:"incomplete"}};case"JOIN_CARD_ACTION":return{key:"join_card_action"};case"LEAVE_CARD_ACTION":return{key:"leave_card_action"};case"ADD_CHECKLIST_ACTION":{const{$CHECKLIST_NAME:t,$NEW_CHECKLIST_NAME:n,$FROM_CARD:r}=e.ADD_CHECKLIST_ACTION,o={title:{key:"title",$TITLE:t}};return r&&(o.from={key:"from card",title:{key:"title",$TITLE:r}}),n&&(o.new_name={key:"with name",title:{key:"title",$TITLE:n}}),Object.assign({key:"add_checklist_action"},o)}case"SORT_LIST_ACTION":{const t=e.SORT_LIST_ACTION,{SORT_DESCENDING:n,$LIST:o,SECONDARY_SORT:i}=t,a=e=>{if(e.SORT_BY_CUSTOM_FIELD)return{key:"custom field",title:{key:"title",$TITLE:e.SORT_BY_CUSTOM_FIELD.$CUSTOM_FIELD_NAME}};if(e.SORT_BY_LABEL){const{SORT_LABEL:t}=e.SORT_BY_LABEL;return(Array.isArray(t)?t:[t]).map(({COLOR:e,$TITLE:t})=>({key:"the label","*COLOR":e,title:t?{key:"title",$TITLE:t}:void 0}))}return e.SORT_BY_DUE_DATE?"due date":e.SORT_BY_START_DATE?"start date":e.SORT_BY_VOTES?"votes":e.SORT_BY_TIME_IN_LIST?"time in list":e.SORT_BY_AGE?"age":e.SORT_BY_DATE_IN_TITLE?"date in title":e.SORT_BY_TITLE?"name":void 0},s={key:"sort_list_action",list:{key:"the list",title:o?{key:"title",$TITLE:o}:void 0},field:a(r(t,["SORT_DESCENDING","$LIST","SECONDARY_SORT"])),direction:n?"descending":"ascending"};return i&&(s.secondary_sort={key:"secondary sort",field:a(i),direction:i.SORT_DESCENDING?"ascending":"descending"}),s}case"SEND_EMAIL_ACTION":{const{$ADDRESS:t,$SUBJECT:n,$MESSAGE:r}=e.SEND_EMAIL_ACTION,o={subject:{key:"with subject",title:{key:"title",$TITLE:n}},message:{key:"with message",title:{key:"title",$TITLE:r}}};return t&&(o.$ADDRESS=`"${t}"`),e.SEND_EMAIL_ACTION.ALL_MEMBERS_ON_BOARD&&(o.$ADDRESS="@board"),e.SEND_EMAIL_ACTION.ALL_MEMBERS_ON_CARD&&(o.$ADDRESS="@card"),Object.assign({key:"send_email_to_recipient_action"},o)}case"SET_CUSTOM_FIELD_ACTION":{const t=e.SET_CUSTOM_FIELD_ACTION;let n={title:{key:"title",$TITLE:t.$FIELD_NAME}};return t.$TEXT_VALUE?(n=Object.assign({verb:{key:"set"},to_value:{key:"to value",$VALUE:`"${t.$TEXT_VALUE}"`}},n),Object.assign({key:"verb_custom_field_to_value_action"},n)):t.NUMERIC_VALUE?(n=Object.assign({verb:{key:"set"},to_value:{key:"to value",$VALUE:t.NUMERIC_VALUE}},n),Object.assign({key:"verb_custom_field_to_value_action"},n)):t.VARIABLE_VALUE?(n=Object.assign({verb:{key:"set"},to_value:{key:"to value",$VALUE:t.VARIABLE_VALUE}},n),Object.assign({key:"verb_custom_field_to_value_action"},n)):t.INCREASE_FIELD?(n=Object.assign({verb:{key:"increase"},$AMOUNT:t.AMOUNT||1},n),Object.assign({key:"increment_custom_field_action"},n)):t.DECREASE_FIELD?(n=Object.assign({verb:{key:"decrease"},$AMOUNT:t.AMOUNT||1},n),Object.assign({key:"increment_custom_field_action"},n)):(t.CLEAR_FIELD?n=Object.assign({verb:{key:"clear"}},n):t.CHECK_FIELD?n=Object.assign({verb:{key:"check"}},n):t.UNCHECK_FIELD&&(n=Object.assign({verb:{key:"uncheck"}},n)),Object.assign({key:"verb_custom_field_action"},n))}case"ADD_START_DATE_ACTION":case"ADD_DUE_DATE_ACTION":return a.l10nizeAddDateAction(e);case"COUNT_CARDS_ACTION":return{key:"count_cards_action",conditions:n};default:throw new o.LocalizationKeysError(e.type)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.l10nizeAddDateAction=void 0;const r=n(373),o=e=>Number.isFinite(e)&&(null!=e?e:0)>=0,i=e=>{if(e.NOW)return"now";if(e.TODAY)return"today";if(e.TOMORROW)return"tomorrow";if(e.YESTERDAY)return"yesterday";if(e.NEXT_WEEK)return void 0!==e.NEXT_WEEK.DAY?{key:"next week on day","*WEEKDAY":e.NEXT_WEEK.DAY}:"next week";if(e.NEXT_MONTH)return{key:e.NEXT_MONTH.MONTH_DAY_NUMBER?"next month on the day":"next month","*ORDINAL":e.NEXT_MONTH.MONTH_DAY_NUMBER};if(e.THE_NEXT_WORKING_DAY)return"the next working day";if(o(e.IN_MINUTES))return{key:"x time frame later",$X:e.IN_MINUTES,time_frame:"minutes"};if(o(e.IN_HOURS))return{key:"x time frame later",$X:e.IN_HOURS,time_frame:"hours"};if(e.IN_X_FROM_TODAY){if(o(e.IN_X_FROM_TODAY.X_WORKING_DAYS))return{key:"x time frame later",$X:e.IN_X_FROM_TODAY.X_WORKING_DAYS,time_frame:"working days"};if(o(e.IN_X_FROM_TODAY.X_DAYS))return{key:"x time frame later",$X:e.IN_X_FROM_TODAY.X_DAYS,time_frame:"days"};if(o(e.IN_X_FROM_TODAY.X_WEEKS))return{key:"x time frame later",$X:e.IN_X_FROM_TODAY.X_WEEKS,time_frame:"weeks"};if(o(e.IN_X_FROM_TODAY.X_MONTHS))return{key:"x time frame later",$X:e.IN_X_FROM_TODAY.X_MONTHS,time_frame:"months"}}if(e.BEFORE_DAY)return{key:void 0!==e.BEFORE_DAY.END_OF_DAY?"before the end of day":"before day","*WEEKDAY":e.BEFORE_DAY.DAY};if(void 0!==e.NEXT_DAY)return{key:"next day","*WEEKDAY":e.NEXT_DAY.DAY};if(e.MONTH_DAY){let t;return{key:"the day of month",day:t=e.MONTH_DAY.LAST_MONTH_DAY?Object.prototype.hasOwnProperty.call(e.MONTH_DAY.LAST_MONTH_DAY,"WORKING")?"last working day":"last day":{key:"ordinal","*ORDINAL":e.MONTH_DAY.MONTH_DAY_NUMBER},month:e.MONTH_DAY.WHICH_MONTH_NEXT?"next month":"the month"}}return e.NTH_WEEK_DAY?{key:"the day of month",day:e.NTH_WEEK_DAY.LAST_MONTH_WEEK?{key:"last weekday","*WEEKDAY":e.NTH_WEEK_DAY.DAY}:{key:"nth day","*ORDINAL":e.NTH_WEEK_DAY.MONTH_WEEK_NUMBER,"*WEEKDAY":e.NTH_WEEK_DAY.DAY},month:"the month"}:e.WRITTEN_DATE?e.WRITTEN_DATE.END_OF_MONTH?{key:"the day of month",day:"last day",month:{key:"month","*MONTH":e.WRITTEN_DATE.MONTH}}:{key:"written date","*DATE":{key:"date",month:e.WRITTEN_DATE.MONTH,day:e.WRITTEN_DATE.MONTH_DAY_NUMBER,year:e.WRITTEN_DATE.YEAR}}:void 0};t.l10nizeAddDateAction=function(e){const t="ADD_START_DATE_ACTION"===e.type?e.ADD_START_DATE_ACTION.START_DATE:e.ADD_DUE_DATE_ACTION.DUE_DATE,n=i(t);if(!n&&!t.TIME)throw new r.LocalizationKeysError(e.type,["NUMERIC_DATE","DATE_IN_CUSTOM_FIELD"].find(e=>Object.prototype.hasOwnProperty.call(t,e)));return{key:"add_date_action",date_type:{key:"ADD_START_DATE_ACTION"===e.type?"start date":"due date"},date:n,time:t.TIME?{key:"at time","*TIME":Object.assign({key:"time"},t.TIME)}:void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.l10nizeRemoveFromCardAction=void 0;const r=n(386),o=n(387);t.l10nizeRemoveFromCardAction=function({REMOVE_FROM_CARD_ACTION:e}){const t=[];if(e.LABEL)for(const{COLOR:n,$TITLE:i}of r.normalizeArray(e.LABEL))t.push({key:"the label","*COLOR":null!=n?n:void 0,title:o.l10nizeTitle(i)});if(e.MEMBER)for(const n of r.normalizeArray(e.MEMBER))n["@MEMBER_USERNAME"]?t.push({key:"member username","@MEMBER_USERNAME":n["@MEMBER_USERNAME"]}):n.$MEMBER_FULLNAME?t.push(o.l10nizeTitle(n.$MEMBER_FULLNAME)):n.MEMBER_ME?t.push("me"):n.MEMBER_ANYONE&&t.push("anyone");if(e.REMOVE_ATTACHMENT)for(const n of r.normalizeArray(e.REMOVE_ATTACHMENT))n.$ATTACHMENT_LINK?t.push({key:"the link",title:o.l10nizeTitle(n.$ATTACHMENT_LINK)}):t.push({key:"the attachment",title:o.l10nizeTitle(n.$ATTACHMENT_NAME)});if(e.REMOVE_CHECKLIST)for(const{$CHECKLIST_NAME:n}of r.normalizeArray(e.REMOVE_CHECKLIST))t.push({key:"the checklist",title:o.l10nizeTitle(n)});if(e.STICKER_TYPE)for(const n of r.normalizeArray(e.STICKER_TYPE))t.push({key:"the sticker","*STICKER":n});let n;return e.REMOVE_COVER&&t.push("the cover"),e.REMOVE_DUE_DATE&&t.push("the due date"),e.REMOVE_START_DATE&&t.push("the start date"),e.THE_LABEL&&t.push("the label"),e.REMOVE_ALL_CHECKLISTS&&t.push("all checklists"),e.REMOVE_ALL_LABELS&&t.push("all labels"),e.REMOVE_ALL_MEMBERS&&t.push("all members"),e.REMOVE_ALL_STICKERS&&t.push("all stickers"),{key:"remove_from_card_action",fields:t,location:n=e.ALL_CARDS_IN_LIST?{key:"all the cards in list",list:{key:"the list",title:o.l10nizeTitle(e.ALL_CARDS_IN_LIST.$LIST)}}:e.ALL_ARCHIVED_CARDS?"all archived cards":"the card"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalizationKeysForTrigger=void 0;const r=n(373),o=n(388);t.getLocalizationKeysForTrigger=function(e){var t;const n=null===(t=o.getTriggerConditions(e))||void 0===t?void 0:t.map(o.getLocalizationKeysForCondition),i=e.type;switch(i){case"EVERY":switch(e[i].type){case"EVERY_DAY":return{key:"every_day_trigger"};case"EVERY_WEEKDAY":return{key:"every_weekday_trigger"};case"CERTAIN_DAYS":{const{MONTH_WEEK_NUMBER:t,DAY:n,TIME:r}=e[i].CERTAIN_DAYS;return{key:"every_certain_days_trigger","*ORDINAL":t,"*WEEKDAY":n,time:r?{key:"at time","*TIME":Object.assign({key:"time"},r)}:void 0}}}break;case"ON_DUE_DATE":switch(e[i].type){case"DAYS_BEFORE":return{key:"on_due_date_days_before_trigger",$X:e[i].DAYS_BEFORE,conditions:n};case"USE_DUE_TIME":if(e[i].USE_DUE_TIME)return{key:"on_due_date_use_due_time_trigger"}}break;case"WHEN":switch(e[i].type){case"CARD_INTO_LIST":{const{$LIST:t}=e[i].CARD_INTO_LIST;return{key:"when_card_into_list_trigger",list:{key:"the list",title:{key:"title",$TITLE:t}},conditions:n}}case"START_DATE_ADDED":case"DUE_DATE_ADDED":return{key:"when_date_added_trigger",date_type:{key:"START_DATE_ADDED"===e[i].type?"start date":"due date"}}}}throw new r.LocalizationKeysError(e[i].type)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){(function(e,n){var r=200,o="__lodash_hash_undefined__",i=1,a=2,s=9007199254740991,c="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",d="[object Boolean]",f="[object Date]",_="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",E="[object Number]",T="[object Null]",g="[object Object]",A="[object Proxy]",b="[object RegExp]",v="[object Set]",I="[object String]",O="[object Symbol]",y="[object Undefined]",N="[object ArrayBuffer]",S="[object DataView]",C=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,D={};D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D[c]=D[u]=D[N]=D[d]=D[S]=D[f]=D[_]=D[h]=D[m]=D[E]=D[g]=D[b]=D[v]=D[I]=D["[object WeakMap]"]=!1;var w="object"==typeof e&&e&&e.Object===Object&&e,M="object"==typeof self&&self&&self.Object===Object&&self,k=w||M||Function("return this")(),L=t&&!t.nodeType&&t,P=L&&"object"==typeof n&&n&&!n.nodeType&&n,x=P&&P.exports===L,U=x&&w.process,H=function(){try{return U&&U.binding&&U.binding("util")}catch(e){}}(),B=H&&H.isTypedArray;function j(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function $(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function F(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var W,Y,V,G=Array.prototype,K=Function.prototype,z=Object.prototype,q=k["__core-js_shared__"],X=K.toString,J=z.hasOwnProperty,Q=(W=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",Z=z.toString,ee=RegExp("^"+X.call(J).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=x?k.Buffer:void 0,ne=k.Symbol,re=k.Uint8Array,oe=z.propertyIsEnumerable,ie=G.splice,ae=ne?ne.toStringTag:void 0,se=Object.getOwnPropertySymbols,ce=te?te.isBuffer:void 0,ue=(Y=Object.keys,V=Object,function(e){return Y(V(e))}),le=He(k,"DataView"),de=He(k,"Map"),fe=He(k,"Promise"),_e=He(k,"Set"),he=He(k,"WeakMap"),pe=He(Object,"create"),me=Fe(le),Ee=Fe(de),Te=Fe(fe),ge=Fe(_e),Ae=Fe(he),be=ne?ne.prototype:void 0,ve=be?be.valueOf:void 0;function Ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ne(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ye;++t<n;)this.add(e[t])}function Se(e){var t=this.__data__=new Oe(e);this.size=t.size}function Ce(e,t){var n=Ve(e),r=!n&&Ye(e),o=!n&&!r&&Ge(e),i=!n&&!r&&!o&&Je(e),a=n||r||o||i,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=s.length;for(var u in e)!t&&!J.call(e,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||$e(u,c))||s.push(u);return s}function Re(e,t){for(var n=e.length;n--;)if(We(e[n][0],t))return n;return-1}function De(e){return null==e?void 0===e?y:T:ae&&ae in Object(e)?function(e){var t=J.call(e,ae),n=e[ae];try{e[ae]=void 0;var r=!0}catch(e){}var o=Z.call(e);r&&(t?e[ae]=n:delete e[ae]);return o}(e):function(e){return Z.call(e)}(e)}function we(e){return Xe(e)&&De(e)==c}function Me(e,t,n,r,o){return e===t||(null==e||null==t||!Xe(e)&&!Xe(t)?e!=e&&t!=t:function(e,t,n,r,o,s){var l=Ve(e),h=Ve(t),p=l?u:je(e),T=h?u:je(t),A=(p=p==c?g:p)==g,y=(T=T==c?g:T)==g,C=p==T;if(C&&Ge(e)){if(!Ge(t))return!1;l=!0,A=!1}if(C&&!A)return s||(s=new Se),l||Je(e)?Pe(e,t,n,r,o,s):function(e,t,n,r,o,s,c){switch(n){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case N:return!(e.byteLength!=t.byteLength||!s(new re(e),new re(t)));case d:case f:case E:return We(+e,+t);case _:return e.name==t.name&&e.message==t.message;case b:case I:return e==t+"";case m:var u=$;case v:var l=r&i;if(u||(u=F),e.size!=t.size&&!l)return!1;var h=c.get(e);if(h)return h==t;r|=a,c.set(e,t);var p=Pe(u(e),u(t),r,o,s,c);return c.delete(e),p;case O:if(ve)return ve.call(e)==ve.call(t)}return!1}(e,t,p,n,r,o,s);if(!(n&i)){var R=A&&J.call(e,"__wrapped__"),D=y&&J.call(t,"__wrapped__");if(R||D){var w=R?e.value():e,M=D?t.value():t;return s||(s=new Se),o(w,M,n,r,s)}}if(!C)return!1;return s||(s=new Se),function(e,t,n,r,o,a){var s=n&i,c=xe(e),u=c.length,l=xe(t).length;if(u!=l&&!s)return!1;var d=u;for(;d--;){var f=c[d];if(!(s?f in t:J.call(t,f)))return!1}var _=a.get(e);if(_&&a.get(t))return _==t;var h=!0;a.set(e,t),a.set(t,e);var p=s;for(;++d<u;){f=c[d];var m=e[f],E=t[f];if(r)var T=s?r(E,m,f,t,e,a):r(m,E,f,e,t,a);if(!(void 0===T?m===E||o(m,E,n,r,a):T)){h=!1;break}p||(p="constructor"==f)}if(h&&!p){var g=e.constructor,A=t.constructor;g!=A&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof A&&A instanceof A)&&(h=!1)}return a.delete(e),a.delete(t),h}(e,t,n,r,o,s)}(e,t,n,r,Me,o))}function ke(e){return!(!qe(e)||function(e){return!!Q&&Q in e}(e))&&(Ke(e)?ee:C).test(Fe(e))}function Le(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||z,t!==r)return ue(e);var t,n,r,o=[];for(var i in Object(e))J.call(e,i)&&"constructor"!=i&&o.push(i);return o}function Pe(e,t,n,r,o,s){var c=n&i,u=e.length,l=t.length;if(u!=l&&!(c&&l>u))return!1;var d=s.get(e);if(d&&s.get(t))return d==t;var f=-1,_=!0,h=n&a?new Ne:void 0;for(s.set(e,t),s.set(t,e);++f<u;){var p=e[f],m=t[f];if(r)var E=c?r(m,p,f,t,e,s):r(p,m,f,e,t,s);if(void 0!==E){if(E)continue;_=!1;break}if(h){if(!j(t,(function(e,t){if(i=t,!h.has(i)&&(p===e||o(p,e,n,r,s)))return h.push(t);var i}))){_=!1;break}}else if(p!==m&&!o(p,m,n,r,s)){_=!1;break}}return s.delete(e),s.delete(t),_}function xe(e){return function(e,t,n){var r=t(e);return Ve(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Qe,Be)}function Ue(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function He(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ke(n)?n:void 0}Ie.prototype.clear=function(){this.__data__=pe?pe(null):{},this.size=0},Ie.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ie.prototype.get=function(e){var t=this.__data__;if(pe){var n=t[e];return n===o?void 0:n}return J.call(t,e)?t[e]:void 0},Ie.prototype.has=function(e){var t=this.__data__;return pe?void 0!==t[e]:J.call(t,e)},Ie.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=pe&&void 0===t?o:t,this},Oe.prototype.clear=function(){this.__data__=[],this.size=0},Oe.prototype.delete=function(e){var t=this.__data__,n=Re(t,e);return!(n<0)&&(n==t.length-1?t.pop():ie.call(t,n,1),--this.size,!0)},Oe.prototype.get=function(e){var t=this.__data__,n=Re(t,e);return n<0?void 0:t[n][1]},Oe.prototype.has=function(e){return Re(this.__data__,e)>-1},Oe.prototype.set=function(e,t){var n=this.__data__,r=Re(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ye.prototype.clear=function(){this.size=0,this.__data__={hash:new Ie,map:new(de||Oe),string:new Ie}},ye.prototype.delete=function(e){var t=Ue(this,e).delete(e);return this.size-=t?1:0,t},ye.prototype.get=function(e){return Ue(this,e).get(e)},ye.prototype.has=function(e){return Ue(this,e).has(e)},ye.prototype.set=function(e,t){var n=Ue(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ne.prototype.add=Ne.prototype.push=function(e){return this.__data__.set(e,o),this},Ne.prototype.has=function(e){return this.__data__.has(e)},Se.prototype.clear=function(){this.__data__=new Oe,this.size=0},Se.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Se.prototype.get=function(e){return this.__data__.get(e)},Se.prototype.has=function(e){return this.__data__.has(e)},Se.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Oe){var o=n.__data__;if(!de||o.length<r-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new ye(o)}return n.set(e,t),this.size=n.size,this};var Be=se?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}(se(e),(function(t){return oe.call(e,t)})))}:function(){return[]},je=De;function $e(e,t){return!!(t=null==t?s:t)&&("number"==typeof e||R.test(e))&&e>-1&&e%1==0&&e<t}function Fe(e){if(null!=e){try{return X.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function We(e,t){return e===t||e!=e&&t!=t}(le&&je(new le(new ArrayBuffer(1)))!=S||de&&je(new de)!=m||fe&&"[object Promise]"!=je(fe.resolve())||_e&&je(new _e)!=v||he&&"[object WeakMap]"!=je(new he))&&(je=function(e){var t=De(e),n=t==g?e.constructor:void 0,r=n?Fe(n):"";if(r)switch(r){case me:return S;case Ee:return m;case Te:return"[object Promise]";case ge:return v;case Ae:return"[object WeakMap]"}return t});var Ye=we(function(){return arguments}())?we:function(e){return Xe(e)&&J.call(e,"callee")&&!oe.call(e,"callee")},Ve=Array.isArray;var Ge=ce||function(){return!1};function Ke(e){if(!qe(e))return!1;var t=De(e);return t==h||t==p||t==l||t==A}function ze(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function qe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Xe(e){return null!=e&&"object"==typeof e}var Je=B?function(e){return function(t){return e(t)}}(B):function(e){return Xe(e)&&ze(e.length)&&!!D[De(e)]};function Qe(e){return null!=(t=e)&&ze(t.length)&&!Ke(t)?Ce(e):Le(e);var t}n.exports=function(e,t){return Me(e,t)}}).call(this,n(84),n(358)(e))},function(e,t,n){(function(e,r){var o,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},a=function(){return function(e){var t,n=(t={},{setItem:function(e,n){t[e]=n},getItem:function(e){return t[e]},removeItem:function(e){delete t[e]}});try{e.localStorage&&(n=e.localStorage)}catch(e){}var r={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},o=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var r="Unknown property, "+n+". Valid properties are:";for(var o in t)t.hasOwnProperty(o)&&(r=r+" "+o);throw new Error(r)}if(c(e[n])!==t[n])throw new Error(u(a.INVALID_TYPE,[c(e[n]),n]))}},i=function(e,t){return function(){return e.apply(t,arguments)}},a={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},s={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},u=function(e,t){var n=e.text;if(t)for(var r,o,i=0;i<t.length;i++)if(r="{"+i+"}",(o=n.indexOf(r))>0){var a=n.substring(0,o),s=n.substring(o+r.length);n=a+t[i]+s}return n},l=[0,6,77,81,73,115,100,112,3],d=[0,4,77,81,84,84,4],f=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};function _(e,t){var n,o=t,i=e[t],a=i>>4,s=i&=15;t+=1;var c=0,u=1;do{if(t==e.length)return[null,o];c+=(127&(n=e[t++]))*u,u*=128}while(0!=(128&n));var l=t+c;if(l>e.length)return[null,o];var d=new f(a);switch(a){case r.CONNACK:1&e[t++]&&(d.sessionPresent=!0),d.returnCode=e[t++];break;case r.PUBLISH:var _=s>>1&3,h=m(e,t),p=g(e,t+=2,h);t+=h,_>0&&(d.messageIdentifier=m(e,t),t+=2);var E=new I(e.subarray(t,l));1==(1&s)&&(E.retained=!0),8==(8&s)&&(E.duplicate=!0),E.qos=_,E.destinationName=p,d.payloadMessage=E;break;case r.PUBACK:case r.PUBREC:case r.PUBREL:case r.PUBCOMP:case r.UNSUBACK:d.messageIdentifier=m(e,t);break;case r.SUBACK:d.messageIdentifier=m(e,t),t+=2,d.returnCode=e.subarray(t,l)}return[d,l]}function h(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function p(e,t,n,r){return T(e,n,r=h(t,n,r)),r+t}function m(e,t){return 256*e[t]+e[t+1]}function E(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,t++),t+=3):r>127?t+=2:t++}return t}function T(e,t,n){for(var r=n,o=0;o<e.length;o++){var i=e.charCodeAt(o);if(55296<=i&&i<=56319){var s=e.charCodeAt(++o);if(isNaN(s))throw new Error(u(a.MALFORMED_UNICODE,[i,s]));i=s-56320+(i-55296<<10)+65536}i<=127?t[r++]=i:i<=2047?(t[r++]=i>>6&31|192,t[r++]=63&i|128):i<=65535?(t[r++]=i>>12&15|224,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>18&7|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128)}return t}function g(e,t,n){for(var r,o="",i=t;i<t+n;){var s=e[i++];if(s<128)r=s;else{var c=e[i++]-128;if(c<0)throw new Error(u(a.MALFORMED_UTF,[s.toString(16),c.toString(16),""]));if(s<224)r=64*(s-192)+c;else{var l=e[i++]-128;if(l<0)throw new Error(u(a.MALFORMED_UTF,[s.toString(16),c.toString(16),l.toString(16)]));if(s<240)r=4096*(s-224)+64*c+l;else{var d=e[i++]-128;if(d<0)throw new Error(u(a.MALFORMED_UTF,[s.toString(16),c.toString(16),l.toString(16),d.toString(16)]));if(!(s<248))throw new Error(u(a.MALFORMED_UTF,[s.toString(16),c.toString(16),l.toString(16),d.toString(16)]));r=262144*(s-240)+4096*c+64*l+d}}}r>65535&&(r-=65536,o+=String.fromCharCode(55296+(r>>10)),r=56320+(1023&r)),o+=String.fromCharCode(r)}return o}f.prototype.encode=function(){var e,t=(15&this.type)<<4,n=0,o=[],i=0;switch(void 0!==this.messageIdentifier&&(n+=2),this.type){case r.CONNECT:switch(this.mqttVersion){case 3:n+=l.length+3;break;case 4:n+=d.length+3}n+=E(this.clientId)+2,void 0!==this.willMessage&&(n+=E(this.willMessage.destinationName)+2,(e=this.willMessage.payloadBytes)instanceof Uint8Array||(e=new Uint8Array(s)),n+=e.byteLength+2),void 0!==this.userName&&(n+=E(this.userName)+2),void 0!==this.password&&(n+=E(this.password)+2);break;case r.SUBSCRIBE:t|=2;for(var a=0;a<this.topics.length;a++)o[a]=E(this.topics[a]),n+=o[a]+2;n+=this.requestedQos.length;break;case r.UNSUBSCRIBE:for(t|=2,a=0;a<this.topics.length;a++)o[a]=E(this.topics[a]),n+=o[a]+2;break;case r.PUBREL:t|=2;break;case r.PUBLISH:this.payloadMessage.duplicate&&(t|=8),t=t|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(t|=1),n+=(i=E(this.payloadMessage.destinationName))+2;var s=this.payloadMessage.payloadBytes;n+=s.byteLength,s instanceof ArrayBuffer?s=new Uint8Array(s):s instanceof Uint8Array||(s=new Uint8Array(s.buffer));break;case r.DISCONNECT:}var c=function(e){var t=new Array(1),n=0;do{var r=e%128;(e>>=7)>0&&(r|=128),t[n++]=r}while(e>0&&n<4);return t}(n),u=c.length+1,f=new ArrayBuffer(n+u),_=new Uint8Array(f);if(_[0]=t,_.set(c,1),this.type==r.PUBLISH)u=p(this.payloadMessage.destinationName,i,_,u);else if(this.type==r.CONNECT){switch(this.mqttVersion){case 3:_.set(l,u),u+=l.length;break;case 4:_.set(d,u),u+=d.length}var m=0;this.cleanSession&&(m=2),void 0!==this.willMessage&&(m|=4,m|=this.willMessage.qos<<3,this.willMessage.retained&&(m|=32)),void 0!==this.userName&&(m|=128),void 0!==this.password&&(m|=64),_[u++]=m,u=h(this.keepAliveInterval,_,u)}switch(void 0!==this.messageIdentifier&&(u=h(this.messageIdentifier,_,u)),this.type){case r.CONNECT:u=p(this.clientId,E(this.clientId),_,u),void 0!==this.willMessage&&(u=p(this.willMessage.destinationName,E(this.willMessage.destinationName),_,u),u=h(e.byteLength,_,u),_.set(e,u),u+=e.byteLength),void 0!==this.userName&&(u=p(this.userName,E(this.userName),_,u)),void 0!==this.password&&(u=p(this.password,E(this.password),_,u));break;case r.PUBLISH:_.set(s,u);break;case r.SUBSCRIBE:for(a=0;a<this.topics.length;a++)u=p(this.topics[a],o[a],_,u),_[u++]=this.requestedQos[a];break;case r.UNSUBSCRIBE:for(a=0;a<this.topics.length;a++)u=p(this.topics[a],o[a],_,u)}return f};var A=function(e,t){this._client=e,this._keepAliveInterval=1e3*t,this.isReset=!1;var n=new f(r.PINGREQ).encode(),o=function(e){return function(){return i.apply(e)}},i=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),this.timeout=setTimeout(o(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(a.PING_TIMEOUT.code,u(a.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(o(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},b=function(e,t,n,r){t||(t=30),this.timeout=setTimeout(function(e,t,n){return function(){return e.apply(t,n)}}(n,e,r),1e3*t),this.cancel=function(){clearTimeout(this.timeout)}},v=function(t,r,o,i,s){if(!("WebSocket"in e&&null!==e.WebSocket))throw new Error(u(a.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in e&&null!==e.ArrayBuffer))throw new Error(u(a.UNSUPPORTED,["ArrayBuffer"]));for(var c in this._trace("Paho.Client",t,r,o,i,s),this.host=r,this.port=o,this.path=i,this.uri=t,this.clientId=s,this._wsuri=null,this._localKey=r+":"+o+("/mqtt"!=i?":"+i:"")+":"+s+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,n)0!==c.indexOf("Sent:"+this._localKey)&&0!==c.indexOf("Received:"+this._localKey)||this.restore(c)};v.prototype.host=null,v.prototype.port=null,v.prototype.path=null,v.prototype.uri=null,v.prototype.clientId=null,v.prototype.socket=null,v.prototype.connected=!1,v.prototype.maxMessageIdentifier=65536,v.prototype.connectOptions=null,v.prototype.hostIndex=null,v.prototype.onConnected=null,v.prototype.onConnectionLost=null,v.prototype.onMessageDelivered=null,v.prototype.onMessageArrived=null,v.prototype.traceFunction=null,v.prototype._msg_queue=null,v.prototype._buffered_msg_queue=null,v.prototype._connectTimeout=null,v.prototype.sendPinger=null,v.prototype.receivePinger=null,v.prototype._reconnectInterval=1,v.prototype._reconnecting=!1,v.prototype._reconnectTimeout=null,v.prototype.disconnectedPublishing=!1,v.prototype.disconnectedBufferSize=5e3,v.prototype.receiveBuffer=null,v.prototype._traceBuffer=null,v.prototype._MAX_TRACE_ENTRIES=100,v.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(u(a.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(u(a.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},v.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(u(a.INVALID_STATE,["not connected"]));var n=new f(r.SUBSCRIBE);n.topics=e.constructor===Array?e:[e],void 0===t.qos&&(t.qos=0),n.requestedQos=[];for(var o=0;o<n.topics.length;o++)n.requestedQos[o]=t.qos;t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e,errorMessage:u(e)})}),t.timeout&&(n.timeOut=new b(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:a.SUBSCRIBE_TIMEOUT.code,errorMessage:u(a.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},v.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(u(a.INVALID_STATE,["not connected"]));var n=new f(r.UNSUBSCRIBE);n.topics=e.constructor===Array?e:[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new b(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:a.UNSUBSCRIBE_TIMEOUT.code,errorMessage:u(a.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},v.prototype.send=function(e){this._trace("Client.send",e);var t=new f(r.PUBLISH);if(t.payloadMessage=e,this.connected)e.qos>0?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(u(a.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(u(a.BUFFER_FULL,[this.disconnectedBufferSize]));e.qos>0?this._requires_ack(t):(t.sequence=++this._sequence,this._buffered_msg_queue.unshift(t))}},v.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(u(a.INVALID_STATE,["not connecting or connected"]));var e=new f(r.DISCONNECT);this._notify_msg_sent[e]=i(this._disconnected,this),this._schedule_message(e)},v.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},v.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},v.prototype.stopTrace=function(){delete this._traceBuffer},v.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this._wsuri=e,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=i(this._on_socket_open,this),this.socket.onmessage=i(this._on_socket_message,this),this.socket.onerror=i(this._on_socket_error,this),this.socket.onclose=i(this._on_socket_close,this),this.sendPinger=new A(this,this.connectOptions.keepAliveInterval),this.receivePinger=new A(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new b(this,this.connectOptions.timeout,this._disconnected,[a.CONNECT_TIMEOUT.code,u(a.CONNECT_TIMEOUT)])},v.prototype._schedule_message=function(e){this._msg_queue.unshift(e),this.connected&&this._process_queue()},v.prototype.store=function(e,t){var o={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case r.PUBLISH:t.pubRecReceived&&(o.pubRecReceived=!0),o.payloadMessage={};for(var i="",s=t.payloadMessage.payloadBytes,c=0;c<s.length;c++)s[c]<=15?i=i+"0"+s[c].toString(16):i+=s[c].toString(16);o.payloadMessage.payloadHex=i,o.payloadMessage.qos=t.payloadMessage.qos,o.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(o.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(o.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),o.sequence=t.sequence);break;default:throw Error(u(a.INVALID_STORED_DATA,[e+this._localKey+t.messageIdentifier,o]))}n.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(o))},v.prototype.restore=function(e){var t=n.getItem(e),o=JSON.parse(t),i=new f(o.type,o);switch(o.type){case r.PUBLISH:for(var s=o.payloadMessage.payloadHex,c=new ArrayBuffer(s.length/2),l=new Uint8Array(c),d=0;s.length>=2;){var _=parseInt(s.substring(0,2),16);s=s.substring(2,s.length),l[d++]=_}var h=new I(l);h.qos=o.payloadMessage.qos,h.destinationName=o.payloadMessage.destinationName,o.payloadMessage.duplicate&&(h.duplicate=!0),o.payloadMessage.retained&&(h.retained=!0),i.payloadMessage=h;break;default:throw Error(u(a.INVALID_STORED_DATA,[e,t]))}0===e.indexOf("Sent:"+this._localKey)?(i.payloadMessage.duplicate=!0,this._sentMessages[i.messageIdentifier]=i):0===e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[i.messageIdentifier]=i)},v.prototype._process_queue=function(){for(var e=null;e=this._msg_queue.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},v.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===r.PUBLISH&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},v.prototype._on_socket_open=function(){var e=new f(r.CONNECT,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},v.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},v.prototype._deframeMessages=function(e){var t=new Uint8Array(e),n=[];if(this.receiveBuffer){var r=new Uint8Array(this.receiveBuffer.length+t.length);r.set(this.receiveBuffer),r.set(t,this.receiveBuffer.length),t=r,delete this.receiveBuffer}try{for(var o=0;o<t.length;){var i=_(t,o),s=i[0];if(o=i[1],null===s)break;n.push(s)}o<t.length&&(this.receiveBuffer=t.subarray(o))}catch(e){var c="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(a.INTERNAL_ERROR.code,u(a.INTERNAL_ERROR,[e.message,c]))}return n},v.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case r.CONNACK:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var o=this._sentMessages[t];n.removeItem("Sent:"+this._localKey+o.messageIdentifier)}for(var t in this._sentMessages={},this._receivedMessages){var i=this._receivedMessages[t];n.removeItem("Received:"+this._localKey+i.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(a.CONNACK_RETURNCODE.code,u(a.CONNACK_RETURNCODE,[e.returnCode,s[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var c=[];for(var l in this._sentMessages)this._sentMessages.hasOwnProperty(l)&&c.push(this._sentMessages[l]);if(this._buffered_msg_queue.length>0)for(var d=null;d=this._buffered_msg_queue.pop();)c.push(d),this.onMessageDelivered&&(this._notify_msg_sent[d]=this.onMessageDelivered(d.payloadMessage));c=c.sort((function(e,t){return e.sequence-t.sequence}));for(var _=0,h=c.length;_<h;_++)if((o=c[_]).type==r.PUBLISH&&o.pubRecReceived){var p=new f(r.PUBREL,{messageIdentifier:o.messageIdentifier});this._schedule_message(p)}else this._schedule_message(o);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var m=!1;this._reconnecting&&(m=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(m,this._wsuri),this._process_queue();break;case r.PUBLISH:this._receivePublish(e);break;case r.PUBACK:(o=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(o.payloadMessage));break;case r.PUBREC:(o=this._sentMessages[e.messageIdentifier])&&(o.pubRecReceived=!0,p=new f(r.PUBREL,{messageIdentifier:e.messageIdentifier}),this.store("Sent:",o),this._schedule_message(p));break;case r.PUBREL:i=this._receivedMessages[e.messageIdentifier],n.removeItem("Received:"+this._localKey+e.messageIdentifier),i&&(this._receiveMessage(i),delete this._receivedMessages[e.messageIdentifier]);var E=new f(r.PUBCOMP,{messageIdentifier:e.messageIdentifier});this._schedule_message(E);break;case r.PUBCOMP:o=this._sentMessages[e.messageIdentifier],delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(o.payloadMessage);break;case r.SUBACK:(o=this._sentMessages[e.messageIdentifier])&&(o.timeOut&&o.timeOut.cancel(),128===e.returnCode[0]?o.onFailure&&o.onFailure(e.returnCode):o.onSuccess&&o.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case r.UNSUBACK:(o=this._sentMessages[e.messageIdentifier])&&(o.timeOut&&o.timeOut.cancel(),o.callback&&o.callback(),delete this._sentMessages[e.messageIdentifier]);break;case r.PINGRESP:this.sendPinger.reset();break;case r.DISCONNECT:this._disconnected(a.INVALID_MQTT_MESSAGE_TYPE.code,u(a.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(a.INVALID_MQTT_MESSAGE_TYPE.code,u(a.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(e){var T="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(a.INTERNAL_ERROR.code,u(a.INTERNAL_ERROR,[e.message,T]))}},v.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(a.SOCKET_ERROR.code,u(a.SOCKET_ERROR,[e.data]))},v.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(a.SOCKET_CLOSE.code,u(a.SOCKET_CLOSE))},v.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},v.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new f(r.PUBACK,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new f(r.PUBREC,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+e.payloadMessage.qos)}},v.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},v.prototype._connected=function(e,t){this.onConnected&&this.onConnected(e,t)},v.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},v.prototype._disconnected=function(e,t){if(this._trace("Client._disconnected",e,t),void 0!==e&&this._reconnecting)this._reconnectTimeout=new b(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=a.OK.code,t=u(a.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==a.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t})},v.prototype._trace=function(){if(this.traceFunction){var e=Array.prototype.slice.call(arguments);for(var t in e)void 0!==e[t]&&e.splice(t,1,JSON.stringify(e[t]));var n=e.join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer){t=0;for(var r=arguments.length;t<r;t++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===t?this._traceBuffer.push(arguments[t]):void 0===arguments[t]?this._traceBuffer.push(arguments[t]):this._traceBuffer.push("  "+JSON.stringify(arguments[t]))}},v.prototype._traceMask=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=r==t?"******":e[r]);return n};var I=function(e){var t,n;if(!("string"==typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)&&!(e instanceof DataView)))throw u(a.INVALID_ARGUMENT,[e,"newPayload"]);t=e;var r=0,o=!1,i=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof t?t:g(t,0,t.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"==typeof t){var e=new ArrayBuffer(E(t)),n=new Uint8Array(e);return T(t,n,0),n}return t}},destinationName:{enumerable:!0,get:function(){return n},set:function(e){if("string"!=typeof e)throw new Error(u(a.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e}},qos:{enumerable:!0,get:function(){return r},set:function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);r=e}},retained:{enumerable:!0,get:function(){return o},set:function(e){if("boolean"!=typeof e)throw new Error(u(a.INVALID_ARGUMENT,[e,"newRetained"]));o=e}},topic:{enumerable:!0,get:function(){return n},set:function(e){n=e}},duplicate:{enumerable:!0,get:function(){return i},set:function(e){i=e}}})};return{Client:function(e,t,n,r){var i;if("string"!=typeof e)throw new Error(u(a.INVALID_TYPE,[c(e),"host"]));if(2==arguments.length){r=t;var s=(i=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!s)throw new Error(u(a.INVALID_ARGUMENT,[e,"host"]));e=s[4]||s[2],t=parseInt(s[7]),n=s[8]}else{if(3==arguments.length&&(r=n,n="/mqtt"),"number"!=typeof t||t<0)throw new Error(u(a.INVALID_TYPE,[c(t),"port"]));if("string"!=typeof n)throw new Error(u(a.INVALID_TYPE,[c(n),"path"]));var l=-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1);i="ws://"+(l?"["+e+"]":e)+":"+t+n}for(var d=0,f=0;f<r.length;f++){var _=r.charCodeAt(f);55296<=_&&_<=56319&&f++,d++}if("string"!=typeof r||d>65535)throw new Error(u(a.INVALID_ARGUMENT,[r,"clientId"]));var h=new v(i,e,t,n,r);Object.defineProperties(this,{host:{get:function(){return e},set:function(){throw new Error(u(a.UNSUPPORTED_OPERATION))}},port:{get:function(){return t},set:function(){throw new Error(u(a.UNSUPPORTED_OPERATION))}},path:{get:function(){return n},set:function(){throw new Error(u(a.UNSUPPORTED_OPERATION))}},uri:{get:function(){return i},set:function(){throw new Error(u(a.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return h.clientId},set:function(){throw new Error(u(a.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return h.onConnected},set:function(e){if("function"!=typeof e)throw new Error(u(a.INVALID_TYPE,[c(e),"onConnected"]));h.onConnected=e}},disconnectedPublishing:{get:function(){return h.disconnectedPublishing},set:function(e){h.disconnectedPublishing=e}},disconnectedBufferSize:{get:function(){return h.disconnectedBufferSize},set:function(e){h.disconnectedBufferSize=e}},onConnectionLost:{get:function(){return h.onConnectionLost},set:function(e){if("function"!=typeof e)throw new Error(u(a.INVALID_TYPE,[c(e),"onConnectionLost"]));h.onConnectionLost=e}},onMessageDelivered:{get:function(){return h.onMessageDelivered},set:function(e){if("function"!=typeof e)throw new Error(u(a.INVALID_TYPE,[c(e),"onMessageDelivered"]));h.onMessageDelivered=e}},onMessageArrived:{get:function(){return h.onMessageArrived},set:function(e){if("function"!=typeof e)throw new Error(u(a.INVALID_TYPE,[c(e),"onMessageArrived"]));h.onMessageArrived=e}},trace:{get:function(){return h.traceFunction},set:function(e){if("function"!=typeof e)throw new Error(u(a.INVALID_TYPE,[c(e),"onTrace"]));h.traceFunction=e}}}),this.connect=function(e){if(o(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(u(a.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(u(a.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof I))throw new Error(u(a.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,void 0===e.willMessage.destinationName)throw new Error(u(a.INVALID_TYPE,[c(e.willMessage.destinationName),"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(u(a.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(u(a.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,r=0;r<e.hosts.length;r++){if("string"!=typeof e.hosts[r])throw new Error(u(a.INVALID_TYPE,[c(e.hosts[r]),"connectOptions.hosts["+r+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[r])){if(0===r)t=!0;else if(!t)throw new Error(u(a.INVALID_ARGUMENT,[e.hosts[r],"connectOptions.hosts["+r+"]"]))}else if(t)throw new Error(u(a.INVALID_ARGUMENT,[e.hosts[r],"connectOptions.hosts["+r+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(u(a.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(u(a.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!==e.ports.length)throw new Error(u(a.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));for(e.uris=[],r=0;r<e.hosts.length;r++){if("number"!=typeof e.ports[r]||e.ports[r]<0)throw new Error(u(a.INVALID_TYPE,[c(e.ports[r]),"connectOptions.ports["+r+"]"]));var s=e.hosts[r],l=e.ports[r],d=-1!==s.indexOf(":");i="ws://"+(d?"["+s+"]":s)+":"+l+n,e.uris.push(i)}}}h.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(o(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(u(a.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));h.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(o(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");h.unsubscribe(e,t)},this.send=function(e,t,n,r){var o;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof I)&&"string"!=typeof e)throw new Error("Invalid argument:"+c(e));if(void 0===(o=e).destinationName)throw new Error(u(a.INVALID_ARGUMENT,[o.destinationName,"Message.destinationName"]));h.send(o)}else(o=new I(t)).destinationName=e,arguments.length>=3&&(o.qos=n),arguments.length>=4&&(o.retained=r),h.send(o)},this.publish=function(e,t,n,r){var o;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof I)&&"string"!=typeof e)throw new Error("Invalid argument:"+c(e));if(void 0===(o=e).destinationName)throw new Error(u(a.INVALID_ARGUMENT,[o.destinationName,"Message.destinationName"]));h.send(o)}else(o=new I(t)).destinationName=e,arguments.length>=3&&(o.qos=n),arguments.length>=4&&(o.retained=r),h.send(o)},this.disconnect=function(){h.disconnect()},this.getTraceLog=function(){return h.getTraceLog()},this.startTrace=function(){h.startTrace()},this.stopTrace=function(){h.stopTrace()},this.isConnected=function(){return h.connected}},Message:I}}(s)},"object"===c(t)&&"object"===c(r)?r.exports=a():void 0===(i="function"==typeof(o=a)?o.call(t,n,t,r):o)||(r.exports=i)}).call(this,n(84),n(358)(e))},function(e,t,n){var r=n(355).Auth,o=n(370),i=n(64),a=n(394),s=n(152),c=n(154),u={init:function(){var e=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}),t=TrelloPowerUp.Promise;function n(e){var t='<div class="item">';switch(e.type){case"ERROR":t+='<i class="red warning circle icon"></i>';break;case"WARNING":t+='<i class="yellow warning circle icon"></i>';break;case"MESSAGE":case"END":t+='<i class="blue info circle icon"></i>'}return t+='<div class="content">'.concat(s.markdownToHtml(e.message),"</div>"),t+="</div>"}function u(e){var t=(e||[]).map(n)||'<div class="item"><i class="blue info circle icon"></i><div class="content">Command started.</div></div>';$("#butler-command-run-details .list").html(t).find(".content a").attr("target","_blank")}function l(t){switch(t.error){case"CANT_PARSE_COMMAND":$("#butler-error-command-parse").transition("slide up");break;case"COMMAND_NOT_FOUND":$("#butler-error-command-not-found").transition("slide up");break;case"USER_NOT_FOUND":$("#butler-error-user-not-found").transition("slide up");break;case"INVALID_TOKEN":r.reauthorize(e),$("#butler-error-auth").transition("slide up");break;case"BAD_REQUEST":case"INTERNAL_ERROR":default:$("#butler-error-internal").transition("slide up")}}function d(t){$("#butler-running-command").transition({animation:"slide up",onComplete:function(){if(t.success){var n=t.response.powerup_usage_exceeded;n?($("#butler-error-quota").transition("slide up"),$(".butler-account-details-btn").off("click").click((function(){return e.overlay({url:"./powerup-account.html?tab=account"}),e.closeBoardBar().done(),!1}))):(t.response.messages||[]).some((function(e){return"ERROR"===e.type}))?$("#butler-error-running-command").transition("slide up"):(t.response.messages||[]).some((function(e){return"WARNING"===e.type}))?$("#butler-warning-running-command").transition("slide up"):$("#butler-success-running-command").transition("slide up"),n||setTimeout((function(){$("#butler-command-run-details:visible").length||e.closeBoardBar().done()}),5e3)}else l(t)}})}function f(t,r){var o=t.response.messages,s=t.response.async;s.onConnectionSuccess=function(){$.ajax("".concat(i,"powerup-resume-command"),{type:"POST",data:JSON.stringify({job_id:s.job_id}),headers:{"X-Butler-Trello-Token":r},contentType:"application/json"}).done((function(t){t.success?(u(o),$("#butler-command-run-details").transition("slide up"),$(".butler-command-run-details-btn").transition("hide"),e.sizeTo("body")):l(t)})).fail((function(){$("#butler-running-command").transition("slide up"),$("#butler-error-running-command-network").transition("slide up")}))},s.onConnectionFailure=function(){$("#butler-error-running-command-network").transition("slide up")};var c=!1;s.onConnectionLost=function(){c||$("#butler-error-running-command-network").transition("slide up")},s.onMessageReceived=function(e,r,i){var a=JSON.parse(i);o.push(a),function(e){var t=$(n(e));t.find(".content a").attr("target","_blank"),$("#butler-command-run-details .list").append(t),$("#butler-command-run-details > .segment").animate({scrollTop:t.offset().top},500)}(a),"END"===a.type&&(c=!0,d(t))},a.connect(s)}o.init();var _=(window.location.search.match(/cmd=([-_a-zA-Z0-9]*)/)||[])[1],h=(window.location.search.match(/obo=([a-fA-F0-9]*)/)||[])[1],p=(window.location.search.match(/type=([-_a-zA-Z0-9]*)/)||[])[1];h&&o.setAdminOnBehalfOf(h),r.authorize(e).then((function(){!function(n,r,a){var l="run-butlerCommand/".concat(["boardButton","schedule"].includes(a)?a:"rule"),_=c.startTask({taskName:l,source:"commandRunner"});t.join(e.board("id","name"),e.card("id").catch((function(){return{}})),e.member("id"),o.getCommandById(r,!1,!0)).spread((function(t,a,h,p){var m=p&&p.label?'"'.concat(p.label,'"'):$(".butler-command-name").attr("default-text");$(".butler-command-name").text(m),$(".butler-cancel-command").transition("hide"),$("#butler-running-command").transition("slide up"),$.ajax("".concat(i,"powerup-run-command"),{type:"POST",data:JSON.stringify({cmd_id:r,command:p,board_data:{board_id:t.id,board_name:t.name,tz:moment.tz.guess(),context:navigator.userAgent},parameters:{card_id:a.id},obo:o.getAdminOnBehalfOf()}),headers:{"X-Butler-Trello-Token":n},contentType:"application/json"}).done((function(t){if(c.taskSucceeded({traceId:_,taskName:l,source:"commandRunner"}),t.response){if(t.response.async)return f(t,n);$(".butler-command-run-details-btn").transition("show").off("click").click((function(){u(t.response.messages),$(".butler-command-run-details-btn").transition("hide"),$("#butler-command-run-details").transition("show"),e.sizeTo("body")}))}else $(".butler-command-run-details-btn").transition("hide");d(t)})).fail((function(e){s.handleError("commandRunner",new Error("Run command request failed: ".concat(e.status," - ").concat(e.statusText))),$("#butler-running-command").transition("slide up"),504===e.status?$("#butler-error-running-command-gateway-timeout").transition("slide up"):$("#butler-error-running-command-network").transition("slide up"),c.taskFailed({traceId:_,taskName:l,source:"commandRunner",error:new Error("Run command request failed: ".concat(e.status," - ").concat(e.statusText))})}))}))}(r.getActiveToken(),_,p)}))}};window.CommandRunner=u,e.exports=u},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(360),c=n(376),u=c.decompressFromEncodedURIComponent,l=c.compressToEncodedURIComponent,d=n(432).default,f=n(355).Auth,_=n(378),h=n(379),p=h.getCurrentTab,m=h.showTab,E=n(393),T=n(370),g=n(433),A=n(64),b=n(354),v=n(374),I=n(152),O=I.handleError,y=I.markdownToHtml,N=I.sanitize,S=I.makeSlug,C=I.normalizeTabForUrl,R=n(390),D=n(389),w=n(154),M={suggestions:"butlerSuggestionsScreen",rules:"butlerRulesScreen","card-buttons":"butlerCardButtonsScreen","board-buttons":"bulterBoardButtonsScreen",schedules:"butlerSchedulesScreen","on-dates":"butlerOnDatesScreen","connected-apps":"butlerConnectedAppsScreen"},k={rules:"rule",rule:"rule","card-button":"card-button","card-buttons":"card-button","board-button":"board-button","board-buttons":"board-button",schedule:"schedule",schedules:"schedule","on-date":"on-date","on-dates":"on-date"};function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tab,n=e.action,r=e.commandId,o=e.newCommand,i=e.newIcon,a=e.newLabel,s=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});if(!0===s.getContext().useRoutes){var c=C(t||p()),u=n?"/".concat(n):"",d=r?"/".concat(r):"",f=new URLSearchParams;o&&(f.set("c",l(o)),i&&f.set("i",i),a&&f.set("l",a));var _=o?"?".concat(f.toString()):"";s.board("shortLink","name").then((function(e){var t=S(e.name),n="https://trello.com/b/".concat(e.shortLink,"/").concat(t,"/butler/").concat(c).concat(u).concat(d).concat(_);s.navigate({url:n,trigger:!1})}))}}function P(){return m("connected-apps"),L(),R.init(_),f.authorize().then((function(){return R.getUserIntegrations().then((function(e){return $(".integration-disconnected").transition("show"),$(".integration-connected").transition("hide"),e.forEach((function(e){$('.integration-connected[data-app-name="'.concat(N(e.appName),'"]')).transition("show"),$('.integration-disconnected[data-app-name="'.concat(N(e.appName),'"]')).transition("hide");var t=$('.integration-description[data-app-name="'.concat(N(e.appName),'"]'));t.transition("hide");var n=R.handleActionSync(e.appName,"describe",e.appData);n&&t.html(y(n)).transition("show");var r=$('.revoke-integration[data-app-name="'.concat(N(e.appName),'"]')),o=R.handleActionSync(e.appName,"setupRevocation",e.appData);o&&(r.empty(),o.forEach((function(e){r.append('<div class="item integration-action" data-verb="revoke" data-app-name="Slack">'.concat(N(e),' <img class="icon" src="img/trash.svg"></img></div>'))})),r.closest(".ui,.dropdown").dropdown("clear"))})),$(".integration-action").off("click").click((function(t){var n=$(t.target).closest(".integration-action"),r=n.attr("data-app-name"),o=n.attr("data-verb"),i={event:t};"connect"===o?w.sendUIEvent({action:"clicked",actionSubject:"link",actionSubjectId:"integrationActionConnectLink",source:"butlerIntegrationsScreen",attributes:{appName:r,numOfConnections:(e||[]).length}}):"revoke"===o&&w.sendUIEvent({action:"clicked",actionSubject:"link",actionSubjectId:"integrationActionRevokeLink",source:"butlerIntegrationsScreen",attributes:{appName:r}}),R.handleAction(r,o,i).then(P).catch((function(e){Sentry.captureException(e),window._trello.alert({display:"error",duration:10,message:"App connection failed. Please retry."})}))})),e}))}))}function x(e,t){var n,r=$(".remove-command-popup");if($("body").append(r.detach()),r.transition("hide"),TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).getContext().commandSharing){var o=$(".add-command-to-board-popup"),i=$(".enabled-on-x-boards-popup");$("body").append(o.detach(),i.detach()),o.transition("hide"),i.transition("hide"),ee.shareCommand=void 0,ee.done=void 0}switch(m("".concat(e,"s")),$(".builder-batch-select,.builder-batch,.card-button,.board-button,.rule,.schedule,.on-date,.command-list-filter,.command-list,.empty-command-list,.admin-empty-command-list,.builder-wizard,.builder").transition("hide"),$(".".concat(e)).transition("show"),e){case"card-button":n="Card Buttons";break;case"board-button":n="Board Buttons";break;case"rule":n="Rules";break;case"schedule":n="Scheduled Commands";break;case"on-date":n="Due Date Commands"}$(".your-commands-header").text(n),void 0===t&&L(),f.authorizeSoft().then((function(){$(".command-section .new-command-btn").transition("show"),$(".command-section .get-started-btn").transition("hide"),re(e,t)})).catch((function(){var n;q(),n=function(){f.authorize().then((function(){x(e,t)}))},$(".command-section .new-command-btn").transition("hide"),$(".command-section .get-started-btn").off("click").click(n).transition("show")}))}function U(e){return e.sort((function(e,t){return e.label<t.label?-1:t.label<e.label?1:0}))}function H(){var e=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});return e.board("members").then((function(t){return!!t.members.find((function(t){return t.id===e.getContext().member}))}))}function B(e){return TrelloPowerUp.Promise.join(v.getUserPlanLocal(),T.getCommands(e)).spread((function(e,t){var n=t.commands,r=t.obo_writable;return{commands:U(n),is_admin:!!(e||{}).is_admin,obo_writable:r}}))}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.command,n=e.share,r=e.board;B(t.type).then((function(e){pe({type:(t=e.commands.find((function(e){return e.id===t.id}))||t).type,command:t,duplicate:!0,share:n,board:r})}))}function F(e){$(".command-list > .highlighted").removeClass("highlighted"),$(".command-list > .command").transition("stop all");var t,n=$(".command-list-filter .ui.dropdown.filter").dropdown("get value");switch(n){case"":case"all":t=function(){return!0};break;case"enabled":t=function(e){return e.find(".enable-command-tgl")[0].checked};break;case"disabled":t=function(e){return!e.find(".enable-command-tgl")[0].checked};break;case"search":var r=$(".command-list-filter .command-search input").val().toLowerCase();t=function(e){return-1!==e.find(".code-area").text().toLowerCase().indexOf(r)};break;default:t=function(e){return e.find(".command-lib-name>.text").text()===n}}var o=0;$(".command-list > .command").filter((function(){var e=t($(this)),n=$(this).filter(":visible").length>0;return e&&++o,e!==n})).transition(e?"scale":"toggle"),$(".filter-no-commands").transition(o?"hide":"show")}function W(){return T.getAllCommands().then((function(e){return e.commands.map((function(e){return e.lib})).sort().filter((function(e,t,n){return e&&e!==n[t-1]}))}))}function Y(e,t,n){t!==e.lib&&(n.addClass("disabled"),n.find(">.text").text(t),T.updateCommandId(e.id,{lib:t}).then((function(r){e.lib=r.lib,n.removeClass("disabled"),n.removeAttr("data-tooltip"),F(!0),b.logEvent("engagement","lib_set",!!t)})).catch((function(t){Sentry.captureException(t),n.find(">.text").text(e.lib),n.removeClass("disabled").attr("data-tooltip","Error saving.").transition("shake")})))}function V(e,t){t.popup({popup:".add-command-to-board-popup",on:"click",position:"bottom center",lastResort:"bottom left",boundary:".command-list",duration:0,exclusive:!0,onShow:function(){if($(".add-command-to-board-popup").parent()[0]===$("body")[0])return!1;$(this).attr("command-id",e.id);var t=$(this).find(".add-automation-btn");t.addClass("disabled");var n=$(this).find('[name="board-name"]');_.getAllOpenBoards().then((function(r){var o=r.filter((function(t){return!e.b.includes(t.id)}));_.setupBoardNameDropdown(n,o,t)})),w.sendUIEvent({action:"clicked",actionSubject:"button",actionSubjectId:"addToBoardButtonPopup",source:M[p().trim()]})},onHidden:function(){K(e,t),V(e,$("#".concat(e.id)).find(".add-to-board-btn"))}})}var G=function(e){return'<div class="ui checked checkbox enabled-on-board-checkbox">\n            <input type="checkbox" class="enable-board-tgl">\n            <label>'.concat(N(e),"</label>\n            </div>")};function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click";t.popup({popup:".enabled-on-x-boards-popup",on:n,position:"bottom center",lastResort:"bottom right",boundary:".command-list",duration:0,exclusive:!0,onShow:function(){if($(".enabled-on-x-boards-popup").parent()[0]===$("body")[0])return!1;$(this).attr("command-id",e.id);var t=$(this).find(".enabled-on-board-menu");_.getAllOpenBoards().then((function(n){var r=n.filter((function(t){return e.b.includes(t.id)}));t.empty(),r.forEach((function(n){t.append(G(n.name));var r=t.find(".enabled-on-board-checkbox").last();r.checkbox("check"),r.checkbox({onChange:function(){var t=$(".sharing-btns");t.addClass("disabled");var r=e.b;this.checked?r.push(n.id):r=r.filter((function(e){return e!==n.id})),$(".enabled-on-x-boards-popup").transition("hide"),$("body").append($(".enabled-on-x-boards-popup").detach()),ee={},oe(e.id,e.type,e.cmd,{boards:r}).then((function(){t.removeClass("disabled")}))}})}))})),w.sendUIEvent({action:"clicked",actionSubject:"link",actionSubjectId:"enabledOnXBoardsLink",source:M[p().trim()]})}})}function z(e){var t=moment(Math.min(+new Date,e.t)).fromNow(),n="Last modified ".concat(t);TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).getContext().commandSharing?_.getAllOpenBoards().then((function(r){var o=e.b?r.filter((function(t){return e.b.includes(t.id)})).length:0;o>0&&(n='<span class="enabled-on-x-boards">Enabled on '.concat(o," board").concat(1===o?"":"s",",</span> last modified ").concat(t)),e.is_own||(n+=' <span data-tooltip="Owner of this shared command"> by @'.concat(N(e.username),"</span>")),$("#".concat(e.id," .modified-by")).html(n),K(e,$("#".concat(e.id)).find(".enabled-on-x-boards"))})):(e.is_own||(n+=' <span data-tooltip="Owner of this shared command"> by @'.concat(N(e.username),"</span>")),$("#".concat(e.id," .modified-by")).html(n))}function q(e){$(".command-list,.command-list-filter").transition("hide");var t=T.getAdminOnBehalfOf()?$(".admin-empty-command-list"):$(".empty-command-list");e?t.transition({animation:"fade down",duration:"0.33s"}):t.transition("show"),$(".library-manage").transition("show")}function X(e){e.transition({animation:"fade down",duration:"0.33s",onComplete:function(){e.remove(),$(".command-list").children().length||q(!0)}})}function J(){$(".command-list").children().length?($(".empty-command-list,.admin-empty-command-list").transition("hide"),$(".command-list,.command-list-filter,.create-command-buttons.top").transition("show"),F(),$(".library-manage").transition("show")):((T.getAdminOnBehalfOf()?$(".admin-empty-command-list"):$(".empty-command-list")).transition("show"),q());$(".command-section:visible").length||$(".command-section").transition({animation:"fade left",duration:"0s",onComplete:function(){}})}function Q(){$(".builder-wizard:visible").length?$(".builder-wizard").transition({animation:"fade left",duration:"0.33s",onComplete:J}):J()}function Z(e){var t=$(e.target).closest(".command"),n=t.attr("id"),r=$(".sharing-btns"),o=M[p().trim()],i=e.target.checked?"enable-butlerCommand":"disable-butlerCommand",a=w.startTask({taskName:i,source:o});w.sendUIEvent({action:"clicked",actionSubject:"button",actionSubjectId:"enableCommandButton",source:M[p().trim()],attributes:{isChecked:e.target.checked}}),r.addClass("disabled"),T.enableCommandId(n,e.target.checked).then((function(e){void 0===e&&X(t),r.removeClass("disabled"),F(!0),TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).getContext().commandSharing&&z(e),w.taskSucceeded({taskName:i,traceId:a,source:o})})).catch((function(t){O("enableCommand",t),w.taskFailed({taskName:i,traceId:a,source:o,error:t}),r.removeClass("disabled"),$(e.target).closest(".ui.checkbox").checkbox("set ".concat(e.target.checked?"unchecked":"checked")).attr("data-tooltip","Error saving.").transition("shake")}))}var ee={};function te(e,t,n,r){var o=ee.is_admin,i=g.buttonItem(e,o);n?i.insertBefore($("#".concat(n))):i.appendTo($(".command-list")),z(e),i.transition({animation:"fade down",duration:t?"0s":"0.33s",onComplete:function(){}}),i.find(".edit-command-btn").click((function(){T.getCommand(e.type,e.id,!0).then((function(t){pe({type:e.type,command:t})})),$(".command-list > .highlighted").removeClass("highlighted")})),i.find(".copy-command-btn").click((function(){j({command:e})}));var a={popup:".remove-command-popup",on:"click",position:"bottom center",lastResort:"bottom left",boundary:".command-list",duration:0,onShow:function(){$(this).attr("command-id",e.id),i.find(".command-btns").after($(this).detach())}};i.find(".remove-command-btn").popup(a),r?i.find(".enable-command-tgl").closest(".ui.checkbox").checkbox({onChange:function(){Z({target:this})}}):i.find(".enable-command-tgl").closest(".ui.checkbox").checkbox("set disabled").attr("data-tooltip","You must be a member of the board to perform this action.").attr("data-position","top left"),i.find(".share-command-tgl").closest(".ui.checkbox").checkbox({onChange:function(){var e,t,n;e={target:this},t=$(e.target).closest(".command").attr("id"),n=$(".sharing-btns"),w.sendUIEvent({action:"clicked",actionSubject:"button",actionSubjectId:"shareCommandButton",source:M[p().trim()],attributes:{isChecked:e.target.checked}}),n.addClass("disabled"),T.updateCommandId(t,{shared:e.target.checked}).then((function(e){n.removeClass("disabled"),z(e)})).catch((function(t){Sentry.captureException(t),n.removeClass("disabled"),$(e.target).closest(".ui.checkbox").checkbox("set ".concat(e.target.checked?"unchecked":"checked")).attr("data-tooltip","Error saving.").transition("shake")})),e.target.checked&&b.logEvent("engagement","share_button")}}),i.find(".scope-command-tgl").closest(".ui.checkbox").checkbox({onChange:function(){var e,t,n;e={target:this},t=$(e.target).closest(".command").attr("id"),n=$(".sharing-btns"),w.sendUIEvent({action:"clicked",actionSubject:"button",actionSubjectId:"scopeCommandButton",source:M[p().trim()],attributes:{isChecked:e.target.checked}}),n.addClass("disabled"),T.updateCommandId(t,{scope:e.target.checked?T.ScopeTeam:T.ScopeBoard}).then((function(e){n.removeClass("disabled"),z(e)})).catch((function(t){t.message&&-1===t.message.indexOf("member is not in the organization")&&Sentry.captureException(t),n.removeClass("disabled"),$(e.target).closest(".ui.checkbox").checkbox("set ".concat(e.target.checked?"unchecked":"checked")).attr("data-tooltip","Board is not in a workspace.").transition("shake")})),e.target.checked&&b.logEvent("engagement","team_scope_button")}}),i.find(".command-log-btn").click((function(){L({action:"log",commandId:e.id}),E.openCommandLog(e,null,L)}))}function ne(e,t,n,r,o){if(-1===e.type.indexOf("button")){var i=ee.is_admin,a=g.commandItem(e,r,i);n?a.insertBefore($("#".concat(n))):a.appendTo($(".command-list")),z(e),a.transition({animation:"fade down",duration:t?"0s":"0.33s",onComplete:function(){}}),a.find(".edit-command-btn").click((function(){T.getCommand(e.type,e.id,!0).then((function(e){pe({type:e.type,command:e})})),$(".command-list > .highlighted").removeClass("highlighted")})),a.find(".copy-command-btn").click((function(){j({command:e})}));var s={popup:".remove-command-popup",on:"click",position:"bottom center",lastResort:"bottom left",boundary:".command-list",duration:0,onShow:function(){$(this).attr("command-id",e.id),a.find(".command-btns").after($(this).detach())}};if(a.find(".remove-command-btn").popup(s),TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).getContext().commandSharing)V(e,a.find(".add-to-board-btn")),K(e,a.find(".enabled-on-x-boards"));else{var c=a.find(".add-to-board-btn");c.addClass("disabled"),c.transition("hide")}a.find(".enable-command-tgl").closest(".ui.checkbox").checkbox({onChange:function(){Z({target:this})}}),o||a.find(".enable-command-tgl").closest(".ui.checkbox").checkbox("set disabled").attr("data-tooltip","You must be a member of the board to perform this action.").attr("data-position","top left"),a.find(".command-log-btn").click((function(){L({tab:e.type,action:"log",commandId:e.id}),E.openCommandLog(e,T.getAdminOnBehalfOf(),L)})),a.find(".run-command-btn").click((function(){var t=T.getAdminOnBehalfOf();TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).boardBar({height:38,url:"./powerup-command-runner.html?cmd=".concat(e.id,"&type=").concat(e.type).concat(t?"&obo=".concat(t):"")})})),function(e,t){var n=$(".command-lib-name-popup>.popup").clone(),r=n.find(".lib-select");t.popup({popup:n,on:"click",position:"right center",target:t.find("i"),exclusive:!0,onShow:function(){r.dropdown({allowAdditions:!1,forceSelection:!1,action:"hide",message:{addResult:"",noResults:"Press enter to create tag"},onChange:function(n){t.popup("hide"),Y(e,n,t)},onHide:function(){r.find("input.search").off("keydown")}}).dropdown(e.lib?"set text":"clear text",N(e.lib||"")),W().then((function(n){var o=n.map((function(t){return{name:N(t),value:N(t),selected:t===e.lib}}));r.dropdown("setup menu",{values:o}),setTimeout((function(){var n=r.find("input.search");n.on("keydown",(function(r){var o=r.keyCode||r.which;return"Enter"!==r.key&&"13"!==o||(t.popup("hide"),Y(e,n.val(),t),n.off("keydown"),!1)})),n.focus()}),0)})),r.find("> a.info").transition(e.lib?"hide":"show"),r.find("> a.remove").transition(e.lib?"show":"hide").off("click").click((function(){t.popup("hide"),Y(e,"",t)}))},onHidden:function(){t.append($(this).popup().detach())}})}(e,a.find(".command-lib-name"))}else te(e,t,n,o)}function re(e,t){var n=M[p().trim()],r=w.startTask({taskName:"view-butlerCommands/dashboard",source:n});$(".command-list").empty(),$(".command-list-filter").transition("hide"),$(".command-list-error").transition("hide"),$(".command-list-loading").transition("show"),$(".create-command-buttons").transition("hide"),$(".library-manage").transition("hide"),B(e).then((function(e){return H().then((function(t){return i(i({},e),{},{is_board_member:t})}))})).then((function(o){p()==="".concat(e,"s")&&($(".command-list-loading").transition("hide"),$(".create-command-buttons").transition("show"),o.is_admin?function(e){var t=$(".admin-ui .admin-member-select");if(e.match(/button/))return T.setAdminOnBehalfOf(),void t.dropdown({onChange:function(){}}).dropdown("clear");var n=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});TrelloPowerUp.Promise.join(n.board("members"),n.member("all")).spread((function(n,r){var o=t.find(".menu");o.find(">.item").remove(),o.append('<div class="item" data-value="'.concat(N(r.id),'">')+'<span class="text-body">'.concat(N(r.fullName)," <small>(@").concat(N(r.username),")</small></span>")+"</div>"),n.members.forEach((function(e){e.id!==r.id&&o.append('<div class="item" data-value="'.concat(N(e.id),'">')+'<span class="text-body">'.concat(N(e.fullName)," (@").concat(N(e.username),")</span>")+"</div>")}));var i=o.find(".ui.search.input");n.members.length>9?i.show():i.hide(),t.dropdown({onChange:function(t){t===r.id&&(t=void 0),T.getAdminOnBehalfOf()!==t&&(T.setAdminOnBehalfOf(t),re(e),b.logEvent("engagement","admin_select"))}}),$(".admin-ui").transition("show")}))}(e):$(".admin-ui").transition("hide"),ee.is_admin=o.is_admin,$(".command-section .new-command-btn").transition(!1===o.obo_writable?"hide":"show"),o.commands.forEach((function(e){ne(e,!0,null,o.obo_writable,o.is_board_member)})),Q(),w.taskSucceeded({taskName:"view-butlerCommands/dashboard",traceId:r,source:n}),t&&t())})).catch((function(e){O("loadCommands",e),w.taskFailed({taskName:"view-butlerCommands/dashboard",traceId:r,source:n,error:e}),$(".command-list-loading").transition("hide"),"NOT_AUTHORIZED"===e.message?$(".command-list-error.not-authorized").transition("show"):$(".command-list-error.error-loading").transition("show")}))}function oe(e,t,n,r){var o=r.label,a=r.icon,s=r.image,c=r.enabled,u=r.close_card,l=r.boards,d={label:o,icon:a,image:s,cmd:n,enabled:c,close:u?1:void 0,b:l};return T.updateCommandId(e,d).then((function(){return T.getCommands(t)})).then((function(e){return H().then((function(t){return i(i({},e),{},{is_board_member:t})}))})).then((function(t){var n=t.commands,r=t.is_board_member;if(!TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).getContext().commandSharing||!ee.done){Q(),L(),U(n);var i=n.findIndex((function(t){return t.id===e})),a=n.splice(i,1)[0];$("#".concat(e)).remove();var s=n.findIndex((function(e){return e.label>o}));ne(a,!1,-1===s?null:n[s].id,t.obo_writable,r),F(!0)}}))}var ie=!1,ae=_.collectPhrase;function se(){var e=$(".builder-output .item").length;if(ee.has_trigger){var t=$(".builder.triggers"),n=$(".builder.actions");if(!$(".builder-output .output-trigger .list").children().length)return $(".save-builder-output-btn").toggleClass("disabled",!0),TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).getContext().commandSharing&&$(".add-automation-builder-output-btn").addClass("disabled"),$(".js-empty-trigger").transition("show"),$(".output-trigger .command-trigger").transition("hide"),$(".output-actions").transition("hide"),void n.transition({animation:"fade down",duration:"0.33s",onComplete:function(){ee.has_trigger&&t.transition("fade down")}});$(".js-empty-trigger").transition("hide"),$(".output-trigger .command-trigger").transition("show"),$(".output-actions").transition("show"),e-=1,n.hasClass("hidden")&&t.transition({animation:"fade down",duration:"0.33s",onComplete:function(){n.transition("fade down")}})}var r=$(".builder-output"),o=$(".builder-output .output-actions");$(".save-builder-output-btn").toggleClass("disabled",!e);var i=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});i.getContext().commandSharing?$(".add-automation-builder-output-btn").toggleClass("disabled",!e):$(".builder.actions-body").transition("show"),$(".add-actions").transition("hide"),e?($(".first-action").transition("hide"),$(".another-action").transition("show"),$(".js-empty-actions").transition("hide"),$(".js-empty-actions-command-sharing").transition("hide"),$(".output-actions .command-actions").transition("show"),r.hasClass("hidden")?(o.transition("show"),r.transition("fade down")):o.hasClass("hidden")&&o.transition("fade down")):($(".first-action").transition("show"),$(".another-action").transition("hide"),$(".output-actions .command-actions").transition("hide"),i.getContext().commandSharing&&ee.shareCommand?$(".js-empty-actions-command-sharing").transition("show"):$(".js-empty-actions").transition("show")),i.getContext().commandSharing&&(ee.shareCommand?($(".builder.actions-body").transition("hide"),$(".builder-output .review-command").transition("show"),ee.done&&($(".first-action").transition("hide"),$(".js-empty-actions").transition("hide"),$(".js-empty-actions-command-sharing").transition("hide"),$(".output-actions .command-actions").transition("hide"),$(".builder-output .review-command").transition("hide"),$(".builder-output .output-done-command").transition("show"),d({angle:s.random(55,125),spread:s.random(50,70),particleCount:s.random(40,75),origin:{x:(parseInt($(".left-pane").css("width"),10)+parseInt($(".right-pane").css("padding-left"),10))/window.innerWidth}}))):$(".builder.actions-body").transition("show"))}function ce(e,t){e?($(".js-empty-trigger").transition("show"),$(".output-trigger .command-trigger").transition("hide"),$(".output-actions").transition("hide"),$(".builder.triggers").transition("show"),$(".builder.actions").transition("hide")):($(".js-empty-trigger").transition("hide"),$(".output-trigger .command-trigger").transition("show"),$(".output-actions").transition("show"),$(".builder.triggers").transition("hide"),$(".builder.actions").transition("show")),t?$(".builder-output .output-trigger").transition("show"):$(".builder-output .output-trigger").transition("hide")}function ue(){var e=this.closest(".item");$(e).prev().detach().insertAfter(e)}function le(e){var t=$(e.target).closest(".item");t.transition({animation:"fade down",duration:"0.33s",onComplete:function(){t.remove(),se()}}),$(".too-many-actions").transition("hide"),$(".implicit-multiplier-stop").transition("hide")}function de(e,t){var n=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});n.getContext().commandSharing&&$(".list-does-not-exist-trigger").transition("hide");var r=g.triggerOutput(e);r.appendTo($(".builder-output .output-trigger .list")),r.find(".remove-trigger-btn").off("click").click(le);var o=r.find('[name="list-name"]');if(n.getContext().commandSharing&&o.length&&t){var i=o.val();_.getListsByBoardId(t.id).then((function(e){e.some((function(e){return e.name===i}))?_.setupListNameAutoComplete(o,{lists:e}):($(".list-does-not-exist-trigger").html('<i class="yellow warning sign icon"></i>The list <b>'.concat(N(i),"</b> does not exist on <b>").concat(t.name,"</b>. Please pick a different list.")).transition("show"),o.css("opacity",.4),_.setupListNameAutoComplete(o,{lists:e,clear_invalid_value:!0,listWarning:$(".list-does-not-exist-trigger")}),o.addClass("quoted-value-highlighted"),$(".prompt:first").focus())}))}else o.length&&_.setupListNameAutoComplete(o);var a=r.find('[name="board-name"]');a.length&&_.setupBoardNameAutoComplete(a,null,!0),se()}function fe(e,t,n){if($(".builder-output .output-actions .list .item").length>=40)$(".too-many-actions").transition("show");else if($(".too-many-actions").transition("hide"),$(".builder-output .output-actions .list .item.implicit-multiplier").length)$(".implicit-multiplier-stop").transition("show");else{$(".implicit-multiplier-stop").transition("hide");var r=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});r.getContext().commandSharing&&$(".list-does-not-exist-action").transition("hide");var o=g.actionOutput(t,e);o.appendTo($(".builder-output .output-actions .list")),t||o.transition({animation:"fade down",duration:$(".builder-output .output-actions:visible").length?"0.33s":"0s",onComplete:se}),o.find(".remove-action-btn").off("click").click(le),o.find(".move-up-action-btn").off("click").click(ue);var i=o.find('[name="list-name"]');if(r.getContext().commandSharing&&i.length&&n){var a=i.val();_.getListsByBoardId(n.id).then((function(e){e.some((function(e){return e.name===a}))?_.setupListNameAutoComplete(i,{lists:e}):($(".list-does-not-exist-action").html('<i class="yellow warning sign icon"></i>The list <b>'.concat(N(a),"</b> does not exist on <b>").concat(n.name,"</b>. Please pick a different list.")).transition("show"),i.css("opacity",.4),_.setupListNameAutoComplete(i,{lists:e,clear_invalid_value:!0,listWarning:$(".list-does-not-exist-action")}),i.addClass("quoted-value-highlighted"),$(".prompt:first").focus())}))}else i.length&&_.setupListNameAutoComplete(i);var s=o.find('[name="board-name"]');s.length&&_.setupBoardNameAutoComplete(s,null,!0)}}function _e(){var e=[];return $(".builder-output .output-phrase").each((function(t,n){e.push(ae($(n)[0]).trim())})),_.joinCommandPhrases(e,ee.has_trigger)}function he(e){var t,n=e.type,o=e.command,a=e.board;switch(n){case"card-button":case"board-button":t=!0}if(!t||$(".ui.form.button-config").form("is valid")){var c=_e(),u=$('.ui.form.button-config input[name="button-label"]').val().substring(0,100),l=$(".ui.form.button-config .button-icon-select > i").attr("class"),f=$(".ui.form.button-config .button-icon-select > i").attr("data-image"),_=$(".ui.form.button-config .button-enabled").prop("checked"),h=$(".ui.form.button-config .button-close-card").prop("checked"),m=$(".cancel-btn");m.addClass("disabled");var E=$(".save-builder-output-btn"),g=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});if(g.getContext().commandSharing)$(".add-automation-builder-output-btn").addClass("disabled");E.addClass("disabled");var A=E.find("i"),I=A.attr("class");A.attr("class","notched circle loading icon");var y=function(e){setTimeout((function(){m.removeClass("disabled"),E.removeClass("disabled"),A.attr("class",I),e?(O("saveBuilderOutput",e),E.attr("data-tooltip","Error saving: ".concat("object"===r(e)?e.message:e)).transition("shake")):E.attr("data-tooltip",null)}),0)};if(o&&o.id){var N=M[p().trim()],S=w.startTask({taskName:"edit-butlerCommand/dashboard",source:N});w.sendUIEvent({action:"clicked",actionSubject:"button",actionSubjectId:"saveBuilderOutputButton",source:M[p().trim()],attributes:{commandType:s.camelCase(o.type),idCommand:o.id,saveType:"update"}}),g.getContext().commandSharing&&a&&!o.b.some((function(e){return e===a.id}))&&o.b.push(a.id),oe(o.id,o.type,c,{label:u,icon:l,image:f,enabled:_,close_card:h,boards:o.b}).then((function(){w.taskSucceeded({taskName:"edit-butlerCommand/dashboard",traceId:S,source:N}),y()})).catch((function(e){w.taskFailed({taskName:"edit-butlerCommand/dashboard",traceId:S,source:N,error:e}),y(e)}))}else{var C=M[p().trim()],R=w.startTask({taskName:"create-butlerCommand/dashboard",source:C});w.sendUIEvent({action:"clicked",actionSubject:"button",actionSubjectId:"saveBuilderOutputButton",source:C,attributes:{commandType:s.camelCase(n),idCommand:"",saveType:"new"}}),function(e,t,n){var r=n.label,o=n.icon,a=n.image,c=n.enabled,u=n.close_card,l=n.boards,d={label:r,icon:o,image:a,cmd:t,type:e,shared:!1,scope:T.ScopeBoard,enabled:c,close:u?1:void 0,b:l};return B(e).then((function(n){return T.addCommand(d).then((function(t){return d=t,T.getCommands(e)})).then((function(e){return H().then((function(t){return i(i({},e),{},{is_board_member:t})}))})).then((function(o){var i=o.commands,a=o.is_board_member;if(!TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).getContext().commandSharing||!ee.done){var c=U(i).findIndex((function(e){return e.label>r}));return ne(d,!1,-1===c?null:i[c].id,n.obo_writable,a),Q(),L(),v.getUserPlanLocal().then((function(e){var t=e.plan_id;w.sendTrackEvent({action:"created",actionSubject:"command",source:M[p().trim()],attributes:{commandType:s.camelCase(d.type),plan:t}})})),b.logEvent("engagement","add_command_".concat(e),{type:e,length:t.length}),!0}}))}))}(n,c,{label:u,icon:l,image:f,enabled:_,close_card:h,boards:a?[a.id]:void 0}).then((function(){w.taskSucceeded({taskName:"create-butlerCommand/dashboard",traceId:R,source:C}),y()})).catch((function(e){w.taskFailed({taskName:"create-butlerCommand/dashboard",traceId:R,source:C,error:e}),y(e)}))}d({angle:s.random(55,125),spread:s.random(50,70),particleCount:s.random(40,75)})}}function pe(e){var t=e.type,n=e.command,r=e.suggestion,o=e.duplicate,i=e.share,a=e.done,s=e.board;!function(e){var t=e.type,n=e.share,r=e.done;ee={};var o="";switch(t){case"card-button":o="Create a Card Button",ee.has_trigger=!1;break;case"board-button":o="Create a Board Button",ee.has_trigger=!1;break;case"rule":o="Create a Rule",ee.has_trigger=!0;break;case"schedule":o="Create a Schedule Command",ee.has_trigger=!0;break;case"on-date":o="Create a Due Date Command",ee.has_trigger=!0}var i=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});if(i.getContext().commandSharing&&(n&&(o="Review your automation",ee.shareCommand=!0),r&&(o="Done!",ee.done=!0)),$(".create-header").text(o),!ie){ee.has_trigger||$(".add-triggers").transition("hide"),ie=!0,$(".builder-start-hidden").transition("hide"),$(".builder-tabs .item").tab({onFirstLoad:function(){_.setupDropdowns(this)}}),_.setupDropdowns(".builder .ui.tab.active"),$(".user-timezone").text(moment.tz.guess()),_.setupClauses(),_.setupInputFields(".builder"),_.setupPowerUpAutoComplete(".builder"),$("#builder-open-help").popup({on:"click",inline:!1,popup:$(".builder-help"),position:"top right",lastResort:"top right",hoverable:!1}),$(".builder-example").click((function(){return!1})).each((function(e,t){var n=$(t),r=n.next(".ui.popup");$(t).popup({on:"click",popup:r,target:!!n.length&&n,position:"top center",lastResort:!0,hoverable:!1,boundary:".builder-wizard-body"})})),$(".builder-advanced-toggle").checkbox({onChecked:function(){i.set("member","private","advanced",!0),$(".builder-basic").addClass("hidden").hide(),$(".builder-advanced").removeClass("hidden").show()},onUnchecked:function(){i.set("member","private","advanced",!1),$(".builder-basic").removeClass("hidden").show(),$(".builder-advanced").addClass("hidden").hide()}}),$(".builder-basic").removeClass("hidden").show(),$(".builder-advanced").addClass("hidden").hide(),$(".builder-advanced-toggle").checkbox("set unchecked"),i.get("member","private","advanced").then((function(e){e?($(".builder-basic").addClass("hidden").hide(),$(".builder-advanced").removeClass("hidden").show(),$(".builder-advanced-toggle").checkbox("set checked")):($(".builder-basic").removeClass("hidden").show(),$(".builder-advanced").addClass("hidden").hide(),$(".builder-advanced-toggle").checkbox("set unchecked"))})),$(".builder-show-more-content").hide(),$(".builder-show-more").click((function(){return $(".builder-show-more").hide(),$(".builder-show-more-content").show(),!1})),$(".triggers .phrase").prepend('<button type="submit" class="ui blue icon right floated button select-trigger-btn" tabindex="0"><i class="plus icon"></i></button>'),$(".actions .phrase").prepend('<div class="ui blue icon right floated button select-action-btn" tabindex="0"><i class="plus icon"></i></div>');$("form.ui.vertical.segment.phrase").submit((function(e){if(e.preventDefault(),!$(e.target).closest(".phrase").find('input[type="text"]:not(.optional):visible').filter((function(){return!this.value})).addClass("error").off("focus").focus((function(){$(this).removeClass("error")})).length){var t=$(e.target).closest(".phrase"),n=ae(t[0]).split("\n");n.slice(1).forEach((function(e){fe(e,!0)}));var r=$(".builder-wizard").offset().top;r<$("html").scrollTop()&&$("html,body").animate({scrollTop:r},"slow"),de(n[0])}})),$(".select-action-btn").click((function(e){if(!$(e.target).closest(".phrase").find('input[type="text"]:not(.optional):visible').filter((function(){return!this.value})).addClass("error").off("focus").focus((function(){$(this).removeClass("error")})).length){var t=$(e.target).closest(".phrase"),n=ae(t[0]),r=$(".builder-wizard").offset().top;r<$("html").scrollTop()&&$("html,body").animate({scrollTop:r},"slow"),fe(n),$(".select-action-btn").blur()}}))}}({type:t,share:i,done:a}),$("body").append($(".remove-command-popup").detach());var c=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});c.getContext().commandSharing&&($("body").append($(".add-command-to-board-popup").detach()),$("body").append($(".enabled-on-x-boards-popup").detach())),n&&n.id?c.getContext().commandSharing&&i?L({action:"share",commandId:n.id}):L({action:"edit",commandId:n.id}):L(n?{action:"new",newCommand:n.cmd,newIcon:n.image,newLabel:n.label}:{action:"new"}),r?$(".builder .cancel-btn, .builder-wizard .cancel-btn").off("click").click((function(){Q(),Ae()})):$(".builder .cancel-btn, .builder-wizard .cancel-btn").off("click").click((function(){Q(),L()}));var u=$(".builder-wizard:visible").length,l=function(){!function(e){var t=e.command,n=e.suggestion,r=e.duplicate,o=e.share,i=e.done,a=e.board;if($(".ui.form.button-config").form("clear"),$(".ui.form.button-config .button-enabled").prop("checked",!0),$(".phrase input.error").removeClass("error"),$(".builder-output .list").empty(),$(".js-empty-trigger").transition("show"),$(".js-empty-actions").transition("show"),$(".js-empty-actions-command-sharing").transition("hide"),$(".add-actions").transition("show"),$(".actions-body").transition("hide"),$(".add-triggers").transition("show"),$(".triggers-body").transition("hide"),$(".output-actions .command-trigger").transition("hide"),$(".output-actions .command-actions").transition("hide"),$(".builder-output .review-command").transition("hide"),$(".save-builder-output-btn").toggleClass("disabled",!0),$(".save-builder-output-btn").transition("show"),$(".cancel-btn").transition("show"),$(".another-action").transition("hide"),$(".builder-output .output-done-command").transition("hide"),$(".add-automation-builder-output-btn").transition("hide"),$(".add-automation-cancel-btn").transition("hide"),$(".back-to-rules-btn").transition("hide"),$(".add-automation-builder-output-btn").toggleClass("disabled",!0),t){var s=t.label;s&&r&&(s+=" (copy)"),$('.ui.form.button-config input[name="button-label"]').val(s),$(".ui.form.button-config .button-enabled").prop("checked",t.enabled),$(".ui.form.button-config .button-close-card").prop("checked",t.close);var c=$(".ui.form.button-config .button-icon-select .menu i").removeClass("selected").filter('[data-image="'.concat(t.image,'"]')).addClass("selected");c.length&&$(".ui.form.button-config .button-icon-select > i").replaceWith(c.clone())}var u=t?t.cmd.split(",\n").map((function(e){return"and "===e.substr(0,"and ".length)?e.substr("and ".length):e})):n?n.cmd:[];ee.has_trigger?u.length?(de(u.shift(),a),ce(!1,!0)):ce(!0,!0):ce(!1,!1),TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).getContext().commandSharing?(o&&($(".save-builder-output-btn").transition("hide"),$(".cancel-btn").transition("hide"),$(".add-automation-builder-output-btn").transition("show"),$(".add-automation-cancel-btn").transition("show"),$(".js-review-command").html("Your command will be added to <b>".concat(a.name,"</b>."))),i?($(".add-automation-builder-output-btn").transition("hide"),$(".add-automation-cancel-btn").transition("hide"),$(".back-to-rules-btn").transition("show"),ce(!1,!1),$(".builder-output .output-actions").transition("hide"),$(".js-done-command").text(i.cmd),$(".js-done-command-board").html("was added to <b>".concat(a.name,"</b>"))):u.forEach((function(e){return fe(e,!1,a)}))):u.forEach(fe)}({command:n,suggestion:r,duplicate:o,share:i,done:a,board:s}),u||$(".builder-wizard").transition({animation:"fade right",duration:"0s",onComplete:function(){}}),$(".add-automation-builder-output-btn").off("click").click((function(){w.sendUIEvent({action:"clicked",actionSubject:"button",actionSubjectId:"addAutomationButton",source:"adjustYourAutomationScreen"});var e=_e();he({type:t,command:e===n.cmd?n:void 0,board:s}),pe({type:t,command:n,suggestion:r,duplicate:o,share:i,done:{cmd:e},board:s})})),$(".add-automation-cancel-btn").off("click").click((function(){w.sendUIEvent({action:"clicked",actionSubject:"button",actionSubjectId:"addAutomationCancelButton",source:"adjustYourAutomationScreen"}),ee.share=void 0,ee.done=void 0,Q(),L(),V(n,$("#".concat(n.id)).find(".add-to-board-btn"))})),$(".back-to-rules-btn").off("click").click((function(){return w.sendUIEvent({action:"clicked",actionSubject:"button",actionSubjectId:"backToRulesButton",source:"reviewYourAutomationScreen"}),B(p().replace(/s$/,"")).then((function(e){var t=e.commands;ee.share=void 0,ee.done=void 0,Q(),L(),V(n,$("#".concat(n.id)).find(".add-to-board-btn")),z(n),U(t)}))})),$(".save-builder-output-btn").off("click").click((function(){o?he({type:t}):n&&n.b&&(n.b.length>1||1===n.b.length&&!n.enabled)?$("#butler-confirm-edit-command").modal({onApprove:function(){he({type:t,command:n})},onDeny:function(){he({type:t})}}).modal("show"):he({type:t,command:n})}))};u?l():$(".command-section").transition({animation:"fade right",duration:"0.33s",onComplete:l})}function me(){var e=p().replace(/s$/,"");return B(e).then((function(){ee.share=void 0,ee.done=void 0,pe({type:e})}))}function Ee(){var e=$(".discarded-suggestion").length;if(!e)return $(".discarded-suggestions").transition("hide");$(".discarded-suggestions-count").text(e),$(".discarded-suggestions-btn").off("click").click((function(){return $(".discarded-suggestions").transition("scale"),$(".discarded-suggestion").transition("scale"),!1})),$(".discarded-suggestions").transition("show")}function Te(e,t){var n,r;switch(e.type){case"rule":r=!0,n="Rule";break;case"schedule":r=!0,n="Scheduled (Calendar)";break;case"on-date":r=!0,n="Scheduled (Due Date)";break;case"board":r=!1,n="Board Button";break;default:r=!1,n="Card Button"}var o=$('<div class="ui grid transition suggestion '.concat("discard"===(e.user_action||{}).value?" discarded-suggestion hidden":t?" hidden-suggestion hidden":"",'">\n      <div class="two column paddingless row">\n        <div class="flex paddingless column">\n          <div class="ui labeled icon limited button tip">\n            <img class="icon-sm" src="img/sparkle.svg">\n            <div>\n              ').concat(N(n),'\n            </div>\n          </div>\n        </div>\n        <div class="flex paddingless column float right aligned actions">\n          <div class="ui button discard-suggestion-btn').concat(e.admin?" disabled":"",'">\n            <div class="img-wrapper">\n              <img src="img/trash.svg">\n            </div>\n          </div>\n          <div class="ui blue button accept-suggestion-btn flex">\n            <div>\n              + Add\n            </div>\n          </div>\n        </div>\n\n      </div>\n      <div class="one column paddingless row">\n        <div class="column code-area">').concat(N(_.joinCommandPhrases(e.cmd,r)),'</td>\n      </div>\n      <div class="one column left aligned paddingless row">\n        <div class="column left aligned modified-by-container">\n          <div class="modified-by">\n            ').concat(N(e.admin?"Recommended by a system administrator.":"Performed ".concat(e.count," times, most recently ").concat(moment(e.until).fromNow(),"."))+N("discard"===(e.user_action||{}).value?"Discarded ".concat(moment(e.user_action.date).fromNow(),"."):""),"\n          </div>\n        </div>\n      </div>\n    </div>\n  "));o.appendTo($(".suggestion-list")),o.find(".accept-suggestion-btn").click((function(){!function(e,t){var n=t.find(".accept-suggestion-btn");n.addClass("disabled");var r=n.children("i"),o=r.attr("class");r.attr("class","notched circle loading icon"),D.accept(e).then((function(){t.transition("scale"),t.removeClass("discarded-suggestion"),r.attr("class",o),n.removeClass("disabled");var i=e.type||"card";switch(i){case"board":case"card":i+="-button"}w.sendTrackEvent({action:"accepted",actionSubject:"suggestion",source:M[p().trim()],attributes:{suggestionType:e.type||"card",admin:e.admin,utility:e.utility}}),x(i,(function(){pe({type:i,suggestion:e})}))})).catch((function(){r.attr("class","yellow warning sign icon"),n.transition("shake"),n.attr("data-tooltip","Error contacting server. Press to retry."),n.removeClass("disabled")})),b.logEvent("engagement","accept_suggestion",{utility:e.utility,admin:e.admin})}(e,o)})),o.find(".discard-suggestion-btn").click((function(){!function(e,t){var n=t.find(".discard-suggestion-btn");n.addClass("disabled");var r=n.children("i"),o=r.attr("class");r.attr("class","notched circle loading icon"),D.discard(e).then((function(){t.transition("scale"),t.addClass("discarded-suggestion"),r.attr("class",o),n.removeClass("disabled"),w.sendTrackEvent({action:"discarded",actionSubject:"suggestion",source:M[p().trim()],attributes:{suggestionType:e.type||"card",admin:e.admin,utility:e.utility}}),Ee()})).catch((function(){r.attr("class","yellow warning sign icon"),n.transition("shake"),n.attr("data-tooltip","Error contacting server. Press to retry."),n.removeClass("disabled")})),b.logEvent("engagement","discard_suggestion",{utility:e.utility,admin:e.admin})}(e,o)}))}function ge(e){$(".suggestion-list").empty(),$(".butler-no-suggestions").transition("hide"),$(".butler-no-more-suggestions").transition("hide"),$(".butler-refresh-wait").transition("hide"),$(".discarded-suggestions").transition("hide"),$(".more-suggestions").transition("hide"),$(".butler-error-loading-suggestions").transition("hide"),$(".butler-suggestions-loading").transition("show"),$(".refresh-suggestions-btn").addClass("disabled");var t=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});TrelloPowerUp.Promise.join(D.getSuggestions(t,e),T.getAllCommands()).spread((function(e,n){var r=n.commands;e.admin_suggestions&&(e.suggestions=[].concat(e.admin_suggestions,e.suggestions),delete e.admin_suggestions);var o=(new Date).toISOString(),i=D.processSuggestionData(e,r,o),a=i.since,s=i.suggestions,c=i.suggestionDataToCache;if($(".butler-suggestions-loading").transition("hide"),$(".refresh-suggestions-btn").removeClass("disabled"),s.length){e.refresh_wait&&($(".suggestions-refresh-wait").text(moment(e.refresh_wait).fromNow(!0)),$(".butler-refresh-wait").transition("slide down")),$(".suggestions-date").text(moment(c.dateLastUpdate).fromNow()),$(".suggestions-action-count").text(e.action_count),$(".suggestions-since").text(" in the last ".concat(a)),$(".suggestions-header").transition("show");var u=0,l=0;if(s.forEach((function(e){"discard"===(e.user_action||{}).value?Te(e):u>=5?(l+=1,Te(e,!0)):(u+=1,Te(e))})),u||$(".butler-no-more-suggestions").transition("slide down"),l>0&&($(".more-suggestions-count").text(l),$(".more-suggestions-btn").off("click").click((function(){return $(".more-suggestions").transition("scale"),$(".hidden-suggestion").transition("scale"),!1})),$(".more-suggestions").transition("show")),Ee(),c)return c.dateLastSeen=o,t.set("board","private","suggestions",c)}else if($(".butler-no-suggestions").transition("slide down"),c)return c.dateLastSeen=o,t.set("board","private","suggestions",c)})).then((function(){D.setSuggestionTabUnseenCount(t)})).catch((function(e){if(Sentry.captureException(e),"INVALID_TOKEN"===e.message||"USER_NOT_FOUND"===e.message)return f.reauthorize(t).then((function(){x("card-button")}));$(".butler-suggestions-loading").transition("hide"),$(".refresh-suggestions-btn").removeClass("disabled"),$(".butler-error-loading-suggestions").transition("slide down")})),b.logEvent("engagement",e?"refresh_suggestions":"load_suggestions")}function Ae(){var e=parseInt($(".unseen-suggestion-count").text()||"0",10);w.sendScreenEvent({name:"butlerSuggestionsScreen",attributes:{numUnseenSuggestions:e}}),$(".refresh-suggestions-btn").off("click").click((function(){ge(!0)})),m("suggestions",!0),L(),ge(!1)}function be(){var e=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});function t(t){var n=t,r=!1,o=$("#butler-command-importer-modal"),i=o.find(".js-importable-commands");o.modal({selector:{close:".right.corner.label"},onHide:function(){if(i.empty(),r){T.clearCachedServerCommands();var e=p();x("s"===e[e.length-1]?e.slice(0,-1):e),r=!1}}}),o.modal("show"),i.empty();var a={rules:"Rules",due_date:"Due Date Commands",calendar:"Scheduled Commands",non_importable:"Non-Importable Commands"};function s(e,t){n[t]&&(n[t]=n[t].filter((function(t){return t.ccid!==e})),r=!0)}function c(t){var r=n[t]||[],o=$('<table class="ui unstackable table '.concat(N(t),'">\n          <thead><tr>\n          <th>').concat(N(a[t]),'</th>\n          <th class="right aligned"></th></tr></thead>\n          <tbody class="').concat(N(t),'-data-rows">\n          </tr></tbody>\n          </table>'));r.forEach((function(r,i){var a='<tr><td data-index="'.concat(N(i),'">').concat(N(r.cmd),"</td>");a+='<td class="right aligned">',"non_importable"!==t&&(a+='<div class="ui transparent icon button command-import-btn" tabindex="0" alt="Import command" data-tooltip="Import command"><i class="download icon"></i></div>'),a+='<div class="ui transparent icon disabled button import-loading-icon transition hidden" tabindex="0"><i class="blue notched circle loading icon"></i></div>',a+='<div class="ui transparent icon disabled button import-success-icon transition hidden" tabindex="0"><i class="checkmark icon"></i></div>',a+='<div class="ui transparent icon button command-archive-btn" tabindex="0" alt="Archive command" data-tooltip="Archive command"><i class="archive icon"></i></div>',a+="</td></tr>";var c=$(a);c.appendTo(o.find(".".concat(N(t),"-data-rows"))),"non_importable"!==t&&c.find(".command-import-btn").click((function(){!function(t,r,o){r.find(".command-import-btn").transition("hide"),r.find(".import-loading-icon").transition("show"),f.getToken(e).then((function(n){return new TrelloPowerUp.Promise((function(r,o){var i=e.getContext().board;$.ajax("".concat(A,"bot-command-import"),{type:"POST",headers:{"X-Butler-Trello-Token":n},data:JSON.stringify({board_id:i,cmd:t.cmd,ccid:t.ccid})}).done((function(e){return e.success?r(e.response):o(new Error(e.error||"NO_RESPONSE"))})).fail((function(){return o(new Error("NETWORK_ERROR"))}))}))})).then((function(e){r.find(".import-loading-icon").transition("hide"),r.find(".import-success-icon").transition("show"),r.transition({animation:"fade down",duration:"1.13s",onComplete:function(){r.remove(),0===n[o].length&&$(".table.".concat(o)).transition("hide"),$(".rules-data-rows").children().length||$(".due_date-data-rows").children().length||$(".calendar-data-rows").children().length||$(".empty-list").transition("show")}}),e.ccid&&s(e.ccid,o)})).catch((function(e){r.find(".import-loading-icon").transition("hide"),r.find(".command-import-btn").attr("data-tooltip",e||"NO_RESPONSE").attr("alt",e).transition("shake"),r.find(".command-archive-btn").transition("show"),console.log("Error importing command",e),Sentry.captureException(e)}))}(r,c,t)})),c.find(".command-archive-btn").click((function(){!function(t,r,o){r.find(".command-archive-btn").transition("hide"),r.find(".import-loading-icon").transition("show"),f.getToken(e).then((function(n){return new TrelloPowerUp.Promise((function(r,o){var i=e.getContext().board;$.ajax("".concat(A,"bot-command-archive"),{type:"POST",headers:{"X-Butler-Trello-Token":n},data:JSON.stringify({board_id:i,cmd:t.cmd,ccid:t.ccid})}).done((function(e){return e.success?r(e.response):o(new Error(e.error||"NO_RESPONSE"))})).fail((function(){return o(new Error("NETWORK_ERROR"))}))}))})).then((function(e){r.find(".import-loading-icon").transition("hide"),r.find(".import-success-icon").transition("show"),r.transition({animation:"fade down",duration:"1.13s",onComplete:function(){r.remove(),0===n[o].length&&$(".table.".concat(o)).transition("hide"),$(".rules-data-rows").children().length||$(".due_date-data-rows").children().length||$(".calendar-data-rows").children().length||$(".empty-list").transition("show")}}),e.ccid&&s(e.ccid,o)})).catch((function(e){r.find(".import-loading-icon").transition("hide"),r.find(".command-archive-btn").attr("data-tooltip",e).attr("alt",e).transition("shake"),console.log("Error archiving bot command",e),Sentry.captureException(e)}))}(r,c,t)}))})),o.appendTo($(".js-importable-commands")),r.length||$(".table.".concat(t)).transition("hide")}c("rules"),c("due_date"),c("calendar"),c("non_importable"),n.rules.length||n.due_date.length||n.calendar.length||o.find(".empty-list").transition("show"),o.modal("refresh")}f.getToken(e).then((function(t){return new TrelloPowerUp.Promise((function(n,r){var o=e.getContext().board;$.ajax("".concat(A,"importable-commands?b=").concat(o),{type:"GET",headers:{"X-Butler-Trello-Token":t}}).done((function(e){return e.success?n(e.response):r(new Error(e.error||"NO_RESPONSE"))})).fail((function(){return r(new Error("NETWORK_ERROR"))}))}))})).then((function(e){var n=e||{rules:[],calendar:[],due_date:[],non_importable:[]};(n.rules.length||n.calendar.length||n.due_date.length||n.non_importable.length)&&($(".butler-bot-command-import-btn").off("click").click((function(){return t(n),!1})),$(".butler-importable-commands").transition("show"))})).catch((function(e){"NOT_AUTHORIZED"!==e.message&&(console.log("Error fetching importable commands",e),Sentry.captureException(e))}))}function ve(){var e=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}),t=T.getAdminOnBehalfOf()||e.getContext().member;return TrelloPowerUp.Promise.join(T.getAllCommands(),T.getSharedLibraries()).spread((function(e,n){var r=e.commands,o=e.obo_writable,i={},a={},s=n.map((function(e){return e.user_id===t?(e.is_own=!0,e.count=0,e.enabled=0,i[e.title]=e):a[e.title]=e,e}));return r.forEach((function(e){if(e.lib){var n=i[e.lib];n||(n={user_id:t,title:e.lib,is_own:!0,count:0,enabled:0,src:a[e.lib]},i[e.lib]=n,n.src&&(n.src.used=!0),s.push(n)),++n.count,e.enabled&&++n.enabled}})),(s=s.filter((function(e){return!e.used}))).sort((function(e,t){return e.is_own&&!t.is_own?-1:!e.is_own&&t.is_own?1:e.title.localeCompare(t.title)})),{libs:s,obo_writable:o}}))}function Ie(e,t){var n=t?$("#butler-library-enable-modal"):$("#butler-library-disable-modal"),r=n.find(".library-command-list"),o=n.find("> .actions .ok"),i=!1;o.addClass("disabled"),n.find("> .content > .message").transition("hide").filter(".updating").transition("show"),n.find(".library-command-list").empty(),n.modal({transition:"fade",selector:{close:".right.corner.label"},onHide:function(){(r.empty(),i)&&re(p().replace(/s$/,""))},onApprove:function(){return n.find("> .content > .updating.message").transition("hide"),n.find("> .content > .enabling.message").transition("show"),n.find("> .content > .error-enabling.message").transition("hide"),o.addClass("disabled"),T.enableLibrary(e,t).then((function(){n.find("> .content > .enabling.message").transition("hide"),n.find("> .content > .success-enabling.message").transition("show"),i=!0,b.logEvent("engagement","lib_enable",t)})).catch((function(e){Sentry.captureException(e),o.removeClass("disabled"),n.find("> .content > .enabling.message").transition("hide"),e&&"LIBRARY_SHARE_INVALID"===e.message?n.find("> .content > .message.error-share-access").transition("show"):n.find("> .content > .error-enabling.message").transition("show")})),!1}}),n.modal("show"),T.getAllCommands().then((function(t){var i=t.commands;r.empty();var a="".concat('<table class="ui unstackable table"><thead><tr><th><i class="tag icon"></i>').concat(N(e),"</th></tr></thead><tbody>");i.forEach((function(t){if(t.lib===e){var n=t.cmd.replace(/\n/g," ");a+='<tr><td class="code-area">'.concat(N(n),"</td></tr>")}})),a+="</tbody></table>",r.html(a),setTimeout((function(){n.find("> .content > .updating.message").transition("hide")})),n.modal("refresh"),o.removeClass("disabled")})).catch((function(e){Sentry.captureException(e),n.find("> .content > .message.updating").transition("hide"),e&&"LIBRARY_SHARE_INVALID"===e.message?n.find("> .content > .message.error-share-access").transition("show"):n.find("> .content > .message.error-updating").transition("show")}))}function Oe(){var e=$("#butler-library-sharing-modal"),t=e.find(".library-list");e.find("> .content > .message").transition("hide").filter(".updating").transition("show"),e.modal({selector:{close:".right.corner.label"},onHide:function(){t.empty()}}),e.modal("show");var n=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});return TrelloPowerUp.Promise.all([v.getUserPlanLocal(n),ve()]).spread((function(n,r){var o=r.libs,i=r.obo_writable;t.empty();var a=o.filter((function(e){return e.is_own&&e.enabled||!1!==i}));a.forEach((function(e,r){var a='<table data-index="'.concat(N(r),'" class="ui unstackable table">')+"<thead><tr>"+"<th>".concat(N(e.title),"</th>")+'<th class="right aligned">';e.is_own?(!1!==i&&(a+='<div class="ui transparent icon button library-rename-btn" tabindex="0" alt="Rename" data-tooltip="Rename the library"><i class="pencil icon"></i></div><div class="ui transparent icon button library-enable-btn" tabindex="0" alt="Enable all on this board" data-tooltip="Enable all of this library\'s commands on this board"><i class="check icon"></i></div>'),a+='<div class="ui transparent icon button library-disable-btn" tabindex="0" alt="Disable all on this board" data-tooltip="Disable all of this library\'s commands on this board"><i class="remove icon"></i></div>'):a+='<div class="ui transparent icon button library-import-btn" tabindex="0" alt="Import all commands from the shared library" data-tooltip="Import all commands from the shared library"><i class="download icon"></i></div>',a+="</th></tr></thead><tbody><tr>",e.is_own&&!1!==i?(a+="<td>".concat(N(e.count)," commands (").concat(N(e.enabled)," enabled)</td>"),n&&n.plan_id&&(!n.plan_id.startsWith("TRELLO_")||n.is_org&&"TRELLO_FREE"!==n.plan_id)&&(a+='<td class="right aligned"><div class="ui toggle checkbox">'+'<input type="checkbox" class="library-share-tgl"'.concat(e.link_id||e.src?" checked":"").concat(e.is_own&&!e.src?"":" disabled",'><label style="margin-right:0.75em">Shared</label>')+"</td>"),e.src&&(a+="</tr><tr><td>A library with this name is shared by ".concat(N(e.src.username?"@".concat(e.src.username):"another user"),'</td><td class="right aligned">')+'<div class="ui transparent icon button library-import-btn" tabindex="0" alt="Add/update all commands from the shared library" data-tooltip="Add/update all commands from the shared library"><i class="download icon"></i></div></td>')):a+="<td>".concat(N(e.username?"Shared by @".concat(e.username):"Shared by another user"),"</td><td></td>"),a+="</tr></tbody></table>";var s=$(a);s.appendTo(t),s.find(".library-share-tgl").closest(".ui.checkbox").checkbox({onChange:function(){!function(e,t){var n=$(e.target),r=e.target.checked;n.addClass("disabled"),(r?T.startSharing(t.title):T.stopSharing(t)).then((function(e){n.removeClass("disabled"),r?(t.link_id=e.link_id,t.org_id=e.org_id):(delete t.link_id,delete t.org_id),b.logEvent("engagement","lib_share",r)})).catch((function(t){Sentry.captureException(t),n.removeClass("disabled"),$(e.target).closest(".ui.checkbox").checkbox("set ".concat(e.target.checked?"unchecked":"checked")).attr("data-tooltip","Error saving.").transition("shake")}))}({target:this},e)}}),s.find(".library-import-btn").click((function(){!function(e){var t=$("#butler-library-import-modal"),n=t.find(".library-command-list"),r=t.find("> .actions .ok"),o=!1;r.addClass("disabled"),t.find("> .content > .message").transition("hide").filter(".updating").transition("show"),t.find(".library-command-list").empty(),t.modal({transition:"fade",selector:{close:".right.corner.label"},onHide:function(){(n.empty(),o)&&re(p().replace(/s$/,""))},onApprove:function(){return t.find("> .content > .updating.message").transition("hide"),t.find("> .content > .importing.message").transition("show"),t.find("> .content > .error-importing.message").transition("hide"),t.find("> .content > .message.error-share-access").transition("hide"),r.addClass("disabled"),T.importLibrary(e).then((function(){t.find("> .content > .importing.message").transition("hide"),t.find("> .content > .success-importing.message").transition("show"),o=!0,b.logEvent("engagement","lib_import")})).catch((function(e){Sentry.captureException(e),r.removeClass("disabled"),t.find("> .content > .importing.message").transition("hide"),e&&"LIBRARY_SHARE_INVALID"===e.message?t.find("> .content > .message.error-share-access").transition("show"):t.find("> .content > .error-importing.message").transition("show")})),!1}}),t.modal("show"),T.getSharedLibrary(e).then((function(e){n.empty();var o="".concat('<table class="ui unstackable table"><thead><tr><th><i class="tag icon"></i>').concat(N(e.title),"</th></tr></thead><tbody>");0===e.cmds.length?t.find("> .content > .message.no-cmds-in-library").transition("show"):e.cmds.forEach((function(e){var t=e.cmd.replace(/\n/g," ");o+='<tr><td class="code-area">'.concat(N(t),"</td></tr>")})),o+="</tbody></table>",n.html(o),setTimeout((function(){t.find("> .content > .updating.message").transition("hide")})),t.modal("refresh"),r.removeClass("disabled")})).catch((function(e){Sentry.captureException(e),t.find("> .content > .message.updating").transition("hide"),e&&"LIBRARY_SHARE_INVALID"===e.message?t.find("> .content > .message.error-share-access").transition("show"):t.find("> .content > .message.error-updating").transition("show")}))}(e.src?e.src.link_id:e.link_id)})),s.find(".library-enable-btn").click((function(){Ie(e.title,!0)})),s.find(".library-disable-btn").click((function(){Ie(e.title,!1)})),s.find(".library-rename-btn").click((function(){!function(e,t){var n=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}),r=T.getAdminOnBehalfOf()||n.getContext().member,o=$("#butler-library-rename-modal"),i=o.find('input[name="lib-name"]'),a=o.find('input[name="new-name"]'),s=!1;o.find("> .content > .message").transition("hide"),o.find(".ok.button").removeClass("disabled"),a.attr("disabled",!1);var c={};t.forEach((function(e){e.user_id===r&&(c[e.title]=!0)}));var u=function(){var t=a.val().trim();o.find(".rename-lib,.merge-libs,.remove-tag").transition("hide"),t?t===e.title?o.find(".rename-lib").transition("show").filter(".ok.button").addClass("disabled"):c[t]?o.find(".merge-libs").transition("show"):o.find(".rename-lib").transition("show").filter(".ok.button").removeClass("disabled"):o.find(".remove-tag").transition("show")};i.val(e.title),a.val(e.title).off("input").on("input",u),u(),o.modal({transition:"fade",selector:{close:".right.corner.label"},onHide:function(){s&&re(p().replace(/s$/,""))},onApprove:function(){a.attr("disabled",!0),o.find(".ok.button").addClass("disabled"),o.find("> .content > .renaming.message").transition("show"),o.find("> .content > .error-renaming.message").transition("hide");var t=a.val().trim();return T.renameLibrary(e.title,t).then((function(){o.find("> .content > .renaming.message").transition("hide"),o.find("> .content > .success-renaming.message").transition("show"),s=!0})).catch((function(e){Sentry.captureException(e),a.attr("disabled",!1),o.find(".ok.button").removeClass("disabled"),o.find("> .content > .renaming.message").transition("hide"),o.find("> .content > .error-renaming.message").transition("show")})),!1}}),o.modal("show")}(e,o)}))})),a.length||e.find("> .content > .message.empty-list").transition("show"),setTimeout((function(){e.find("> .content > .updating.message").transition("hide")})),e.modal("refresh")})).catch((function(t){Sentry.captureException(t),e.find("> .content > .message.updating").transition("hide"),e.find("> .content > .message.error-updating").transition("show")}))}function ye(){$(".help-popup").click((function(){return!1})).each((function(e,t){var n=$(t),r=n.attr("data-popup-selector"),o=r?$(r):n.next(".ui.popup");n.popup({on:"click",popup:o,target:!!n.length&&n,position:"top center",lastResort:!0,hoverable:!1,boundary:".builder-wizard-body"})})),$(".close-popup").off("click").click((function(e){$(e.target).closest(".popup").popup("hide all")})),$(".butler-account-details-btn").off("click").click((function(){return TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).overlay({url:"./powerup-account.html?tab=account"}).catch((function(e){return O("showAccountOverlay",e)})),!1})),$(".butler-usage-details-btn").off("click").click((function(){return TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).overlay({url:"./powerup-account.html?tab=usage"}).catch((function(e){return O("showUsageOverlay",e)})),!1})),$(".remove-command-popup .ok.button").click((function(e){var t=ee.is_admin;$(e.target).addClass("disabled"),function(e,t){var n=$(e.target).closest(".popup"),r=n.attr("command-id"),o=M[p().trim()],i=w.startTask({taskName:"delete-butlerCommand/dashboard",source:o});T.removeCommandId(r,t).then((function(){X(n.closest("#".concat(r))),n.transition("hide"),$("body").append($(".remove-command-popup").detach()),$(e.target).removeClass("disabled"),w.taskSucceeded({traceId:i,taskName:"delete-butlerCommand/dashboard",source:o})})).catch((function(t){O("removeCommand",t),w.taskFailed({traceId:i,taskName:"delete-butlerCommand/dashboard",source:o,error:t}),$(e.target).removeClass("disabled"),$(e.target).closest(".ui.button").transition("shake")}))}(e,t)})),$(".enabled-on-x-boards-popup .add-to-another-board-btn").click((function(e){var t=$(e.target).closest(".enabled-on-x-boards-popup"),n=t.attr("command-id");T.getCommandById(n,!0).then((function(e){t.transition("hide"),V(e,t.parent().find(".enabled-on-x-boards")),t.parent().find(".enabled-on-x-boards").popup("show")}))})),$(".add-command-to-board-popup .ok.button.add-automation-btn").click((function(e){$(e.target).addClass("disabled");var t=$(e.target).closest(".add-command-to-board-popup"),n=t.attr("command-id"),r=$(e.target).attr("command-board"),o=$(e.target).attr("command-board-id");r&&T.getCommandById(n,!0).then((function(e){t.transition("hide"),j({command:e,share:!0,board:{name:r,id:o}}),w.sendUIEvent({action:"clicked",actionSubject:"button",actionSubjectId:"addAutomationToBoardButton",source:M[p().trim()]})}))})),$(".command-list-filter .ui.dropdown.filter").dropdown({onShow:function(){var e=$(this);W().then((function(t){var n=t.map((function(e){return'<a class="item" data-type="lib" data-value="'.concat(N(e),'"><i class="tag icon"></i>').concat(N(e),"</a>")}));e.find('.item[data-type="lib"]').detach(),n.length?e.find(".divider.libs").transition("show").after(n):e.find(".divider.libs").transition("hide")}))},onChange:function(e){$(".command-list-filter .command-search").transition("search"===e?"show":"hide"),F(!0),$("html,body").animate({scrollTop:0},"slow")}}),$(".command-list-filter .command-search").off("input").on("input",(function(){F(!0)})),$(".builder.actions .add-actions").click((function(e){$(".builder.actions .actions-body").transition("show"),$(e.target).transition("hide")})),$(".builder.triggers .add-triggers").click((function(e){$(".builder.triggers .triggers-body").transition("show"),$(e.target).transition("hide")})),$(".library-manage .button").off("click").click((function(){Oe()}))}var Ne={init:function(){var e=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});T.init(e),D.setSuggestionTabUnseenCount(e),$(".dashboard-tabs .ui.dropdown").dropdown({on:"hover"}),$('.dashboard-tabs .item[data-tab="tab-suggestions"]').click((function(){Ae(),$(".left-pane").toggleClass("hidden")})),$('.dashboard-tabs .item[data-tab="tab-card-buttons"]').click((function(){x("card-button"),$(".left-pane").toggleClass("hidden")})),$('.dashboard-tabs .item[data-tab="tab-board-buttons"]').click((function(){x("board-button"),$(".left-pane").toggleClass("hidden")})),$('.dashboard-tabs .item[data-tab="tab-rules"]').click((function(){x("rule"),$(".left-pane").toggleClass("hidden")})),$('.dashboard-tabs .item[data-tab="tab-schedules"]').click((function(){x("schedule"),$(".left-pane").toggleClass("hidden")})),$('.dashboard-tabs .item[data-tab="tab-on-dates"]').click((function(){x("on-date"),$(".left-pane").toggleClass("hidden")})),$('.dashboard-tabs .item[data-tab="tab-connected-apps"],.integrations-tab-link').click((function(){P().then((function(e){w.sendScreenEvent({name:"butlerIntegrationsScreen",attributes:{numOfConnections:(e||[]).length}})})),$(".left-pane").toggleClass("hidden")}));var t=new URLSearchParams(window.location.search),n=t.get("tab"),r=t.get("commandEdit"),o=t.get("commandLog"),i=t.get("newCommand")?u(t.get("newCommand")):null,a=t.get("newIcon"),c=t.get("newLabel"),l=t.get("highlightCommand");function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=function(e){w.sendTrackEvent({action:"clicked",actionSubject:"link",actionSubjectId:"butlerDeepLink",attributes:{tab:n},source:M[e]})};switch(n){case"rules":x("rule",e),t("rules");break;case"card-buttons":case"card-button":x("card-button",e),t("card-buttons");break;case"board-buttons":case"board-button":x("board-button",e),t("board-buttons");break;case"schedule":case"schedules":case"scheduled":x("schedule",e),t("schedules");break;case"on-dates":case"due-dates":case"duedates":case"dates":x("on-date",e),t("on-dates");break;case"connected-apps":P(),t("connected-apps");break;case"suggestions":t("suggestions");default:f.authorizeSoft().then((function(){Ae()}))}}if(r){var _=r;if("new"===r)if(i)try{var h={type:k[n],cmd:i,image:a,label:c?c.substring(0,100):null};x(k[n],(function(){pe({type:k[n],command:h})}))}catch(e){d(me)}else d(me);else T.getCommandById(_,!0).then((function(e){void 0!==e?x(e.type,(function(){e.is_own&&pe({type:e.type,command:e}),w.sendTrackEvent({action:"clicked",actionSubject:"link",actionSubjectId:"butlerDeepLink",attributes:{tab:e.type,tabAction:"commandEdit",commandOwned:e.is_own},source:M[p().trim()]})})):d()}))}else if(o){var m=o;T.getCommandById(m,!0).then((function(e){void 0!==e?x(e.type,(function(){L({action:"log",commandId:e.id}),E.openCommandLog({id:m},null,L),w.sendTrackEvent({action:"clicked",actionSubject:"link",actionSubjectId:"butlerDeepLink",attributes:{tab:e.type,tabAction:"commandLog"},source:M[p().trim()]})})):d()}))}else l?T.getCommandById(l,!0).then((function(e){void 0!==e?x(e.type,(function(){$("#".concat(l)).addClass("highlighted").get(0).scrollIntoView()})):d()})):d();f.authorizeSoft().then((function(){v.refreshUserPlan(e),be()})).catch((function(){})).finally((function(){$(".left-pane .item.tab-suggestions").hasClass("active")&&Ae()})),$(".command-section .new-command-btn").click((function(){me().then((function(){var e=p().replace(/s$/,"");w.sendUIEvent({action:"clicked",actionSubject:"button",actionSubjectId:"newCommandButton",source:M[p().trim()],attributes:{commandType:s.camelCase(e)}})}))})),$(".ui.form.button-config").form({fields:{"button-label":"empty"},on:"blur"}),$(".button-icon-select").dropdown({onChange:function(e){$(this).find(">i").replaceWith($(e))}}),ye()}};window.PowerUpDashboard=Ne,e.exports=Ne},function(e,t,n){"use strict";n.r(t),n.d(t,"create",(function(){return o}));var r={};!function e(t,n,r,o){var i=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL);function a(){}function s(e){var r=n.exports.Promise,o=void 0!==r?r:t.Promise;return"function"==typeof o?new o(e):(e(a,a),null)}var c,u,l,d,f,_,h,p,m=(l=Math.floor(1e3/60),d={},f=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(c=function(e){var t=Math.random();return d[t]=requestAnimationFrame((function n(r){f===r||f+l-1<r?(f=r,delete d[t],e()):d[t]=requestAnimationFrame(n)})),t},u=function(e){d[e]&&cancelAnimationFrame(d[e])}):(c=function(e){return setTimeout(e,l)},u=function(e){return clearTimeout(e)}),{frame:c,cancel:u}),E=(p={},function(){if(_)return _;if(!r&&i){var t=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{_=new Worker(URL.createObjectURL(new Blob([t])))}catch(e){return void 0!==typeof console&&"function"==typeof console.warn&&console.warn("🎊 Could not load worker",e),null}!function(e){function t(t,n){e.postMessage({options:t||{},callback:n})}e.init=function(t){var n=t.transferControlToOffscreen();e.postMessage({canvas:n},[n])},e.fire=function(n,r,o){if(h)return t(n,null),h;var i=Math.random().toString(36).slice(2);return h=s((function(r){function a(t){t.data.callback===i&&(delete p[i],e.removeEventListener("message",a),h=null,o(),r())}e.addEventListener("message",a),t(n,i),p[i]=a.bind(null,{data:{callback:i}})}))},e.reset=function(){for(var t in e.postMessage({reset:!0}),p)p[t](),delete p[t]}}(_)}return _}),T={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function g(e,t,n){return function(e,t){return t?t(e):e}(e&&null!=e[t]?e[t]:T[t],n)}function A(e){return e<0?0:Math.floor(e)}function b(e){return parseInt(e,16)}function v(e){return e.map(I)}function I(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:b(t.substring(0,2)),g:b(t.substring(2,4)),b:b(t.substring(4,6))}}function O(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function y(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function N(e,t,n,i,a){var c,u,l=t.slice(),d=e.getContext("2d"),f=s((function(t){function s(){c=u=null,d.clearRect(0,0,i.width,i.height),a(),t()}c=m.frame((function t(){!r||i.width===o.width&&i.height===o.height||(i.width=e.width=o.width,i.height=e.height=o.height),i.width||i.height||(n(e),i.width=e.width,i.height=e.height),d.clearRect(0,0,i.width,i.height),(l=l.filter((function(e){return function(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.wobble+=.1,t.velocity*=t.decay,t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+5,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble);var n=t.tick++/t.totalTicks,r=t.x+t.random*t.tiltCos,o=t.y+t.random*t.tiltSin,i=t.wobbleX+t.random*t.tiltCos,a=t.wobbleY+t.random*t.tiltSin;return e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-n)+")",e.beginPath(),"circle"===t.shape?e.ellipse?e.ellipse(t.x,t.y,Math.abs(i-r)*t.ovalScalar,Math.abs(a-o)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,n,r,o,i,a,s,c){e.save(),e.translate(t,n),e.rotate(i),e.scale(r,o),e.arc(0,0,1,a,s,c),e.restore()}(e,t.x,t.y,Math.abs(i-r)*t.ovalScalar,Math.abs(a-o)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):(e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(o)),e.lineTo(Math.floor(i),Math.floor(a)),e.lineTo(Math.floor(r),Math.floor(t.wobbleY))),e.closePath(),e.fill(),t.tick<t.totalTicks}(d,e)}))).length?c=m.frame(t):s()})),u=s}));return{addFettis:function(e){return l=l.concat(e),f},canvas:e,promise:f,reset:function(){c&&m.cancel(c),u&&u()}}}function S(e,n){var r,o=!e,a=!!g(n||{},"resize"),c=g(n,"disableForReducedMotion",Boolean),u=i&&!!g(n||{},"useWorker")?E():null,l=o?O:y,d=!(!e||!u)&&!!e.__confetti_initialized,f="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function _(t,n,o){for(var i,a,s,c,u,d=g(t,"particleCount",A),f=g(t,"angle",Number),_=g(t,"spread",Number),h=g(t,"startVelocity",Number),p=g(t,"decay",Number),m=g(t,"gravity",Number),E=g(t,"drift",Number),T=g(t,"colors",v),b=g(t,"ticks",Number),I=g(t,"shapes"),O=g(t,"scalar"),y=function(e){var t=g(e,"origin",Object);return t.x=g(t,"x",Number),t.y=g(t,"y",Number),t}(t),S=d,C=[],R=e.width*y.x,D=e.height*y.y;S--;)C.push((i={x:R,y:D,angle:f,spread:_,startVelocity:h,color:T[S%T.length],shape:I[(c=0,u=I.length,Math.floor(Math.random()*(u-c))+c)],ticks:b,decay:p,gravity:m,drift:E,scalar:O},a=void 0,s=void 0,a=i.angle*(Math.PI/180),s=i.spread*(Math.PI/180),{x:i.x,y:i.y,wobble:10*Math.random(),velocity:.5*i.startVelocity+Math.random()*i.startVelocity,angle2D:-a+(.5*s-Math.random()*s),tiltAngle:Math.random()*Math.PI,color:i.color,shape:i.shape,tick:0,totalTicks:i.ticks,decay:i.decay,drift:i.drift,random:Math.random()+5,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*i.gravity,ovalScalar:.6,scalar:i.scalar}));return r?r.addFettis(C):(r=N(e,C,l,n,o)).promise}function h(n){var i=c||g(n,"disableForReducedMotion",Boolean),h=g(n,"zIndex",Number);if(i&&f)return s((function(e){e()}));o&&r?e=r.canvas:o&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(h),document.body.appendChild(e)),a&&!d&&l(e);var p={width:e.width,height:e.height};function m(){if(u){var t={getBoundingClientRect:function(){if(!o)return e.getBoundingClientRect()}};return l(t),void u.postMessage({resize:{width:t.width,height:t.height}})}p.width=p.height=null}function E(){r=null,a&&t.removeEventListener("resize",m),o&&e&&(document.body.removeChild(e),e=null,d=!1)}return u&&!d&&u.init(e),d=!0,u&&(e.__confetti_initialized=!0),a&&t.addEventListener("resize",m,!1),u?u.fire(n,p,E):_(n,p,E)}return h.reset=function(){u&&u.reset(),r&&r.reset()},h}n.exports=S(null,{useWorker:!0,resize:!0}),n.exports.create=S}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),r,!1),t.default=r.exports;var o=r.exports.create},function(e,t,n){var r=n(370),o=n(152),i={buttonItem:function(e,t){return $('\n    <div id="'.concat(o.sanitize(e.id),'" class="ui grid transition hidden command">\n      <div class="two column paddingless row">\n        <div class="flex paddingless column">\n          <div class="ui labeled icon limited button">\n            <i class="').concat(o.sanitize(e.icon),'"></i>\n            ').concat(o.sanitize(e.label||""),'\n          </div>\n          <div class="command-btns">\n            <div class="ui transparent icon button edit-command-btn').concat(e.is_own?"":" disabled",'" \n              tabindex="0" \n              alt="Edit"\n              data-tooltip="Edit" \n            >\n              <img class="icon" src="img/edit.svg"></img>\n            </div> \n            <div class="ui transparent icon button copy-command-btn" \n              tabindex="0" \n              alt="Copy" \n              data-tooltip="Copy" \n            >\n              <img class="icon" src="img/copy.svg"></img>\n            </div> \n            <div class="ui transparent icon button remove-command-btn').concat(e.is_own||t?"":" disabled",'" \n              tabindex="0" \n              alt="Remove" \n              data-tooltip="Remove" \n            >\n              <img class="icon" src="img/trash.svg"></img>\n            </div> \n            <div class="ui transparent icon button command-log-btn" \n              tabindex="0" \n              alt="Command Log" \n              data-tooltip="Command Log" \n            >\n              <img class="icon" src="img/lightbulb.svg"></img>\n            </div> \n          </div>\n        </div>\n        <div class="column right aligned modified-by-container">\n          <div class="modified-by"></div>\n        </div>\n      </div>\n      <div class="one column paddingless row"> \n        <div class="column code-area">').concat(o.sanitize(e.cmd),'</div> \n      </div>\n      <div class="one column paddingless row"> \n        <div class="left aligned">\n          <div class="ui checkbox sharing-btns" \n          > \n            <input type="checkbox" \n              class="enable-command-tgl"').concat(e.enabled?" checked":"",'\n            >\n            <label>Enabled on this board</label> \n          </div> \n          <span class="sharing-btns-divider"></span> \n          <div class="ui checkbox sharing-btns"> \n            <input type="checkbox" \n              class="scope-command-tgl"').concat(e.scope===r.ScopeTeam?" checked":"").concat(e.is_own?"":" disabled",'\n            >\n            <label>Enabled on all boards on this workspace</label> \n          </div> \n          <span class="sharing-btns-divider"></span> \n          <div class="ui checkbox sharing-btns"> \n            <input type="checkbox" \n              class="share-command-tgl"').concat(e.shared?" checked":"").concat(e.is_own?"":" disabled","\n            >\n            <label>Shared with workspace</label> \n          </div>\n        </div> \n      </div>\n    </div>\n  "))},commandItem:function(e,t,n){var r;return r='\n  <div>\n    <a class="ui top left label '.concat(!1!==t?"":"unclickable ",'command-lib-name"> \n      <i class="tag icon"></i> \n      <span class="text">').concat(o.sanitize(e.lib||""),"</span> \n    </a> \n  </div>\n  "),$('<div id="'.concat(o.sanitize(e.id),'" class="ui grid transition hidden command">\n      <div class="two column paddingless row">\n        <div class="flex paddingless column">\n          ').concat(r,'\n          <div class="command-btns">\n            ').concat("schedule"===e.type&&!1!==t?'<div class="ui transparent icon button run-command-btn" \n                  tabindex="0" \n                  alt="Run Now" \n                  data-tooltip="Run Now" \n                >\n                  <i class="rocket icon"></i>\n                </div>':"","\n            ").concat(!1!==t?'<div class="ui transparent icon button edit-command-btn'.concat(e.is_own?"":" disabled",'" \n                  tabindex="0" \n                  alt="Edit" \n                  data-tooltip="Edit" \n                >\n                  <img class="icon" src="img/edit.svg"></img>\n                </div> \n                <div class="ui transparent icon button copy-command-btn" \n                  tabindex="0" \n                  alt="Copy" \n                  data-tooltip="Copy" \n                >\n                  <img class="icon" src="img/copy.svg"></img>\n                </div> \n                <div class="ui transparent icon button remove-command-btn').concat(e.is_own||n?"":" disabled",'" \n                  tabindex="0" \n                  alt="Remove" \n                  data-tooltip="Remove" \n                >\n                  <img class="icon" src="img/trash.svg"></img>\n                </div>'):"",'\n            <div class="ui transparent icon button command-log-btn" \n              tabindex="0" \n              alt="Command Log" \n              data-tooltip="Command Log" \n            >\n              <img class="icon" src="img/lightbulb.svg"></img>\n            </div>\n          </div>\n          ').concat(!1!==t?'<div class="ui button add-to-board-btn" \n                tabindex="0" \n                alt="Add to another board"\n                data-tooltip="Add to another board"\n              >\n                <i class="plus icon"></i>\n                Add to another board\n              </div>':"",' \n        </div>\n        <div class="column right aligned modified-by-container">\n          <div class="modified-by"></div>\n        </div>\n      </div>\n      <div class="one column paddingless row"> \n        <div class="column code-area">').concat(o.sanitize(e.cmd),'</td> \n      </div>\n      <div class="one column paddingless row"> \n        <div class="column right aligned">\n          <div class="ui checkbox sharing-btns" > \n            <input type="checkbox" class="enable-command-tgl"').concat(e.enabled?" checked":"",">\n            <label>Enabled on this board</label> \n          </div>\n        </div>\n      </div>\n    </div>\n  "))},actionOutput:function(e,t){var n=t.replace(/\\"/g,"__QUOTE__").split('"').map((function(e,t,n){if(e=o.sanitize(e.replace(/__QUOTE__/g,'"')),t%2==0)return'<div class="action-output-text">'.concat(e,"</div>");var r="";return t===n.length-2&&(r='style="margin-bottom: 8px";')," list "===n[t-1].slice(-6)?'<div class="ui search"><input class="quoted-value prompt" type="text" name="list-name" value="'.concat(e,'" placeholder="').concat(e,'" ').concat(r,"></div>"):" board "===n[t-1].slice(-7)?'<div class="ui search"><input class="quoted-value prompt" type="text" name="board-name" value="'.concat(e,'" placeholder="').concat(e,'" ').concat(r,"></div>"):'<textarea class="quoted-value" type="text" placeholder="'.concat(e,'" rows="1" ').concat(r,">").concat(e,"</textarea>")})).join(""),r=t.match(/^copy each|move each/);return $('\n    <div class="ui grid item'.concat(e?"":" transition hidden").concat(r?" implicit-multiplier":"",'">\n      <div class="paddingless row">\n        <div class="thirteen wide column content output-phrase">').concat(n,'</div>\n        <div class="three wide column right floated content output-side right">\n          <div class="ui translucent icon button remove-action-btn" \n            tabindex="0"\n          >\n            <i class="trash icon"></i>\n          </div>\n          <div class="ui translucent icon button move-up-action-btn').concat(r?" disabled":"",'"\n            tabindex="0"\n          >\n            <i class="arrow up icon"></i>\n          </div>\n        </div>\n      </div>\n    </div>\n  '))},triggerOutput:function(e){var t=e.replace(/\\"/g,"__QUOTE__").split('"').map((function(e,t,n){if(e=o.sanitize(e.replace(/__QUOTE__/g,'"')),t%2==0)return'<div class="trigger-output-text">'.concat(e,"</div>");var r="";return t===n.length-2&&(r='style="margin-bottom: 8px";')," list "===n[t-1].slice(-6)?'<div class="ui search"><input class="quoted-value prompt" type="text" name="list-name" value="'.concat(e,'" placeholder="').concat(e,'" ').concat(r,"></div>"):" board "===n[t-1].slice(-7)?'<div class="ui search"><input class="quoted-value prompt" type="text" name="board-name" value="'.concat(e,'" placeholder="').concat(e,'" ').concat(r,"></div>"):'<textarea class="quoted-value" type="text" placeholder="'.concat(e,'" rows="1" ').concat(r,">").concat(e,"</textarea>")})).join("");return $('\n    <div class="ui grid item">\n      <div class="thirteen wide column content output-phrase">'.concat(t,'</div>\n      <div class="three wide column right floated content output-side right">\n        <div class="ui translucent icon button remove-trigger-btn" \n          tabindex="0"\n        >\n          <i class="trash icon"></i>\n        </div>\n      </div>\n    </div>\n  '))}};e.exports=i},function(e,t,n){var r,o=n(355),i=n(64),a=n(374),s=n(379).showTab,c=n(152),u=o.Auth;function l(e){var t=$(e).find(".loading-log"),n=$(e).find(".more.button"),r=$(e).find(".no-more.button"),o=t.siblings(".error-loading-log"),a=e.find(".filter.checkbox"),s=e.find(".no-match-filter"),l=e.find(".command-log");e.find(".command-log").empty(),a.find(".filter-checkbox").prop("checked",!1),a.checkbox({onChecked:function(){l.find(".valid").addClass("hidden").hide(),0===l.find(".invalid").length&&s.transition("show")},onUnchecked:function(){l.find(".valid").removeClass("hidden").show(),s.transition("hide")}}),function l(d){t.transition("show"),a.hide(),n.transition("hide"),r.transition("hide"),o.transition("hide"),s.transition("hide"),u.authorize().then((function(){$.ajax("".concat(i,"powerup-user-log?before=").concat(d),{type:"GET",headers:{"X-Butler-Trello-Token":u.getActiveToken()}}).done((function(i){if(t.transition("hide"),i.success)if(i.response.log.length){var u=e.find(".command-log");i.response.log.forEach((function(e){var t=e.output;if("string"!=typeof t){var n=function(e){return e?e.map((function(e){var t='<div class="item">';switch(e.type){case"ERROR":t+='<i class="red warning circle icon"></i>';break;case"WARNING":t+='<i class="yellow warning circle icon"></i>';break;case"MESSAGE":t+='<i class="blue info circle icon"></i>'}return t+='<div class="content">'.concat(c.markdownToHtml(e.message),"</div>"),t+="</div>"})).join(""):'<div class="item"><i class="blue info circle icon"></i><div class="content">No details.</div></div>'}(t),r=function(e){return e&&e.some((function(e){return["ERROR","WARNING"].includes(e.type)}))}(t)?'<tr class="invalid">':'<tr class="valid">';u.append(r+'<td><div class="ui list"><div class="item"><small>'+moment(e.t).format("LLLL")+"</small></div>"+n+"</div></td></tr>"),d=e.t}})),u.find(".content a").attr("target","_blank"),a.find(".filter-checkbox").prop("checked")?(u.find(".valid").addClass("hidden").hide(),0===u.find(".invalid").length&&s.transition("show")):(u.find(".valid").removeClass("hidden").show(),s.transition("hide")),n.transition("show").off("click").click((function(){l(d)})),a.show()}else a.show(),n.transition("hide"),r.transition("show");else o.transition("show"),$(e).find(".retry-btn").off("click").click((function(){return l(d),!1}))})).fail((function(){t.transition("hide"),o.transition("show")}))}))}((new Date).toISOString())}function d(){s("usage"),u.authorize().then((function(){a.refreshUserPlan(TrelloPowerUp.iframe({targetOrigin:"https://trello.com"})),l($("#butler-powerup-log"))}))}function f(e,t){if(t?$(".butler-alt-account").transition("show"):$(".butler-alt-account").transition("hide"),e.managed_by)return o.getMember(e.managed_by).then((function(e){$(".butler-account-managed-by").text("".concat(e.fullName," (@").concat(e.username,")")),$(".butler-account-managed").transition("scale up")})).catch((function(){$(".butler-account-loading-error").transition("scale up")}));e.cancel_at_period_end?($(".butler-cancel-subscription").transition("hide"),$(".butler-cancel-scheduled-date").text(moment(e.current_period_end).format("LLL")),$(".butler-cancel-scheduled").transition("show")):($(".butler-cancel-subscription").transition("show").off("click").click((function(){var t,n,o;t=e.customer_id,(o=$("#butler-cancel-subscription-modal")).find(".status").transition("hide"),o.find(".actions .cancel.button").removeClass("disabled"),o.find(".ui.checkbox").checkbox("uncheck").checkbox({onChecked:function(){n=$(this).siblings("label").text(),o.find(".actions .ok.button").removeClass("disabled")}}),o.modal({onApprove:function(){return o.find(".error.status").transition("hide"),o.find(".sending.status").transition("show"),o.find(".actions .button").addClass("disabled"),$.ajax("".concat(i,"stripe-cancel").concat(r),{type:"POST",headers:{"X-Butler-Trello-Token":u.getActiveToken()},data:JSON.stringify({customer_id:t,reason:n,comments:o.find(".comments").val()}),contentType:"application/json"}).done((function(e){o.find(".sending.status").transition("hide"),e.success?(o.find(".success.status").transition("scale up"),setTimeout((function(){o.modal("hide")}),1e3),_()):(o.find(".error.status").transition("scale up"),o.find(".actions .button").removeClass("disabled"))})).fail((function(){o.find(".sending.status").transition("hide"),o.find(".error.status").transition("show"),o.find(".actions .button").removeClass("disabled")})),!1}}),o.modal("show")})),$(".butler-cancel-subscription-earlier").transition(moment(e.current_period_end)>moment().add(30,"d")?"show":"hide"),$(".butler-cancel-scheduled").transition("hide")),$(".butler-payment-source").text(e.source),$(".butler-payment").transition("scale up");var n=(e.invoices||[]).map((function(e){return'<div class="item"><a href="'+i+"stripe-invoice/"+e.id+r+'" target="_blank">'+moment(e.date).format("LL")+"</a></div>"})).join("\n");$(".butler-invoice-menu").html(n),e.upcoming_invoice?($(".butler-upcoming-invoice-date").text(moment(e.upcoming_invoice.date).format("LL")),$(".butler-upcoming-invoice").transition("show")):$(".butler-upcoming-invoice").transition("hide"),$(".butler-invoices").transition("scale up")}function _(){$(".butler-payment,.butler-invoices,.butler-alt-account,.butler-account-loading-error").transition("hide"),$(".butler-account-loading").transition("show"),s("account"),u.authorize().then((function(){a.refreshUserPlan(TrelloPowerUp.iframe({targetOrigin:"https://trello.com"})),$.ajax("".concat(i,"stripe-account").concat(r),{type:"GET",headers:{"X-Butler-Trello-Token":u.getActiveToken()}}).done((function(e){$(".butler-account-loading").transition("hide"),e.success?e.response.org_account?f(e.response.org_account,e.response.user_account):e.response.user_account&&f(e.response.user_account):$(".butler-account-loading-error").transition("scale up")})).fail((function(){$(".butler-account-loading").transition("hide"),$(".butler-account-loading-error").transition("scale up")}))}))}r="";var h={init:function(){switch($('.dashboard-tabs .item[data-tab="tab-usage"]').click((function(){d()})),$('.dashboard-tabs .item[data-tab="tab-account"]').click((function(){_()})),$('.dashboard-tabs .item[data-tab="tab-upgrade"]').click((function(){s("upgrade")})),(window.location.search.match(/tab=([a-zA-Z]*)/)||[])[1]){case"account":_();break;case"upgrade":s("upgrade");break;default:d()}$(".help-popup").click((function(){return!1})).each((function(e,t){var n=$(t),r=n.attr("data-popup-selector"),o=r?$(r):n.next(".ui.popup");n.popup({on:"click",popup:o,target:!!n.length&&n,position:"top center",lastResort:"bottom center",hoverable:!1})})),$(".close-popup").off("click").click((function(e){$(e.target).closest(".popup").popup("hide all")})),$(".close-modal").off("click").click((function(e){$(e.target).closest(".modal").modal("hide")}))}};window.AccountDashboard=h,e.exports=h}]);
//# sourceMappingURL=powerup.js.map